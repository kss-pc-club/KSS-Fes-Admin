/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={444:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,G6:()=>m,L:()=>r,LL:()=>_,Mn:()=>g,Sg:()=>c,ZR:()=>b,b$:()=>d,d:()=>f,eu:()=>v,hl:()=>y,m9:()=>N,ne:()=>A,pd:()=>k,ru:()=>h,tV:()=>o,uI:()=>u,vZ:()=>I,w1:()=>p,xO:()=>E,xb:()=>x,z$:()=>l,zd:()=>S});const i=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=63&s|128):55296==(64512&s)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++i)),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=63&s|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=63&s|128)}return e},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const s=t[e],r=e+1<t.length,o=r?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,l=s>>2,u=(3&s)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,r||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){const r=((7&s)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(r>>10)),e[i++]=String.fromCharCode(56320+(1023&r))}else{const r=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&s)<<12|(63&r)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const s=n[t.charAt(e++)],r=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==s||null==r||null==o||null==a)throw Error();const c=s<<2|r>>4;if(i.push(c),64!==o){const t=r<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},r=function(t){return function(t){const e=i(t);return s.encodeByteArray(e,!0)}(t).replace(/\./g,"")},o=function(t){try{return s.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};class a{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function c(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[r(JSON.stringify({alg:"none",type:"JWT"})),r(JSON.stringify(o)),""].join(".")}function l(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())}function h(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function d(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function f(){return l().indexOf("Electron/")>=0}function p(){const t=l();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function g(){return l().indexOf("MSAppHost/")>=0}function m(){return!function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function y(){return"object"==typeof indexedDB}function v(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var t;e((null===(t=s.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}class b extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,b.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_.prototype.create)}}class _{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,s=this.errors[t],r=s?function(t,e){return t.replace(w,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(s,n):"Error",o=`${this.serviceName}: ${r} (${i}).`;return new b(i,o,n)}}const w=/\{\$([^}]+)}/g;function x(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function I(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const n=t[s],r=e[s];if(T(n)&&T(r)){if(!I(n,r))return!1}else if(n!==r)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function T(t){return null!==t&&"object"==typeof t}function E(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function S(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function k(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function A(t,e){const n=new C(t,e);return n.subscribe.bind(n)}class C{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=D),void 0===i.error&&(i.error=D),void 0===i.complete&&(i.complete=D);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}})),this.observers.push(i),s}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function D(){}function N(t){return t&&t._delegate?t._delegate:t}},169:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Alert:()=>ve,Button:()=>_e,Carousel:()=>Re,Collapse:()=>We,Dropdown:()=>fn,Modal:()=>Un,Offcanvas:()=>Kn,Popover:()=>vi,ScrollSpy:()=>Ei,Tab:()=>Ni,Toast:()=>Vi,Tooltip:()=>pi});var i={};n.r(i),n.d(i,{afterMain:()=>I,afterRead:()=>_,afterWrite:()=>S,applyStyles:()=>M,arrow:()=>Q,auto:()=>c,basePlacements:()=>l,beforeMain:()=>w,beforeRead:()=>v,beforeWrite:()=>T,bottom:()=>r,clippingParents:()=>d,computeStyles:()=>et,createPopper:()=>Dt,createPopperBase:()=>Ct,createPopperLite:()=>Nt,detectOverflow:()=>mt,end:()=>h,eventListeners:()=>it,flip:()=>yt,hide:()=>_t,left:()=>a,main:()=>x,modifierPhases:()=>k,offset:()=>wt,placements:()=>y,popper:()=>p,popperGenerator:()=>At,popperOffsets:()=>xt,preventOverflow:()=>It,read:()=>b,reference:()=>g,right:()=>o,start:()=>u,top:()=>s,variationPlacements:()=>m,viewport:()=>f,write:()=>E});var s="top",r="bottom",o="right",a="left",c="auto",l=[s,r,o,a],u="start",h="end",d="clippingParents",f="viewport",p="popper",g="reference",m=l.reduce((function(t,e){return t.concat([e+"-"+u,e+"-"+h])}),[]),y=[].concat(l,[c]).reduce((function(t,e){return t.concat([e,e+"-"+u,e+"-"+h])}),[]),v="beforeRead",b="read",_="afterRead",w="beforeMain",x="main",I="afterMain",T="beforeWrite",E="write",S="afterWrite",k=[v,b,_,w,x,I,T,E,S];function A(t){return t?(t.nodeName||"").toLowerCase():null}function C(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function D(t){return t instanceof C(t).Element||t instanceof Element}function N(t){return t instanceof C(t).HTMLElement||t instanceof HTMLElement}function O(t){return"undefined"!=typeof ShadowRoot&&(t instanceof C(t).ShadowRoot||t instanceof ShadowRoot)}const M={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},s=e.elements[t];N(s)&&A(s)&&(Object.assign(s.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?s.removeAttribute(t):s.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],s=e.attributes[t]||{},r=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});N(i)&&A(i)&&(Object.assign(i.style,r),Object.keys(s).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]};function L(t){return t.split("-")[0]}var P=Math.max,R=Math.min,F=Math.round;function V(t,e){void 0===e&&(e=!1);var n=t.getBoundingClientRect(),i=1,s=1;if(N(t)&&e){var r=t.offsetHeight,o=t.offsetWidth;o>0&&(i=F(n.width)/o||1),r>0&&(s=F(n.height)/r||1)}return{width:n.width/i,height:n.height/s,top:n.top/s,right:n.right/i,bottom:n.bottom/s,left:n.left/i,x:n.left/i,y:n.top/s}}function j(t){var e=V(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function U(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&O(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function B(t){return C(t).getComputedStyle(t)}function q(t){return["table","td","th"].indexOf(A(t))>=0}function z(t){return((D(t)?t.ownerDocument:t.document)||window.document).documentElement}function H(t){return"html"===A(t)?t:t.assignedSlot||t.parentNode||(O(t)?t.host:null)||z(t)}function $(t){return N(t)&&"fixed"!==B(t).position?t.offsetParent:null}function W(t){for(var e=C(t),n=$(t);n&&q(n)&&"static"===B(n).position;)n=$(n);return n&&("html"===A(n)||"body"===A(n)&&"static"===B(n).position)?e:n||function(t){var e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&N(t)&&"fixed"===B(t).position)return null;var n=H(t);for(O(n)&&(n=n.host);N(n)&&["html","body"].indexOf(A(n))<0;){var i=B(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(t)||e}function K(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function G(t,e,n){return P(t,R(e,n))}function Y(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function X(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}const Q={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,c=t.options,u=n.elements.arrow,h=n.modifiersData.popperOffsets,d=L(n.placement),f=K(d),p=[a,o].indexOf(d)>=0?"height":"width";if(u&&h){var g=function(t,e){return Y("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:X(t,l))}(c.padding,n),m=j(u),y="y"===f?s:a,v="y"===f?r:o,b=n.rects.reference[p]+n.rects.reference[f]-h[f]-n.rects.popper[p],_=h[f]-n.rects.reference[f],w=W(u),x=w?"y"===f?w.clientHeight||0:w.clientWidth||0:0,I=b/2-_/2,T=g[y],E=x-m[p]-g[v],S=x/2-m[p]/2+I,k=G(T,S,E),A=f;n.modifiersData[i]=((e={})[A]=k,e.centerOffset=k-S,e)}},effect:function(t){var e=t.state,n=t.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=e.elements.popper.querySelector(i)))&&U(e.elements.popper,i)&&(e.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function J(t){return t.split("-")[1]}var Z={top:"auto",right:"auto",bottom:"auto",left:"auto"};function tt(t){var e,n=t.popper,i=t.popperRect,c=t.placement,l=t.variation,u=t.offsets,d=t.position,f=t.gpuAcceleration,p=t.adaptive,g=t.roundOffsets,m=t.isFixed,y=u.x,v=void 0===y?0:y,b=u.y,_=void 0===b?0:b,w="function"==typeof g?g({x:v,y:_}):{x:v,y:_};v=w.x,_=w.y;var x=u.hasOwnProperty("x"),I=u.hasOwnProperty("y"),T=a,E=s,S=window;if(p){var k=W(n),A="clientHeight",D="clientWidth";k===C(n)&&"static"!==B(k=z(n)).position&&"absolute"===d&&(A="scrollHeight",D="scrollWidth"),(c===s||(c===a||c===o)&&l===h)&&(E=r,_-=(m&&k===S&&S.visualViewport?S.visualViewport.height:k[A])-i.height,_*=f?1:-1),c!==a&&(c!==s&&c!==r||l!==h)||(T=o,v-=(m&&k===S&&S.visualViewport?S.visualViewport.width:k[D])-i.width,v*=f?1:-1)}var N,O=Object.assign({position:d},p&&Z),M=!0===g?function(t){var e=t.x,n=t.y,i=window.devicePixelRatio||1;return{x:F(e*i)/i||0,y:F(n*i)/i||0}}({x:v,y:_}):{x:v,y:_};return v=M.x,_=M.y,f?Object.assign({},O,((N={})[E]=I?"0":"",N[T]=x?"0":"",N.transform=(S.devicePixelRatio||1)<=1?"translate("+v+"px, "+_+"px)":"translate3d("+v+"px, "+_+"px, 0)",N)):Object.assign({},O,((e={})[E]=I?_+"px":"",e[T]=x?v+"px":"",e.transform="",e))}const et={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,s=void 0===i||i,r=n.adaptive,o=void 0===r||r,a=n.roundOffsets,c=void 0===a||a,l={placement:L(e.placement),variation:J(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,tt(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,tt(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var nt={passive:!0};const it={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,s=i.scroll,r=void 0===s||s,o=i.resize,a=void 0===o||o,c=C(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&l.forEach((function(t){t.addEventListener("scroll",n.update,nt)})),a&&c.addEventListener("resize",n.update,nt),function(){r&&l.forEach((function(t){t.removeEventListener("scroll",n.update,nt)})),a&&c.removeEventListener("resize",n.update,nt)}},data:{}};var st={left:"right",right:"left",bottom:"top",top:"bottom"};function rt(t){return t.replace(/left|right|bottom|top/g,(function(t){return st[t]}))}var ot={start:"end",end:"start"};function at(t){return t.replace(/start|end/g,(function(t){return ot[t]}))}function ct(t){var e=C(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function lt(t){return V(z(t)).left+ct(t).scrollLeft}function ut(t){var e=B(t),n=e.overflow,i=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+i)}function ht(t){return["html","body","#document"].indexOf(A(t))>=0?t.ownerDocument.body:N(t)&&ut(t)?t:ht(H(t))}function dt(t,e){var n;void 0===e&&(e=[]);var i=ht(t),s=i===(null==(n=t.ownerDocument)?void 0:n.body),r=C(i),o=s?[r].concat(r.visualViewport||[],ut(i)?i:[]):i,a=e.concat(o);return s?a:a.concat(dt(H(o)))}function ft(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function pt(t,e){return e===f?ft(function(t){var e=C(t),n=z(t),i=e.visualViewport,s=n.clientWidth,r=n.clientHeight,o=0,a=0;return i&&(s=i.width,r=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,a=i.offsetTop)),{width:s,height:r,x:o+lt(t),y:a}}(t)):D(e)?function(t){var e=V(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}(e):ft(function(t){var e,n=z(t),i=ct(t),s=null==(e=t.ownerDocument)?void 0:e.body,r=P(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=P(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+lt(t),c=-i.scrollTop;return"rtl"===B(s||n).direction&&(a+=P(n.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:c}}(z(t)))}function gt(t){var e,n=t.reference,i=t.element,c=t.placement,l=c?L(c):null,d=c?J(c):null,f=n.x+n.width/2-i.width/2,p=n.y+n.height/2-i.height/2;switch(l){case s:e={x:f,y:n.y-i.height};break;case r:e={x:f,y:n.y+n.height};break;case o:e={x:n.x+n.width,y:p};break;case a:e={x:n.x-i.width,y:p};break;default:e={x:n.x,y:n.y}}var g=l?K(l):null;if(null!=g){var m="y"===g?"height":"width";switch(d){case u:e[g]=e[g]-(n[m]/2-i[m]/2);break;case h:e[g]=e[g]+(n[m]/2-i[m]/2)}}return e}function mt(t,e){void 0===e&&(e={});var n=e,i=n.placement,a=void 0===i?t.placement:i,c=n.boundary,u=void 0===c?d:c,h=n.rootBoundary,m=void 0===h?f:h,y=n.elementContext,v=void 0===y?p:y,b=n.altBoundary,_=void 0!==b&&b,w=n.padding,x=void 0===w?0:w,I=Y("number"!=typeof x?x:X(x,l)),T=v===p?g:p,E=t.rects.popper,S=t.elements[_?T:v],k=function(t,e,n){var i="clippingParents"===e?function(t){var e=dt(H(t)),n=["absolute","fixed"].indexOf(B(t).position)>=0&&N(t)?W(t):t;return D(n)?e.filter((function(t){return D(t)&&U(t,n)&&"body"!==A(t)})):[]}(t):[].concat(e),s=[].concat(i,[n]),r=s[0],o=s.reduce((function(e,n){var i=pt(t,n);return e.top=P(i.top,e.top),e.right=R(i.right,e.right),e.bottom=R(i.bottom,e.bottom),e.left=P(i.left,e.left),e}),pt(t,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}(D(S)?S:S.contextElement||z(t.elements.popper),u,m),C=V(t.elements.reference),O=gt({reference:C,element:E,strategy:"absolute",placement:a}),M=ft(Object.assign({},E,O)),L=v===p?M:C,F={top:k.top-L.top+I.top,bottom:L.bottom-k.bottom+I.bottom,left:k.left-L.left+I.left,right:L.right-k.right+I.right},j=t.modifiersData.offset;if(v===p&&j){var q=j[a];Object.keys(F).forEach((function(t){var e=[o,r].indexOf(t)>=0?1:-1,n=[s,r].indexOf(t)>=0?"y":"x";F[t]+=q[n]*e}))}return F}const yt={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var h=n.mainAxis,d=void 0===h||h,f=n.altAxis,p=void 0===f||f,g=n.fallbackPlacements,v=n.padding,b=n.boundary,_=n.rootBoundary,w=n.altBoundary,x=n.flipVariations,I=void 0===x||x,T=n.allowedAutoPlacements,E=e.options.placement,S=L(E),k=g||(S!==E&&I?function(t){if(L(t)===c)return[];var e=rt(t);return[at(t),e,at(e)]}(E):[rt(E)]),A=[E].concat(k).reduce((function(t,n){return t.concat(L(n)===c?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,s=n.boundary,r=n.rootBoundary,o=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,u=void 0===c?y:c,h=J(i),d=h?a?m:m.filter((function(t){return J(t)===h})):l,f=d.filter((function(t){return u.indexOf(t)>=0}));0===f.length&&(f=d);var p=f.reduce((function(e,n){return e[n]=mt(t,{placement:n,boundary:s,rootBoundary:r,padding:o})[L(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}(e,{placement:n,boundary:b,rootBoundary:_,padding:v,flipVariations:I,allowedAutoPlacements:T}):n)}),[]),C=e.rects.reference,D=e.rects.popper,N=new Map,O=!0,M=A[0],P=0;P<A.length;P++){var R=A[P],F=L(R),V=J(R)===u,j=[s,r].indexOf(F)>=0,U=j?"width":"height",B=mt(e,{placement:R,boundary:b,rootBoundary:_,altBoundary:w,padding:v}),q=j?V?o:a:V?r:s;C[U]>D[U]&&(q=rt(q));var z=rt(q),H=[];if(d&&H.push(B[F]<=0),p&&H.push(B[q]<=0,B[z]<=0),H.every((function(t){return t}))){M=R,O=!1;break}N.set(R,H)}if(O)for(var $=function(t){var e=A.find((function(e){var n=N.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return M=e,"break"},W=I?3:1;W>0&&"break"!==$(W);W--);e.placement!==M&&(e.modifiersData[i]._skip=!0,e.placement=M,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function vt(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function bt(t){return[s,o,r,a].some((function(e){return t[e]>=0}))}const _t={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,s=e.rects.popper,r=e.modifiersData.preventOverflow,o=mt(e,{elementContext:"reference"}),a=mt(e,{altBoundary:!0}),c=vt(o,i),l=vt(a,s,r),u=bt(c),h=bt(l);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}},wt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.offset,c=void 0===r?[0,0]:r,l=y.reduce((function(t,n){return t[n]=function(t,e,n){var i=L(t),r=[a,s].indexOf(i)>=0?-1:1,c="function"==typeof n?n(Object.assign({},e,{placement:t})):n,l=c[0],u=c[1];return l=l||0,u=(u||0)*r,[a,o].indexOf(i)>=0?{x:u,y:l}:{x:l,y:u}}(n,e.rects,c),t}),{}),u=l[e.placement],h=u.x,d=u.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=d),e.modifiersData[i]=l}},xt={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=gt({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},It={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,c=n.mainAxis,l=void 0===c||c,h=n.altAxis,d=void 0!==h&&h,f=n.boundary,p=n.rootBoundary,g=n.altBoundary,m=n.padding,y=n.tether,v=void 0===y||y,b=n.tetherOffset,_=void 0===b?0:b,w=mt(e,{boundary:f,rootBoundary:p,padding:m,altBoundary:g}),x=L(e.placement),I=J(e.placement),T=!I,E=K(x),S="x"===E?"y":"x",k=e.modifiersData.popperOffsets,A=e.rects.reference,C=e.rects.popper,D="function"==typeof _?_(Object.assign({},e.rects,{placement:e.placement})):_,N="number"==typeof D?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,M={x:0,y:0};if(k){if(l){var F,V="y"===E?s:a,U="y"===E?r:o,B="y"===E?"height":"width",q=k[E],z=q+w[V],H=q-w[U],$=v?-C[B]/2:0,Y=I===u?A[B]:C[B],X=I===u?-C[B]:-A[B],Q=e.elements.arrow,Z=v&&Q?j(Q):{width:0,height:0},tt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},et=tt[V],nt=tt[U],it=G(0,A[B],Z[B]),st=T?A[B]/2-$-it-et-N.mainAxis:Y-it-et-N.mainAxis,rt=T?-A[B]/2+$+it+nt+N.mainAxis:X+it+nt+N.mainAxis,ot=e.elements.arrow&&W(e.elements.arrow),at=ot?"y"===E?ot.clientTop||0:ot.clientLeft||0:0,ct=null!=(F=null==O?void 0:O[E])?F:0,lt=q+rt-ct,ut=G(v?R(z,q+st-ct-at):z,q,v?P(H,lt):H);k[E]=ut,M[E]=ut-q}if(d){var ht,dt="x"===E?s:a,ft="x"===E?r:o,pt=k[S],gt="y"===S?"height":"width",yt=pt+w[dt],vt=pt-w[ft],bt=-1!==[s,a].indexOf(x),_t=null!=(ht=null==O?void 0:O[S])?ht:0,wt=bt?yt:pt-A[gt]-C[gt]-_t+N.altAxis,xt=bt?pt+A[gt]+C[gt]-_t-N.altAxis:vt,It=v&&bt?function(t,e,n){var i=G(t,e,n);return i>n?n:i}(wt,pt,xt):G(v?wt:yt,pt,v?xt:vt);k[S]=It,M[S]=It-pt}e.modifiersData[i]=M}},requiresIfExists:["offset"]};function Tt(t,e,n){void 0===n&&(n=!1);var i,s,r=N(e),o=N(e)&&function(t){var e=t.getBoundingClientRect(),n=F(e.width)/t.offsetWidth||1,i=F(e.height)/t.offsetHeight||1;return 1!==n||1!==i}(e),a=z(e),c=V(t,o),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&(("body"!==A(e)||ut(a))&&(l=(i=e)!==C(i)&&N(i)?{scrollLeft:(s=i).scrollLeft,scrollTop:s.scrollTop}:ct(i)),N(e)?((u=V(e,!0)).x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=lt(a))),{x:c.left+l.scrollLeft-u.x,y:c.top+l.scrollTop-u.y,width:c.width,height:c.height}}function Et(t){var e=new Map,n=new Set,i=[];function s(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&s(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||s(t)})),i}var St={placement:"bottom",modifiers:[],strategy:"absolute"};function kt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function At(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,s=e.defaultOptions,r=void 0===s?St:s;return function(t,e,n){void 0===n&&(n=r);var s,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},St,r),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},c=[],l=!1,u={state:a,setOptions:function(n){var s="function"==typeof n?n(a.options):n;h(),a.options=Object.assign({},r,a.options,s),a.scrollParents={reference:D(t)?dt(t):t.contextElement?dt(t.contextElement):[],popper:dt(e)};var o,l,d=function(t){var e=Et(t);return k.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((o=[].concat(i,a.options.modifiers),l=o.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(l).map((function(t){return l[t]}))));return a.orderedModifiers=d.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,s=t.effect;if("function"==typeof s){var r=s({state:a,name:e,instance:u,options:i});c.push(r||function(){})}})),u.update()},forceUpdate:function(){if(!l){var t=a.elements,e=t.reference,n=t.popper;if(kt(e,n)){a.rects={reference:Tt(e,W(n),"fixed"===a.options.strategy),popper:j(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<a.orderedModifiers.length;i++)if(!0!==a.reset){var s=a.orderedModifiers[i],r=s.fn,o=s.options,c=void 0===o?{}:o,h=s.name;"function"==typeof r&&(a=r({state:a,options:c,name:h,instance:u})||a)}else a.reset=!1,i=-1}}},update:(s=function(){return new Promise((function(t){u.forceUpdate(),t(a)}))},function(){return o||(o=new Promise((function(t){Promise.resolve().then((function(){o=void 0,t(s())}))}))),o}),destroy:function(){h(),l=!0}};if(!kt(t,e))return u;function h(){c.forEach((function(t){return t()})),c=[]}return u.setOptions(n).then((function(t){!l&&n.onFirstUpdate&&n.onFirstUpdate(t)})),u}}var Ct=At(),Dt=At({defaultModifiers:[it,xt,et,M,wt,yt,It,Q,_t]}),Nt=At({defaultModifiers:[it,xt,et,M]});const Ot="transitionend",Mt=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?n.trim():null}return e},Lt=t=>{const e=Mt(t);return e&&document.querySelector(e)?e:null},Pt=t=>{const e=Mt(t);return e?document.querySelector(e):null},Rt=t=>{t.dispatchEvent(new Event(Ot))},Ft=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),Vt=t=>Ft(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(t):null,jt=(t,e,n)=>{Object.keys(n).forEach((i=>{const s=n[i],r=e[i],o=r&&Ft(r)?"element":null==(a=r)?`${a}`:{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase();var a;if(!new RegExp(s).test(o))throw new TypeError(`${t.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${s}".`)}))},Ut=t=>!(!Ft(t)||0===t.getClientRects().length)&&"visible"===getComputedStyle(t).getPropertyValue("visibility"),Bt=t=>!t||t.nodeType!==Node.ELEMENT_NODE||!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled")),qt=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?qt(t.parentNode):null},zt=()=>{},Ht=t=>{t.offsetHeight},$t=()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-bs-no-jquery")?t:null},Wt=[],Kt=()=>"rtl"===document.documentElement.dir,Gt=t=>{var e;e=()=>{const e=$t();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}},"loading"===document.readyState?(Wt.length||document.addEventListener("DOMContentLoaded",(()=>{Wt.forEach((t=>t()))})),Wt.push(e)):e()},Yt=t=>{"function"==typeof t&&t()},Xt=(t,e,n=!0)=>{if(!n)return void Yt(t);const i=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),s=Number.parseFloat(n);return i||s?(e=e.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(n))):0})(e)+5;let s=!1;const r=({target:n})=>{n===e&&(s=!0,e.removeEventListener(Ot,r),Yt(t))};e.addEventListener(Ot,r),setTimeout((()=>{s||Rt(e)}),i)},Qt=(t,e,n,i)=>{let s=t.indexOf(e);if(-1===s)return t[!n&&i?t.length-1:0];const r=t.length;return s+=n?1:-1,i&&(s=(s+r)%r),t[Math.max(0,Math.min(s,r-1))]},Jt=/[^.]*(?=\..*)\.|.*/,Zt=/\..*/,te=/::\d+$/,ee={};let ne=1;const ie={mouseenter:"mouseover",mouseleave:"mouseout"},se=/^(mouseenter|mouseleave)/i,re=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function oe(t,e){return e&&`${e}::${ne++}`||t.uidEvent||ne++}function ae(t){const e=oe(t);return t.uidEvent=e,ee[e]=ee[e]||{},ee[e]}function ce(t,e,n=null){const i=Object.keys(t);for(let s=0,r=i.length;s<r;s++){const r=t[i[s]];if(r.originalHandler===e&&r.delegationSelector===n)return r}return null}function le(t,e,n){const i="string"==typeof e,s=i?n:e;let r=de(t);return re.has(r)||(r=t),[i,s,r]}function ue(t,e,n,i,s){if("string"!=typeof e||!t)return;if(n||(n=i,i=null),se.test(e)){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};i?i=t(i):n=t(n)}const[r,o,a]=le(e,n,i),c=ae(t),l=c[a]||(c[a]={}),u=ce(l,o,r?n:null);if(u)return void(u.oneOff=u.oneOff&&s);const h=oe(o,e.replace(Jt,"")),d=r?function(t,e,n){return function i(s){const r=t.querySelectorAll(e);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(let a=r.length;a--;)if(r[a]===o)return s.delegateTarget=o,i.oneOff&&fe.off(t,s.type,e,n),n.apply(o,[s]);return null}}(t,n,i):function(t,e){return function n(i){return i.delegateTarget=t,n.oneOff&&fe.off(t,i.type,e),e.apply(t,[i])}}(t,n);d.delegationSelector=r?n:null,d.originalHandler=o,d.oneOff=s,d.uidEvent=h,l[h]=d,t.addEventListener(a,d,r)}function he(t,e,n,i,s){const r=ce(e[n],i,s);r&&(t.removeEventListener(n,r,Boolean(s)),delete e[n][r.uidEvent])}function de(t){return t=t.replace(Zt,""),ie[t]||t}const fe={on(t,e,n,i){ue(t,e,n,i,!1)},one(t,e,n,i){ue(t,e,n,i,!0)},off(t,e,n,i){if("string"!=typeof e||!t)return;const[s,r,o]=le(e,n,i),a=o!==e,c=ae(t),l=e.startsWith(".");if(void 0!==r){if(!c||!c[o])return;return void he(t,c,o,r,s?n:null)}l&&Object.keys(c).forEach((n=>{!function(t,e,n,i){const s=e[n]||{};Object.keys(s).forEach((r=>{if(r.includes(i)){const i=s[r];he(t,e,n,i.originalHandler,i.delegationSelector)}}))}(t,c,n,e.slice(1))}));const u=c[o]||{};Object.keys(u).forEach((n=>{const i=n.replace(te,"");if(!a||e.includes(i)){const e=u[n];he(t,c,o,e.originalHandler,e.delegationSelector)}}))},trigger(t,e,n){if("string"!=typeof e||!t)return null;const i=$t(),s=de(e),r=e!==s,o=re.has(s);let a,c=!0,l=!0,u=!1,h=null;return r&&i&&(a=i.Event(e,n),i(t).trigger(a),c=!a.isPropagationStopped(),l=!a.isImmediatePropagationStopped(),u=a.isDefaultPrevented()),o?(h=document.createEvent("HTMLEvents"),h.initEvent(s,c,!0)):h=new CustomEvent(e,{bubbles:c,cancelable:!0}),void 0!==n&&Object.keys(n).forEach((t=>{Object.defineProperty(h,t,{get:()=>n[t]})})),u&&h.preventDefault(),l&&t.dispatchEvent(h),h.defaultPrevented&&void 0!==a&&a.preventDefault(),h}},pe=new Map,ge={set(t,e,n){pe.has(t)||pe.set(t,new Map);const i=pe.get(t);i.has(e)||0===i.size?i.set(e,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(t,e)=>pe.has(t)&&pe.get(t).get(e)||null,remove(t,e){if(!pe.has(t))return;const n=pe.get(t);n.delete(e),0===n.size&&pe.delete(t)}};class me{constructor(t){(t=Vt(t))&&(this._element=t,ge.set(this._element,this.constructor.DATA_KEY,this))}dispose(){ge.remove(this._element,this.constructor.DATA_KEY),fe.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach((t=>{this[t]=null}))}_queueCallback(t,e,n=!0){Xt(t,e,n)}static getInstance(t){return ge.get(Vt(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.1.3"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const ye=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;fe.on(document,n,`[data-bs-dismiss="${i}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Bt(this))return;const s=Pt(this)||this.closest(`.${i}`);t.getOrCreateInstance(s)[e]()}))};class ve extends me{static get NAME(){return"alert"}close(){if(fe.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),fe.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=ve.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}ye(ve,"close"),Gt(ve);const be='[data-bs-toggle="button"]';class _e extends me{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=_e.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}function we(t){return"true"===t||"false"!==t&&(t===Number(t).toString()?Number(t):""===t||"null"===t?null:t)}function xe(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}fe.on(document,"click.bs.button.data-api",be,(t=>{t.preventDefault();const e=t.target.closest(be);_e.getOrCreateInstance(e).toggle()})),Gt(_e);const Ie={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${xe(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${xe(e)}`)},getDataAttributes(t){if(!t)return{};const e={};return Object.keys(t.dataset).filter((t=>t.startsWith("bs"))).forEach((n=>{let i=n.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),e[i]=we(t.dataset[n])})),e},getDataAttribute:(t,e)=>we(t.getAttribute(`data-bs-${xe(e)}`)),offset(t){const e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset}},position:t=>({top:t.offsetTop,left:t.offsetLeft})},Te={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const n=[];let i=t.parentNode;for(;i&&i.nodeType===Node.ELEMENT_NODE&&3!==i.nodeType;)i.matches(e)&&n.push(i),i=i.parentNode;return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(", ");return this.find(e,t).filter((t=>!Bt(t)&&Ut(t)))}},Ee="carousel",Se={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},ke={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Ae="next",Ce="prev",De="left",Ne="right",Oe={ArrowLeft:Ne,ArrowRight:De},Me="slid.bs.carousel",Le="active",Pe=".active.carousel-item";class Re extends me{constructor(t,e){super(t),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._indicatorsElement=Te.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return Se}static get NAME(){return Ee}next(){this._slide(Ae)}nextWhenVisible(){!document.hidden&&Ut(this._element)&&this.next()}prev(){this._slide(Ce)}pause(t){t||(this._isPaused=!0),Te.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(Rt(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(t){this._activeElement=Te.findOne(Pe,this._element);const e=this._getItemIndex(this._activeElement);if(t>this._items.length-1||t<0)return;if(this._isSliding)return void fe.one(this._element,Me,(()=>this.to(t)));if(e===t)return this.pause(),void this.cycle();const n=t>e?Ae:Ce;this._slide(n,this._items[t])}_getConfig(t){return t={...Se,...Ie.getDataAttributes(this._element),..."object"==typeof t?t:{}},jt(Ee,t,ke),t}_handleSwipe(){const t=Math.abs(this.touchDeltaX);if(t<=40)return;const e=t/this.touchDeltaX;this.touchDeltaX=0,e&&this._slide(e>0?Ne:De)}_addEventListeners(){this._config.keyboard&&fe.on(this._element,"keydown.bs.carousel",(t=>this._keydown(t))),"hover"===this._config.pause&&(fe.on(this._element,"mouseenter.bs.carousel",(t=>this.pause(t))),fe.on(this._element,"mouseleave.bs.carousel",(t=>this.cycle(t)))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const t=t=>this._pointerEvent&&("pen"===t.pointerType||"touch"===t.pointerType),e=e=>{t(e)?this.touchStartX=e.clientX:this._pointerEvent||(this.touchStartX=e.touches[0].clientX)},n=t=>{this.touchDeltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this.touchStartX},i=e=>{t(e)&&(this.touchDeltaX=e.clientX-this.touchStartX),this._handleSwipe(),"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((t=>this.cycle(t)),500+this._config.interval))};Te.find(".carousel-item img",this._element).forEach((t=>{fe.on(t,"dragstart.bs.carousel",(t=>t.preventDefault()))})),this._pointerEvent?(fe.on(this._element,"pointerdown.bs.carousel",(t=>e(t))),fe.on(this._element,"pointerup.bs.carousel",(t=>i(t))),this._element.classList.add("pointer-event")):(fe.on(this._element,"touchstart.bs.carousel",(t=>e(t))),fe.on(this._element,"touchmove.bs.carousel",(t=>n(t))),fe.on(this._element,"touchend.bs.carousel",(t=>i(t))))}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=Oe[t.key];e&&(t.preventDefault(),this._slide(e))}_getItemIndex(t){return this._items=t&&t.parentNode?Te.find(".carousel-item",t.parentNode):[],this._items.indexOf(t)}_getItemByOrder(t,e){const n=t===Ae;return Qt(this._items,e,n,this._config.wrap)}_triggerSlideEvent(t,e){const n=this._getItemIndex(t),i=this._getItemIndex(Te.findOne(Pe,this._element));return fe.trigger(this._element,"slide.bs.carousel",{relatedTarget:t,direction:e,from:i,to:n})}_setActiveIndicatorElement(t){if(this._indicatorsElement){const e=Te.findOne(".active",this._indicatorsElement);e.classList.remove(Le),e.removeAttribute("aria-current");const n=Te.find("[data-bs-target]",this._indicatorsElement);for(let e=0;e<n.length;e++)if(Number.parseInt(n[e].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(t)){n[e].classList.add(Le),n[e].setAttribute("aria-current","true");break}}}_updateInterval(){const t=this._activeElement||Te.findOne(Pe,this._element);if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);e?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(t,e){const n=this._directionToOrder(t),i=Te.findOne(Pe,this._element),s=this._getItemIndex(i),r=e||this._getItemByOrder(n,i),o=this._getItemIndex(r),a=Boolean(this._interval),c=n===Ae,l=c?"carousel-item-start":"carousel-item-end",u=c?"carousel-item-next":"carousel-item-prev",h=this._orderToDirection(n);if(r&&r.classList.contains(Le))return void(this._isSliding=!1);if(this._isSliding)return;if(this._triggerSlideEvent(r,h).defaultPrevented)return;if(!i||!r)return;this._isSliding=!0,a&&this.pause(),this._setActiveIndicatorElement(r),this._activeElement=r;const d=()=>{fe.trigger(this._element,Me,{relatedTarget:r,direction:h,from:s,to:o})};if(this._element.classList.contains("slide")){r.classList.add(u),Ht(r),i.classList.add(l),r.classList.add(l);const t=()=>{r.classList.remove(l,u),r.classList.add(Le),i.classList.remove(Le,u,l),this._isSliding=!1,setTimeout(d,0)};this._queueCallback(t,i,!0)}else i.classList.remove(Le),r.classList.add(Le),this._isSliding=!1,d();a&&this.cycle()}_directionToOrder(t){return[Ne,De].includes(t)?Kt()?t===De?Ce:Ae:t===De?Ae:Ce:t}_orderToDirection(t){return[Ae,Ce].includes(t)?Kt()?t===Ce?De:Ne:t===Ce?Ne:De:t}static carouselInterface(t,e){const n=Re.getOrCreateInstance(t,e);let{_config:i}=n;"object"==typeof e&&(i={...i,...e});const s="string"==typeof e?e:i.slide;if("number"==typeof e)n.to(e);else if("string"==typeof s){if(void 0===n[s])throw new TypeError(`No method named "${s}"`);n[s]()}else i.interval&&i.ride&&(n.pause(),n.cycle())}static jQueryInterface(t){return this.each((function(){Re.carouselInterface(this,t)}))}static dataApiClickHandler(t){const e=Pt(this);if(!e||!e.classList.contains("carousel"))return;const n={...Ie.getDataAttributes(e),...Ie.getDataAttributes(this)},i=this.getAttribute("data-bs-slide-to");i&&(n.interval=!1),Re.carouselInterface(e,n),i&&Re.getInstance(e).to(i),t.preventDefault()}}fe.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",Re.dataApiClickHandler),fe.on(window,"load.bs.carousel.data-api",(()=>{const t=Te.find('[data-bs-ride="carousel"]');for(let e=0,n=t.length;e<n;e++)Re.carouselInterface(t[e],Re.getInstance(t[e]))})),Gt(Re);const Fe="collapse",Ve={toggle:!0,parent:null},je={toggle:"boolean",parent:"(null|element)"},Ue="show",Be="collapse",qe="collapsing",ze="collapsed",He=":scope .collapse .collapse",$e='[data-bs-toggle="collapse"]';class We extends me{constructor(t,e){super(t),this._isTransitioning=!1,this._config=this._getConfig(e),this._triggerArray=[];const n=Te.find($e);for(let t=0,e=n.length;t<e;t++){const e=n[t],i=Lt(e),s=Te.find(i).filter((t=>t===this._element));null!==i&&s.length&&(this._selector=i,this._triggerArray.push(e))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ve}static get NAME(){return Fe}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t,e=[];if(this._config.parent){const t=Te.find(He,this._config.parent);e=Te.find(".collapse.show, .collapse.collapsing",this._config.parent).filter((e=>!t.includes(e)))}const n=Te.findOne(this._selector);if(e.length){const i=e.find((t=>n!==t));if(t=i?We.getInstance(i):null,t&&t._isTransitioning)return}if(fe.trigger(this._element,"show.bs.collapse").defaultPrevented)return;e.forEach((e=>{n!==e&&We.getOrCreateInstance(e,{toggle:!1}).hide(),t||ge.set(e,"bs.collapse",null)}));const i=this._getDimension();this._element.classList.remove(Be),this._element.classList.add(qe),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(qe),this._element.classList.add(Be,Ue),this._element.style[i]="",fe.trigger(this._element,"shown.bs.collapse")}),this._element,!0),this._element.style[i]=`${this._element[s]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(fe.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,Ht(this._element),this._element.classList.add(qe),this._element.classList.remove(Be,Ue);const e=this._triggerArray.length;for(let t=0;t<e;t++){const e=this._triggerArray[t],n=Pt(e);n&&!this._isShown(n)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(qe),this._element.classList.add(Be),fe.trigger(this._element,"hidden.bs.collapse")}),this._element,!0)}_isShown(t=this._element){return t.classList.contains(Ue)}_getConfig(t){return(t={...Ve,...Ie.getDataAttributes(this._element),...t}).toggle=Boolean(t.toggle),t.parent=Vt(t.parent),jt(Fe,t,je),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=Te.find(He,this._config.parent);Te.find($e,this._config.parent).filter((e=>!t.includes(e))).forEach((t=>{const e=Pt(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}))}_addAriaAndCollapsedClass(t,e){t.length&&t.forEach((t=>{e?t.classList.remove(ze):t.classList.add(ze),t.setAttribute("aria-expanded",e)}))}static jQueryInterface(t){return this.each((function(){const e={};"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1);const n=We.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}fe.on(document,"click.bs.collapse.data-api",$e,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();const e=Lt(this);Te.find(e).forEach((t=>{We.getOrCreateInstance(t,{toggle:!1}).toggle()}))})),Gt(We);const Ke="dropdown",Ge="Escape",Ye="Space",Xe="ArrowUp",Qe="ArrowDown",Je=new RegExp("ArrowUp|ArrowDown|Escape"),Ze="click.bs.dropdown.data-api",tn="keydown.bs.dropdown.data-api",en="show",nn='[data-bs-toggle="dropdown"]',sn=".dropdown-menu",rn=Kt()?"top-end":"top-start",on=Kt()?"top-start":"top-end",an=Kt()?"bottom-end":"bottom-start",cn=Kt()?"bottom-start":"bottom-end",ln=Kt()?"left-start":"right-start",un=Kt()?"right-start":"left-start",hn={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},dn={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class fn extends me{constructor(t,e){super(t),this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return hn}static get DefaultType(){return dn}static get NAME(){return Ke}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Bt(this._element)||this._isShown(this._menu))return;const t={relatedTarget:this._element};if(fe.trigger(this._element,"show.bs.dropdown",t).defaultPrevented)return;const e=fn.getParentFromElement(this._element);this._inNavbar?Ie.setDataAttribute(this._menu,"popper","none"):this._createPopper(e),"ontouchstart"in document.documentElement&&!e.closest(".navbar-nav")&&[].concat(...document.body.children).forEach((t=>fe.on(t,"mouseover",zt))),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(en),this._element.classList.add(en),fe.trigger(this._element,"shown.bs.dropdown",t)}hide(){if(Bt(this._element)||!this._isShown(this._menu))return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){fe.trigger(this._element,"hide.bs.dropdown",t).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((t=>fe.off(t,"mouseover",zt))),this._popper&&this._popper.destroy(),this._menu.classList.remove(en),this._element.classList.remove(en),this._element.setAttribute("aria-expanded","false"),Ie.removeDataAttribute(this._menu,"popper"),fe.trigger(this._element,"hidden.bs.dropdown",t))}_getConfig(t){if(t={...this.constructor.Default,...Ie.getDataAttributes(this._element),...t},jt(Ke,t,this.constructor.DefaultType),"object"==typeof t.reference&&!Ft(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${Ke.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(t){if(void 0===i)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=t:Ft(this._config.reference)?e=Vt(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const n=this._getPopperConfig(),s=n.modifiers.find((t=>"applyStyles"===t.name&&!1===t.enabled));this._popper=Dt(e,this._menu,n),s&&Ie.setDataAttribute(this._menu,"popper","static")}_isShown(t=this._element){return t.classList.contains(en)}_getMenuElement(){return Te.next(this._element,sn)[0]}_getPlacement(){const t=this._element.parentNode;if(t.classList.contains("dropend"))return ln;if(t.classList.contains("dropstart"))return un;const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?on:rn:e?cn:an}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return"static"===this._config.display&&(t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,..."function"==typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:e}){const n=Te.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(Ut);n.length&&Qt(n,e,t===Qe,!n.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=fn.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(t&&(2===t.button||"keyup"===t.type&&"Tab"!==t.key))return;const e=Te.find(nn);for(let n=0,i=e.length;n<i;n++){const i=fn.getInstance(e[n]);if(!i||!1===i._config.autoClose)continue;if(!i._isShown())continue;const s={relatedTarget:i._element};if(t){const e=t.composedPath(),n=e.includes(i._menu);if(e.includes(i._element)||"inside"===i._config.autoClose&&!n||"outside"===i._config.autoClose&&n)continue;if(i._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;"click"===t.type&&(s.clickEvent=t)}i._completeHide(s)}}static getParentFromElement(t){return Pt(t)||t.parentNode}static dataApiKeydownHandler(t){if(/input|textarea/i.test(t.target.tagName)?t.key===Ye||t.key!==Ge&&(t.key!==Qe&&t.key!==Xe||t.target.closest(sn)):!Je.test(t.key))return;const e=this.classList.contains(en);if(!e&&t.key===Ge)return;if(t.preventDefault(),t.stopPropagation(),Bt(this))return;const n=this.matches(nn)?this:Te.prev(this,nn)[0],i=fn.getOrCreateInstance(n);if(t.key!==Ge)return t.key===Xe||t.key===Qe?(e||i.show(),void i._selectMenuItem(t)):void(e&&t.key!==Ye||fn.clearMenus());i.hide()}}fe.on(document,tn,nn,fn.dataApiKeydownHandler),fe.on(document,tn,sn,fn.dataApiKeydownHandler),fe.on(document,Ze,fn.clearMenus),fe.on(document,"keyup.bs.dropdown.data-api",fn.clearMenus),fe.on(document,Ze,nn,(function(t){t.preventDefault(),fn.getOrCreateInstance(this).toggle()})),Gt(fn);const pn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",gn=".sticky-top";class mn{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",(e=>e+t)),this._setElementAttributes(pn,"paddingRight",(e=>e+t)),this._setElementAttributes(gn,"marginRight",(e=>e-t))}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const i=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+i)return;this._saveInitialAttribute(t,e);const s=window.getComputedStyle(t)[e];t.style[e]=`${n(Number.parseFloat(s))}px`}))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(pn,"paddingRight"),this._resetElementAttributes(gn,"marginRight")}_saveInitialAttribute(t,e){const n=t.style[e];n&&Ie.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const n=Ie.getDataAttribute(t,e);void 0===n?t.style.removeProperty(e):(Ie.removeDataAttribute(t,e),t.style[e]=n)}))}_applyManipulationCallback(t,e){Ft(t)?e(t):Te.find(t,this._element).forEach(e)}isOverflowing(){return this.getWidth()>0}}const yn={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},vn={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},bn="show",_n="mousedown.bs.backdrop";class wn{constructor(t){this._config=this._getConfig(t),this._isAppended=!1,this._element=null}show(t){this._config.isVisible?(this._append(),this._config.isAnimated&&Ht(this._getElement()),this._getElement().classList.add(bn),this._emulateAnimation((()=>{Yt(t)}))):Yt(t)}hide(t){this._config.isVisible?(this._getElement().classList.remove(bn),this._emulateAnimation((()=>{this.dispose(),Yt(t)}))):Yt(t)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_getConfig(t){return(t={...yn,..."object"==typeof t?t:{}}).rootElement=Vt(t.rootElement),jt("backdrop",t,vn),t}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),fe.on(this._getElement(),_n,(()=>{Yt(this._config.clickCallback)})),this._isAppended=!0)}dispose(){this._isAppended&&(fe.off(this._element,_n),this._element.remove(),this._isAppended=!1)}_emulateAnimation(t){Xt(t,this._getElement(),this._config.isAnimated)}}const xn={trapElement:null,autofocus:!0},In={trapElement:"element",autofocus:"boolean"},Tn=".bs.focustrap",En="backward";class Sn{constructor(t){this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:t,autofocus:e}=this._config;this._isActive||(e&&t.focus(),fe.off(document,Tn),fe.on(document,"focusin.bs.focustrap",(t=>this._handleFocusin(t))),fe.on(document,"keydown.tab.bs.focustrap",(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,fe.off(document,Tn))}_handleFocusin(t){const{target:e}=t,{trapElement:n}=this._config;if(e===document||e===n||n.contains(e))return;const i=Te.focusableChildren(n);0===i.length?n.focus():this._lastTabNavDirection===En?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?En:"forward")}_getConfig(t){return t={...xn,..."object"==typeof t?t:{}},jt("focustrap",t,In),t}}const kn="modal",An="Escape",Cn={backdrop:!0,keyboard:!0,focus:!0},Dn={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},Nn="hidden.bs.modal",On="show.bs.modal",Mn="resize.bs.modal",Ln="click.dismiss.bs.modal",Pn="keydown.dismiss.bs.modal",Rn="mousedown.dismiss.bs.modal",Fn="modal-open",Vn="show",jn="modal-static";class Un extends me{constructor(t,e){super(t),this._config=this._getConfig(e),this._dialog=Te.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new mn}static get Default(){return Cn}static get NAME(){return kn}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||fe.trigger(this._element,On,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(Fn),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),fe.on(this._dialog,Rn,(()=>{fe.one(this._element,"mouseup.dismiss.bs.modal",(t=>{t.target===this._element&&(this._ignoreBackdropClick=!0)}))})),this._showBackdrop((()=>this._showElement(t))))}hide(){if(!this._isShown||this._isTransitioning)return;if(fe.trigger(this._element,"hide.bs.modal").defaultPrevented)return;this._isShown=!1;const t=this._isAnimated();t&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(Vn),fe.off(this._element,Ln),fe.off(this._dialog,Rn),this._queueCallback((()=>this._hideModal()),this._element,t)}dispose(){[window,this._dialog].forEach((t=>fe.off(t,".bs.modal"))),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new wn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Sn({trapElement:this._element})}_getConfig(t){return t={...Cn,...Ie.getDataAttributes(this._element),..."object"==typeof t?t:{}},jt(kn,t,Dn),t}_showElement(t){const e=this._isAnimated(),n=Te.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,n&&(n.scrollTop=0),e&&Ht(this._element),this._element.classList.add(Vn),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,fe.trigger(this._element,"shown.bs.modal",{relatedTarget:t})}),this._dialog,e)}_setEscapeEvent(){this._isShown?fe.on(this._element,Pn,(t=>{this._config.keyboard&&t.key===An?(t.preventDefault(),this.hide()):this._config.keyboard||t.key!==An||this._triggerBackdropTransition()})):fe.off(this._element,Pn)}_setResizeEvent(){this._isShown?fe.on(window,Mn,(()=>this._adjustDialog())):fe.off(window,Mn)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(Fn),this._resetAdjustments(),this._scrollBar.reset(),fe.trigger(this._element,Nn)}))}_showBackdrop(t){fe.on(this._element,Ln,(t=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:t.target===t.currentTarget&&(!0===this._config.backdrop?this.hide():"static"===this._config.backdrop&&this._triggerBackdropTransition())})),this._backdrop.show(t)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(fe.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const{classList:t,scrollHeight:e,style:n}=this._element,i=e>document.documentElement.clientHeight;!i&&"hidden"===n.overflowY||t.contains(jn)||(i||(n.overflowY="hidden"),t.add(jn),this._queueCallback((()=>{t.remove(jn),i||this._queueCallback((()=>{n.overflowY=""}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;(!n&&t&&!Kt()||n&&!t&&Kt())&&(this._element.style.paddingLeft=`${e}px`),(n&&!t&&!Kt()||!n&&t&&Kt())&&(this._element.style.paddingRight=`${e}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=Un.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}}))}}fe.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',(function(t){const e=Pt(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),fe.one(e,On,(t=>{t.defaultPrevented||fe.one(e,Nn,(()=>{Ut(this)&&this.focus()}))}));const n=Te.findOne(".modal.show");n&&Un.getInstance(n).hide(),Un.getOrCreateInstance(e).toggle(this)})),ye(Un),Gt(Un);const Bn="offcanvas",qn={backdrop:!0,keyboard:!0,scroll:!1},zn={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},Hn="show",$n=".offcanvas.show",Wn="hidden.bs.offcanvas";class Kn extends me{constructor(t,e){super(t),this._config=this._getConfig(e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return Bn}static get Default(){return qn}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||fe.trigger(this._element,"show.bs.offcanvas",{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||(new mn).hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Hn),this._queueCallback((()=>{this._config.scroll||this._focustrap.activate(),fe.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:t})}),this._element,!0))}hide(){this._isShown&&(fe.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove(Hn),this._backdrop.hide(),this._queueCallback((()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||(new mn).reset(),fe.trigger(this._element,Wn)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(t){return t={...qn,...Ie.getDataAttributes(this._element),..."object"==typeof t?t:{}},jt(Bn,t,zn),t}_initializeBackDrop(){return new wn({className:"offcanvas-backdrop",isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new Sn({trapElement:this._element})}_addEventListeners(){fe.on(this._element,"keydown.dismiss.bs.offcanvas",(t=>{this._config.keyboard&&"Escape"===t.key&&this.hide()}))}static jQueryInterface(t){return this.each((function(){const e=Kn.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}fe.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',(function(t){const e=Pt(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Bt(this))return;fe.one(e,Wn,(()=>{Ut(this)&&this.focus()}));const n=Te.findOne($n);n&&n!==e&&Kn.getInstance(n).hide(),Kn.getOrCreateInstance(e).toggle(this)})),fe.on(window,"load.bs.offcanvas.data-api",(()=>Te.find($n).forEach((t=>Kn.getOrCreateInstance(t).show())))),ye(Kn),Gt(Kn);const Gn=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Yn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Xn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Qn=(t,e)=>{const n=t.nodeName.toLowerCase();if(e.includes(n))return!Gn.has(n)||Boolean(Yn.test(t.nodeValue)||Xn.test(t.nodeValue));const i=e.filter((t=>t instanceof RegExp));for(let t=0,e=i.length;t<e;t++)if(i[t].test(n))return!0;return!1};function Jn(t,e,n){if(!t.length)return t;if(n&&"function"==typeof n)return n(t);const i=(new window.DOMParser).parseFromString(t,"text/html"),s=[].concat(...i.body.querySelectorAll("*"));for(let t=0,n=s.length;t<n;t++){const n=s[t],i=n.nodeName.toLowerCase();if(!Object.keys(e).includes(i)){n.remove();continue}const r=[].concat(...n.attributes),o=[].concat(e["*"]||[],e[i]||[]);r.forEach((t=>{Qn(t,o)||n.removeAttribute(t.nodeName)}))}return i.body.innerHTML}const Zn="tooltip",ti=new Set(["sanitize","allowList","sanitizeFn"]),ei={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},ni={AUTO:"auto",TOP:"top",RIGHT:Kt()?"left":"right",BOTTOM:"bottom",LEFT:Kt()?"right":"left"},ii={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},si={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},ri="fade",oi="show",ai="show",ci="out",li=".tooltip-inner",ui=".modal",hi="hide.bs.modal",di="hover",fi="focus";class pi extends me{constructor(t,e){if(void 0===i)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(e),this.tip=null,this._setListeners()}static get Default(){return ii}static get NAME(){return Zn}static get Event(){return si}static get DefaultType(){return ei}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(t){if(this._isEnabled)if(t){const e=this._initializeOnDelegatedTarget(t);e._activeTrigger.click=!e._activeTrigger.click,e._isWithActiveTrigger()?e._enter(null,e):e._leave(null,e)}else{if(this.getTipElement().classList.contains(oi))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),fe.off(this._element.closest(ui),hi,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this.isWithContent()||!this._isEnabled)return;const t=fe.trigger(this._element,this.constructor.Event.SHOW),e=qt(this._element),n=null===e?this._element.ownerDocument.documentElement.contains(this._element):e.contains(this._element);if(t.defaultPrevented||!n)return;"tooltip"===this.constructor.NAME&&this.tip&&this.getTitle()!==this.tip.querySelector(li).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);const i=this.getTipElement(),s=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME);i.setAttribute("id",s),this._element.setAttribute("aria-describedby",s),this._config.animation&&i.classList.add(ri);const r="function"==typeof this._config.placement?this._config.placement.call(this,i,this._element):this._config.placement,o=this._getAttachment(r);this._addAttachmentClass(o);const{container:a}=this._config;ge.set(i,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(i),fe.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=Dt(this._element,i,this._getPopperConfig(o)),i.classList.add(oi);const c=this._resolvePossibleFunction(this._config.customClass);c&&i.classList.add(...c.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((t=>{fe.on(t,"mouseover",zt)}));const l=this.tip.classList.contains(ri);this._queueCallback((()=>{const t=this._hoverState;this._hoverState=null,fe.trigger(this._element,this.constructor.Event.SHOWN),t===ci&&this._leave(null,this)}),this.tip,l)}hide(){if(!this._popper)return;const t=this.getTipElement();if(fe.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;t.classList.remove(oi),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((t=>fe.off(t,"mouseover",zt))),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1;const e=this.tip.classList.contains(ri);this._queueCallback((()=>{this._isWithActiveTrigger()||(this._hoverState!==ai&&t.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),fe.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())}),this.tip,e),this._hoverState=""}update(){null!==this._popper&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const t=document.createElement("div");t.innerHTML=this._config.template;const e=t.children[0];return this.setContent(e),e.classList.remove(ri,oi),this.tip=e,this.tip}setContent(t){this._sanitizeAndSetContent(t,this.getTitle(),li)}_sanitizeAndSetContent(t,e,n){const i=Te.findOne(n,t);e||!i?this.setElementContent(i,e):i.remove()}setElementContent(t,e){if(null!==t)return Ft(e)?(e=Vt(e),void(this._config.html?e.parentNode!==t&&(t.innerHTML="",t.append(e)):t.textContent=e.textContent)):void(this._config.html?(this._config.sanitize&&(e=Jn(e,this._config.allowList,this._config.sanitizeFn)),t.innerHTML=e):t.textContent=e)}getTitle(){const t=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(t)}updateAttachment(t){return"right"===t?"end":"left"===t?"start":t}_initializeOnDelegatedTarget(t,e){return e||this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return"function"==typeof t?t.call(this._element):t}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:t=>this._handlePopperPlacementChange(t)}],onFirstUpdate:t=>{t.options.placement!==t.placement&&this._handlePopperPlacementChange(t)}};return{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_addAttachmentClass(t){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(t)}`)}_getAttachment(t){return ni[t.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach((t=>{if("click"===t)fe.on(this._element,this.constructor.Event.CLICK,this._config.selector,(t=>this.toggle(t)));else if("manual"!==t){const e=t===di?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,n=t===di?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;fe.on(this._element,e,this._config.selector,(t=>this._enter(t))),fe.on(this._element,n,this._config.selector,(t=>this._leave(t)))}})),this._hideModalHandler=()=>{this._element&&this.hide()},fe.on(this._element.closest(ui),hi,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const t=this._element.getAttribute("title"),e=typeof this._element.getAttribute("data-bs-original-title");(t||"string"!==e)&&(this._element.setAttribute("data-bs-original-title",t||""),!t||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",t),this._element.setAttribute("title",""))}_enter(t,e){e=this._initializeOnDelegatedTarget(t,e),t&&(e._activeTrigger["focusin"===t.type?fi:di]=!0),e.getTipElement().classList.contains(oi)||e._hoverState===ai?e._hoverState=ai:(clearTimeout(e._timeout),e._hoverState=ai,e._config.delay&&e._config.delay.show?e._timeout=setTimeout((()=>{e._hoverState===ai&&e.show()}),e._config.delay.show):e.show())}_leave(t,e){e=this._initializeOnDelegatedTarget(t,e),t&&(e._activeTrigger["focusout"===t.type?fi:di]=e._element.contains(t.relatedTarget)),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=ci,e._config.delay&&e._config.delay.hide?e._timeout=setTimeout((()=>{e._hoverState===ci&&e.hide()}),e._config.delay.hide):e.hide())}_isWithActiveTrigger(){for(const t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1}_getConfig(t){const e=Ie.getDataAttributes(this._element);return Object.keys(e).forEach((t=>{ti.has(t)&&delete e[t]})),(t={...this.constructor.Default,...e,..."object"==typeof t&&t?t:{}}).container=!1===t.container?document.body:Vt(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),jt(Zn,t,this.constructor.DefaultType),t.sanitize&&(t.template=Jn(t.template,t.allowList,t.sanitizeFn)),t}_getDelegateConfig(){const t={};for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t}_cleanTipClass(){const t=this.getTipElement(),e=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),n=t.getAttribute("class").match(e);null!==n&&n.length>0&&n.map((t=>t.trim())).forEach((e=>t.classList.remove(e)))}_getBasicClassPrefix(){return"bs-tooltip"}_handlePopperPlacementChange(t){const{state:e}=t;e&&(this.tip=e.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(e.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(t){return this.each((function(){const e=pi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Gt(pi);const gi={...pi.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},mi={...pi.DefaultType,content:"(string|element|function)"},yi={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"};class vi extends pi{static get Default(){return gi}static get NAME(){return"popover"}static get Event(){return yi}static get DefaultType(){return mi}isWithContent(){return this.getTitle()||this._getContent()}setContent(t){this._sanitizeAndSetContent(t,this.getTitle(),".popover-header"),this._sanitizeAndSetContent(t,this._getContent(),".popover-body")}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return"bs-popover"}static jQueryInterface(t){return this.each((function(){const e=vi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Gt(vi);const bi="scrollspy",_i={offset:10,method:"auto",target:""},wi={offset:"number",method:"string",target:"(string|element)"},xi="active",Ii=".nav-link, .list-group-item, .dropdown-item",Ti="position";class Ei extends me{constructor(t,e){super(t),this._scrollElement="BODY"===this._element.tagName?window:this._element,this._config=this._getConfig(e),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,fe.on(this._scrollElement,"scroll.bs.scrollspy",(()=>this._process())),this.refresh(),this._process()}static get Default(){return _i}static get NAME(){return bi}refresh(){const t=this._scrollElement===this._scrollElement.window?"offset":Ti,e="auto"===this._config.method?t:this._config.method,n=e===Ti?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),Te.find(Ii,this._config.target).map((t=>{const i=Lt(t),s=i?Te.findOne(i):null;if(s){const t=s.getBoundingClientRect();if(t.width||t.height)return[Ie[e](s).top+n,i]}return null})).filter((t=>t)).sort(((t,e)=>t[0]-e[0])).forEach((t=>{this._offsets.push(t[0]),this._targets.push(t[1])}))}dispose(){fe.off(this._scrollElement,".bs.scrollspy"),super.dispose()}_getConfig(t){return(t={..._i,...Ie.getDataAttributes(this._element),..."object"==typeof t&&t?t:{}}).target=Vt(t.target)||document.documentElement,jt(bi,t,wi),t}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=n){const t=this._targets[this._targets.length-1];this._activeTarget!==t&&this._activate(t)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(let e=this._offsets.length;e--;)this._activeTarget!==this._targets[e]&&t>=this._offsets[e]&&(void 0===this._offsets[e+1]||t<this._offsets[e+1])&&this._activate(this._targets[e])}}_activate(t){this._activeTarget=t,this._clear();const e=Ii.split(",").map((e=>`${e}[data-bs-target="${t}"],${e}[href="${t}"]`)),n=Te.findOne(e.join(","),this._config.target);n.classList.add(xi),n.classList.contains("dropdown-item")?Te.findOne(".dropdown-toggle",n.closest(".dropdown")).classList.add(xi):Te.parents(n,".nav, .list-group").forEach((t=>{Te.prev(t,".nav-link, .list-group-item").forEach((t=>t.classList.add(xi))),Te.prev(t,".nav-item").forEach((t=>{Te.children(t,".nav-link").forEach((t=>t.classList.add(xi)))}))})),fe.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:t})}_clear(){Te.find(Ii,this._config.target).filter((t=>t.classList.contains(xi))).forEach((t=>t.classList.remove(xi)))}static jQueryInterface(t){return this.each((function(){const e=Ei.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}fe.on(window,"load.bs.scrollspy.data-api",(()=>{Te.find('[data-bs-spy="scroll"]').forEach((t=>new Ei(t)))})),Gt(Ei);const Si="active",ki="fade",Ai="show",Ci=".active",Di=":scope > li > .active";class Ni extends me{static get NAME(){return"tab"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(Si))return;let t;const e=Pt(this._element),n=this._element.closest(".nav, .list-group");if(n){const e="UL"===n.nodeName||"OL"===n.nodeName?Di:Ci;t=Te.find(e,n),t=t[t.length-1]}const i=t?fe.trigger(t,"hide.bs.tab",{relatedTarget:this._element}):null;if(fe.trigger(this._element,"show.bs.tab",{relatedTarget:t}).defaultPrevented||null!==i&&i.defaultPrevented)return;this._activate(this._element,n);const s=()=>{fe.trigger(t,"hidden.bs.tab",{relatedTarget:this._element}),fe.trigger(this._element,"shown.bs.tab",{relatedTarget:t})};e?this._activate(e,e.parentNode,s):s()}_activate(t,e,n){const i=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?Te.children(e,Ci):Te.find(Di,e))[0],s=n&&i&&i.classList.contains(ki),r=()=>this._transitionComplete(t,i,n);i&&s?(i.classList.remove(Ai),this._queueCallback(r,t,!0)):r()}_transitionComplete(t,e,n){if(e){e.classList.remove(Si);const t=Te.findOne(":scope > .dropdown-menu .active",e.parentNode);t&&t.classList.remove(Si),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}t.classList.add(Si),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),Ht(t),t.classList.contains(ki)&&t.classList.add(Ai);let i=t.parentNode;if(i&&"LI"===i.nodeName&&(i=i.parentNode),i&&i.classList.contains("dropdown-menu")){const e=t.closest(".dropdown");e&&Te.find(".dropdown-toggle",e).forEach((t=>t.classList.add(Si))),t.setAttribute("aria-expanded",!0)}n&&n()}static jQueryInterface(t){return this.each((function(){const e=Ni.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}fe.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),Bt(this)||Ni.getOrCreateInstance(this).show()})),Gt(Ni);const Oi="toast",Mi="hide",Li="show",Pi="showing",Ri={animation:"boolean",autohide:"boolean",delay:"number"},Fi={animation:!0,autohide:!0,delay:5e3};class Vi extends me{constructor(t,e){super(t),this._config=this._getConfig(e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return Ri}static get Default(){return Fi}static get NAME(){return Oi}show(){fe.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Mi),Ht(this._element),this._element.classList.add(Li),this._element.classList.add(Pi),this._queueCallback((()=>{this._element.classList.remove(Pi),fe.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this._element.classList.contains(Li)&&(fe.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(Pi),this._queueCallback((()=>{this._element.classList.add(Mi),this._element.classList.remove(Pi),this._element.classList.remove(Li),fe.trigger(this._element,"hidden.bs.toast")}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this._element.classList.contains(Li)&&this._element.classList.remove(Li),super.dispose()}_getConfig(t){return t={...Fi,...Ie.getDataAttributes(this._element),..."object"==typeof t&&t?t:{}},jt(Oi,t,this.constructor.DefaultType),t}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){fe.on(this._element,"mouseover.bs.toast",(t=>this._onInteraction(t,!0))),fe.on(this._element,"mouseout.bs.toast",(t=>this._onInteraction(t,!1))),fe.on(this._element,"focusin.bs.toast",(t=>this._onInteraction(t,!0))),fe.on(this._element,"focusout.bs.toast",(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=Vi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}ye(Vi),Gt(Vi)},181:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Animation:()=>pn,Animations:()=>mn,ArcElement:()=>vs,BarController:()=>Fn,BarElement:()=>Ls,BasePlatform:()=>fi,BasicPlatform:()=>pi,BubbleController:()=>Vn,CategoryScale:()=>wr,Chart:()=>ds,DatasetController:()=>An,Decimation:()=>Vs,DomPlatform:()=>Ai,DoughnutController:()=>jn,Element:()=>Di,Filler:()=>Zs,Interaction:()=>ti,Legend:()=>nr,LineController:()=>Un,LineElement:()=>Ss,LinearScale:()=>Tr,LogarithmicScale:()=>Sr,PieController:()=>qn,PointElement:()=>As,PolarAreaController:()=>Bn,RadarController:()=>zn,RadialLinearScale:()=>Mr,Scale:()=>Ui,ScatterController:()=>Hn,SubTitle:()=>or,Ticks:()=>Oi,TimeScale:()=>Br,TimeSeriesScale:()=>zr,Title:()=>sr,Tooltip:()=>br,_adapters:()=>Gn,_detectPlatform:()=>Ci,animator:()=>hn,controllers:()=>$n,defaults:()=>zt,elements:()=>Ps,layouts:()=>di,plugins:()=>_r,registerables:()=>$r,registry:()=>qi,scales:()=>Hr});const i="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function s(t,e,n){const s=n||(t=>Array.prototype.slice.call(t));let r=!1,o=[];return function(...n){o=s(n),r||(r=!0,i.call(window,(()=>{r=!1,t.apply(e,o)})))}}const r=t=>"start"===t?"left":"end"===t?"right":"center",o=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function a(){}const c=function(){let t=0;return function(){return t++}}();function l(t){return null==t}function u(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function h(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}const d=t=>("number"==typeof t||t instanceof Number)&&isFinite(+t);function f(t,e){return d(t)?t:e}function p(t,e){return void 0===t?e:t}const g=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function m(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function y(t,e,n,i){let s,r,o;if(u(t))if(r=t.length,i)for(s=r-1;s>=0;s--)e.call(n,t[s],s);else for(s=0;s<r;s++)e.call(n,t[s],s);else if(h(t))for(o=Object.keys(t),r=o.length,s=0;s<r;s++)e.call(n,t[o[s]],o[s])}function v(t,e){let n,i,s,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(s=t[n],r=e[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function b(t){if(u(t))return t.map(b);if(h(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let s=0;for(;s<i;++s)e[n[s]]=b(t[n[s]]);return e}return t}function _(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function w(t,e,n,i){if(!_(t))return;const s=e[t],r=n[t];h(s)&&h(r)?x(s,r,i):e[t]=b(r)}function x(t,e,n){const i=u(e)?e:[e],s=i.length;if(!h(t))return t;const r=(n=n||{}).merger||w;for(let o=0;o<s;++o){if(!h(e=i[o]))continue;const s=Object.keys(e);for(let i=0,o=s.length;i<o;++i)r(s[i],t,e,n)}return t}function I(t,e){return x(t,e,{merger:T})}function T(t,e,n){if(!_(t))return;const i=e[t],s=n[t];h(i)&&h(s)?I(i,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=b(s))}function E(t,e){const n=t.indexOf(".",e);return-1===n?t.length:n}function S(t,e){if(""===e)return t;let n=0,i=E(e,n);for(;t&&i>n;)t=t[e.slice(n,i)],n=i+1,i=E(e,n);return t}function k(t){return t.charAt(0).toUpperCase()+t.slice(1)}const A=t=>void 0!==t,C=t=>"function"==typeof t,D=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0},N=Math.PI,O=2*N,M=O+N,L=Number.POSITIVE_INFINITY,P=N/180,R=N/2,F=N/4,V=2*N/3,j=Math.log10,U=Math.sign;function B(t){const e=Math.round(t);t=z(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(j(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function q(t){return!isNaN(parseFloat(t))&&isFinite(t)}function z(t,e,n){return Math.abs(t-e)<n}function H(t,e,n){let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function $(t){return t*(N/180)}function W(t){return t*(180/N)}function K(t){if(!d(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function G(t,e){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*N&&(r+=O),{angle:r,distance:s}}function Y(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function X(t,e){return(t-e+M)%O-N}function Q(t){return(t%O+O)%O}function J(t,e,n,i){const s=Q(t),r=Q(e),o=Q(n),a=Q(r-s),c=Q(o-s),l=Q(s-r),u=Q(s-o);return s===r||s===o||i&&r===o||a>c&&l<u}function Z(t,e,n){return Math.max(e,Math.min(n,t))}function tt(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}const et=t=>0===t||1===t,nt=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*O/n),it=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*O/n)+1,st={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*R),easeOutSine:t=>Math.sin(t*R),easeInOutSine:t=>-.5*(Math.cos(N*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>et(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>et(t)?t:nt(t,.075,.3),easeOutElastic:t=>et(t)?t:it(t,.075,.3),easeInOutElastic(t){const e=.1125;return et(t)?t:t<.5?.5*nt(2*t,e,.45):.5+.5*it(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-st.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*st.easeInBounce(2*t):.5*st.easeOutBounce(2*t-1)+.5};function rt(t){return t+.5|0}const ot=(t,e,n)=>Math.max(Math.min(t,n),e);function at(t){return ot(rt(2.55*t),0,255)}function ct(t){return ot(rt(255*t),0,255)}function lt(t){return ot(rt(t/2.55)/100,0,1)}function ut(t){return ot(rt(100*t),0,100)}const ht={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},dt=[..."0123456789ABCDEF"],ft=t=>dt[15&t],pt=t=>dt[(240&t)>>4]+dt[15&t],gt=t=>(240&t)>>4==(15&t);const mt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function yt(t,e,n){const i=e*Math.min(n,1-n),s=(e,s=(e+t/30)%12)=>n-i*Math.max(Math.min(s-3,9-s,1),-1);return[s(0),s(8),s(4)]}function vt(t,e,n){const i=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function bt(t,e,n){const i=yt(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)i[s]*=1-e-n,i[s]+=e;return i}function _t(t){const e=t.r/255,n=t.g/255,i=t.b/255,s=Math.max(e,n,i),r=Math.min(e,n,i),o=(s+r)/2;let a,c,l;return s!==r&&(l=s-r,c=o>.5?l/(2-s-r):l/(s+r),a=function(t,e,n,i,s){return t===s?(e-n)/i+(e<n?6:0):e===s?(n-t)/i+2:(t-e)/i+4}(e,n,i,l,s),a=60*a+.5),[0|a,c||0,o]}function wt(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(ct)}function xt(t,e,n){return wt(yt,t,e,n)}function It(t){return(t%360+360)%360}const Tt={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Et={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let St;const kt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,At=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,Ct=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Dt(t,e,n){if(t){let i=_t(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=xt(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Nt(t,e){return t?Object.assign(e||{},t):t}function Ot(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ct(t[3]))):(e=Nt(t,{r:0,g:0,b:0,a:1})).a=ct(e.a),e}function Mt(t){return"r"===t.charAt(0)?function(t){const e=kt.exec(t);let n,i,s,r=255;if(e){if(e[7]!==n){const t=+e[7];r=e[8]?at(t):ot(255*t,0,255)}return n=+e[1],i=+e[3],s=+e[5],n=255&(e[2]?at(n):ot(n,0,255)),i=255&(e[4]?at(i):ot(i,0,255)),s=255&(e[6]?at(s):ot(s,0,255)),{r:n,g:i,b:s,a:r}}}(t):function(t){const e=mt.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?at(+e[5]):ct(+e[5]));const s=It(+e[2]),r=+e[3]/100,o=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return wt(bt,t,e,n)}(s,r,o):"hsv"===e[1]?function(t,e,n){return wt(vt,t,e,n)}(s,r,o):xt(s,r,o),{r:n[0],g:n[1],b:n[2],a:i}}(t)}class Lt{constructor(t){if(t instanceof Lt)return t;const e=typeof t;let n;var i,s,r;"object"===e?n=Ot(t):"string"===e&&(r=(i=t).length,"#"===i[0]&&(4===r||5===r?s={r:255&17*ht[i[1]],g:255&17*ht[i[2]],b:255&17*ht[i[3]],a:5===r?17*ht[i[4]]:255}:7!==r&&9!==r||(s={r:ht[i[1]]<<4|ht[i[2]],g:ht[i[3]]<<4|ht[i[4]],b:ht[i[5]]<<4|ht[i[6]],a:9===r?ht[i[7]]<<4|ht[i[8]]:255})),n=s||function(t){St||(St=function(){const t={},e=Object.keys(Et),n=Object.keys(Tt);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<n.length;s++)r=n[s],a=a.replace(r,Tt[r]);r=parseInt(Et[o],16),t[a]=[r>>16&255,r>>8&255,255&r]}return t}(),St.transparent=[0,0,0,0]);const e=St[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(t)||Mt(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Nt(this._rgb);return t&&(t.a=lt(t.a)),t}set rgb(t){this._rgb=Ot(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${lt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?(t=this._rgb,e=(t=>gt(t.r)&&gt(t.g)&&gt(t.b)&&gt(t.a))(t)?ft:pt,t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0):void 0;var t,e}hslString(){return this._valid?function(t){if(!t)return;const e=_t(t),n=e[0],i=ut(e[1]),s=ut(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${s}%, ${lt(t.a)})`:`hsl(${n}, ${i}%, ${s}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let s;const r=e===s?.5:e,o=2*r-1,a=n.a-i.a,c=((o*a==-1?o:(o+a)/(1+o*a))+1)/2;s=1-c,n.r=255&c*n.r+s*i.r+.5,n.g=255&c*n.g+s*i.g+.5,n.b=255&c*n.b+s*i.b+.5,n.a=r*n.a+(1-r)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const i=Ct(lt(t.r)),s=Ct(lt(t.g)),r=Ct(lt(t.b));return{r:ct(At(i+n*(Ct(lt(e.r))-i))),g:ct(At(s+n*(Ct(lt(e.g))-s))),b:ct(At(r+n*(Ct(lt(e.b))-r))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new Lt(this.rgb)}alpha(t){return this._rgb.a=ct(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=rt(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Dt(this._rgb,2,t),this}darken(t){return Dt(this._rgb,2,-t),this}saturate(t){return Dt(this._rgb,1,t),this}desaturate(t){return Dt(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=_t(t);n[0]=It(n[0]+e),n=xt(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function Pt(t){return new Lt(t)}function Rt(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function Ft(t){return Rt(t)?t:Pt(t)}function Vt(t){return Rt(t)?t:Pt(t).saturate(.5).darken(.1).hexString()}const jt=Object.create(null),Ut=Object.create(null);function Bt(t,e){if(!e)return t;const n=e.split(".");for(let e=0,i=n.length;e<i;++e){const i=n[e];t=t[i]||(t[i]=Object.create(null))}return t}function qt(t,e,n){return"string"==typeof e?x(Bt(t,e),n):x(Bt(t,""),e)}var zt=new class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>Vt(e.backgroundColor),this.hoverBorderColor=(t,e)=>Vt(e.borderColor),this.hoverColor=(t,e)=>Vt(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return qt(this,t,e)}get(t){return Bt(this,t)}describe(t,e){return qt(Ut,t,e)}override(t,e){return qt(jt,t,e)}route(t,e,n,i){const s=Bt(this,t),r=Bt(this,n),o="_"+e;Object.defineProperties(s,{[o]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[o],e=r[i];return h(t)?Object.assign({},e,t):p(t,e)},set(t){this[o]=t}}})}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Ht(t,e,n,i,s){let r=e[s];return r||(r=e[s]=t.measureText(s).width,n.push(s)),r>i&&(i=r),i}function $t(t,e,n,i){let s=(i=i||{}).data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let c,l,h,d,f;for(c=0;c<a;c++)if(d=n[c],null!=d&&!0!==u(d))o=Ht(t,s,r,o,d);else if(u(d))for(l=0,h=d.length;l<h;l++)f=d[l],null==f||u(f)||(o=Ht(t,s,r,o,f));t.restore();const p=r.length/2;if(p>n.length){for(c=0;c<p;c++)delete s[r[c]];r.splice(0,p)}return o}function Wt(t,e,n){const i=t.currentDevicePixelRatio,s=0!==n?Math.max(n/2,.5):0;return Math.round((e-s)*i)/i+s}function Kt(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Gt(t,e,n,i){let s,r,o,a,c;const l=e.pointStyle,u=e.rotation,h=e.radius;let d=(u||0)*P;if(l&&"object"==typeof l&&(s=l.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return t.save(),t.translate(n,i),t.rotate(d),t.drawImage(l,-l.width/2,-l.height/2,l.width,l.height),void t.restore();if(!(isNaN(h)||h<=0)){switch(t.beginPath(),l){default:t.arc(n,i,h,0,O),t.closePath();break;case"triangle":t.moveTo(n+Math.sin(d)*h,i-Math.cos(d)*h),d+=V,t.lineTo(n+Math.sin(d)*h,i-Math.cos(d)*h),d+=V,t.lineTo(n+Math.sin(d)*h,i-Math.cos(d)*h),t.closePath();break;case"rectRounded":c=.516*h,a=h-c,r=Math.cos(d+F)*a,o=Math.sin(d+F)*a,t.arc(n-r,i-o,c,d-N,d-R),t.arc(n+o,i-r,c,d-R,d),t.arc(n+r,i+o,c,d,d+R),t.arc(n-o,i+r,c,d+R,d+N),t.closePath();break;case"rect":if(!u){a=Math.SQRT1_2*h,t.rect(n-a,i-a,2*a,2*a);break}d+=F;case"rectRot":r=Math.cos(d)*h,o=Math.sin(d)*h,t.moveTo(n-r,i-o),t.lineTo(n+o,i-r),t.lineTo(n+r,i+o),t.lineTo(n-o,i+r),t.closePath();break;case"crossRot":d+=F;case"cross":r=Math.cos(d)*h,o=Math.sin(d)*h,t.moveTo(n-r,i-o),t.lineTo(n+r,i+o),t.moveTo(n+o,i-r),t.lineTo(n-o,i+r);break;case"star":r=Math.cos(d)*h,o=Math.sin(d)*h,t.moveTo(n-r,i-o),t.lineTo(n+r,i+o),t.moveTo(n+o,i-r),t.lineTo(n-o,i+r),d+=F,r=Math.cos(d)*h,o=Math.sin(d)*h,t.moveTo(n-r,i-o),t.lineTo(n+r,i+o),t.moveTo(n+o,i-r),t.lineTo(n-o,i+r);break;case"line":r=Math.cos(d)*h,o=Math.sin(d)*h,t.moveTo(n-r,i-o),t.lineTo(n+r,i+o);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(d)*h,i+Math.sin(d)*h)}t.fill(),e.borderWidth>0&&t.stroke()}}function Yt(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Xt(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Qt(t){t.restore()}function Jt(t,e,n,i,s){if(!e)return t.lineTo(n.x,n.y);if("middle"===s){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===s!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Zt(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function te(t,e,n,i,s,r={}){const o=u(e)?e:[e],a=r.strokeWidth>0&&""!==r.strokeColor;let c,h;for(t.save(),t.font=s.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),l(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,r),c=0;c<o.length;++c)h=o[c],a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),l(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(h,n,i,r.maxWidth)),t.fillText(h,n,i,r.maxWidth),ee(t,n,i,h,r),i+=s.lineHeight;t.restore()}function ee(t,e,n,i,s){if(s.strikethrough||s.underline){const r=t.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,c=n-r.actualBoundingBoxAscent,l=n+r.actualBoundingBoxDescent,u=s.strikethrough?(c+l)/2:l;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function ne(t,e){const{x:n,y:i,w:s,h:r,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,-R,N,!0),t.lineTo(n,i+r-o.bottomLeft),t.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,N,R,!0),t.lineTo(n+s-o.bottomRight,i+r),t.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,R,0,!0),t.lineTo(n+s,i+o.topRight),t.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-R,!0),t.lineTo(n+o.topLeft,i)}const ie=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),se=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function re(t,e){const n=(""+t).match(ie);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}function oe(t,e){const n={},i=h(e),s=i?Object.keys(e):e,r=h(t)?i?n=>p(t[n],t[e[n]]):e=>t[e]:()=>t;for(const t of s)n[t]=+r(t)||0;return n}function ae(t){return oe(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ce(t){return oe(t,["topLeft","topRight","bottomLeft","bottomRight"])}function le(t){const e=ae(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ue(t,e){t=t||{},e=e||zt.font;let n=p(t.size,e.size);"string"==typeof n&&(n=parseInt(n,10));let i=p(t.style,e.style);i&&!(""+i).match(se)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");const s={family:p(t.family,e.family),lineHeight:re(p(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:p(t.weight,e.weight),string:""};return s.string=function(t){return!t||l(t.size)||l(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(s),s}function he(t,e,n,i){let s,r,o,a=!0;for(s=0,r=t.length;s<r;++s)if(o=t[s],void 0!==o&&(void 0!==e&&"function"==typeof o&&(o=o(e),a=!1),void 0!==n&&u(o)&&(o=o[n%o.length],a=!1),void 0!==o))return i&&!a&&(i.cacheable=!1),o}function de(t,e){return Object.assign(Object.create(t),e)}function fe(t,e,n){n=n||(n=>t[n]<e);let i,s=t.length-1,r=0;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const pe=(t,e,n)=>fe(t,n,(i=>t[i][e]<n)),ge=(t,e,n)=>fe(t,n,(i=>t[i][e]>=n)),me=["push","pop","shift","splice","unshift"];function ye(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(e);-1!==s&&i.splice(s,1),i.length>0||(me.forEach((e=>{delete t[e]})),delete t._chartjs)}function ve(t){const e=new Set;let n,i;for(n=0,i=t.length;n<i;++n)e.add(t[n]);return e.size===i?t:Array.from(e)}function be(t,e=[""],n=t,i,s=(()=>t[0])){A(i)||(i=De("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:i,_getTarget:s,override:s=>be([s,...t],e,n,i)};return new Proxy(r,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>Te(n,i,(()=>function(t,e,n,i){let s;for(const r of e)if(s=De(xe(r,t),n),A(s))return Ie(t,s)?Ae(n,i,t,s):s}(i,e,t,n))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>Ne(t).includes(e),ownKeys:t=>Ne(t),set(t,e,n){const i=t._storage||(t._storage=s());return t[e]=i[e]=n,delete t._keys,!0}})}function _e(t,e,n,i){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:we(t,i),setContext:e=>_e(t,e,n,i),override:s=>_e(t.override(s),e,n,i)};return new Proxy(s,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>Te(t,e,(()=>function(t,e,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=t;let a=i[e];return C(a)&&o.isScriptable(e)&&(a=function(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);return a.add(t),e=e(r,o||i),a.delete(t),Ie(t,e)&&(e=Ae(s._scopes,s,t,e)),e}(e,a,t,n)),u(a)&&a.length&&(a=function(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=n;if(A(r.index)&&i(t))e=e[r.index%e.length];else if(h(e[0])){const n=e,i=s._scopes.filter((t=>t!==n));e=[];for(const c of n){const n=Ae(i,s,t,c);e.push(_e(n,r,o&&o[t],a))}}return e}(e,a,t,o.isIndexable)),Ie(e,a)&&(a=_e(a,s,r&&r[e],o)),a}(t,e,n))),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function we(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:i,isScriptable:C(n)?n:()=>n,isIndexable:C(i)?i:()=>i}}const xe=(t,e)=>t?t+k(e):e,Ie=(t,e)=>h(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Te(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function Ee(t,e,n){return C(t)?t(e,n):t}const Se=(t,e)=>!0===t?e:"string"==typeof t?S(e,t):void 0;function ke(t,e,n,i,s){for(const r of e){const e=Se(n,r);if(e){t.add(e);const r=Ee(e._fallback,n,s);if(A(r)&&r!==n&&r!==i)return r}else if(!1===e&&A(i)&&n!==i)return null}return!1}function Ae(t,e,n,i){const s=e._rootScopes,r=Ee(e._fallback,n,i),o=[...t,...s],a=new Set;a.add(i);let c=Ce(a,o,n,r||n,i);return null!==c&&(!A(r)||r===n||(c=Ce(a,o,r,c,i),null!==c))&&be(Array.from(a),[""],s,r,(()=>function(t,e,n){const i=t._getTarget();e in i||(i[e]={});const s=i[e];return u(s)&&h(n)?n:s}(e,n,i)))}function Ce(t,e,n,i,s){for(;n;)n=ke(t,e,n,i,s);return n}function De(t,e){for(const n of e){if(!n)continue;const e=n[t];if(A(e))return e}}function Ne(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}function Oe(t,e,n,i){const{iScale:s}=t,{key:r="r"}=this._parsing,o=new Array(i);let a,c,l,u;for(a=0,c=i;a<c;++a)l=a+n,u=e[l],o[a]={r:s.parse(S(u,r),l)};return o}const Me=Number.EPSILON||1e-14,Le=(t,e)=>e<t.length&&!t[e].skip&&t[e],Pe=t=>"x"===t?"y":"x";function Re(t,e,n,i){const s=t.skip?e:t,r=e,o=n.skip?e:n,a=Y(r,s),c=Y(o,r);let l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;const h=i*l,d=i*u;return{previous:{x:r.x-h*(o.x-s.x),y:r.y-h*(o.y-s.y)},next:{x:r.x+d*(o.x-s.x),y:r.y+d*(o.y-s.y)}}}function Fe(t,e,n){return Math.max(Math.min(t,n),e)}function Ve(t,e,n,i,s){let r,o,a,c;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)!function(t,e="x"){const n=Pe(e),i=t.length,s=Array(i).fill(0),r=Array(i);let o,a,c,l=Le(t,0);for(o=0;o<i;++o)if(a=c,c=l,l=Le(t,o+1),c){if(l){const t=l[e]-c[e];s[o]=0!==t?(l[n]-c[n])/t:0}r[o]=a?l?U(s[o-1])!==U(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}!function(t,e,n){const i=t.length;let s,r,o,a,c,l=Le(t,0);for(let u=0;u<i-1;++u)c=l,l=Le(t,u+1),c&&l&&(z(e[u],0,Me)?n[u]=n[u+1]=0:(s=n[u]/e[u],r=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(r,2),a<=9||(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=r*o*e[u])))}(t,s,r),function(t,e,n="x"){const i=Pe(n),s=t.length;let r,o,a,c=Le(t,0);for(let l=0;l<s;++l){if(o=a,a=c,c=Le(t,l+1),!a)continue;const s=a[n],u=a[i];o&&(r=(s-o[n])/3,a[`cp1${n}`]=s-r,a[`cp1${i}`]=u-r*e[l]),c&&(r=(c[n]-s)/3,a[`cp2${n}`]=s+r,a[`cp2${i}`]=u+r*e[l])}}(t,r,e)}(t,s);else{let n=i?t[t.length-1]:t[0];for(r=0,o=t.length;r<o;++r)a=t[r],c=Re(n,a,t[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,n=a}e.capBezierPoints&&function(t,e){let n,i,s,r,o,a=Yt(t[0],e);for(n=0,i=t.length;n<i;++n)o=r,r=a,a=n<i-1&&Yt(t[n+1],e),r&&(s=t[n],o&&(s.cp1x=Fe(s.cp1x,e.left,e.right),s.cp1y=Fe(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Fe(s.cp2x,e.left,e.right),s.cp2y=Fe(s.cp2y,e.top,e.bottom)))}(t,n)}function je(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Ue(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function Be(t,e,n){let i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const qe=t=>window.getComputedStyle(t,null),ze=["top","right","bottom","left"];function He(t,e,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=ze[s];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function $e(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,s=qe(n),r="border-box"===s.boxSizing,o=He(s,"padding"),a=He(s,"border","width"),{x:c,y:l,box:u}=function(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:s,offsetY:r}=i;let o,a,c=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(s,r,t.target))o=s,a=r;else{const t=e.getBoundingClientRect();o=i.clientX-t.left,a=i.clientY-t.top,c=!0}return{x:o,y:a,box:c}}(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((c-h)/f*n.width/i),y:Math.round((l-d)/p*n.height/i)}}const We=t=>Math.round(10*t)/10;function Ke(t,e,n){const i=e||1,s=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=s/i,t.width=r/i;const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==i||o.height!==s||o.width!==r)&&(t.currentDevicePixelRatio=i,o.height=s,o.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0)}const Ge=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function Ye(t,e){const n=function(t,e){return qe(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Xe(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Qe(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function Je(t,e,n,i){const s={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},o=Xe(t,s,n),a=Xe(s,r,n),c=Xe(r,e,n),l=Xe(o,a,n),u=Xe(a,c,n);return Xe(l,u,n)}const Ze=new Map;function tn(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Ze.get(n);return i||(i=new Intl.NumberFormat(t,e),Ze.set(n,i)),i}(e,n).format(t)}function en(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function nn(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function sn(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function rn(t){return"angle"===t?{between:J,compare:X,normalize:Q}:{between:tt,compare:(t,e)=>t-e,normalize:t=>t}}function on({start:t,end:e,count:n,loop:i,style:s}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n==0,style:s}}function an(t,e,n){if(!n)return[t];const{property:i,start:s,end:r}=n,o=e.length,{compare:a,between:c,normalize:l}=rn(i),{start:u,end:h,loop:d,style:f}=function(t,e,n){const{property:i,start:s,end:r}=n,{between:o,normalize:a}=rn(i),c=e.length;let l,u,{start:h,end:d,loop:f}=t;if(f){for(h+=c,d+=c,l=0,u=c;l<u&&o(a(e[h%c][i]),s,r);++l)h--,d--;h%=c,d%=c}return d<h&&(d+=c),{start:h,end:d,loop:f,style:t.style}}(t,e,n),p=[];let g,m,y,v=!1,b=null;for(let t=u,n=u;t<=h;++t)m=e[t%o],m.skip||(g=l(m[i]),g!==y&&(v=c(g,s,r),null===b&&(v||c(s,y,g)&&0!==a(s,y))&&(b=0===a(g,s)?t:n),null!==b&&(!v||0===a(r,g)||c(r,y,g))&&(p.push(on({start:b,end:t,loop:d,count:o,style:f})),b=null),n=t,y=g));return null!==b&&p.push(on({start:b,end:h,loop:d,count:o,style:f})),p}function cn(t,e){const n=[],i=t.segments;for(let s=0;s<i.length;s++){const r=an(i[s],t.points,e);r.length&&n.push(...r)}return n}function ln(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function un(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}var hn=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const s=e.listeners[i],r=e.duration;s.forEach((i=>i({chart:t,initial:e.initial,numSteps:r,currentStep:Math.min(n-e.start,r)})))}_refresh(){this._request||(this._running=!0,this._request=i.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const s=n.items;let r,o=s.length-1,a=!1;for(;o>=0;--o)r=s[o],r._active?(r._total>n.duration&&(n.duration=r._total),r.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,n,t,"progress")),s.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=s.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const dn="transparent",fn={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=Ft(t||dn),s=i.valid&&Ft(e||dn);return s&&s.valid?s.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class pn{constructor(t,e,n,i){const s=e[n];i=he([t.to,i,s,t.from]);const r=he([t.from,s,i]);this._active=!0,this._fn=t.fn||fn[t.type||typeof r],this._easing=st[t.easing]||st.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=r,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],s=n-this._start,r=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=he([t.to,e,i,t.from]),this._from=he([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,s=this._from,r=this._loop,o=this._to;let a;if(this._active=s!==o&&(r||e<n),!this._active)return this._target[i]=o,void this._notify(!0);e<0?this._target[i]=s:(a=e/n%2,a=r&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(s,o,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}zt.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const gn=Object.keys(zt.animation);zt.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),zt.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),zt.describe("animations",{_fallback:"animation"}),zt.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class mn{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!h(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach((n=>{const i=t[n];if(!h(i))return;const s={};for(const t of gn)s[t]=i[t];(u(i.properties)&&i.properties||[n]).forEach((t=>{t!==n&&e.has(t)||e.set(t,s)}))}))}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(n)return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n;t.options=e}(t,n);if(!i)return[];const s=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let e=0;e<i.length;e++){const s=t[i[e]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),s}_createAnimations(t,e){const n=this._properties,i=[],s=t.$animations||(t.$animations={}),r=Object.keys(e),o=Date.now();let a;for(a=r.length-1;a>=0;--a){const c=r[a];if("$"===c.charAt(0))continue;if("options"===c){i.push(...this._animateOptions(t,e));continue}const l=e[c];let u=s[c];const h=n.get(c);if(u){if(h&&u.active()){u.update(h,l,o);continue}u.cancel()}h&&h.duration?(s[c]=u=new pn(h,t,c,l),i.push(u)):t[c]=l}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(hn.add(this._chart,n),!0):void 0}}function yn(t,e){const n=t&&t.options||{},i=n.reverse,s=void 0===n.min?e:0,r=void 0===n.max?e:0;return{start:i?r:s,end:i?s:r}}function vn(t,e){const n=[],i=t._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function bn(t,e,n,i={}){const s=t.keys,r="single"===i.mode;let o,a,c,l;if(null!==e){for(o=0,a=s.length;o<a;++o){if(c=+s[o],c===n){if(i.all)continue;break}l=t.values[c],d(l)&&(r||0===e||U(e)===U(l))&&(e+=l)}return e}}function _n(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function wn(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function xn(t,e,n,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const e=t[s.index];if(n&&e>0||!n&&e<0)return s.index}return null}function In(t,e){const{chart:n,_cachedMeta:i}=t,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=i,c=r.axis,l=o.axis,u=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(r,o,i),h=e.length;let d;for(let t=0;t<h;++t){const n=e[t],{[c]:r,[l]:h}=n;d=(n._stacks||(n._stacks={}))[l]=wn(s,u,r),d[a]=h,d._top=xn(d,o,!0,i.type),d._bottom=xn(d,o,!1,i.type)}}function Tn(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function En(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n]}}}const Sn=t=>"reset"===t||"none"===t,kn=(t,e)=>e?t:Object.assign({},t);class An{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=_n(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&En(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,s=e.xAxisID=p(n.xAxisID,Tn(t,"x")),r=e.yAxisID=p(n.yAxisID,Tn(t,"y")),o=e.rAxisID=p(n.rAxisID,Tn(t,"r")),a=e.indexAxis,c=e.iAxisID=i(a,s,r,o),l=e.vAxisID=i(a,r,s,o);e.xScale=this.getScaleForId(s),e.yScale=this.getScaleForId(r),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(l)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&ye(this._data,this),t._stacked&&En(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(h(e))this._data=function(t){const e=Object.keys(t),n=new Array(e.length);let i,s,r;for(i=0,s=e.length;i<s;++i)r=e[i],n[i]={x:r,y:t[r]};return n}(e);else if(n!==e){if(n){ye(n,this);const t=this._cachedMeta;En(t),t._parsed=[]}e&&Object.isExtensible(e)&&(this,(i=e)._chartjs?i._chartjs.listeners.push(this):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[this]}}),me.forEach((t=>{const e="_onData"+k(t),n=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...t){const s=n.apply(this,t);return i._chartjs.listeners.forEach((n=>{"function"==typeof n[e]&&n[e](...t)})),s}})})))),this._syncList=[],this._data=e}var i}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const s=e._stacked;e._stacked=_n(e.vScale,e),e.stack!==n.stack&&(i=!0,En(e),e.stack=n.stack),this._resyncElements(t),(i||s!==e._stacked)&&In(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:s,_stacked:r}=n,o=s.axis;let a,c,l,d=0===t&&e===i.length||n._sorted,f=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,l=i;else{l=u(i[t])?this.parseArrayData(n,i,t,e):h(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const s=()=>null===c[o]||f&&c[o]<f[o];for(a=0;a<e;++a)n._parsed[a+t]=c=l[a],d&&(s()&&(d=!1),f=c);n._sorted=d}r&&In(this,l)}parsePrimitiveData(t,e,n,i){const{iScale:s,vScale:r}=t,o=s.axis,a=r.axis,c=s.getLabels(),l=s===r,u=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,u[h]={[o]:l||s.parse(c[f],f),[a]:r.parse(e[f],f)};return u}parseArrayData(t,e,n,i){const{xScale:s,yScale:r}=t,o=new Array(i);let a,c,l,u;for(a=0,c=i;a<c;++a)l=a+n,u=e[l],o[a]={x:s.parse(u[0],l),y:r.parse(u[1],l)};return o}parseObjectData(t,e,n,i){const{xScale:s,yScale:r}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,c=new Array(i);let l,u,h,d;for(l=0,u=i;l<u;++l)h=l+n,d=e[h],c[l]={x:s.parse(S(d,o),h),y:r.parse(S(d,a),h)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,s=this._cachedMeta,r=e[t.axis];return bn({keys:vn(i,!0),values:e._stacks[t.axis]},r,s.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const s=n[e.axis];let r=null===s?NaN:s;const o=i&&n._stacks[e.axis];i&&o&&(i.values=o,r=bn(i,s,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,s=n._sorted&&t===n.iScale,r=i.length,o=this._getOtherScale(t),a=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:vn(n,!0),values:null})(e,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:l,max:u}=function(t){const{min:e,max:n,minDefined:i,maxDefined:s}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}(o);let h,f;function p(){f=i[h];const e=f[o.axis];return!d(f[t.axis])||l>e||u<e}for(h=0;h<r&&(p()||(this.updateRangeFromParsed(c,t,f,a),!s));++h);if(s)for(h=r-1;h>=0;--h)if(!p()){this.updateRangeFromParsed(c,t,f,a);break}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,s,r;for(i=0,s=e.length;i<s;++i)r=e[i][t.axis],d(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,s=this.getParsed(t);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,s;return h(t)?(e=t.top,n=t.right,i=t.bottom,s=t.left):e=n=i=s=t,{top:e,right:n,bottom:i,left:s,disabled:!1===t}}(p(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=yn(t,n),s=yn(e,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],s=e.chartArea,r=[],o=this._drawStart||0,a=this._drawCount||i.length-o,c=this.options.drawActiveElementsOnTop;let l;for(n.dataset&&n.dataset.draw(t,s,o,a),l=o;l<o+a;++l){const e=i[l];e.hidden||(e.active&&c?r.push(e):e.draw(t,s))}for(l=0;l<r.length;++l)r[l].draw(t,s)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];s=e.$context||(e.$context=function(t,e,n){return de(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),s.parsed=this.getParsed(t),s.raw=i.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=function(t,e){return de(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!e,s.mode=n,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i="active"===e,s=this._cachedDataOpts,r=t+"-"+e,o=s[r],a=this.enableOptionSharing&&A(n);if(o)return kn(o,a);const c=this.chart.config,l=c.datasetElementScopeKeys(this._type,t),u=i?[`${t}Hover`,"hover",t,""]:[t,""],h=c.getOptionScopes(this.getDataset(),l),d=Object.keys(zt.elements[t]),f=c.resolveNamedOptions(h,d,(()=>this.getContext(n,i)),u);return f.$shared&&(f.$shared=a,s[r]=Object.freeze(kn(f,a))),f}_resolveAnimations(t,e,n){const i=this.chart,s=this._cachedDataOpts,r=`animation-${e}`,o=s[r];if(o)return o;let a;if(!1!==i.options.animation){const i=this.chart.config,s=i.datasetAnimationScopeKeys(this._type,e),r=i.getOptionScopes(this.getDataset(),s);a=i.createResolver(r,this.getContext(t,n,e))}const c=new mn(i,a&&a.animations);return a&&a._cacheable&&(s[r]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Sn(t)||this.chart._animationsDisabled}updateElement(t,e,n,i){Sn(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!Sn(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const s=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[t,e,n]of this._syncList)this[t](e,n);this._syncList=[];const i=n.length,s=e.length,r=Math.min(s,i);r&&this.parse(0,r),s>i?this._insertElements(i,s-i,t):s<i&&this._removeElements(s,i-s)}_insertElements(t,e,n=!0){const i=this._cachedMeta,s=i.data,r=t+e;let o;const a=t=>{for(t.length+=e,o=t.length-1;o>=r;o--)t[o]=t[o-e]};for(a(s),o=t;o<r;++o)s[o]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(t,e),n&&this.updateElements(s,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&En(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Cn(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,s=n.length;e<s;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=ve(i.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let i,s,r,o,a=e._length;const c=()=>{32767!==r&&-32768!==r&&(A(o)&&(a=Math.min(a,Math.abs(r-o)||a)),o=r)};for(i=0,s=n.length;i<s;++i)r=e.getPixelForValue(n[i]),c();for(o=void 0,i=0,s=e.ticks.length;i<s;++i)r=e.getPixelForTick(i),c();return a}function Dn(t,e,n,i){return u(t)?function(t,e,n,i){const s=n.parse(t[0],i),r=n.parse(t[1],i),o=Math.min(s,r),a=Math.max(s,r);let c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[n.axis]=l,e._custom={barStart:c,barEnd:l,start:s,end:r,min:o,max:a}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function Nn(t,e,n,i){const s=t.iScale,r=t.vScale,o=s.getLabels(),a=s===r,c=[];let l,u,h,d;for(l=n,u=n+i;l<u;++l)d=e[l],h={},h[s.axis]=a||s.parse(o[l],l),c.push(Dn(d,h,r,l));return c}function On(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function Mn(t,e,n,i){let s=e.borderSkipped;const r={};if(!s)return void(t.borderSkipped=r);const{start:o,end:a,reverse:c,top:l,bottom:u}=function(t){let e,n,i,s,r;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:n,end:i,reverse:e,top:s,bottom:r}}(t);"middle"===s&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?s=l:(n._bottom||0)===i?s=u:(r[Ln(u,o,a,c)]=!0,s=l)),r[Ln(s,o,a,c)]=!0,t.borderSkipped=r}function Ln(t,e,n,i){var s,r,o;return i?(o=n,t=Pn(t=(s=t)===(r=e)?o:s===o?r:s,n,e)):t=Pn(t,e,n),t}function Pn(t,e,n){return"start"===t?e:"end"===t?n:t}function Rn(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}An.defaults={},An.prototype.datasetElementType=null,An.prototype.dataElementType=null;class Fn extends An{parsePrimitiveData(t,e,n,i){return Nn(t,e,n,i)}parseArrayData(t,e,n,i){return Nn(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:s,vScale:r}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,c="x"===s.axis?o:a,l="x"===r.axis?o:a,u=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=e[h],f={},f[s.axis]=s.parse(S(p,c),h),u.push(Dn(S(p,l),f,r,h));return u}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const s=n._custom;s&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,s=this.getParsed(t),r=s._custom,o=On(r)?"["+r.start+", "+r.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+n.getLabelForValue(s[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const s="reset"===i,{index:r,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),c=o.isHorizontal(),u=this._getRuler(),h=this.resolveDataElementOptions(e,i),d=this.getSharedOptions(h),f=this.includeOptions(i,d);this.updateSharedOptions(d,i,h);for(let h=e;h<e+n;h++){const e=this.getParsed(h),n=s||l(e[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(h),p=this._calculateBarIndexPixels(h,u),g=(e._stacks||{})[o.axis],m={horizontal:c,base:n.base,enableBorderRadius:!g||On(e._custom)||r===g._top||r===g._bottom,x:c?n.head:p.center,y:c?p.center:n.head,height:c?p.size:Math.abs(n.size),width:c?Math.abs(n.size):p.size};f&&(m.options=d||this.resolveDataElementOptions(h,t[h].active?"active":i));const y=m.options||t[h].options;Mn(m,y,g,r),Rn(m,y,u.ratio),this.updateElement(t[h],h,m,i)}}_getStacks(t,e){const n=this._cachedMeta.iScale,i=n.getMatchingVisibleMetas(this._type),s=n.options.stacked,r=i.length,o=[];let a,c;for(a=0;a<r;++a)if(c=i[a],c.controller.options.grouped){if(void 0!==e){const t=c.controller.getParsed(e)[c.controller._cachedMeta.vScale.axis];if(l(t)||isNaN(t))continue}if((!1===s||-1===o.indexOf(c.stack)||void 0===s&&void 0===c.stack)&&o.push(c.stack),c.index===t)break}return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),s=void 0!==e?i.indexOf(e):-1;return-1===s?i.length-1:s}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let s,r;for(s=0,r=e.data.length;s<r;++s)i.push(n.getPixelForValue(this.getParsed(s)[n.axis],s));const o=t.barThickness;return{min:o||Cn(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n},options:{base:i,minBarLength:s}}=this,r=i||0,o=this.getParsed(t),a=o._custom,c=On(a);let u,h,d=o[e.axis],f=0,p=n?this.applyStack(e,o,n):d;p!==d&&(f=p-d,p=d),c&&(d=a.barStart,p=a.barEnd-a.barStart,0!==d&&U(d)!==U(a.barEnd)&&(f=0),f+=d);const g=l(i)||c?f:i;let m=e.getPixelForValue(g);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<s){h=function(t,e,n){return 0!==t?U(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(h,e,r)*s,d===r&&(m-=h/2);const t=e.getPixelForDecimal(0),n=e.getPixelForDecimal(1),i=Math.min(t,n),o=Math.max(t,n);m=Math.max(Math.min(m,o),i),u=m+h}if(m===e.getPixelForValue(r)){const t=U(h)*e.getLineWidthForValue(r)/2;m+=t,h-=t}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(t,e){const n=e.scale,i=this.options,s=i.skipNull,r=p(i.maxBarThickness,1/0);let o,a;if(e.grouped){const n=s?this._getStackCount(t):e.stackCount,c="flex"===i.barThickness?function(t,e,n,i){const s=e.pixels,r=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const c=n.categoryPercentage;null===o&&(o=r-(null===a?e.end-e.start:a-r)),null===a&&(a=r+r-o);const l=r-(r-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/i,ratio:n.barPercentage,start:l}}(t,e,i,n):function(t,e,n,i){const s=n.barThickness;let r,o;return l(s)?(r=e.min*n.categoryPercentage,o=n.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[t]-r/2}}(t,e,i,n),u=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);o=c.start+c.chunk*u+c.chunk/2,a=Math.min(r,c.chunk*c.ratio)}else o=n.getPixelForValue(this.getParsed(t)[n.axis],t),a=Math.min(r,e.min*e.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let s=0;for(;s<i;++s)null!==this.getParsed(s)[e.axis]&&n[s].draw(this._ctx)}}Fn.id="bar",Fn.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},Fn.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class Vn extends An{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const s=super.parsePrimitiveData(t,e,n,i);for(let t=0;t<s.length;t++)s[t]._custom=this.resolveDataElementOptions(t+n).radius;return s}parseArrayData(t,e,n,i){const s=super.parseArrayData(t,e,n,i);for(let t=0;t<s.length;t++){const i=e[n+t];s[t]._custom=p(i[2],this.resolveDataElementOptions(t+n).radius)}return s}parseObjectData(t,e,n,i){const s=super.parseObjectData(t,e,n,i);for(let t=0;t<s.length;t++){const i=e[n+t];s[t]._custom=p(i&&i.r&&+i.r,this.resolveDataElementOptions(t+n).radius)}return s}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,{xScale:n,yScale:i}=e,s=this.getParsed(t),r=n.getLabelForValue(s.x),o=i.getLabelForValue(s.y),a=s._custom;return{label:e.label,value:"("+r+", "+o+(a?", "+a:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const s="reset"===i,{iScale:r,vScale:o}=this._cachedMeta,a=this.resolveDataElementOptions(e,i),c=this.getSharedOptions(a),l=this.includeOptions(i,c),u=r.axis,h=o.axis;for(let a=e;a<e+n;a++){const e=t[a],n=!s&&this.getParsed(a),c={},d=c[u]=s?r.getPixelForDecimal(.5):r.getPixelForValue(n[u]),f=c[h]=s?o.getBasePixel():o.getPixelForValue(n[h]);c.skip=isNaN(d)||isNaN(f),l&&(c.options=this.resolveDataElementOptions(a,e.active?"active":i),s&&(c.options.radius=0)),this.updateElement(e,a,c,i)}this.updateSharedOptions(c,i,a)}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return"active"!==e&&(i.radius=0),i.radius+=p(n&&n._custom,s),i}}Vn.id="bubble",Vn.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},Vn.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class jn extends An{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let s,r,o=t=>+n[t];if(h(n[t])){const{key:t="value"}=this._parsing;o=e=>+S(n[e],t)}for(s=t,r=t+e;s<r;++s)i._parsed[s]=o(s)}}_getRotation(){return $(this.options.rotation-90)}_getCircumference(){return $(this.options.circumference)}_getRotationExtents(){let t=O,e=-O;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){const i=this.chart.getDatasetMeta(n).controller,s=i._getRotation(),r=i._getCircumference();t=Math.min(t,s),e=Math.max(e,s+r)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,s=i.data,r=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-r)/2,0),a=Math.min((l=o,"string"==typeof(c=this.options.cutout)&&c.endsWith("%")?parseFloat(c)/100:c/l),1);var c,l;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:y}=function(t,e,n){let i=1,s=1,r=0,o=0;if(e<O){const a=t,c=a+e,l=Math.cos(a),u=Math.sin(a),h=Math.cos(c),d=Math.sin(c),f=(t,e,i)=>J(t,a,c,!0)?1:Math.max(e,e*n,i,i*n),p=(t,e,i)=>J(t,a,c,!0)?-1:Math.min(e,e*n,i,i*n),g=f(0,l,h),m=f(R,u,d),y=p(N,l,h),v=p(N+R,u,d);i=(g-y)/2,s=(m-v)/2,r=-(g+y)/2,o=-(m+v)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}(d,h,a),v=(n.width-r)/f,b=(n.height-r)/p,_=Math.max(Math.min(v,b)/2,0),w=g(this.options.radius,_),x=(w-Math.max(w*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*w,this.offsetY=y*w,i.total=this.calculateTotal(),this.outerRadius=w-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*u,0),this.updateElements(s,0,s.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,s=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*s/O)}updateElements(t,e,n,i){const s="reset"===i,r=this.chart,o=r.chartArea,a=r.options.animation,c=(o.left+o.right)/2,l=(o.top+o.bottom)/2,u=s&&a.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,f=this.resolveDataElementOptions(e,i),p=this.getSharedOptions(f),g=this.includeOptions(i,p);let m,y=this._getRotation();for(m=0;m<e;++m)y+=this._circumference(m,s);for(m=e;m<e+n;++m){const e=this._circumference(m,s),n=t[m],r={x:c+this.offsetX,y:l+this.offsetY,startAngle:y,endAngle:y+e,circumference:e,outerRadius:d,innerRadius:h};g&&(r.options=p||this.resolveDataElementOptions(m,n.active?"active":i)),y+=e,this.updateElement(n,m,r,i)}this.updateSharedOptions(p,i,f)}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const s=t._parsed[n];null===s||isNaN(s)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(s))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?O*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],s=tn(e._parsed[t],n.options.locale);return{label:i[t]||"",value:s}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,s,r,o,a;if(!t)for(i=0,s=n.data.datasets.length;i<s;++i)if(n.isDatasetVisible(i)){r=n.getDatasetMeta(i),t=r.data,o=r.controller;break}if(!t)return 0;for(i=0,s=t.length;i<s;++i)a=o.resolveDataElementOptions(i),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(p(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}jn.id="doughnut",jn.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},jn.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},jn.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map(((e,i)=>{const s=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const n=": "+t.formattedValue;return u(e)?(e=e.slice(),e[0]+=n):e+=n,e}}}}};class Un extends An{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:s}=e,r=this.chart._animationsDisabled;let{start:o,count:a}=function(t,e,n){const i=e.length;let s=0,r=i;if(t._sorted){const{iScale:o,_parsed:a}=t,c=o.axis,{min:l,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(s=Z(Math.min(pe(a,o.axis,l).lo,n?i:pe(e,c,o.getPixelForValue(l)).lo),0,i-1)),r=d?Z(Math.max(pe(a,o.axis,u).hi+1,n?0:pe(e,c,o.getPixelForValue(u)).hi+1),s,i)-s:i-s}return{start:s,count:r}}(e,i,r);this._drawStart=o,this._drawCount=a,function(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}(e)&&(o=0,a=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:c},t),this.updateElements(i,o,a,t)}updateElements(t,e,n,i){const s="reset"===i,{iScale:r,vScale:o,_stacked:a,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(e,i),h=this.getSharedOptions(u),d=this.includeOptions(i,h),f=r.axis,p=o.axis,{spanGaps:g,segment:m}=this.options,y=q(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||"none"===i;let b=e>0&&this.getParsed(e-1);for(let u=e;u<e+n;++u){const e=t[u],n=this.getParsed(u),g=v?e:{},_=l(n[p]),w=g[f]=r.getPixelForValue(n[f],u),x=g[p]=s||_?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[p],u);g.skip=isNaN(w)||isNaN(x)||_,g.stop=u>0&&Math.abs(n[f]-b[f])>y,m&&(g.parsed=n,g.raw=c.data[u]),d&&(g.options=h||this.resolveDataElementOptions(u,e.active?"active":i)),v||this.updateElement(e,u,g,i),b=n}this.updateSharedOptions(h,i,u)}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const s=i[0].size(this.resolveDataElementOptions(0)),r=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,s,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Un.id="line",Un.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},Un.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class Bn extends An{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],s=tn(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:s}}parseObjectData(t,e,n,i){return Oe.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<e.min&&(e.min=i),i>e.max&&(e.max=i))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),s=Math.max(i/2,0),r=(s-Math.max(n.cutoutPercentage?s/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=s-r*this.index,this.innerRadius=this.outerRadius-r}updateElements(t,e,n,i){const s="reset"===i,r=this.chart,o=r.options.animation,a=this._cachedMeta.rScale,c=a.xCenter,l=a.yCenter,u=a.getIndexAngle(0)-.5*N;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<e;++h)d+=this._computeAngle(h,i,f);for(h=e;h<e+n;h++){const e=t[h];let n=d,p=d+this._computeAngle(h,i,f),g=r.getDataVisibility(h)?a.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,s&&(o.animateScale&&(g=0),o.animateRotate&&(n=p=u));const m={x:c,y:l,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,e.active?"active":i)};this.updateElement(e,h,m,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++})),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?$(this.resolveDataElementOptions(t,e).angle||n):0}}Bn.id="polarArea",Bn.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},Bn.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map(((e,i)=>{const s=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class qn extends jn{}qn.id="pie",qn.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class zn extends An{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return Oe.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],s=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const r={_loop:!0,_fullLoop:s.length===i.length,options:e};this.updateElement(n,void 0,r,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const s=this._cachedMeta.rScale,r="reset"===i;for(let o=e;o<e+n;o++){const e=t[o],n=this.resolveDataElementOptions(o,e.active?"active":i),a=s.getPointPositionForValue(o,this.getParsed(o).r),c=r?s.xCenter:a.x,l=r?s.yCenter:a.y,u={x:c,y:l,angle:a.angle,skip:isNaN(c)||isNaN(l),options:n};this.updateElement(e,o,u,i)}}}zn.id="radar",zn.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},zn.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class Hn extends Un{}Hn.id="scatter",Hn.defaults={showLine:!1,fill:!1},Hn.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var $n=Object.freeze({__proto__:null,BarController:Fn,BubbleController:Vn,DoughnutController:jn,LineController:Un,PolarAreaController:Bn,PieController:qn,RadarController:zn,ScatterController:Hn});function Wn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Kn{constructor(t){this.options=t||{}}formats(){return Wn()}parse(t,e){return Wn()}format(t,e){return Wn()}add(t,e,n){return Wn()}diff(t,e,n){return Wn()}startOf(t,e,n){return Wn()}endOf(t,e){return Wn()}}Kn.override=function(t){Object.assign(Kn.prototype,t)};var Gn={_date:Kn};function Yn(t,e,n,i){const{controller:s,data:r,_sorted:o}=t,a=s._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&o&&r.length){const t=a._reversePixels?ge:pe;if(!i)return t(r,e,n);if(s._sharedOptions){const i=r[0],s="function"==typeof i.getRange&&i.getRange(e);if(s){const i=t(r,e,n-s),o=t(r,e,n+s);return{lo:i.lo,hi:o.hi}}}}return{lo:0,hi:r.length-1}}function Xn(t,e,n,i,s){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let t=0,n=r.length;t<n;++t){const{index:n,data:a}=r[t],{lo:c,hi:l}=Yn(r[t],e,o,s);for(let t=c;t<=l;++t){const e=a[t];e.skip||i(e,n,t)}}}function Qn(t,e,n,i,s){const r=[];return s||t.isPointInArea(e)?(Xn(t,n,e,(function(n,o,a){(s||Yt(n,t.chartArea,0))&&n.inRange(e.x,e.y,i)&&r.push({element:n,datasetIndex:o,index:a})}),!0),r):r}function Jn(t,e,n,i,s,r){return r||t.isPointInArea(e)?"r"!==n||i?function(t,e,n,i,s,r){let o=[];const a=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const s=e?Math.abs(t.x-i.x):0,r=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(r,2))}}(n);let c=Number.POSITIVE_INFINITY;return Xn(t,n,e,(function(n,l,u){const h=n.inRange(e.x,e.y,s);if(i&&!h)return;const d=n.getCenterPoint(s);if(!r&&!t.isPointInArea(d)&&!h)return;const f=a(e,d);f<c?(o=[{element:n,datasetIndex:l,index:u}],c=f):f===c&&o.push({element:n,datasetIndex:l,index:u})})),o}(t,e,n,i,s,r):function(t,e,n,i){let s=[];return Xn(t,n,e,(function(t,n,r){const{startAngle:o,endAngle:a}=t.getProps(["startAngle","endAngle"],i),{angle:c}=G(t,{x:e.x,y:e.y});J(c,o,a)&&s.push({element:t,datasetIndex:n,index:r})})),s}(t,e,n,s):[]}function Zn(t,e,n,i,s){const r=[],o="x"===n?"inXRange":"inYRange";let a=!1;return Xn(t,n,e,((t,i,c)=>{t[o](e[n],s)&&(r.push({element:t,datasetIndex:i,index:c}),a=a||t.inRange(e.x,e.y,s))})),i&&!a?[]:r}var ti={evaluateInteractionItems:Xn,modes:{index(t,e,n,i){const s=$e(e,t),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Qn(t,s,r,i,o):Jn(t,s,r,!1,i,o),c=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&c.push({element:n,datasetIndex:t.index,index:e})})),c):[]},dataset(t,e,n,i){const s=$e(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Qn(t,s,r,i,o):Jn(t,s,r,!1,i,o);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point:(t,e,n,i)=>Qn(t,$e(e,t),n.axis||"xy",i,n.includeInvisible||!1),nearest(t,e,n,i){const s=$e(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return Jn(t,s,r,n.intersect,i,o)},x:(t,e,n,i)=>Zn(t,$e(e,t),"x",n.intersect,i),y:(t,e,n,i)=>Zn(t,$e(e,t),"y",n.intersect,i)}};const ei=["left","top","right","bottom"];function ni(t,e){return t.filter((t=>t.pos===e))}function ii(t,e){return t.filter((t=>-1===ei.indexOf(t.pos)&&t.box.axis===e))}function si(t,e){return t.sort(((t,n)=>{const i=e?n:t,s=e?t:n;return i.weight===s.weight?i.index-s.index:i.weight-s.weight}))}function ri(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function oi(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function ai(t,e,n,i){const{pos:s,box:r}=n,o=t.maxPadding;if(!h(s)){n.size&&(t[s]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?r.height:r.width),n.size=e.size/e.count,t[s]+=n.size}r.getPadding&&oi(o,r.getPadding());const a=Math.max(0,e.outerWidth-ri(o,t,"left","right")),c=Math.max(0,e.outerHeight-ri(o,t,"top","bottom")),l=a!==t.w,u=c!==t.h;return t.w=a,t.h=c,n.horizontal?{same:l,other:u}:{same:u,other:l}}function ci(t,e){const n=e.maxPadding;return function(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{i[t]=Math.max(e[t],n[t])})),i}(t?["left","right"]:["top","bottom"])}function li(t,e,n,i){const s=[];let r,o,a,c,l,u;for(r=0,o=t.length,l=0;r<o;++r){a=t[r],c=a.box,c.update(a.width||e.w,a.height||e.h,ci(a.horizontal,e));const{same:o,other:h}=ai(e,n,a,i);l|=o&&s.length,u=u||h,c.fullSize||s.push(a)}return l&&li(s,e,n,i)||u}function ui(t,e,n,i,s){t.top=n,t.left=e,t.right=e+i,t.bottom=n+s,t.width=i,t.height=s}function hi(t,e,n,i){const s=n.padding;let{x:r,y:o}=e;for(const a of t){const t=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},l=a.stackWeight/c.weight||1;if(a.horizontal){const i=e.w*l,r=c.size||t.height;A(c.start)&&(o=c.start),t.fullSize?ui(t,s.left,o,n.outerWidth-s.right-s.left,r):ui(t,e.left+c.placed,o,i,r),c.start=o,c.placed+=i,o=t.bottom}else{const i=e.h*l,o=c.size||t.width;A(c.start)&&(r=c.start),t.fullSize?ui(t,r,s.top,o,n.outerHeight-s.bottom-s.top):ui(t,r,e.top+c.placed,o,i),c.start=r,c.placed+=i,r=t.right}}e.x=r,e.y=o}zt.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var di={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const s=le(t.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=function(t){const e=function(t){const e=[];let n,i,s,r,o,a;for(n=0,i=(t||[]).length;n<i;++n)s=t[n],({position:r,options:{stack:o,stackWeight:a=1}}=s),e.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}(t),n=si(e.filter((t=>t.box.fullSize)),!0),i=si(ni(e,"left"),!0),s=si(ni(e,"right")),r=si(ni(e,"top"),!0),o=si(ni(e,"bottom")),a=ii(e,"x"),c=ii(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(c).concat(o).concat(a),chartArea:ni(e,"chartArea"),vertical:i.concat(s).concat(c),horizontal:r.concat(o).concat(a)}}(t.boxes),c=a.vertical,l=a.horizontal;y(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const u=c.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},s);oi(d,le(i));const f=Object.assign({maxPadding:d,w:r,h:o,x:s.left,y:s.top},s),p=function(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:s}=n;if(!t||!ei.includes(i))continue;const r=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=s}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:o}=a.box,c=n[a.stack],l=c&&a.stackWeight/c.weight;a.horizontal?(a.width=l?l*i:o&&e.availableWidth,a.height=s):(a.width=i,a.height=l?l*s:o&&e.availableHeight)}return n}(c.concat(l),h);li(a.fullSize,f,h,p),li(c,f,h,p),li(l,f,h,p)&&li(c,f,h,p),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),hi(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,hi(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},y(a.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class fi{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class pi extends fi{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const gi={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},mi=t=>null===t||""===t,yi=!!Ge&&{passive:!0};function vi(t,e,n){t.canvas.removeEventListener(e,n,yi)}function bi(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function _i(t,e,n){const i=t.canvas,s=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||bi(n.addedNodes,i),e=e&&!bi(n.removedNodes,i);e&&n()}));return s.observe(document,{childList:!0,subtree:!0}),s}function wi(t,e,n){const i=t.canvas,s=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||bi(n.removedNodes,i),e=e&&!bi(n.addedNodes,i);e&&n()}));return s.observe(document,{childList:!0,subtree:!0}),s}const xi=new Map;let Ii=0;function Ti(){const t=window.devicePixelRatio;t!==Ii&&(Ii=t,xi.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function Ei(t,e,n){const i=t.canvas,r=i&&Ue(i);if(!r)return;const o=s(((t,e)=>{const i=r.clientWidth;n(t,e),i<r.clientWidth&&n()}),window),a=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||o(n,i)}));return a.observe(r),function(t,e){xi.size||window.addEventListener("resize",Ti),xi.set(t,e)}(t,o),a}function Si(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){xi.delete(t),xi.size||window.removeEventListener("resize",Ti)}(t)}function ki(t,e,n){const i=t.canvas,r=s((e=>{null!==t.ctx&&n(function(t,e){const n=gi[t.type]||t.type,{x:i,y:s}=$e(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==s?s:null}}(e,t))}),t,(t=>{const e=t[0];return[e,e.offsetX,e.offsetY]}));return function(t,e,n){t.addEventListener(e,n,yi)}(i,e,r),r}class Ai extends fi{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),s=t.getAttribute("width");if(t.$chartjs={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",mi(s)){const e=Ye(t,"width");void 0!==e&&(t.width=e)}if(mi(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=Ye(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e.$chartjs)return!1;const n=e.$chartjs.initial;["height","width"].forEach((t=>{const i=n[t];l(i)?e.removeAttribute(t):e.setAttribute(t,i)}));const i=n.style||{};return Object.keys(i).forEach((t=>{e.style[t]=i[t]})),e.width=e.width,delete e.$chartjs,!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),s={attach:_i,detach:wi,resize:Ei}[e]||ki;i[e]=s(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];i&&(({attach:Si,detach:Si,resize:Si}[e]||vi)(t,e,i),n[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return function(t,e,n,i){const s=qe(t),r=He(s,"margin"),o=Be(s.maxWidth,t,"clientWidth")||L,a=Be(s.maxHeight,t,"clientHeight")||L,c=function(t,e,n){let i,s;if(void 0===e||void 0===n){const r=Ue(t);if(r){const t=r.getBoundingClientRect(),o=qe(r),a=He(o,"border","width"),c=He(o,"padding");e=t.width-c.width-a.width,n=t.height-c.height-a.height,i=Be(o.maxWidth,r,"clientWidth"),s=Be(o.maxHeight,r,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||L,maxHeight:s||L}}(t,e,n);let{width:l,height:u}=c;if("content-box"===s.boxSizing){const t=He(s,"border","width"),e=He(s,"padding");l-=e.width+t.width,u-=e.height+t.height}return l=Math.max(0,l-r.width),u=Math.max(0,i?Math.floor(l/i):u-r.height),l=We(Math.min(l,o,c.maxWidth)),u=We(Math.min(u,a,c.maxHeight)),l&&!u&&(u=We(l/2)),{width:l,height:u}}(t,e,n,i)}isAttached(t){const e=Ue(t);return!(!e||!e.isConnected)}}function Ci(t){return!je()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?pi:Ai}class Di{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return q(this.x)&&q(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach((t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),i}}Di.defaults={},Di.defaultRoutes=void 0;const Ni={values:t=>u(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let s,r=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(s="scientific"),r=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}(t,n)}const o=j(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),tn(t,i,c)},logarithmic(t,e,n){if(0===t)return"0";const i=t/Math.pow(10,Math.floor(j(t)));return 1===i||2===i||5===i?Ni.numeric.call(this,t,e,n):""}};var Oi={formatters:Ni};function Mi(t,e,n,i,s){const r=p(i,0),o=Math.min(p(s,t.length),t.length);let a,c,l,u=0;for(n=Math.ceil(n),s&&(a=s-i,n=a/Math.floor(a/n)),l=r;l<0;)u++,l=Math.round(r+u*n);for(c=Math.max(r,0);c<o;c++)c===l&&(e.push(t[c]),u++,l=Math.round(r+u*n))}zt.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Oi.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),zt.route("scale.ticks","color","","color"),zt.route("scale.grid","color","","borderColor"),zt.route("scale.grid","borderColor","","borderColor"),zt.route("scale.title","color","","color"),zt.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),zt.describe("scales",{_fallback:"scale"}),zt.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const Li=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n;function Pi(t,e){const n=[],i=t.length/e,s=t.length;let r=0;for(;r<s;r+=i)n.push(t[Math.floor(r)]);return n}function Ri(t,e,n){const i=t.ticks.length,s=Math.min(e,i-1),r=t._startPixel,o=t._endPixel,a=1e-6;let c,l=t.getPixelForTick(s);if(!(n&&(c=1===i?Math.max(l-r,o-l):0===e?(t.getPixelForTick(1)-l)/2:(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function Fi(t){return t.drawTicks?t.tickLength:0}function Vi(t,e){if(!t.display)return 0;const n=ue(t.font,e),i=le(t.padding);return(u(t.text)?t.text.length:1)*n.lineHeight+i.height}function ji(t,e,n){let i=r(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class Ui extends Di{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=f(t,Number.POSITIVE_INFINITY),e=f(e,Number.NEGATIVE_INFINITY),n=f(n,Number.POSITIVE_INFINITY),i=f(i,Number.NEGATIVE_INFINITY),{min:f(t,n),max:f(e,i),minDefined:d(t),maxDefined:d(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds();if(s&&r)return{min:n,max:i};const o=this.getMatchingVisibleMetas();for(let a=0,c=o.length;a<c;++a)e=o[a].controller.getMinMax(this,t),s||(n=Math.min(n,e.min)),r||(i=Math.max(i,e.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:f(n,f(i,n)),max:f(i,f(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){m(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:s,ticks:r}=this.options,o=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:i,max:s}=t,r=g(e,(s-i)/2),o=(t,e)=>n&&0===t?0:t+e;return{min:o(i,-Math.abs(r)),max:o(s,r)}}(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?Pi(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=function(t,e){const n=t.options.ticks,i=n.maxTicksLimit||function(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(i,s))}(t),s=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],r=s.length,o=s[0],a=s[r-1],c=[];if(r>i)return function(t,e,n,i){let s,r=0,o=n[0];for(i=Math.ceil(i),s=0;s<t.length;s++)s===o&&(e.push(t[s]),r++,o=n[r*i])}(e,c,s,r/i),c;const u=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),s=e.length/n;if(!i)return Math.max(s,1);const r=function(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i==0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}(i);for(let t=0,e=r.length-1;t<e;t++){const e=r[t];if(e>s)return e}return Math.max(s,1)}(s,e,i);if(r>0){let t,n;const i=r>1?Math.round((a-o)/(r-1)):null;for(Mi(e,c,u,l(i)?0:o-i,o),t=0,n=r-1;t<n;t++)Mi(e,c,u,s[t],s[t+1]);return Mi(e,c,u,a,l(i)?e.length:a+i),c}return Mi(e,c,u),c}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){m(this.options.afterUpdate,[this])}beforeSetDimensions(){m(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){m(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),m(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){m(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,s;for(n=0,i=t.length;n<i;n++)s=t[n],s.label=m(e.callback,[s.value,n,t],this)}afterTickToLabelConversion(){m(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){m(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=this.ticks.length,i=e.minRotation||0,s=e.maxRotation;let r,o,a,c=i;if(!this._isVisible()||!e.display||i>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const l=this._getLabelSizes(),u=l.widest.width,h=l.highest.height,d=Z(this.chart.width-u,0,this.maxWidth);r=t.offset?this.maxWidth/n:d/(n-1),u+6>r&&(r=d/(n-(t.offset?.5:1)),o=this.maxHeight-Fi(t.grid)-e.padding-Vi(t.title,this.chart.options.font),a=Math.sqrt(u*u+h*h),c=W(Math.min(Math.asin(Z((l.highest.height+6)/r,-1,1)),Math.asin(Z(o/a,-1,1))-Math.asin(Z(h/a,-1,1)))),c=Math.max(i,Math.min(s,c))),this.labelRotation=c}afterCalculateLabelRotation(){m(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){m(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:s}}=this,r=this._isVisible(),o=this.isHorizontal();if(r){const r=Vi(i,e.options.font);if(o?(t.width=this.maxWidth,t.height=Fi(s)+r):(t.height=this.maxHeight,t.width=Fi(s)+r),n.display&&this.ticks.length){const{first:e,last:i,widest:s,highest:r}=this._getLabelSizes(),a=2*n.padding,c=$(this.labelRotation),l=Math.cos(c),u=Math.sin(c);if(o){const e=n.mirror?0:u*s.width+l*r.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=n.mirror?0:l*s.width+u*r.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,i,u,l)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:s,padding:r},position:o}=this.options,a=0!==this.labelRotation,c="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,l=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;a?c?(u=i*t.width,h=n*e.height):(u=n*t.height,h=i*e.width):"start"===s?h=e.width:"end"===s?u=t.width:"inner"!==s&&(u=t.width/2,h=e.width/2),this.paddingLeft=Math.max((u-o+r)*this.width/(this.width-o),0),this.paddingRight=Math.max((h-l+r)*this.width/(this.width-l),0)}else{let n=e.height/2,i=t.height/2;"start"===s?(n=0,i=t.height):"end"===s&&(n=e.height,i=0),this.paddingTop=n+r,this.paddingBottom=i+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){m(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)l(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=Pi(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length)}return t}_computeLabelSizes(t,e){const{ctx:n,_longestTextCache:i}=this,s=[],r=[];let o,a,c,h,d,f,p,g,m,v,b,_=0,w=0;for(o=0;o<e;++o){if(h=t[o].label,d=this._resolveTickFontOptions(o),n.font=f=d.string,p=i[f]=i[f]||{data:{},gc:[]},g=d.lineHeight,m=v=0,l(h)||u(h)){if(u(h))for(a=0,c=h.length;a<c;++a)b=h[a],l(b)||u(b)||(m=Ht(n,p.data,p.gc,m,b),v+=g)}else m=Ht(n,p.data,p.gc,m,h),v=g;s.push(m),r.push(v),_=Math.max(m,_),w=Math.max(v,w)}!function(t,e){y(t,(t=>{const n=t.gc,i=n.length/2;let s;if(i>e){for(s=0;s<i;++s)delete t.data[n[s]];n.splice(0,i)}}))}(i,e);const x=s.indexOf(_),I=r.indexOf(w),T=t=>({width:s[t]||0,height:r[t]||0});return{first:T(0),last:T(e-1),widest:T(x),highest:T(I),widths:s,heights:r}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Z(this._alignToPixels?Wt(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return de(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=de(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=$(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),s=this._getLabelSizes(),r=t.autoSkipPadding||0,o=s?s.widest.width+r:0,a=s?s.highest.height+r:0;return this.isHorizontal()?a*n>o*i?o/n:a/i:a*i<o*n?a/n:o/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:s,position:r}=i,o=s.offset,a=this.isHorizontal(),c=this.ticks.length+(o?1:0),l=Fi(s),u=[],d=s.setContext(this.getContext()),f=d.drawBorder?d.borderWidth:0,g=f/2,m=function(t){return Wt(n,t,f)};let y,v,b,_,w,x,I,T,E,S,k,A;if("top"===r)y=m(this.bottom),x=this.bottom-l,T=y-g,S=m(t.top)+g,A=t.bottom;else if("bottom"===r)y=m(this.top),S=t.top,A=m(t.bottom)-g,x=y+g,T=this.top+l;else if("left"===r)y=m(this.right),w=this.right-l,I=y-g,E=m(t.left)+g,k=t.right;else if("right"===r)y=m(this.left),E=t.left,k=m(t.right)-g,w=y+g,I=this.left+l;else if("x"===e){if("center"===r)y=m((t.top+t.bottom)/2+.5);else if(h(r)){const t=Object.keys(r)[0],e=r[t];y=m(this.chart.scales[t].getPixelForValue(e))}S=t.top,A=t.bottom,x=y+g,T=x+l}else if("y"===e){if("center"===r)y=m((t.left+t.right)/2);else if(h(r)){const t=Object.keys(r)[0],e=r[t];y=m(this.chart.scales[t].getPixelForValue(e))}w=y-g,I=w-l,E=t.left,k=t.right}const C=p(i.ticks.maxTicksLimit,c),D=Math.max(1,Math.ceil(c/C));for(v=0;v<c;v+=D){const t=s.setContext(this.getContext(v)),e=t.lineWidth,i=t.color,r=s.borderDash||[],c=t.borderDashOffset,l=t.tickWidth,h=t.tickColor,d=t.tickBorderDash||[],f=t.tickBorderDashOffset;b=Ri(this,v,o),void 0!==b&&(_=Wt(n,b,e),a?w=I=E=k=_:x=T=S=A=_,u.push({tx1:w,ty1:x,tx2:I,ty2:T,x1:E,y1:S,x2:k,y2:A,width:e,color:i,borderDash:r,borderDashOffset:c,tickWidth:l,tickColor:h,tickBorderDash:d,tickBorderDashOffset:f}))}return this._ticksLength=c,this._borderValue=y,u}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:s}=n,r=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:c,padding:l,mirror:d}=s,f=Fi(n.grid),p=f+l,g=d?-l:p,m=-$(this.labelRotation),y=[];let v,b,_,w,x,I,T,E,S,k,A,C,D="middle";if("top"===i)I=this.bottom-g,T=this._getXAxisLabelAlignment();else if("bottom"===i)I=this.top+g,T=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(f);T=t.textAlign,x=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(f);T=t.textAlign,x=t.x}else if("x"===e){if("center"===i)I=(t.top+t.bottom)/2+p;else if(h(i)){const t=Object.keys(i)[0],e=i[t];I=this.chart.scales[t].getPixelForValue(e)+p}T=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)x=(t.left+t.right)/2-p;else if(h(i)){const t=Object.keys(i)[0],e=i[t];x=this.chart.scales[t].getPixelForValue(e)}T=this._getYAxisLabelAlignment(f).textAlign}"y"===e&&("start"===a?D="top":"end"===a&&(D="bottom"));const N=this._getLabelSizes();for(v=0,b=o.length;v<b;++v){_=o[v],w=_.label;const t=s.setContext(this.getContext(v));E=this.getPixelForTick(v)+s.labelOffset,S=this._resolveTickFontOptions(v),k=S.lineHeight,A=u(w)?w.length:1;const e=A/2,n=t.color,a=t.textStrokeColor,l=t.textStrokeWidth;let h,f=T;if(r?(x=E,"inner"===T&&(f=v===b-1?this.options.reverse?"left":"right":0===v?this.options.reverse?"right":"left":"center"),C="top"===i?"near"===c||0!==m?-A*k+k/2:"center"===c?-N.highest.height/2-e*k+k:-N.highest.height+k/2:"near"===c||0!==m?k/2:"center"===c?N.highest.height/2-e*k:N.highest.height-A*k,d&&(C*=-1)):(I=E,C=(1-A)*k/2),t.showLabelBackdrop){const e=le(t.backdropPadding),n=N.heights[v],i=N.widths[v];let s=I+C-e.top,r=x-e.left;switch(D){case"middle":s-=n/2;break;case"bottom":s-=n}switch(T){case"center":r-=i/2;break;case"right":r-=i}h={left:r,top:s,width:i+e.width,height:n+e.height,color:t.backdropColor}}y.push({rotation:m,label:w,font:S,color:n,strokeColor:a,strokeWidth:l,textOffset:C,textAlign:f,textBaseline:D,translation:[x,I],backdrop:h})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-$(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:s}}=this.options,r=t+s,o=this._getLabelSizes().widest.width;let a,c;return"left"===e?i?(c=this.right+s,"near"===n?a="left":"center"===n?(a="center",c+=o/2):(a="right",c+=o)):(c=this.right-r,"near"===n?a="right":"center"===n?(a="center",c-=o/2):(a="left",c=this.left)):"right"===e?i?(c=this.left+s,"near"===n?a="right":"center"===n?(a="center",c-=o/2):(a="left",c-=o)):(c=this.left+r,"near"===n?a="left":"center"===n?(a="center",c+=o/2):(a="right",c=this.right)):a="right",{textAlign:a,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:s,height:r}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,s,r),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex((e=>e.value===t));return n>=0?e.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,r;const o=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(s=0,r=i.length;s<r;++s){const t=i[s];e.drawOnChartArea&&o({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&o({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:n}}=this,i=n.setContext(this.getContext()),s=n.drawBorder?i.borderWidth:0;if(!s)return;const r=n.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let a,c,l,u;this.isHorizontal()?(a=Wt(t,this.left,s)-s/2,c=Wt(t,this.right,r)+r/2,l=u=o):(l=Wt(t,this.top,s)-s/2,u=Wt(t,this.bottom,r)+r/2,a=c=o),e.save(),e.lineWidth=i.borderWidth,e.strokeStyle=i.borderColor,e.beginPath(),e.moveTo(a,l),e.lineTo(c,u),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&Xt(e,n);const i=this._labelItems||(this._labelItems=this._computeLabelItems(t));let s,r;for(s=0,r=i.length;s<r;++s){const t=i[s],n=t.font,r=t.label;t.backdrop&&(e.fillStyle=t.backdrop.color,e.fillRect(t.backdrop.left,t.backdrop.top,t.backdrop.width,t.backdrop.height)),te(e,r,0,t.textOffset,n,t)}n&&Qt(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const s=ue(n.font),r=le(n.padding),a=n.align;let c=s.lineHeight/2;"bottom"===e||"center"===e||h(e)?(c+=r.bottom,u(n.text)&&(c+=s.lineHeight*(n.text.length-1))):c+=r.top;const{titleX:l,titleY:d,maxWidth:f,rotation:p}=function(t,e,n,i){const{top:s,left:r,bottom:a,right:c,chart:l}=t,{chartArea:u,scales:d}=l;let f,p,g,m=0;const y=a-s,v=c-r;if(t.isHorizontal()){if(p=o(i,r,c),h(n)){const t=Object.keys(n)[0],i=n[t];g=d[t].getPixelForValue(i)+y-e}else g="center"===n?(u.bottom+u.top)/2+y-e:Li(t,n,e);f=c-r}else{if(h(n)){const t=Object.keys(n)[0],i=n[t];p=d[t].getPixelForValue(i)-v+e}else p="center"===n?(u.left+u.right)/2-v+e:Li(t,n,e);g=o(i,a,s),m="left"===n?-R:R}return{titleX:p,titleY:g,maxWidth:f,rotation:m}}(this,c,e,a);te(t,n.text,0,0,s,{color:n.color,maxWidth:f,rotation:p,textAlign:ji(a,e,i),textBaseline:"middle",translation:[l,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=p(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===Ui.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let s,r;for(s=0,r=e.length;s<r;++s){const r=e[s];r[n]!==this.id||t&&r.type!==t||i.push(r)}return i}_resolveTickFontOptions(t){return ue(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Bi{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,s=t.id,r=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in i||(i[s]=t,function(t,e,n){const i=x(Object.create(null),[n?zt.get(n):{},zt.get(e),t.defaults]);zt.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((n=>{const i=n.split("."),s=i.pop(),r=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),c=o.join(".");zt.route(r,s,c,a)}))}(e,t.defaultRoutes),t.descriptors&&zt.describe(e,t.descriptors)}(t,r,n),this.override&&zt.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in zt[i]&&(delete zt[i][n],this.override&&delete jt[n])}}var qi=new class{constructor(){this.controllers=new Bi(An,"datasets",!0),this.elements=new Bi(Di,"elements"),this.plugins=new Bi(Object,"plugins"),this.scales=new Bi(Ui,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach((e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):y(e,(e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)}))}))}_exec(t,e,n){const i=k(t);m(n["before"+i],[],n),e[t](n),m(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}};class zi{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=i?this._descriptors(t).filter(i):this._descriptors(t),r=this._notify(s,t,e,n);return"afterDestroy"===e&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,e,n,i){i=i||{};for(const s of t){const t=s.plugin;if(!1===m(t[n],[e,i,s.options],t)&&i.cancelable)return!1}return!0}invalidate(){l(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=p(n.options&&n.options.plugins,{}),s=function(t){const e=[],n=Object.keys(qi.plugins.items);for(let t=0;t<n.length;t++)e.push(qi.getPlugin(n[t]));const i=t.plugins||[];for(let t=0;t<i.length;t++){const n=i[t];-1===e.indexOf(n)&&e.push(n)}return e}(n);return!1!==i||e?function(t,e,n,i){const s=[],r=t.getContext();for(let o=0;o<e.length;o++){const a=e[o],c=Hi(n[a.id],i);null!==c&&s.push({plugin:a,options:$i(t.config,a,c,r)})}return s}(t,s,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function Hi(t,e){return e||!1!==t?!0===t?{}:t:null}function $i(t,e,n,i){const s=t.pluginScopeKeys(e),r=t.getOptionScopes(n,s);return t.createResolver(r,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Wi(t,e){const n=zt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Ki(t,e){return"x"===t||"y"===t?t:e.axis||("top"===(n=e.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||t.charAt(0).toLowerCase();var n}function Gi(t){const e=t.options||(t.options={});e.plugins=p(e.plugins,{}),e.scales=function(t,e){const n=jt[t.type]||{scales:{}},i=e.scales||{},s=Wi(t.type,e),r=Object.create(null),o=Object.create(null);return Object.keys(i).forEach((t=>{const e=i[t];if(!h(e))return console.error(`Invalid scale configuration for scale: ${t}`);if(e._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const a=Ki(t,e),c=function(t,e){return t===e?"_index_":"_value_"}(a,s),l=n.scales||{};r[a]=r[a]||t,o[t]=I(Object.create(null),[{axis:a},e,l[a],l[c]])})),t.data.datasets.forEach((n=>{const s=n.type||t.type,a=n.indexAxis||Wi(s,e),c=(jt[s]||{}).scales||{};Object.keys(c).forEach((t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,a),s=n[e+"AxisID"]||r[e]||e;o[s]=o[s]||Object.create(null),I(o[s],[{axis:e},i[s],c[t]])}))})),Object.keys(o).forEach((t=>{const e=o[t];I(e,[zt.scales[e.type],zt.scale])})),o}(t,e)}function Yi(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Xi=new Map,Qi=new Set;function Ji(t,e){let n=Xi.get(t);return n||(n=e(),Xi.set(t,n),Qi.add(n)),n}const Zi=(t,e,n)=>{const i=S(e,n);void 0!==i&&t.add(i)};class ts{constructor(t){this._config=function(t){return(t=t||{}).data=Yi(t.data),Gi(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Yi(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Gi(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ji(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return Ji(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return Ji(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return Ji(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:s}=this,r=this._cachedScopes(t,n),o=r.get(e);if(o)return o;const a=new Set;e.forEach((e=>{t&&(a.add(t),e.forEach((e=>Zi(a,t,e)))),e.forEach((t=>Zi(a,i,t))),e.forEach((t=>Zi(a,jt[s]||{},t))),e.forEach((t=>Zi(a,zt,t))),e.forEach((t=>Zi(a,Ut,t)))}));const c=Array.from(a);return 0===c.length&&c.push(Object.create(null)),Qi.has(e)&&r.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,jt[e]||{},zt.datasets[e]||{},{type:e},zt,Ut]}resolveNamedOptions(t,e,n,i=[""]){const s={$shared:!0},{resolver:r,subPrefixes:o}=es(this._resolverCache,t,i);let a=r;(function(t,e){const{isScriptable:n,isIndexable:i}=we(t);for(const s of e){const e=n(s),r=i(s),o=(r||e)&&t[s];if(e&&(C(o)||ns(o))||r&&u(o))return!0}return!1})(r,e)&&(s.$shared=!1,a=_e(r,n=C(n)?n():n,this.createResolver(t,n,o)));for(const t of e)s[t]=a[t];return s}createResolver(t,e,n=[""],i){const{resolver:s}=es(this._resolverCache,t,n);return h(e)?_e(s,e,void 0,i):s}}function es(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const s=n.join();let r=i.get(s);return r||(r={resolver:be(e,n),subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},i.set(s,r)),r}const ns=t=>h(t)&&Object.getOwnPropertyNames(t).reduce(((e,n)=>e||C(t[n])),!1),is=["top","bottom","left","right","chartArea"];function ss(t,e){return"top"===t||"bottom"===t||-1===is.indexOf(t)&&"x"===e}function rs(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function os(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),m(n&&n.onComplete,[t],e)}function as(t){const e=t.chart,n=e.options.animation;m(n&&n.onProgress,[t],e)}function cs(t){return je()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const ls={},us=t=>{const e=cs(t);return Object.values(ls).filter((t=>t.canvas===e)).pop()};function hs(t,e,n){const i=Object.keys(t);for(const s of i){const i=+s;if(i>=e){const r=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=r)}}}class ds{constructor(t,e){const n=this.config=new ts(e),i=cs(t),s=us(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Ci(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,r.aspectRatio),a=o&&o.canvas,l=a&&a.height,u=a&&a.width;this.id=c(),this.ctx=o,this.canvas=a,this.width=u,this.height=l,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zi,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}((t=>this.update(t)),r.resizeDelay||0),this._dataChanges=[],ls[this.id]=this,o&&a?(hn.listen(this,"complete",os),hn.listen(this,"progress",as),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:s}=this;return l(t)?e&&s?s:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ke(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Kt(this.canvas,this.ctx),this}stop(){return hn.stop(this),this}resize(t,e){hn.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(i,t,e,s),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,Ke(this,o,!0)&&(this.notifyPlugins("resize",{size:r}),m(n.onResize,[this,r],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){y(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let s=[];e&&(s=s.concat(Object.keys(e).map((t=>{const n=e[t],i=Ki(t,n),s="r"===i,r="x"===i;return{options:n,dposition:s?"chartArea":r?"bottom":"left",dtype:s?"radialLinear":r?"category":"linear"}})))),y(s,(e=>{const s=e.options,r=s.id,o=Ki(r,s),a=p(s.type,e.dtype);void 0!==s.position&&ss(s.position,o)===ss(e.dposition)||(s.position=e.dposition),i[r]=!0;let c=null;r in n&&n[r].type===a?c=n[r]:(c=new(qi.getScale(a))({id:r,type:a,ctx:this.ctx,chart:this}),n[c.id]=c),c.init(s,t)})),y(i,((t,e)=>{t||delete n[e]})),y(n,(t=>{di.configure(this,t,t.options),di.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(rs("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let s=this.getDatasetMeta(n);const r=i.type||this.config.type;if(s.type&&s.type!==r&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=r,s.indexAxis=i.indexAxis||Wi(r,this.options),s.order=i.order||0,s.index=n,s.label=""+i.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const e=qi.getController(r),{datasetElementType:i,dataElementType:o}=zt.datasets[r];Object.assign(e.prototype,{dataElementType:qi.getElement(o),datasetElementType:i&&qi.getElement(i)}),s.controller=new e(this,n),t.push(s.controller)}}return this._updateMetasets(),t}_resetElements(){y(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),n=!i&&-1===s.indexOf(e);e.buildOrUpdateElements(n),r=Math.max(+e.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),i||y(s,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(rs("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){y(this.scales,(t=>{di.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);D(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:s}of e)hs(t,i,"_removeElements"===n?-s:s)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),i=n(0);for(let t=1;t<e;t++)if(!D(i,n(t)))return;return Array.from(i).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;di.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],y(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,C(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(hn.has(this)?this.attached&&!hn.running(this)&&hn.start(this):(this.draw(),os({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,s;for(i=0,s=e.length;i<s;++i){const s=e[i];t&&!s.visible||n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,i=!n.disabled,s=this.chartArea,r={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",r)&&(i&&Xt(e,{left:!1===n.left?0:s.left-n.left,right:!1===n.right?this.width:s.right+n.right,top:!1===n.top?0:s.top-n.top,bottom:!1===n.bottom?this.height:s.bottom+n.bottom}),t.controller.draw(),i&&Qt(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return Yt(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const s=ti.modes[e];return"function"==typeof s?s(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter((t=>t&&t._dataset===e)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=de(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",s=this.getDatasetMeta(t),r=s.controller._resolveAnimations(void 0,i);A(e)?(s.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),r.update(s,{visible:n}),this.update((e=>e.datasetIndex===t?i:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),hn.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Kt(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete ls[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};y(this.options.events,(t=>n(t,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},s=(t,e)=>{this.canvas&&this.resize(t,e)};let r;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",s),n("detach",r)};r=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),n("attach",o)},e.isAttached(this.canvas)?o():r()}unbindEvents(){y(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},y(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let s,r,o,a;for("dataset"===e&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),o=0,a=t.length;o<a;++o){r=t[o];const e=r&&this.getDatasetMeta(r.datasetIndex).controller;e&&e[i+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}));!v(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}_updateHoverStyles(t,e,n){const i=this.options.hover,s=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),r=s(e,t),o=n?t:s(t,e);r.length&&this.updateHoverStyle(r,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const s=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(s||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:s}=this,r=e,o=this._getActiveElements(t,i,n,r),a=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),c=function(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(t,this._lastEvent,n,a);n&&(this._lastEvent=null,m(s.onHover,[t,o,this],this),a&&m(s.onClick,[t,o,this],this));const l=!v(o,i);return(l||e)&&(this._active=o,this._updateHoverStyles(o,i,e)),this._lastEvent=c,l}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,i)}}const fs=()=>y(ds.instances,(t=>t._plugins.invalidate())),ps=!0;function gs(t,e,n){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:c}=e;let l=s/a;t.beginPath(),t.arc(r,o,a,i-l,n+l),c>s?(l=s/c,t.arc(r,o,c,n+l,i-l,!0)):t.arc(r,o,s,n+R,i-R),t.closePath(),t.clip()}function ms(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function ys(t,e,n,i,s){const{x:r,y:o,startAngle:a,pixelMargin:c,innerRadius:l}=e,u=Math.max(e.outerRadius+i+n-c,0),h=l>0?l+i+n+c:0;let d=0;const f=s-a;if(i){const t=((l>0?l-i:0)+(u>0?u-i:0))/2;d=(f-(0!==t?f*t/(t+i):f))/2}const p=(f-Math.max(.001,f*u-n/N)/u)/2,g=a+p+d,m=s-p-d,{outerStart:y,outerEnd:v,innerStart:b,innerEnd:_}=function(t,e,n,i){const s=oe(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),r=(n-e)/2,o=Math.min(r,i*e/2),a=t=>{const e=(n-Math.min(r,t))*i/2;return Z(t,0,Math.min(r,e))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Z(s.innerStart,0,o),innerEnd:Z(s.innerEnd,0,o)}}(e,h,u,m-g),w=u-y,x=u-v,I=g+y/w,T=m-v/x,E=h+b,S=h+_,k=g+b/E,A=m-_/S;if(t.beginPath(),t.arc(r,o,u,I,T),v>0){const e=ms(x,T,r,o);t.arc(e.x,e.y,v,T,m+R)}const C=ms(S,m,r,o);if(t.lineTo(C.x,C.y),_>0){const e=ms(S,A,r,o);t.arc(e.x,e.y,_,m+R,A+Math.PI)}if(t.arc(r,o,h,m-_/h,g+b/h,!0),b>0){const e=ms(E,k,r,o);t.arc(e.x,e.y,b,k+Math.PI,g-R)}const D=ms(w,g,r,o);if(t.lineTo(D.x,D.y),y>0){const e=ms(w,I,r,o);t.arc(e.x,e.y,y,g-R,I)}t.closePath()}Object.defineProperties(ds,{defaults:{enumerable:ps,value:zt},instances:{enumerable:ps,value:ls},overrides:{enumerable:ps,value:jt},registry:{enumerable:ps,value:qi},version:{enumerable:ps,value:"3.8.0"},getChart:{enumerable:ps,value:us},register:{enumerable:ps,value:(...t)=>{qi.add(...t),fs()}},unregister:{enumerable:ps,value:(...t)=>{qi.remove(...t),fs()}}});class vs extends Di{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:s,distance:r}=G(i,{x:t,y:e}),{startAngle:o,endAngle:a,innerRadius:c,outerRadius:l,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=this.options.spacing/2,d=p(u,a-o)>=O||J(s,o,a),f=tt(r,c+h,l+h);return d&&f}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:s,innerRadius:r,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:a,spacing:c}=this.options,l=(i+s)/2,u=(r+o+c+a)/2;return{x:e+Math.cos(l)*u,y:n+Math.sin(l)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/2,s=(e.spacing||0)/2;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>O?Math.floor(n/O):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();let r=0;if(i){r=i/2;const e=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(e)*r,Math.sin(e)*r),this.circumference>=N&&(r=i)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const o=function(t,e,n,i){const{fullCircles:s,startAngle:r,circumference:o}=e;let a=e.endAngle;if(s){ys(t,e,n,i,r+O);for(let e=0;e<s;++e)t.fill();isNaN(o)||(a=r+o%O,o%O==0&&(a+=O))}return ys(t,e,n,i,a),t.fill(),a}(t,this,r,s);(function(t,e,n,i,s){const{options:r}=e,{borderWidth:o,borderJoinStyle:a}=r,c="inner"===r.borderAlign;o&&(c?(t.lineWidth=2*o,t.lineJoin=a||"round"):(t.lineWidth=o,t.lineJoin=a||"bevel"),e.fullCircles&&function(t,e,n){const{x:i,y:s,startAngle:r,pixelMargin:o,fullCircles:a}=e,c=Math.max(e.outerRadius-o,0),l=e.innerRadius+o;let u;for(n&&gs(t,e,r+O),t.beginPath(),t.arc(i,s,l,r+O,r,!0),u=0;u<a;++u)t.stroke();for(t.beginPath(),t.arc(i,s,c,r,r+O),u=0;u<a;++u)t.stroke()}(t,e,c),c&&gs(t,e,s),ys(t,e,n,i,s),t.stroke())})(t,this,r,s,o),t.restore()}}function bs(t,e,n=e){t.lineCap=p(n.borderCapStyle,e.borderCapStyle),t.setLineDash(p(n.borderDash,e.borderDash)),t.lineDashOffset=p(n.borderDashOffset,e.borderDashOffset),t.lineJoin=p(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=p(n.borderWidth,e.borderWidth),t.strokeStyle=p(n.borderColor,e.borderColor)}function _s(t,e,n){t.lineTo(n.x,n.y)}function ws(t,e,n={}){const i=t.length,{start:s=0,end:r=i-1}=n,{start:o,end:a}=e,c=Math.max(s,o),l=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:c,loop:e.loop,ilen:l<c&&!u?i+l-c:l-c}}function xs(t,e,n,i){const{points:s,options:r}=e,{count:o,start:a,loop:c,ilen:l}=ws(s,n,i),u=function(t){return t.stepped?Jt:t.tension||"monotone"===t.cubicInterpolationMode?Zt:_s}(r);let h,d,f,{move:p=!0,reverse:g}=i||{};for(h=0;h<=l;++h)d=s[(a+(g?l-h:h))%o],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):u(t,f,d,g,r.stepped),f=d);return c&&(d=s[(a+(g?l:0))%o],u(t,f,d,g,r.stepped)),!!c}function Is(t,e,n,i){const s=e.points,{count:r,start:o,ilen:a}=ws(s,n,i),{move:c=!0,reverse:l}=i||{};let u,h,d,f,p,g,m=0,y=0;const v=t=>(o+(l?a-t:t))%r,b=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(c&&(h=s[v(0)],t.moveTo(h.x,h.y)),u=0;u<=a;++u){if(h=s[v(u)],h.skip)continue;const e=h.x,n=h.y,i=0|e;i===d?(n<f?f=n:n>p&&(p=n),m=(y*m+e)/++y):(b(),t.lineTo(e,n),d=i,y=0,f=p=n),g=n}b()}function Ts(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n?xs:Is}vs.id="arc",vs.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},vs.defaultRoutes={backgroundColor:"backgroundColor"};const Es="function"==typeof Path2D;class Ss extends Di{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;Ve(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,i=t.options.spanGaps,s=n.length;if(!s)return[];const r=!!t._loop,{start:o,end:a}=function(t,e,n,i){let s=0,r=e-1;if(n&&!i)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(r+=s);r>s&&t[r%e].skip;)r--;return r%=e,{start:s,end:r}}(n,s,r,i);return function(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){const s=t._chart.getContext(),r=ln(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,c=n.length,l=[];let u=r,h=e[0].start,d=h;function f(t,e,i,s){const r=a?-1:1;if(t!==e){for(t+=c;n[t%c].skip;)t-=r;for(;n[e%c].skip;)e+=r;t%c!=e%c&&(l.push({start:t%c,end:e%c,loop:i,style:s}),u=s,h=e%c)}}for(const t of e){h=a?h:t.start;let e,r=n[h%c];for(d=h+1;d<=t.end;d++){const a=n[d%c];e=ln(i.setContext(de(s,{type:"segment",p0:r,p1:a,p0DataIndex:(d-1)%c,p1DataIndex:d%c,datasetIndex:o}))),un(e,u)&&f(h,d-1,t.loop,u),r=a,u=e}h<d-1&&f(h,d-1,t.loop,u)}return l}(t,e,n,i):e}(t,!0===i?[{start:o,end:a,loop:r}]:function(t,e,n,i){const s=t.length,r=[];let o,a=e,c=t[e];for(o=e+1;o<=n;++o){const n=t[o%s];n.skip||n.stop?c.skip||(i=!1,r.push({start:e%s,end:(o-1)%s,loop:i}),e=a=n.stop?o:null):(a=o,c.skip&&(e=o)),c=n}return null!==a&&r.push({start:e%s,end:a%s,loop:i}),r}(n,o,a<o?a+s:a,!!t._fullLoop&&0===o&&a===s-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],s=this.points,r=cn(this,{property:e,start:i,end:i});if(!r.length)return;const o=[],a=function(t){return t.stepped?Qe:t.tension||"monotone"===t.cubicInterpolationMode?Je:Xe}(n);let c,l;for(c=0,l=r.length;c<l;++c){const{start:l,end:u}=r[c],h=s[l],d=s[u];if(h===d){o.push(h);continue}const f=a(h,d,Math.abs((i-h[e])/(d[e]-h[e])),n.stepped);f[e]=t[e],o.push(f)}return 1===o.length?o[0]:o}pathSegment(t,e,n){return Ts(this)(t,this,e,n)}path(t,e,n){const i=this.segments,s=Ts(this);let r=this._loop;e=e||0,n=n||this.points.length-e;for(const o of i)r&=s(t,this,o,{start:e,end:e+n-1});return!!r}draw(t,e,n,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),function(t,e,n,i){Es&&!e.options.segment?function(t,e,n,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,i)&&s.closePath()),bs(t,e.options),t.stroke(s)}(t,e,n,i):function(t,e,n,i){const{segments:s,options:r}=e,o=Ts(e);for(const a of s)bs(t,r,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ks(t,e,n,i){const s=t.options,{[n]:r}=t.getProps([n],i);return Math.abs(e-r)<s.radius+s.hitRadius}Ss.id="line",Ss.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},Ss.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},Ss.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};class As extends Di{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:s,y:r}=this.getProps(["x","y"],n);return Math.pow(t-s,2)+Math.pow(e-r,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return ks(this,t,"x",e)}inYRange(t,e){return ks(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;return e=Math.max(e,e&&t.hoverRadius||0),2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!Yt(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,Gt(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Cs(t,e){const{x:n,y:i,base:s,width:r,height:o}=t.getProps(["x","y","base","width","height"],e);let a,c,l,u,h;return t.horizontal?(h=o/2,a=Math.min(n,s),c=Math.max(n,s),l=i-h,u=i+h):(h=r/2,a=n-h,c=n+h,l=Math.min(i,s),u=Math.max(i,s)),{left:a,top:l,right:c,bottom:u}}function Ds(t,e,n,i){return t?0:Z(e,n,i)}function Ns(t,e,n,i){const s=null===e,r=null===n,o=t&&!(s&&r)&&Cs(t,i);return o&&(s||tt(e,o.left,o.right))&&(r||tt(n,o.top,o.bottom))}function Os(t,e){t.rect(e.x,e.y,e.w,e.h)}function Ms(t,e,n={}){const i=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,r=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+i,y:t.y+s,w:t.w+r,h:t.h+o,radius:t.radius}}As.id="point",As.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},As.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class Ls extends Di{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:s,outer:r}=function(t){const e=Cs(t),n=e.right-e.left,i=e.bottom-e.top,s=function(t,e,n){const i=t.options.borderWidth,s=t.borderSkipped,r=ae(i);return{t:Ds(s.top,r.top,0,n),r:Ds(s.right,r.right,0,e),b:Ds(s.bottom,r.bottom,0,n),l:Ds(s.left,r.left,0,e)}}(t,n/2,i/2),r=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,r=ce(s),o=Math.min(e,n),a=t.borderSkipped,c=i||h(s);return{topLeft:Ds(!c||a.top||a.left,r.topLeft,0,o),topRight:Ds(!c||a.top||a.right,r.topRight,0,o),bottomLeft:Ds(!c||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Ds(!c||a.bottom||a.right,r.bottomRight,0,o)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}(this),o=(a=r.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?ne:Os;var a;t.save(),r.w===s.w&&r.h===s.h||(t.beginPath(),o(t,Ms(r,e,s)),t.clip(),o(t,Ms(s,-e,r)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),o(t,Ms(s,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return Ns(this,t,e,n)}inXRange(t,e){return Ns(this,t,null,e)}inYRange(t,e){return Ns(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+i)/2:e,y:s?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}Ls.id="bar",Ls.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Ls.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Ps=Object.freeze({__proto__:null,ArcElement:vs,LineElement:Ss,PointElement:As,BarElement:Ls});function Rs(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function Fs(t){t.data.datasets.forEach((t=>{Rs(t)}))}var Vs={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void Fs(t);const i=t.width;t.data.datasets.forEach(((e,s)=>{const{_data:r,indexAxis:o}=e,a=t.getDatasetMeta(s),c=r||e.data;if("y"===he([o,t.options.indexAxis]))return;if(!a.controller.supportsDecimation)return;const u=t.scales[a.xAxisID];if("linear"!==u.type&&"time"!==u.type)return;if(t.options.parsing)return;let h,{start:d,count:f}=function(t,e){const n=e.length;let i,s=0;const{iScale:r}=t,{min:o,max:a,minDefined:c,maxDefined:l}=r.getUserBounds();return c&&(s=Z(pe(e,r.axis,o).lo,0,n-1)),i=l?Z(pe(e,r.axis,a).hi+1,s,n)-s:n-s,{start:s,count:i}}(a,c);if(f<=(n.threshold||4*i))Rs(e);else{switch(l(r)&&(e._data=c,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":h=function(t,e,n,i,s){const r=s.samples||i;if(r>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(r-2);let c=0;const l=e+n-1;let u,h,d,f,p,g=e;for(o[c++]=t[g],u=0;u<r-2;u++){let i,s=0,r=0;const l=Math.floor((u+1)*a)+1+e,m=Math.min(Math.floor((u+2)*a)+1,n)+e,y=m-l;for(i=l;i<m;i++)s+=t[i].x,r+=t[i].y;s/=y,r/=y;const v=Math.floor(u*a)+1+e,b=Math.min(Math.floor((u+1)*a)+1,n)+e,{x:_,y:w}=t[g];for(d=f=-1,i=v;i<b;i++)f=.5*Math.abs((_-s)*(t[i].y-w)-(_-t[i].x)*(r-w)),f>d&&(d=f,h=t[i],p=i);o[c++]=h,g=p}return o[c++]=t[l],o}(c,d,f,i,n);break;case"min-max":h=function(t,e,n,i){let s,r,o,a,c,u,h,d,f,p,g=0,m=0;const y=[],v=e+n-1,b=t[e].x,_=t[v].x-b;for(s=e;s<e+n;++s){r=t[s],o=(r.x-b)/_*i,a=r.y;const e=0|o;if(e===c)a<f?(f=a,u=s):a>p&&(p=a,h=s),g=(m*g+r.x)/++m;else{const n=s-1;if(!l(u)&&!l(h)){const e=Math.min(u,h),i=Math.max(u,h);e!==d&&e!==n&&y.push({...t[e],x:g}),i!==d&&i!==n&&y.push({...t[i],x:g})}s>0&&n!==d&&y.push(t[n]),y.push(r),c=e,m=0,f=p=a,u=h=d=s}}return y}(c,d,f,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=h}}))},destroy(t){Fs(t)}};function js(t,e,n,i){if(i)return;let s=e[t],r=n[t];return"angle"===t&&(s=Q(s),r=Q(r)),{property:t,start:s,end:r}}function Us(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function Bs(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function qs(t,e){let n=[],i=!1;return u(t)?(i=!0,n=t):n=function(t,e){const{x:n=null,y:i=null}=t||{},s=e.points,r=[];return e.segments.forEach((({start:t,end:e})=>{e=Us(t,e,s);const o=s[t],a=s[e];null!==i?(r.push({x:o.x,y:i}),r.push({x:a.x,y:i})):null!==n&&(r.push({x:n,y:o.y}),r.push({x:n,y:a.y}))})),r}(t,e),n.length?new Ss({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function zs(t,e,n){let i=t[e].fill;const s=[e];let r;if(!n)return i;for(;!1!==i&&-1===s.indexOf(i);){if(!d(i))return i;if(r=t[i],!r)return!1;if(r.visible)return i;s.push(i),i=r.fill}return!1}function Hs(t,e,n){const i=function(t){const e=t.options,n=e.fill;let i=p(n&&n.target,n);return void 0===i&&(i=!!e.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(t);if(h(i))return!isNaN(i.value)&&i;let s=parseFloat(i);return d(s)&&Math.floor(s)===s?function(t,e,n,i){return"-"!==t&&"+"!==t||(n=e+n),!(n===e||n<0||n>=i)&&n}(i[0],e,s,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function $s(t,e,n){const i=[];for(let s=0;s<n.length;s++){const r=n[s],{first:o,last:a,point:c}=Ws(r,e,"x");if(!(!c||o&&a))if(o)i.unshift(c);else if(t.push(c),!a)break}t.push(...i)}function Ws(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const s=i[n],r=t.segments,o=t.points;let a=!1,c=!1;for(let t=0;t<r.length;t++){const e=r[t],i=o[e.start][n],l=o[e.end][n];if(tt(s,i,l)){a=s===i,c=s===l;break}}return{first:a,last:c,point:i}}class Ks{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:s,radius:r}=this;return e=e||{start:0,end:O},t.arc(i,s,r,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,s=t.angle;return{x:e+Math.cos(s)*i,y:n+Math.sin(s)*i,angle:s}}}function Gs(t,e,n){const i=function(t){const{chart:e,fill:n,line:i}=t;if(d(n))return function(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:i}=t,s=[],r=i.segments,o=i.points,a=function(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let t=0;t<i.length;t++){const s=i[t];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}(e,n);a.push(qs({x:null,y:e.bottom},i));for(let t=0;t<r.length;t++){const e=r[t];for(let t=e.start;t<=e.end;t++)$s(s,o[t],a)}return new Ss({points:s,options:{}})}(t);if("shape"===n)return!0;const s=function(t){return(t.scale||{}).getPointPositionForValue?function(t){const{scale:e,fill:n}=t,i=e.options,s=e.getLabels().length,r=i.reverse?e.max:e.min,o=function(t,e,n){let i;return i="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:h(t)?t.value:e.getBaseValue(),i}(n,e,r),a=[];if(i.grid.circular){const t=e.getPointPositionForValue(0,r);return new Ks({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(o)})}for(let t=0;t<s;++t)a.push(e.getPointPositionForValue(t,o));return a}(t):function(t){const{scale:e={},fill:n}=t,i=function(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:h(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if(d(i)){const t=e.isHorizontal();return{x:t?i:null,y:t?null:i}}return null}(t)}(t);return s instanceof Ks?s:qs(s,i)}(e),{line:s,scale:r,axis:o}=e,a=s.options,c=a.fill,l=a.backgroundColor,{above:u=l,below:f=l}=c||{};i&&s.points.length&&(Xt(t,n),function(t,e){const{line:n,target:i,above:s,below:r,area:o,scale:a}=e,c=n._loop?"angle":e.axis;t.save(),"x"===c&&r!==s&&(Ys(t,i,o.top),Xs(t,{line:n,target:i,color:s,scale:a,property:c}),t.restore(),t.save(),Ys(t,i,o.bottom)),Xs(t,{line:n,target:i,color:r,scale:a,property:c}),t.restore()}(t,{line:s,target:i,above:u,below:f,area:n,scale:r,axis:o}),Qt(t))}function Ys(t,e,n){const{segments:i,points:s}=e;let r=!0,o=!1;t.beginPath();for(const a of i){const{start:i,end:c}=a,l=s[i],u=s[Us(i,c,s)];r?(t.moveTo(l.x,l.y),r=!1):(t.lineTo(l.x,n),t.lineTo(l.x,l.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(u.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Xs(t,e){const{line:n,target:i,property:s,color:r,scale:o}=e,a=function(t,e,n){const i=t.segments,s=t.points,r=e.points,o=[];for(const t of i){let{start:i,end:a}=t;a=Us(i,a,s);const c=js(n,s[i],s[a],t.loop);if(!e.segments){o.push({source:t,target:c,start:s[i],end:s[a]});continue}const l=cn(e,c);for(const e of l){const i=js(n,r[e.start],r[e.end],e.loop),a=an(t,s,i);for(const t of a)o.push({source:t,target:e,start:{[n]:Bs(c,i,"start",Math.max)},end:{[n]:Bs(c,i,"end",Math.min)}})}}return o}(n,i,s);for(const{source:e,target:c,start:l,end:u}of a){const{style:{backgroundColor:a=r}={}}=e,h=!0!==i;t.save(),t.fillStyle=a,Qs(t,o,h&&js(s,l,u)),t.beginPath();const d=!!n.pathSegment(t,e);let f;if(h){d?t.closePath():Js(t,i,u,s);const e=!!i.pathSegment(t,c,{move:d,reverse:!0});f=d&&e,f||Js(t,i,l,s)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function Qs(t,e,n){const{top:i,bottom:s}=e.chart.chartArea,{property:r,start:o,end:a}=n||{};"x"===r&&(t.beginPath(),t.rect(o,i,a-o,s-i),t.clip())}function Js(t,e,n,i){const s=e.interpolate(n,i);s&&t.lineTo(s.x,s.y)}var Zs={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,s=[];let r,o,a,c;for(o=0;o<i;++o)r=t.getDatasetMeta(o),a=r.dataset,c=null,a&&a.options&&a instanceof Ss&&(c={visible:t.isDatasetVisible(o),index:o,fill:Hs(a,o,i),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=c,s.push(c);for(o=0;o<i;++o)c=s[o],c&&!1!==c.fill&&(c.fill=zs(s,o,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,s=t.getSortedVisibleDatasetMetas(),r=t.chartArea;for(let e=s.length-1;e>=0;--e){const n=s[e].$filler;n&&(n.line.updateControlPoints(r,n.axis),i&&Gs(t.ctx,n,r))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;n&&Gs(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;i&&!1!==i.fill&&"beforeDatasetDraw"===n.drawTime&&Gs(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const tr=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class er extends Di{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=m(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,n)=>t.sort(e,n,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=ue(n.font),s=i.size,r=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=tr(n,s);let c,l;e.font=i.string,this.isHorizontal()?(c=this.maxWidth,l=this._fitRows(r,s,o,a)+10):(l=this.maxHeight,c=this._fitCols(r,s,o,a)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(l,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:s,maxWidth:r,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],c=this.lineWidths=[0],l=i+o;let u=t;s.textAlign="left",s.textBaseline="middle";let h=-1,d=-l;return this.legendItems.forEach(((t,f)=>{const p=n+e/2+s.measureText(t.text).width;(0===f||c[c.length-1]+p+2*o>r)&&(u+=l,c[c.length-(f>0?0:1)]=0,d+=l,h++),a[f]={left:0,top:d,row:h,width:p,height:i},c[c.length-1]+=p+o})),u}_fitCols(t,e,n,i){const{ctx:s,maxHeight:r,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],c=this.columnSizes=[],l=r-t;let u=o,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((t,r)=>{const g=n+e/2+s.measureText(t.text).width;r>0&&d+i+2*o>l&&(u+=h+o,c.push({width:h,height:d}),f+=h+o,p++,h=d=0),a[r]={left:f,top:d,col:p,width:g,height:i},h=Math.max(h,g),d+=i+o})),u+=h,c.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:s}}=this,r=en(s,this.left,this.width);if(this.isHorizontal()){let s=0,a=o(n,this.left+i,this.right-this.lineWidths[s]);for(const c of e)s!==c.row&&(s=c.row,a=o(n,this.left+i,this.right-this.lineWidths[s])),c.top+=this.top+t+i,c.left=r.leftForLtr(r.x(a),c.width),a+=c.width+i}else{let s=0,a=o(n,this.top+t+i,this.bottom-this.columnSizes[s].height);for(const c of e)c.col!==s&&(s=c.col,a=o(n,this.top+t+i,this.bottom-this.columnSizes[s].height)),c.top=a,c.left+=this.left+i,c.left=r.leftForLtr(r.x(c.left),c.width),a+=c.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Xt(t,this),this._draw(),Qt(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:s,labels:r}=t,a=zt.color,c=en(t.rtl,this.left,this.width),l=ue(r.font),{color:u,padding:h}=r,d=l.size,f=d/2;let g;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:m,boxHeight:y,itemHeight:v}=tr(r,d),b=this.isHorizontal(),_=this._computeTitleHeight();g=b?{x:o(s,this.left+h,this.right-n[0]),y:this.top+h+_,line:0}:{x:this.left+h,y:o(s,this.top+_+h,this.bottom-e[0].height),line:0},nn(this.ctx,t.textDirection);const w=v+h;this.legendItems.forEach(((x,I)=>{i.strokeStyle=x.fontColor||u,i.fillStyle=x.fontColor||u;const T=i.measureText(x.text).width,E=c.textAlign(x.textAlign||(x.textAlign=r.textAlign)),S=m+f+T;let k=g.x,A=g.y;c.setWidth(this.width),b?I>0&&k+S+h>this.right&&(A=g.y+=w,g.line++,k=g.x=o(s,this.left+h,this.right-n[g.line])):I>0&&A+w>this.bottom&&(k=g.x=k+e[g.line].width+h,g.line++,A=g.y=o(s,this.top+_+h,this.bottom-e[g.line].height)),function(t,e,n){if(isNaN(m)||m<=0||isNaN(y)||y<0)return;i.save();const s=p(n.lineWidth,1);if(i.fillStyle=p(n.fillStyle,a),i.lineCap=p(n.lineCap,"butt"),i.lineDashOffset=p(n.lineDashOffset,0),i.lineJoin=p(n.lineJoin,"miter"),i.lineWidth=s,i.strokeStyle=p(n.strokeStyle,a),i.setLineDash(p(n.lineDash,[])),r.usePointStyle){const r={radius:m*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:s},o=c.xPlus(t,m/2);Gt(i,r,o,e+f)}else{const r=e+Math.max((d-y)/2,0),o=c.leftForLtr(t,m),a=ce(n.borderRadius);i.beginPath(),Object.values(a).some((t=>0!==t))?ne(i,{x:o,y:r,w:m,h:y,radius:a}):i.rect(o,r,m,y),i.fill(),0!==s&&i.stroke()}i.restore()}(c.x(k),A,x),k=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(E,k+m+f,b?k+S:this.right,t.rtl),function(t,e,n){te(i,n.text,t,e+v/2,l,{strikethrough:n.hidden,textAlign:c.textAlign(n.textAlign)})}(c.x(k),A,x),b?g.x+=S+h:g.y+=w})),sn(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=ue(e.font),i=le(e.padding);if(!e.display)return;const s=en(t.rtl,this.left,this.width),a=this.ctx,c=e.position,l=n.size/2,u=i.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+u,d=o(t.align,d,this.right-f);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);h=u+o(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const p=o(c,d,d+f);a.textAlign=s.textAlign(r(c)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=n.string,te(a,e.text,p,h,n)}_computeTitleHeight(){const t=this.options.title,e=ue(t.font),n=le(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,s;if(tt(t,this.left,this.right)&&tt(e,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(i=s[n],tt(t,i.left,i.left+i.width)&&tt(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){return!("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const r=this._hoveredItem,o=(s=n,null!==(i=r)&&null!==s&&i.datasetIndex===s.datasetIndex&&i.index===s.index);r&&!o&&m(e.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!o&&m(e.onHover,[t,n,this],this)}else n&&m(e.onClick,[t,n,this],this);var i,s}}var nr={id:"legend",_element:er,start(t,e,n){const i=t.legend=new er({ctx:t.ctx,options:n,chart:t});di.configure(t,i,n),di.addBox(t,i)},stop(t){di.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;di.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const o=t.controller.getStyle(n?0:void 0),a=le(o.borderWidth);return{text:e[t.index].label,fillStyle:o.backgroundColor,fontColor:r,hidden:!t.visible,lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:(a.width+a.height)/4,strokeStyle:o.borderColor,pointStyle:i||o.pointStyle,rotation:o.rotation,textAlign:s||o.textAlign,borderRadius:0,datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ir extends Di{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=u(n.text)?n.text.length:1;this._padding=le(n.padding);const s=i*ue(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:s,options:r}=this,a=r.align;let c,l,u,h=0;return this.isHorizontal()?(l=o(a,n,s),u=e+t,c=s-n):("left"===r.position?(l=n+t,u=o(a,i,e),h=-.5*N):(l=s-t,u=o(a,e,i),h=.5*N),c=i-e),{titleX:l,titleY:u,maxWidth:c,rotation:h}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=ue(e.font),i=n.lineHeight/2+this._padding.top,{titleX:s,titleY:o,maxWidth:a,rotation:c}=this._drawArgs(i);te(t,e.text,0,0,n,{color:e.color,maxWidth:a,rotation:c,textAlign:r(e.align),textBaseline:"middle",translation:[s,o]})}}var sr={id:"title",_element:ir,start(t,e,n){!function(t,e){const n=new ir({ctx:t.ctx,options:e,chart:t});di.configure(t,n,e),di.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;di.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;di.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const rr=new WeakMap;var or={id:"subtitle",start(t,e,n){const i=new ir({ctx:t.ctx,options:n,chart:t});di.configure(t,i,n),di.addBox(t,i),rr.set(t,i)},stop(t){di.removeBox(t,rr.get(t)),rr.delete(t)},beforeUpdate(t,e,n){const i=rr.get(t);di.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ar={average(t){if(!t.length)return!1;let e,n,i=0,s=0,r=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i+=t.x,s+=t.y,++r}}return{x:i/r,y:s/r}},nearest(t,e){if(!t.length)return!1;let n,i,s,r=e.x,o=e.y,a=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=Y(e,i.getCenterPoint());t<a&&(a=t,s=i)}}if(s){const t=s.tooltipPosition();r=t.x,o=t.y}return{x:r,y:o}}};function cr(t,e){return e&&(u(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function lr(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function ur(t,e){const{element:n,datasetIndex:i,index:s}=e,r=t.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:t,label:o,parsed:r.getParsed(s),raw:t.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function hr(t,e){const n=t.chart.ctx,{body:i,footer:s,title:r}=t,{boxWidth:o,boxHeight:a}=e,c=ue(e.bodyFont),l=ue(e.titleFont),u=ue(e.footerFont),h=r.length,d=s.length,f=i.length,p=le(e.padding);let g=p.height,m=0,v=i.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);v+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*l.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v&&(g+=f*(e.displayColors?Math.max(a,c.lineHeight):c.lineHeight)+(v-f)*c.lineHeight+(v-1)*e.bodySpacing),d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let b=0;const _=function(t){m=Math.max(m,n.measureText(t).width+b)};return n.save(),n.font=l.string,y(t.title,_),n.font=c.string,y(t.beforeBody.concat(t.afterBody),_),b=e.displayColors?o+2+e.boxPadding:0,y(i,(t=>{y(t.before,_),y(t.lines,_),y(t.after,_)})),b=0,n.font=u.string,y(t.footer,_),n.restore(),m+=p.width,{width:m,height:g}}function dr(t,e,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:a,right:c}}=t;let l="center";return"center"===i?l=s<=(a+c)/2?"left":"right":s<=r/2?l="left":s>=o-r/2&&(l="right"),function(t,e,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;return"left"===t&&s+r+o>e.width||"right"===t&&s-r-o<0||void 0}(l,t,e,n)&&(l="center"),l}function fr(t,e,n){const i=n.yAlign||e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||dr(t,e,n,i),yAlign:i}}function pr(t,e,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:c}=n,l=s+r,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=ce(o);let p=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,a);const g=function(t,e,n){let{y:i,height:s}=t;return"top"===e?i+=n:i-="bottom"===e?s+n:s/2,i}(e,c,l);return"center"===c?"left"===a?p+=l:"right"===a&&(p-=l):"left"===a?p-=Math.max(u,d)+s:"right"===a&&(p+=Math.max(h,f)+s),{x:Z(p,0,i.width-e.width),y:Z(g,0,i.height-e.height)}}function gr(t,e,n){const i=le(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function mr(t){return cr([],lr(t))}function yr(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}class vr extends Di{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,s=new mn(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=(this,de(this.chart.getContext(),{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"})))}getTitle(t,e){const{callbacks:n}=e,i=n.beforeTitle.apply(this,[t]),s=n.title.apply(this,[t]),r=n.afterTitle.apply(this,[t]);let o=[];return o=cr(o,lr(i)),o=cr(o,lr(s)),o=cr(o,lr(r)),o}getBeforeBody(t,e){return mr(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const{callbacks:n}=e,i=[];return y(t,(t=>{const e={before:[],lines:[],after:[]},s=yr(n,t);cr(e.before,lr(s.beforeLabel.call(this,t))),cr(e.lines,s.label.call(this,t)),cr(e.after,lr(s.afterLabel.call(this,t))),i.push(e)})),i}getAfterBody(t,e){return mr(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const{callbacks:n}=e,i=n.beforeFooter.apply(this,[t]),s=n.footer.apply(this,[t]),r=n.afterFooter.apply(this,[t]);let o=[];return o=cr(o,lr(i)),o=cr(o,lr(s)),o=cr(o,lr(r)),o}_createItems(t){const e=this._active,n=this.chart.data,i=[],s=[],r=[];let o,a,c=[];for(o=0,a=e.length;o<a;++o)c.push(ur(this.chart,e[o]));return t.filter&&(c=c.filter(((e,i,s)=>t.filter(e,i,s,n)))),t.itemSort&&(c=c.sort(((e,i)=>t.itemSort(e,i,n)))),y(c,(e=>{const n=yr(t.callbacks,e);i.push(n.labelColor.call(this,e)),s.push(n.labelPointStyle.call(this,e)),r.push(n.labelTextColor.call(this,e))})),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=r,this.dataPoints=c,c}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let s,r=[];if(i.length){const t=ar[n.position].call(this,i,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const e=this._size=hr(this,n),o=Object.assign({},t,e),a=fr(this.chart,n,o),c=pr(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,s={opacity:1,x:c.x,y:c.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(s={opacity:0});this._tooltipItems=r,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const s=this.getCaretPosition(t,n,i);e.lineTo(s.x1,s.y1),e.lineTo(s.x2,s.y2),e.lineTo(s.x3,s.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:s}=this,{caretSize:r,cornerRadius:o}=n,{topLeft:a,topRight:c,bottomLeft:l,bottomRight:u}=ce(o),{x:h,y:d}=t,{width:f,height:p}=e;let g,m,y,v,b,_;return"center"===s?(b=d+p/2,"left"===i?(g=h,m=g-r,v=b+r,_=b-r):(g=h+f,m=g+r,v=b-r,_=b+r),y=g):(m="left"===i?h+Math.max(a,l)+r:"right"===i?h+f-Math.max(c,u)-r:this.caretX,"top"===s?(v=d,b=v-r,g=m-r,y=m+r):(v=d+p,b=v+r,g=m+r,y=m-r),_=v),{x1:g,x2:m,x3:y,y1:v,y2:b,y3:_}}drawTitle(t,e,n){const i=this.title,s=i.length;let r,o,a;if(s){const c=en(n.rtl,this.x,this.width);for(t.x=gr(this,n.titleAlign,n),e.textAlign=c.textAlign(n.titleAlign),e.textBaseline="middle",r=ue(n.titleFont),o=n.titleSpacing,e.fillStyle=n.titleColor,e.font=r.string,a=0;a<s;++a)e.fillText(i[a],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+o,a+1===s&&(t.y+=n.titleMarginBottom-o)}}_drawColorBox(t,e,n,i,s){const r=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:c,boxPadding:l}=s,u=ue(s.bodyFont),h=gr(this,"left",s),d=i.x(h),f=a<u.lineHeight?(u.lineHeight-a)/2:0,p=e.y+f;if(s.usePointStyle){const e={radius:Math.min(c,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=i.leftForLtr(d,c)+c/2,l=p+a/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,Gt(t,e,n,l),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,Gt(t,e,n,l)}else{t.lineWidth=r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const e=i.leftForLtr(d,c-l),n=i.leftForLtr(i.xPlus(d,1),c-l-2),o=ce(r.borderRadius);Object.values(o).some((t=>0!==t))?(t.beginPath(),t.fillStyle=s.multiKeyBackground,ne(t,{x:e,y:p,w:c,h:a,radius:o}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),ne(t,{x:n,y:p+1,w:c-2,h:a-2,radius:o}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(e,p,c,a),t.strokeRect(e,p,c,a),t.fillStyle=r.backgroundColor,t.fillRect(n,p+1,c-2,a-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:s,bodyAlign:r,displayColors:o,boxHeight:a,boxWidth:c,boxPadding:l}=n,u=ue(n.bodyFont);let h=u.lineHeight,d=0;const f=en(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+d),t.y+h/2),t.y+=h+s},g=f.textAlign(r);let m,v,b,_,w,x,I;for(e.textAlign=r,e.textBaseline="middle",e.font=u.string,t.x=gr(this,g,n),e.fillStyle=n.bodyColor,y(this.beforeBody,p),d=o&&"right"!==g?"center"===r?c/2+l:c+2+l:0,_=0,x=i.length;_<x;++_){for(m=i[_],v=this.labelTextColors[_],e.fillStyle=v,y(m.before,p),b=m.lines,o&&b.length&&(this._drawColorBox(e,t,_,f,n),h=Math.max(u.lineHeight,a)),w=0,I=b.length;w<I;++w)p(b[w]),h=u.lineHeight;y(m.after,p)}d=0,h=u.lineHeight,y(this.afterBody,p),t.y-=s}drawFooter(t,e,n){const i=this.footer,s=i.length;let r,o;if(s){const a=en(n.rtl,this.x,this.width);for(t.x=gr(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=a.textAlign(n.footerAlign),e.textBaseline="middle",r=ue(n.footerFont),e.fillStyle=n.footerColor,e.font=r.string,o=0;o<s;++o)e.fillText(i[o],a.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:s,yAlign:r}=this,{x:o,y:a}=t,{width:c,height:l}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=ce(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(o+u,a),"top"===r&&this.drawCaret(t,e,n,i),e.lineTo(o+c-h,a),e.quadraticCurveTo(o+c,a,o+c,a+h),"center"===r&&"right"===s&&this.drawCaret(t,e,n,i),e.lineTo(o+c,a+l-f),e.quadraticCurveTo(o+c,a+l,o+c-f,a+l),"bottom"===r&&this.drawCaret(t,e,n,i),e.lineTo(o+d,a+l),e.quadraticCurveTo(o,a+l,o,a+l-d),"center"===r&&"left"===s&&this.drawCaret(t,e,n,i),e.lineTo(o,a+u),e.quadraticCurveTo(o,a,o+u,a),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,s=n&&n.y;if(i||s){const n=ar[t.position].call(this,this._active,this._eventPosition);if(!n)return;const r=this._size=hr(this,t),o=Object.assign({},n,this._size),a=fr(e,t,o),c=pr(t,o,a,e);i._to===c.x&&s._to===c.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=r.width,this.height=r.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=le(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=n,this.drawBackground(s,t,i,e),nn(t,e.textDirection),s.y+=r.top,this.drawTitle(s,t,e),this.drawBody(s,t,e),this.drawFooter(s,t,e),sn(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map((({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}})),s=!v(n,i),r=this._positionChanged(i,e);(s||r)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],r=this._getActiveElements(t,s,e,n),o=this._positionChanged(r,t),a=e||!v(r,s)||o;return a&&(this._active=r,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,n,i){const s=this.options;if("mouseout"===t.type)return[];if(!i)return e;const r=this.chart.getElementsAtEventForMode(t,s.mode,s,n);return s.reverse&&r.reverse(),r}_positionChanged(t,e){const{caretX:n,caretY:i,options:s}=this,r=ar[s.position].call(this,t,e);return!1!==r&&(n!==r.x||i!==r.y)}}vr.positioners=ar;var br={id:"tooltip",_element:vr,positioners:ar,afterInit(t,e,n){n&&(t.tooltip=new vr({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",n))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:a,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:a,beforeBody:a,beforeLabel:a,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return l(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:a,afterBody:a,beforeFooter:a,footer:a,afterFooter:a}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},_r=Object.freeze({__proto__:null,Decimation:Vs,Filler:Zs,Legend:nr,SubTitle:or,Title:sr,Tooltip:br});class wr extends Ui{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(l(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:Z(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:function(t,e,n,i){const s=t.indexOf(e);return-1===s?((t,e,n,i)=>("string"==typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i):s!==t.lastIndexOf(e)?n:s}(n,t,p(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let s=this.getLabels();s=0===t&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=t;n<=e;n++)i.push({value:n});return i}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function xr(t,e,{horizontal:n,minRotation:i}){const s=$(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}wr.id="category",wr.defaults={ticks:{callback:wr.prototype.getLabelForValue}};class Ir extends Ui{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return l(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this;const r=t=>i=e?i:t,o=t=>s=n?s:t;if(t){const t=U(i),e=U(s);t<0&&e<0?o(0):t>0&&e>0&&r(0)}if(i===s){let e=1;(s>=Number.MAX_SAFE_INTEGER||i<=Number.MIN_SAFE_INTEGER)&&(e=Math.abs(.05*s)),o(s+e),t||r(i-e)}this.min=i,this.max=s}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=function(t,e){const n=[],{bounds:i,step:s,min:r,max:o,precision:a,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=s||1,p=u-1,{min:g,max:m}=e,y=!l(r),v=!l(o),b=!l(c),_=(m-g)/(h+1);let w,x,I,T,E=B((m-g)/p/f)*f;if(E<1e-14&&!y&&!v)return[{value:g},{value:m}];T=Math.ceil(m/E)-Math.floor(g/E),T>p&&(E=B(T*E/p/f)*f),l(a)||(w=Math.pow(10,a),E=Math.ceil(E*w)/w),"ticks"===i?(x=Math.floor(g/E)*E,I=Math.ceil(m/E)*E):(x=g,I=m),y&&v&&s&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((o-r)/s,E/1e3)?(T=Math.round(Math.min((o-r)/E,u)),E=(o-r)/T,x=r,I=o):b?(x=y?r:x,I=v?o:I,T=c-1,E=(I-x)/T):(T=(I-x)/E,T=z(T,Math.round(T),E/1e3)?Math.round(T):Math.ceil(T));const S=Math.max(K(E),K(x));w=Math.pow(10,l(a)?S:a),x=Math.round(x*w)/w,I=Math.round(I*w)/w;let k=0;for(y&&(d&&x!==r?(n.push({value:r}),x<r&&k++,z(Math.round((x+k*E)*w)/w,r,xr(r,_,t))&&k++):x<r&&k++);k<T;++k)n.push({value:Math.round((x+k*E)*w)/w});return v&&d&&I!==o?n.length&&z(n[n.length-1].value,o,xr(o,_,t))?n[n.length-1].value=o:n.push({value:o}):v&&I!==o||n.push({value:I}),n}({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&H(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return tn(t,this.chart.options.locale,this.options.ticks.format)}}class Tr extends Ir{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=d(t)?t:0,this.max=d(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=$(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function Er(t){return 1==t/Math.pow(10,Math.floor(j(t)))}Tr.id="linear",Tr.defaults={ticks:{callback:Oi.formatters.numeric}};class Sr extends Ui{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=Ir.prototype.parse.apply(this,[t,e]);if(0!==n)return d(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=d(t)?Math.max(0,t):null,this.max=d(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const s=e=>n=t?n:e,r=t=>i=e?i:t,o=(t,e)=>Math.pow(10,Math.floor(j(t))+e);n===i&&(n<=0?(s(1),r(10)):(s(o(n,-1)),r(o(i,1)))),n<=0&&s(o(i,-1)),i<=0&&r(o(n,1)),this._zero&&this.min!==this._suggestedMin&&n===o(this.min,0)&&s(o(n,-1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=function(t,e){const n=Math.floor(j(e.max)),i=Math.ceil(e.max/Math.pow(10,n)),s=[];let r=f(t.min,Math.pow(10,Math.floor(j(e.min)))),o=Math.floor(j(r)),a=Math.floor(r/Math.pow(10,o)),c=o<0?Math.pow(10,Math.abs(o)):1;do{s.push({value:r,major:Er(r)}),++a,10===a&&(a=1,++o,c=o>=0?1:c),r=Math.round(a*Math.pow(10,o)*c)/c}while(o<n||o===n&&a<i);const l=f(t.max,r);return s.push({value:l,major:Er(r)}),s}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&H(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":tn(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=j(t),this._valueRange=j(this.max)-j(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(j(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function kr(t){const e=t.ticks;if(e.display&&t.display){const t=le(e.backdropPadding);return p(e.font&&e.font.size,zt.font.size)+t.height}return 0}function Ar(t,e,n,i,s){return t===i||t===s?{start:e-n/2,end:e+n/2}:t<i||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function Cr(t,e,n,i,s){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,c=0;i.start<e.l?(a=(e.l-i.start)/r,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(c=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-c)):s.end>e.b&&(c=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function Dr(t){return 0===t||180===t?"center":t<180?"left":"right"}function Nr(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}function Or(t,e,n,i){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,O);else{let n=t.getPointPosition(0,e);s.moveTo(n.x,n.y);for(let r=1;r<i;r++)n=t.getPointPosition(r,e),s.lineTo(n.x,n.y)}}Sr.id="logarithmic",Sr.defaults={ticks:{callback:Oi.formatters.logarithmic,major:{enabled:!0}}};class Mr extends Ir{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=le(kr(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=d(t)&&!isNaN(t)?t:0,this.max=d(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/kr(this.options))}generateTickLabels(t){Ir.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=m(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?function(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],s=[],r=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?N/r:0;for(let d=0;d<r;d++){const r=o.setContext(t.getPointLabelContext(d));s[d]=r.padding;const f=t.getPointPosition(d,t.drawingArea+s[d],a),p=ue(r.font),g=(c=t.ctx,l=p,h=u(h=t._pointLabels[d])?h:[h],{w:$t(c,l.string,h),h:h.length*l.lineHeight});i[d]=g;const m=Q(t.getIndexAngle(d)+a),y=Math.round(W(m));Cr(n,e,m,Ar(y,f.x,g.w,0,180),Ar(y,f.y,g.h,90,270))}var c,l,h;t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],s=t._pointLabels.length,r=t.options,o=kr(r)/2,a=t.drawingArea,c=r.pointLabels.centerPointLabels?N/s:0;for(let r=0;r<s;r++){const s=t.getPointPosition(r,a+o+n[r],c),d=Math.round(W(Q(s.angle+R))),f=e[r],p=Nr(s.y,f.h,d),g=Dr(d),m=(l=s.x,u=f.w,"right"===(h=g)?l-=u:"center"===h&&(l-=u/2),l);i.push({x:s.x,y:p,textAlign:g,left:m,top:p,right:m+f.w,bottom:p+f.h})}var l,u,h;return i}(t,i,s)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){return Q(t*(O/(this._pointLabels.length||1))+$(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(l(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(l(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return de(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const i=this.getIndexAngle(t)-R+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:s}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),Or(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i}=e,s=this._pointLabels.length;let r,o,a;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let s=e-1;s>=0;s--){const e=i.setContext(t.getPointLabelContext(s)),r=ue(e.font),{x:o,y:a,textAlign:c,left:u,top:h,right:d,bottom:f}=t._pointLabelItems[s],{backdropColor:p}=e;if(!l(p)){const t=ce(e.borderRadius),i=le(e.backdropPadding);n.fillStyle=p;const s=u-i.left,r=h-i.top,o=d-u+i.width,a=f-h+i.height;Object.values(t).some((t=>0!==t))?(n.beginPath(),ne(n,{x:s,y:r,w:o,h:a,radius:t}),n.fill()):n.fillRect(s,r,o,a)}te(n,t._pointLabels[s],o,a+r.lineHeight/2,r,{color:e.color,textAlign:c,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach(((t,e)=>{0!==e&&(o=this.getDistanceFromCenterForValue(t.value),function(t,e,n,i){const s=t.ctx,r=e.circular,{color:o,lineWidth:a}=e;!r&&!i||!o||!a||n<0||(s.save(),s.strokeStyle=o,s.lineWidth=a,s.setLineDash(e.borderDash),s.lineDashOffset=e.borderDashOffset,s.beginPath(),Or(t,n,r,i),s.closePath(),s.stroke(),s.restore())}(this,i.setContext(this.getContext(e-1)),o,s))})),n.display){for(t.save(),r=s-1;r>=0;r--){const i=n.setContext(this.getPointLabelContext(r)),{color:s,lineWidth:c}=i;c&&s&&(t.lineWidth=c,t.strokeStyle=s,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,o=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),a=this.getPointPosition(r,o),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(a.x,a.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let s,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((i,o)=>{if(0===o&&!e.reverse)return;const a=n.setContext(this.getContext(o)),c=ue(a.font);if(s=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){t.font=c.string,r=t.measureText(i.label).width,t.fillStyle=a.backdropColor;const e=le(a.backdropPadding);t.fillRect(-r/2-e.left,-s-c.size/2-e.top,r+e.width,c.size+e.height)}te(t,i.label,0,-s,c,{color:a.color})})),t.restore()}drawTitle(){}}Mr.id="radialLinear",Mr.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Oi.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}},Mr.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Mr.descriptors={angleLines:{_fallback:"grid"}};const Lr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Pr=Object.keys(Lr);function Rr(t,e){return t-e}function Fr(t,e){if(l(e))return null;const n=t._adapter,{parser:i,round:s,isoWeekday:r}=t._parseOpts;let o=e;return"function"==typeof i&&(o=i(o)),d(o)||(o="string"==typeof i?n.parse(o,i):n.parse(o)),null===o?null:(s&&(o="week"!==s||!q(r)&&!0!==r?n.startOf(o,s):n.startOf(o,"isoWeek",r)),+o)}function Vr(t,e,n,i){const s=Pr.length;for(let r=Pr.indexOf(t);r<s-1;++r){const t=Lr[Pr[r]],s=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(s*t.size))<=i)return Pr[r]}return Pr[s-1]}function jr(t,e,n){if(n){if(n.length){const{lo:i,hi:s}=fe(n,e);t[n[i]>=e?n[i]:n[s]]=!0}}else t[e]=!0}function Ur(t,e,n){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return 0!==r&&n?function(t,e,n,i){const s=t._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,c;for(a=r;a<=o;a=+s.add(a,1,i))c=n[a],c>=0&&(e[c].major=!0);return e}(t,i,s,n):i}class Br extends Ui{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const n=t.time||(t.time={}),i=this._adapter=new Gn._date(t.adapters.date);I(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Fr(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:s,minDefined:r,maxDefined:o}=this.getUserBounds();function a(t){r||isNaN(t.min)||(i=Math.min(i,t.min)),o||isNaN(t.max)||(s=Math.max(s,t.max))}r&&o||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),i=d(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),s=d(s)&&!isNaN(s)?s:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,r=function(t,e,n){let i=0,s=t.length;for(;i<s&&t[i]<e;)i++;for(;s>i&&t[s-1]>n;)s--;return i>0||s<t.length?t.slice(i,s):t}(i,s,this.max);return this._unit=e.unit||(n.autoSkip?Vr(e.minUnit,this.min,this.max,this._getLabelCapacity(s)):function(t,e,n,i,s){for(let r=Pr.length-1;r>=Pr.indexOf(n);r--){const n=Pr[r];if(Lr[n].common&&t._adapter.diff(s,i,n)>=e-1)return n}return Pr[n?Pr.indexOf(n):0]}(this,r.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=Pr.indexOf(t)+1,n=Pr.length;e<n;++e)if(Lr[Pr[e]].common)return Pr[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&r.reverse(),Ur(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t){let e,n,i=0,s=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),i=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),s=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;i=Z(i,0,r),s=Z(s,0,r),this._offsets={start:i,end:s,factor:1/(i+1+s)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,s=i.time,r=s.unit||Vr(s.minUnit,e,n,this._getLabelCapacity(e)),o=p(s.stepSize,1),a="week"===r&&s.isoWeekday,c=q(a)||!0===a,l={};let u,h,d=e;if(c&&(d=+t.startOf(d,"isoWeek",a)),d=+t.startOf(d,c?"day":r),t.diff(n,e,r)>1e5*o)throw new Error(e+" and "+n+" are too far apart with stepSize of "+o+" "+r);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+t.add(u,o,r),h++)jr(l,u,f);return u!==n&&"ticks"!==i.bounds&&1!==h||jr(l,u,f),Object.keys(l).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}_tickFormatFunction(t,e,n,i){const s=this.options,r=s.time.displayFormats,o=this._unit,a=this._majorUnit,c=o&&r[o],l=a&&r[a],u=n[e],h=a&&l&&u&&u.major,d=this._adapter.format(t,i||(h?l:c)),f=s.ticks.callback;return f?m(f,[d,e,n],this):d}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=$(this.isHorizontal()?e.maxRotation:e.minRotation),s=Math.cos(i),r=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*s+o*r,h:n*r+o*s}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,s=this._tickFormatFunction(t,0,Ur(this,[t],this._majorUnit),i),r=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return o>0?o:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(Fr(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return ve(t.sort(Rr))}}function qr(t,e,n){let i,s,r,o,a=0,c=t.length-1;n?(e>=t[a].pos&&e<=t[c].pos&&({lo:a,hi:c}=pe(t,"pos",e)),({pos:i,time:r}=t[a]),({pos:s,time:o}=t[c])):(e>=t[a].time&&e<=t[c].time&&({lo:a,hi:c}=pe(t,"time",e)),({time:i,pos:r}=t[a]),({time:s,pos:o}=t[c]));const l=s-i;return l?r+(o-r)*(e-i)/l:r}Br.id="time",Br.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class zr extends Br{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=qr(e,this.min),this._tableRange=qr(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],s=[];let r,o,a,c,l;for(r=0,o=t.length;r<o;++r)c=t[r],c>=e&&c<=n&&i.push(c);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(r=0,o=i.length;r<o;++r)l=i[r+1],a=i[r-1],c=i[r],Math.round((l+a)/2)!==c&&s.push({time:c,pos:r/(o-1)});return s}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(qr(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return qr(this._table,n*this._tableRange+this._minPos,!0)}}zr.id="timeseries",zr.defaults=Br.defaults;var Hr=Object.freeze({__proto__:null,CategoryScale:wr,LinearScale:Tr,LogarithmicScale:Sr,RadialLinearScale:Mr,TimeScale:Br,TimeSeriesScale:zr});const $r=[$n,Ps,_r,Hr]},503:(t,e,n)=>{"use strict";n.r(e),n.d(e,{FirebaseError:()=>i.ZR,SDK_VERSION:()=>i.Jn,_DEFAULT_ENTRY_NAME:()=>i.l4,_addComponent:()=>i.H9,_addOrOverwriteComponent:()=>i.Vr,_apps:()=>i.Af,_clearComponents:()=>i.Z8,_components:()=>i.lz,_getProvider:()=>i.qX,_registerComponent:()=>i.Xd,_removeServiceInstance:()=>i.wN,deleteApp:()=>i.P2,getApp:()=>i.Mq,getApps:()=>i.C6,initializeApp:()=>i.ZF,onLog:()=>i.TP,registerVersion:()=>i.KN,setLogLevel:()=>i.Ub});var i=n(389);(0,i.KN)("firebase","9.8.2","app")},757:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ActionCodeOperation:()=>d,ActionCodeURL:()=>Pt,AuthCredential:()=>St,AuthErrorCodes:()=>m,EmailAuthCredential:()=>Dt,EmailAuthProvider:()=>Ft,FacebookAuthProvider:()=>Bt,FactorId:()=>c,GithubAuthProvider:()=>zt,GoogleAuthProvider:()=>qt,OAuthCredential:()=>Ot,OAuthProvider:()=>Ut,OperationType:()=>h,PhoneAuthCredential:()=>Lt,PhoneAuthProvider:()=>Rn,PhoneMultiFactorGenerator:()=>Si,ProviderId:()=>l,RecaptchaVerifier:()=>Cn,SAMLAuthProvider:()=>$t,SignInMethod:()=>u,TwitterAuthProvider:()=>Wt,applyActionCode:()=>pe,beforeAuthStateChanged:()=>Ve,browserLocalPersistence:()=>Ze,browserPopupRedirectResolver:()=>Ti,browserSessionPersistence:()=>en,checkActionCode:()=>ge,confirmPasswordReset:()=>fe,connectAuthEmulator:()=>It,createUserWithEmailAndPassword:()=>ye,debugErrorMap:()=>f,deleteUser:()=>ze,fetchSignInMethodsForEmail:()=>xe,getAdditionalUserInfo:()=>Pe,getAuth:()=>Ni,getIdToken:()=>W,getIdTokenResult:()=>K,getMultiFactorResolver:()=>We,getRedirectResult:()=>ii,inMemoryPersistence:()=>rt,indexedDBLocalPersistence:()=>yn,initializeAuth:()=>C,isSignInWithEmailLink:()=>_e,linkWithCredential:()=>oe,linkWithPhoneNumber:()=>On,linkWithPopup:()=>Wn,linkWithRedirect:()=>ni,multiFactor:()=>Ye,onAuthStateChanged:()=>je,onIdTokenChanged:()=>Fe,parseActionCodeURL:()=>Rt,prodErrorMap:()=>p,reauthenticateWithCredential:()=>ae,reauthenticateWithPhoneNumber:()=>Mn,reauthenticateWithPopup:()=>$n,reauthenticateWithRedirect:()=>ei,reload:()=>tt,sendEmailVerification:()=>Ie,sendPasswordResetEmail:()=>de,sendSignInLinkToEmail:()=>be,setPersistence:()=>Re,signInAnonymously:()=>Xt,signInWithCredential:()=>re,signInWithCustomToken:()=>ce,signInWithEmailAndPassword:()=>ve,signInWithEmailLink:()=>we,signInWithPhoneNumber:()=>Nn,signInWithPopup:()=>Hn,signInWithRedirect:()=>ti,signOut:()=>qe,unlink:()=>te,updateCurrentUser:()=>Be,updateEmail:()=>Se,updatePassword:()=>ke,updatePhoneNumber:()=>Pn,updateProfile:()=>Ee,useDeviceLanguage:()=>Ue,verifyBeforeUpdateEmail:()=>Te,verifyPasswordResetCode:()=>me});var i=n(444),s=n(389);function r(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]])}return n}Object.create,Object.create;var o=n(333),a=n(463);const c={PHONE:"phone"},l={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},u={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},h={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},d={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const f=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},p=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},g=new i.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),m={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized"},y=new o.Yd("@firebase/auth");function v(t,...e){y.logLevel<=o.in.ERROR&&y.error(`Auth (${s.Jn}): ${t}`,...e)}function b(t,...e){throw I(t,...e)}function _(t,...e){return I(t,...e)}function w(t,e,n){const s=Object.assign(Object.assign({},p()),{[e]:n});return new i.LL("auth","Firebase",s).create(e,{appName:t.name})}function x(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&b(t,"argument-error"),w(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function I(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return g.create(t,...e)}function T(t,e,...n){if(!t)throw I(e,...n)}function E(t){const e="INTERNAL ASSERTION FAILED: "+t;throw v(e),new Error(e)}function S(t,e){t||E(e)}const k=new Map;function A(t){S(t instanceof Function,"Expected a class definition");let e=k.get(t);return e?(S(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,k.set(t,e),e)}function C(t,e){const n=(0,s.qX)(t,"auth");if(n.isInitialized()){const t=n.getImmediate(),s=n.getOptions();if((0,i.vZ)(s,null!=e?e:{}))return t;b(t,"already-initialized")}return n.initialize({options:e})}function D(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function N(){return"http:"===O()||"https:"===O()}function O(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class M{constructor(t,e){this.shortDelay=t,this.longDelay=e,S(e>t,"Short delay should be less than long delay!"),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(N()||(0,i.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function L(t,e){S(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class P{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void E("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void E("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void E("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const R={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},F=new M(3e4,6e4);function V(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function j(t,e,n,s,r={}){return U(t,r,(async()=>{let r={},o={};s&&("GET"===e?o=s:r={body:JSON.stringify(s)});const a=(0,i.xO)(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),P.fetch()(q(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},r))}))}async function U(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},R),e);try{const e=new z(t),i=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const r=await i.json();if("needConfirmation"in r)throw H(t,"account-exists-with-different-credential",r);if(i.ok&&!("errorMessage"in r))return r;{const e=i.ok?r.errorMessage:r.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw H(t,"credential-already-in-use",r);if("EMAIL_EXISTS"===n)throw H(t,"email-already-in-use",r);if("USER_DISABLED"===n)throw H(t,"user-disabled",r);const a=s[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw w(t,a,o);b(t,a)}}catch(e){if(e instanceof i.ZR)throw e;b(t,"network-request-failed")}}async function B(t,e,n,i,s={}){const r=await j(t,e,n,i,s);return"mfaPendingCredential"in r&&b(t,"multi-factor-auth-required",{_serverResponse:r}),r}function q(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?L(t.config,s):`${t.config.apiScheme}://${s}`}class z{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(_(this.auth,"network-request-failed"))),F.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function H(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=_(t,e,i);return s.customData._tokenResponse=n,s}function $(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function W(t,e=!1){return(0,i.m9)(t).getIdToken(e)}async function K(t,e=!1){const n=(0,i.m9)(t),s=await n.getIdToken(e),r=Y(s);T(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o="object"==typeof r.firebase?r.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:r,token:s,authTime:$(G(r.auth_time)),issuedAtTime:$(G(r.iat)),expirationTime:$(G(r.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}function G(t){return 1e3*Number(t)}function Y(t){const[e,n,s]=t.split(".");if(void 0===e||void 0===n||void 0===s)return v("JWT malformed, contained fewer than 3 sections"),null;try{const t=(0,i.tV)(n);return t?JSON.parse(t):(v("Failed to decode base64 JWT payload"),null)}catch(t){return v("Caught error parsing JWT payload as JSON",t),null}}async function X(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof i.ZR&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class Q{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&this.schedule(!0))}this.schedule()}}class J{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=$(this.lastLoginAt),this.creationTime=$(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Z(t){var e;const n=t.auth,i=await t.getIdToken(),s=await X(t,async function(t,e){return j(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));T(null==s?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const a=(null===(e=o.providerUserInfo)||void 0===e?void 0:e.length)?o.providerUserInfo.map((t=>{var{providerId:e}=t,n=r(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],c=(l=t.providerData,u=a,[...l.filter((t=>!u.some((e=>e.providerId===t.providerId)))),...u]);var l,u;const h=t.isAnonymous,d=!(t.email&&o.passwordHash||(null==c?void 0:c.length)),f=!!h&&d,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new J(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function tt(t){const e=(0,i.m9)(t);await Z(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}class et{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){T(t.idToken,"internal-error"),T(void 0!==t.idToken,"internal-error"),T(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=Y(t);return T(e,"internal-error"),T(void 0!==e.exp,"internal-error"),T(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return T(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:s,expiresIn:r}=await async function(t,e){const n=await U(t,{},(async()=>{const n=(0,i.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,o=q(t,s,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",P.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,s,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:s}=e,r=new et;return n&&(T("string"==typeof n,"internal-error",{appName:t}),r.refreshToken=n),i&&(T("string"==typeof i,"internal-error",{appName:t}),r.accessToken=i),s&&(T("number"==typeof s,"internal-error",{appName:t}),r.expirationTime=s),r}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new et,this.toJSON())}_performRefresh(){return E("not implemented")}}function nt(t,e){T("string"==typeof t||void 0===t,"internal-error",{appName:e})}class it{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,s=r(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Q(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new J(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const e=await X(this,this.stsTokenManager.getToken(this.auth,t));return T(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return K(this,t)}reload(){return tt(this)}_assign(t){this!==t&&(T(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new it(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){T(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await Z(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await X(this,async function(t,e){return j(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,s,r,o,a,c,l;const u=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(s=e.phoneNumber)&&void 0!==s?s:void 0,f=null!==(r=e.photoURL)&&void 0!==r?r:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=e.createdAt)&&void 0!==c?c:void 0,y=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:b,isAnonymous:_,providerData:w,stsTokenManager:x}=e;T(v&&x,t,"internal-error");const I=et.fromJSON(this.name,x);T("string"==typeof v,t,"internal-error"),nt(u,t.name),nt(h,t.name),T("boolean"==typeof b,t,"internal-error"),T("boolean"==typeof _,t,"internal-error"),nt(d,t.name),nt(f,t.name),nt(p,t.name),nt(g,t.name),nt(m,t.name),nt(y,t.name);const E=new it({uid:v,auth:t,email:h,emailVerified:b,displayName:u,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:m,lastLoginAt:y});return w&&Array.isArray(w)&&(E.providerData=w.map((t=>Object.assign({},t)))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(t,e,n=!1){const i=new et;i.updateFromServerResponse(e);const s=new it({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await Z(s),s}}class st{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}st.type="NONE";const rt=st;function ot(t,e,n){return`firebase:${t}:${e}:${n}`}class at{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=ot(this.userKey,i.apiKey,s),this.fullPersistenceKey=ot("persistence",i.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?it._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new at(A(rt),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let s=i[0]||A(rt);const r=ot(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(r);if(e){const i=it._fromJSON(t,e);n!==s&&(o=i),s=n;break}}catch(t){}const a=i.filter((t=>t._shouldAllowMigration));return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(r,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==s)try{await t._remove(r)}catch(t){}}))),new at(s,t,n)):new at(s,t,n)}}function ct(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dt(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lt(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pt(e))return"Blackberry";if(gt(e))return"Webos";if(ut(e))return"Safari";if((e.includes("chrome/")||ht(e))&&!e.includes("edge/"))return"Chrome";if(ft(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function lt(t=(0,i.z$)()){return/firefox\//i.test(t)}function ut(t=(0,i.z$)()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ht(t=(0,i.z$)()){return/crios\//i.test(t)}function dt(t=(0,i.z$)()){return/iemobile/i.test(t)}function ft(t=(0,i.z$)()){return/android/i.test(t)}function pt(t=(0,i.z$)()){return/blackberry/i.test(t)}function gt(t=(0,i.z$)()){return/webos/i.test(t)}function mt(t=(0,i.z$)()){return/iphone|ipad|ipod/i.test(t)}function yt(t=(0,i.z$)()){return mt(t)||ft(t)||gt(t)||pt(t)||/windows phone/i.test(t)||dt(t)}function vt(t,e=[]){let n;switch(t){case"Browser":n=ct((0,i.z$)());break;case"Worker":n=`${ct((0,i.z$)())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${s.Jn}/${r}`}class bt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,i)=>{try{n(t(e))}catch(t){i(t)}}));n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(t){e.reverse();for(const t of e)try{t()}catch(t){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:t.message})}}}class _t{constructor(t,e,n){this.app=t,this.heartbeatServiceProvider=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xt(this),this.idTokenSubscription=new xt(this),this.beforeStateQueue=new bt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=A(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await at.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,r=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==r||!(null==o?void 0:o.user)||(i=o.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(t){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(t)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return T(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Z(t)}catch(t){if("auth/network-request-failed"!==t.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?(0,i.m9)(t):null;return e&&T(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&T(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(A(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new i.LL("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&A(t)||this._popupRedirectResolver;T(e,this,"argument-error"),this.redirectPersistenceManager=await at.create(this,[A(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const s="function"==typeof e?e:e.next.bind(e),r=this._isInitialized?Promise.resolve():this._initializationPromise;return T(r,this,"internal-error"),r.then((()=>s(this.currentUser))),"function"==typeof e?t.addObserver(e,n,i):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return T(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=vt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());return n&&(e["X-Firebase-Client"]=n),e}}function wt(t){return(0,i.m9)(t)}class xt{constructor(t){this.auth=t,this.observer=null,this.addObserver=(0,i.ne)((t=>this.observer=t))}get next(){return T(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function It(t,e,n){const i=wt(t);T(i._canInitEmulator,i,"emulator-config-failed"),T(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!(null==n?void 0:n.disableWarnings),r=Tt(e),{host:o,port:a}=function(t){const e=Tt(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const t=s[1];return{host:t,port:Et(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Et(e)}}}(e),c=null===a?"":`:${a}`;i.config.emulator={url:`${r}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}function Tt(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Et(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class St{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return E("not implemented")}_getIdTokenResponse(t){return E("not implemented")}_linkToIdToken(t,e){return E("not implemented")}_getReauthenticationResolver(t){return E("not implemented")}}async function kt(t,e){return j(t,"POST","/v1/accounts:resetPassword",V(t,e))}async function At(t,e){return j(t,"POST","/v1/accounts:update",e)}async function Ct(t,e){return j(t,"POST","/v1/accounts:sendOobCode",V(t,e))}class Dt extends St{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Dt(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new Dt(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return async function(t,e){return B(t,"POST","/v1/accounts:signInWithPassword",V(t,e))}(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return B(t,"POST","/v1/accounts:signInWithEmailLink",V(t,e))}(t,{email:this._email,oobCode:this._password});default:b(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return At(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return B(t,"POST","/v1/accounts:signInWithEmailLink",V(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:b(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Nt(t,e){return B(t,"POST","/v1/accounts:signInWithIdp",V(t,e))}class Ot extends St{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ot(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):b("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,s=r(e,["providerId","signInMethod"]);if(!n||!i)return null;const o=new Ot(n,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){return Nt(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Nt(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Nt(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=(0,i.xO)(e)}return t}}const Mt={USER_NOT_FOUND:"user-not-found"};class Lt extends St{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new Lt({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new Lt({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return B(t,"POST","/v1/accounts:signInWithPhoneNumber",V(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await B(t,"POST","/v1/accounts:signInWithPhoneNumber",V(t,e));if(n.temporaryProof)throw H(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return B(t,"POST","/v1/accounts:signInWithPhoneNumber",V(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Mt)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:s}=t;return n||e||i||s?new Lt({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:s}):null}}class Pt{constructor(t){var e,n,s,r,o,a;const c=(0,i.zd)((0,i.pd)(t)),l=null!==(e=c.apiKey)&&void 0!==e?e:null,u=null!==(n=c.oobCode)&&void 0!==n?n:null,h=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(s=c.mode)&&void 0!==s?s:null);T(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=null!==(r=c.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(t){const e=function(t){const e=(0,i.zd)((0,i.pd)(t)).link,n=e?(0,i.zd)((0,i.pd)(e)).deep_link_id:null,s=(0,i.zd)((0,i.pd)(t)).deep_link_id;return(s?(0,i.zd)((0,i.pd)(s)).link:null)||s||n||e||t}(t);try{return new Pt(e)}catch(t){return null}}}function Rt(t){return Pt.parseLink(t)}class Ft{constructor(){this.providerId=Ft.PROVIDER_ID}static credential(t,e){return Dt._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=Pt.parseLink(e);return T(n,"argument-error"),Dt._fromEmailAndCode(t,n.code,n.tenantId)}}Ft.PROVIDER_ID="password",Ft.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ft.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Vt{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class jt extends Vt{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Ut extends jt{static credentialFromJSON(t){const e="string"==typeof t?JSON.parse(t):t;return T("providerId"in e&&"signInMethod"in e,"argument-error"),Ot._fromParams(e)}credential(t){return this._credential(Object.assign(Object.assign({},t),{nonce:t.rawNonce}))}_credential(t){return T(t.idToken||t.accessToken,"argument-error"),Ot._fromParams(Object.assign(Object.assign({},t),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(t){return Ut.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return Ut.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:s,nonce:r,providerId:o}=t;if(!(n||i||e||s))return null;if(!o)return null;try{return new Ut(o)._credential({idToken:e,accessToken:n,nonce:r,pendingToken:s})}catch(t){return null}}}class Bt extends jt{constructor(){super("facebook.com")}static credential(t){return Ot._fromParams({providerId:Bt.PROVIDER_ID,signInMethod:Bt.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Bt.credentialFromTaggedObject(t)}static credentialFromError(t){return Bt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Bt.credential(t.oauthAccessToken)}catch(t){return null}}}Bt.FACEBOOK_SIGN_IN_METHOD="facebook.com",Bt.PROVIDER_ID="facebook.com";class qt extends jt{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ot._fromParams({providerId:qt.PROVIDER_ID,signInMethod:qt.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return qt.credentialFromTaggedObject(t)}static credentialFromError(t){return qt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return qt.credential(e,n)}catch(t){return null}}}qt.GOOGLE_SIGN_IN_METHOD="google.com",qt.PROVIDER_ID="google.com";class zt extends jt{constructor(){super("github.com")}static credential(t){return Ot._fromParams({providerId:zt.PROVIDER_ID,signInMethod:zt.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zt.credentialFromTaggedObject(t)}static credentialFromError(t){return zt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return zt.credential(t.oauthAccessToken)}catch(t){return null}}}zt.GITHUB_SIGN_IN_METHOD="github.com",zt.PROVIDER_ID="github.com";class Ht extends St{constructor(t,e){super(t,t),this.pendingToken=e}_getIdTokenResponse(t){return Nt(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Nt(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Nt(t,e)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i,pendingToken:s}=e;return n&&i&&s&&n===i?new Ht(n,s):null}static _create(t,e){return new Ht(t,e)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class $t extends Vt{constructor(t){T(t.startsWith("saml."),"argument-error"),super(t)}static credentialFromResult(t){return $t.samlCredentialFromTaggedObject(t)}static credentialFromError(t){return $t.samlCredentialFromTaggedObject(t.customData||{})}static credentialFromJSON(t){const e=Ht.fromJSON(t);return T(e,"argument-error"),e}static samlCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{pendingToken:e,providerId:n}=t;if(!e||!n)return null;try{return Ht._create(n,e)}catch(t){return null}}}class Wt extends jt{constructor(){super("twitter.com")}static credential(t,e){return Ot._fromParams({providerId:Wt.PROVIDER_ID,signInMethod:Wt.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Wt.credentialFromTaggedObject(t)}static credentialFromError(t){return Wt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return Wt.credential(e,n)}catch(t){return null}}}async function Kt(t,e){return B(t,"POST","/v1/accounts:signUp",V(t,e))}Wt.TWITTER_SIGN_IN_METHOD="twitter.com",Wt.PROVIDER_ID="twitter.com";class Gt{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const s=await it._fromIdTokenResponse(t,n,i),r=Yt(n);return new Gt({user:s,providerId:r,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=Yt(n);return new Gt({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function Yt(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function Xt(t){var e;const n=wt(t);if(await n._initializationPromise,null===(e=n.currentUser)||void 0===e?void 0:e.isAnonymous)return new Gt({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await Kt(n,{returnSecureToken:!0}),s=await Gt._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(s.user),s}class Qt extends i.ZR{constructor(t,e,n,i){var s;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Qt.prototype),this.customData={appName:t.name,tenantId:null!==(s=t.tenantId)&&void 0!==s?s:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new Qt(t,e,n,i)}}function Jt(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Qt._fromErrorAndOperation(t,n,e,i);throw n}))}function Zt(t){return new Set(t.map((({providerId:t})=>t)).filter((t=>!!t)))}async function te(t,e){const n=(0,i.m9)(t);await ne(!0,n,e);const{providerUserInfo:s}=await async function(t,e){return j(t,"POST","/v1/accounts:update",e)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=Zt(s||[]);return n.providerData=n.providerData.filter((t=>r.has(t.providerId))),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function ee(t,e,n=!1){const i=await X(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Gt._forOperation(t,"link",i)}async function ne(t,e,n){await Z(e);const i=!1===t?"provider-already-linked":"no-such-provider";T(Zt(e.providerData).has(n)===t,e.auth,i)}async function ie(t,e,n=!1){const{auth:i}=t,s="reauthenticate";try{const r=await X(t,Jt(i,s,e,t),n);T(r.idToken,i,"internal-error");const o=Y(r.idToken);T(o,i,"internal-error");const{sub:a}=o;return T(t.uid===a,i,"user-mismatch"),Gt._forOperation(t,s,r)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&b(i,"user-mismatch"),t}}async function se(t,e,n=!1){const i="signIn",s=await Jt(t,i,e),r=await Gt._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function re(t,e){return se(wt(t),e)}async function oe(t,e){const n=(0,i.m9)(t);return await ne(!1,n,e.providerId),ee(n,e)}async function ae(t,e){return ie((0,i.m9)(t),e)}async function ce(t,e){const n=wt(t),i=await async function(t,e){return B(t,"POST","/v1/accounts:signInWithCustomToken",V(t,e))}(n,{token:e,returnSecureToken:!0}),s=await Gt._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(s.user),s}class le{constructor(t,e){this.factorId=t,this.uid=e.mfaEnrollmentId,this.enrollmentTime=new Date(e.enrolledAt).toUTCString(),this.displayName=e.displayName}static _fromServerResponse(t,e){return"phoneInfo"in e?ue._fromServerResponse(t,e):b(t,"internal-error")}}class ue extends le{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,e){return new ue(e)}}function he(t,e,n){var i;T((null===(i=n.url)||void 0===i?void 0:i.length)>0,t,"invalid-continue-uri"),T(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(T(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(T(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function de(t,e,n){const s=(0,i.m9)(t),r={requestType:"PASSWORD_RESET",email:e};n&&he(s,r,n),await async function(t,e){return Ct(t,e)}(s,r)}async function fe(t,e,n){await kt((0,i.m9)(t),{oobCode:e,newPassword:n})}async function pe(t,e){await async function(t,e){return j(t,"POST","/v1/accounts:update",V(t,e))}((0,i.m9)(t),{oobCode:e})}async function ge(t,e){const n=(0,i.m9)(t),s=await kt(n,{oobCode:e}),r=s.requestType;switch(T(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":T(s.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":T(s.mfaInfo,n,"internal-error");default:T(s.email,n,"internal-error")}let o=null;return s.mfaInfo&&(o=le._fromServerResponse(wt(n),s.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===s.requestType?s.newEmail:s.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===s.requestType?s.email:s.newEmail)||null,multiFactorInfo:o},operation:r}}async function me(t,e){const{data:n}=await ge((0,i.m9)(t),e);return n.email}async function ye(t,e,n){const i=wt(t),s=await Kt(i,{returnSecureToken:!0,email:e,password:n}),r=await Gt._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(r.user),r}function ve(t,e,n){return re((0,i.m9)(t),Ft.credential(e,n))}async function be(t,e,n){const s=(0,i.m9)(t),r={requestType:"EMAIL_SIGNIN",email:e};T(n.handleCodeInApp,s,"argument-error"),n&&he(s,r,n),await async function(t,e){return Ct(t,e)}(s,r)}function _e(t,e){const n=Pt.parseLink(e);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}async function we(t,e,n){const s=(0,i.m9)(t),r=Ft.credentialWithLink(e,n||D());return T(r._tenantId===(s.tenantId||null),s,"tenant-id-mismatch"),re(s,r)}async function xe(t,e){const n={identifier:e,continueUri:N()?D():"http://localhost"},{signinMethods:s}=await async function(t,e){return j(t,"POST","/v1/accounts:createAuthUri",V(t,e))}((0,i.m9)(t),n);return s||[]}async function Ie(t,e){const n=(0,i.m9)(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&he(n.auth,s,e);const{email:r}=await async function(t,e){return Ct(t,e)}(n.auth,s);r!==t.email&&await t.reload()}async function Te(t,e,n){const s=(0,i.m9)(t),r={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&he(s.auth,r,n);const{email:o}=await async function(t,e){return Ct(t,e)}(s.auth,r);o!==t.email&&await t.reload()}async function Ee(t,{displayName:e,photoURL:n}){if(void 0===e&&void 0===n)return;const s=(0,i.m9)(t),r={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await X(s,async function(t,e){return j(t,"POST","/v1/accounts:update",e)}(s.auth,r));s.displayName=o.displayName||null,s.photoURL=o.photoUrl||null;const a=s.providerData.find((({providerId:t})=>"password"===t));a&&(a.displayName=s.displayName,a.photoURL=s.photoURL),await s._updateTokensIfNecessary(o)}function Se(t,e){return Ae((0,i.m9)(t),e,null)}function ke(t,e){return Ae((0,i.m9)(t),null,e)}async function Ae(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const r=await X(t,At(i,s));await t._updateTokensIfNecessary(r,!0)}class Ce{constructor(t,e,n={}){this.isNewUser=t,this.providerId=e,this.profile=n}}class De extends Ce{constructor(t,e,n,i){super(t,e,n),this.username=i}}class Ne extends Ce{constructor(t,e){super(t,"facebook.com",e)}}class Oe extends De{constructor(t,e){super(t,"github.com",e,"string"==typeof(null==e?void 0:e.login)?null==e?void 0:e.login:null)}}class Me extends Ce{constructor(t,e){super(t,"google.com",e)}}class Le extends De{constructor(t,e,n){super(t,"twitter.com",e,n)}}function Pe(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(t){var e,n;if(!t)return null;const{providerId:i}=t,s=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||"identitytoolkit#SignupNewUserResponse"===t.kind;if(!i&&(null==t?void 0:t.idToken)){const i=null===(n=null===(e=Y(t.idToken))||void 0===e?void 0:e.firebase)||void 0===n?void 0:n.sign_in_provider;if(i)return new Ce(r,"anonymous"!==i&&"custom"!==i?i:null)}if(!i)return null;switch(i){case"facebook.com":return new Ne(r,s);case"github.com":return new Oe(r,s);case"google.com":return new Me(r,s);case"twitter.com":return new Le(r,s,t.screenName||null);case"custom":case"anonymous":return new Ce(r,null);default:return new Ce(r,i,s)}}(n)}function Re(t,e){return(0,i.m9)(t).setPersistence(e)}function Fe(t,e,n,s){return(0,i.m9)(t).onIdTokenChanged(e,n,s)}function Ve(t,e,n){return(0,i.m9)(t).beforeAuthStateChanged(e,n)}function je(t,e,n,s){return(0,i.m9)(t).onAuthStateChanged(e,n,s)}function Ue(t){(0,i.m9)(t).useDeviceLanguage()}function Be(t,e){return(0,i.m9)(t).updateCurrentUser(e)}function qe(t){return(0,i.m9)(t).signOut()}async function ze(t){return(0,i.m9)(t).delete()}class He{constructor(t,e){this.type=t,this.credential=e}static _fromIdtoken(t){return new He("enroll",t)}static _fromMfaPendingCredential(t){return new He("signin",t)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(t){var e,n;if(null==t?void 0:t.multiFactorSession){if(null===(e=t.multiFactorSession)||void 0===e?void 0:e.pendingCredential)return He._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.idToken)return He._fromIdtoken(t.multiFactorSession.idToken)}return null}}class $e{constructor(t,e,n){this.session=t,this.hints=e,this.signInResolver=n}static _fromError(t,e){const n=wt(t),i=e.customData._serverResponse,s=(i.mfaInfo||[]).map((t=>le._fromServerResponse(n,t)));T(i.mfaPendingCredential,n,"internal-error");const r=He._fromMfaPendingCredential(i.mfaPendingCredential);return new $e(r,s,(async t=>{const s=await t._process(n,r);delete i.mfaInfo,delete i.mfaPendingCredential;const o=Object.assign(Object.assign({},i),{idToken:s.idToken,refreshToken:s.refreshToken});switch(e.operationType){case"signIn":const t=await Gt._fromIdTokenResponse(n,e.operationType,o);return await n._updateCurrentUser(t.user),t;case"reauthenticate":return T(e.user,n,"internal-error"),Gt._forOperation(e.user,e.operationType,o);default:b(n,"internal-error")}}))}async resolveSignIn(t){const e=t;return this.signInResolver(e)}}function We(t,e){var n;const s=(0,i.m9)(t),r=e;return T(e.customData.operationType,s,"argument-error"),T(null===(n=r.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,s,"argument-error"),$e._fromError(s,r)}class Ke{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload((e=>{e.mfaInfo&&(this.enrolledFactors=e.mfaInfo.map((e=>le._fromServerResponse(t.auth,e))))}))}static _fromUser(t){return new Ke(t)}async getSession(){return He._fromIdtoken(await this.user.getIdToken())}async enroll(t,e){const n=t,i=await this.getSession(),s=await X(this.user,n._process(this.user.auth,i,e));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(t){const e="string"==typeof t?t:t.uid,n=await this.user.getIdToken(),i=await X(this.user,(s=this.user.auth,r={idToken:n,mfaEnrollmentId:e},j(s,"POST","/v2/accounts/mfaEnrollment:withdraw",V(s,r))));var s,r;this.enrolledFactors=this.enrolledFactors.filter((({uid:t})=>t!==e)),await this.user._updateTokensIfNecessary(i);try{await this.user.reload()}catch(t){if("auth/user-token-expired"!==t.code)throw t}}}const Ge=new WeakMap;function Ye(t){const e=(0,i.m9)(t);return Ge.has(e)||Ge.set(e,Ke._fromUser(e)),Ge.get(e)}const Xe="__sak";class Qe{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Xe,"1"),this.storage.removeItem(Xe),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class Je extends Qe{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=(0,i.z$)();return ut(t)||mt(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=yt(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const s=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);(0,i.w1)()&&10===document.documentMode&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,10):s()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Je.type="LOCAL";const Ze=Je;class tn extends Qe{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}tn.type="SESSION";const en=tn;class nn{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new nn(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:s}=e.data,r=this.handlersMap[i];if(!(null==r?void 0:r.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(r).map((async t=>t(e.origin,s))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function sn(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}nn.receivers=[];class rn{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,r;return new Promise(((o,a)=>{const c=sn("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);r={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),s=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),o(e.data.response);break;default:clearTimeout(l),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(r),i.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])})).finally((()=>{r&&this.removeMessageHandler(r)}))}}function on(){return window}function an(){return void 0!==on().WorkerGlobalScope&&"function"==typeof on().importScripts}const cn="firebaseLocalStorageDb",ln="firebaseLocalStorage",un="fbase_key";class hn{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function dn(t,e){return t.transaction([ln],e?"readwrite":"readonly").objectStore(ln)}function fn(){const t=indexedDB.open(cn,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(ln,{keyPath:un})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(ln)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(cn);return new hn(t).toPromise()}(),e(await fn()))}))}))}async function pn(t,e,n){const i=dn(t,!0).put({[un]:e,value:n});return new hn(i).toPromise()}function gn(t,e){const n=dn(t,!0).delete(e);return new hn(n).toPromise()}class mn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await fn()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return an()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nn._getInstance(an()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new rn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var e;if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await fn();return await pn(t,Xe,"1"),await gn(t,Xe),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>pn(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=dn(t,!1).get(e),i=await new hn(n).toPromise();return void 0===i?null:i.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>gn(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=dn(t,!1).getAll();return new hn(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:i,value:s}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),e.push(i));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}mn.type="LOCAL";const yn=mn;function vn(t){return new Promise(((e,n)=>{const i=document.createElement("script");var s,r;i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=_("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",(null!==(r=null===(s=document.getElementsByTagName("head"))||void 0===s?void 0:s[0])&&void 0!==r?r:document).appendChild(i)}))}function bn(t){return`__${t}${Math.floor(1e6*Math.random())}`}const _n=1e12;class wn{constructor(t){this.auth=t,this.counter=_n,this._widgets=new Map}render(t,e){const n=this.counter;return this._widgets.set(n,new xn(t,this.auth.name,e||{})),this.counter++,n}reset(t){var e;const n=t||_n;null===(e=this._widgets.get(n))||void 0===e||e.delete(),this._widgets.delete(n)}getResponse(t){var e;const n=t||_n;return(null===(e=this._widgets.get(n))||void 0===e?void 0:e.getResponse())||""}async execute(t){var e;const n=t||_n;return null===(e=this._widgets.get(n))||void 0===e||e.execute(),""}}class xn{constructor(t,e,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i="string"==typeof t?document.getElementById(t):t;T(i,"argument-error",{appName:e}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<50;t++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}();const{callback:t,"expired-callback":e}=this.params;if(t)try{t(this.responseToken)}catch(t){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,e)try{e()}catch(t){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const In=bn("rcb"),Tn=new M(3e4,6e4);class En{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!on().grecaptcha}load(t,e=""){return T(function(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}(e),t,"argument-error"),this.shouldResolveImmediately(e)?Promise.resolve(on().grecaptcha):new Promise(((n,s)=>{const r=on().setTimeout((()=>{s(_(t,"network-request-failed"))}),Tn.get());on()[In]=()=>{on().clearTimeout(r),delete on()[In];const i=on().grecaptcha;if(!i)return void s(_(t,"internal-error"));const o=i.render;i.render=(t,e)=>{const n=o(t,e);return this.counter++,n},this.hostLanguage=e,n(i)},vn(`https://www.google.com/recaptcha/api.js??${(0,i.xO)({onload:In,render:"explicit",hl:e})}`).catch((()=>{clearTimeout(r),s(_(t,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){return!!on().grecaptcha&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Sn{async load(t){return new wn(t)}clearedOneInstance(){}}const kn="recaptcha",An={theme:"light",type:"image"};class Cn{constructor(t,e=Object.assign({},An),n){this.parameters=e,this.type=kn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wt(n),this.isInvisible="invisible"===this.parameters.size,T("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const i="string"==typeof t?document.getElementById(t):t;T(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Sn:new En,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),e=this.getAssertedRecaptcha();return e.getResponse(t)||new Promise((n=>{const i=t=>{t&&(this.tokenChangeListeners.delete(i),n(t))};this.tokenChangeListeners.add(i),this.isInvisible&&e.execute(t)}))}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((t=>{throw this.renderPromise=null,t}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((t=>{this.container.removeChild(t)}))}validateStartingState(){T(!this.parameters.sitekey,this.auth,"argument-error"),T(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),T("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return e=>{if(this.tokenChangeListeners.forEach((t=>t(e))),"function"==typeof t)t(e);else if("string"==typeof t){const n=on()[t];"function"==typeof n&&n(e)}}}assertNotDestroyed(){T(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){T(N()&&!an(),this.auth,"internal-error"),await function(){let t=null;return new Promise((e=>{"complete"!==document.readyState?(t=()=>e(),window.addEventListener("load",t)):e()})).catch((e=>{throw t&&window.removeEventListener("load",t),e}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await async function(t){return(await j(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);T(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return T(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Dn{constructor(t,e){this.verificationId=t,this.onConfirmation=e}confirm(t){const e=Lt._fromVerification(this.verificationId,t);return this.onConfirmation(e)}}async function Nn(t,e,n){const s=wt(t),r=await Ln(s,e,(0,i.m9)(n));return new Dn(r,(t=>re(s,t)))}async function On(t,e,n){const s=(0,i.m9)(t);await ne(!1,s,"phone");const r=await Ln(s.auth,e,(0,i.m9)(n));return new Dn(r,(t=>oe(s,t)))}async function Mn(t,e,n){const s=(0,i.m9)(t),r=await Ln(s.auth,e,(0,i.m9)(n));return new Dn(r,(t=>ae(s,t)))}async function Ln(t,e,n){var i;const s=await n.verify();try{let r;if(T("string"==typeof s,t,"argument-error"),T(n.type===kn,t,"argument-error"),r="string"==typeof e?{phoneNumber:e}:e,"session"in r){const e=r.session;if("phoneNumber"in r){T("enroll"===e.type,t,"internal-error");const n=await function(t,e){return j(t,"POST","/v2/accounts/mfaEnrollment:start",V(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{T("signin"===e.type,t,"internal-error");const n=(null===(i=r.multiFactorHint)||void 0===i?void 0:i.uid)||r.multiFactorUid;T(n,t,"missing-multi-factor-info");const o=await function(t,e){return j(t,"POST","/v2/accounts/mfaSignIn:start",V(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return j(t,"POST","/v1/accounts:sendVerificationCode",V(t,e))}(t,{phoneNumber:r.phoneNumber,recaptchaToken:s});return e}}finally{n._reset()}}async function Pn(t,e){await ee((0,i.m9)(t),e)}class Rn{constructor(t){this.providerId=Rn.PROVIDER_ID,this.auth=wt(t)}verifyPhoneNumber(t,e){return Ln(this.auth,t,(0,i.m9)(e))}static credential(t,e){return Lt._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Rn.credentialFromTaggedObject(e)}static credentialFromError(t){return Rn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?Lt._fromTokenResponse(e,n):null}}function Fn(t,e){return e?A(e):(T(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}Rn.PROVIDER_ID="phone",Rn.PHONE_SIGN_IN_METHOD="phone";class Vn extends St{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Nt(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Nt(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Nt(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function jn(t){return se(t.auth,new Vn(t),t.bypassAuthState)}function Un(t){const{auth:e,user:n}=t;return T(n,e,"internal-error"),ie(n,new Vn(t),t.bypassAuthState)}async function Bn(t){const{auth:e,user:n}=t;return T(n,e,"internal-error"),ee(n,new Vn(t),t.bypassAuthState)}class qn{constructor(t,e,n,i,s=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:s,error:r,type:o}=t;if(r)return void this.reject(r);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return jn;case"linkViaPopup":case"linkViaRedirect":return Bn;case"reauthViaPopup":case"reauthViaRedirect":return Un;default:b(this.auth,"internal-error")}}resolve(t){S(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){S(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zn=new M(2e3,1e4);async function Hn(t,e,n){const i=wt(t);x(t,e,Vt);const s=Fn(i,n);return new Kn(i,"signInViaPopup",e,s).executeNotNull()}async function $n(t,e,n){const s=(0,i.m9)(t);x(s.auth,e,Vt);const r=Fn(s.auth,n);return new Kn(s.auth,"reauthViaPopup",e,r,s).executeNotNull()}async function Wn(t,e,n){const s=(0,i.m9)(t);x(s.auth,e,Vt);const r=Fn(s.auth,n);return new Kn(s.auth,"linkViaPopup",e,r,s).executeNotNull()}class Kn extends qn{constructor(t,e,n,i,s){super(t,e,i,s),this.provider=n,this.authWindow=null,this.pollId=null,Kn.currentPopupAction&&Kn.currentPopupAction.cancel(),Kn.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return T(t,this.auth,"internal-error"),t}async onExecution(){S(1===this.filter.length,"Popup operations only handle one event");const t=sn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(_(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(_(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kn.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(_(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(t,zn.get())};t()}}Kn.currentPopupAction=null;const Gn=new Map;class Yn extends qn{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=Gn.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=Zn(e),i=Jn(t);if(!await i._isAvailable())return!1;const s="true"===await i._get(n);return await i._remove(n),s}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(e)}catch(e){t=()=>Promise.reject(e)}Gn.set(this.auth._key(),t)}return this.bypassAuthState||Gn.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Xn(t,e){return Jn(t)._set(Zn(e),"true")}function Qn(t,e){Gn.set(t._key(),e)}function Jn(t){return A(t._redirectPersistence)}function Zn(t){return ot("pendingRedirect",t.config.apiKey,t.name)}function ti(t,e,n){return async function(t,e,n){const i=wt(t);x(t,e,Vt);const s=Fn(i,n);return await Xn(s,i),s._openRedirect(i,e,"signInViaRedirect")}(t,e,n)}function ei(t,e,n){return async function(t,e,n){const s=(0,i.m9)(t);x(s.auth,e,Vt);const r=Fn(s.auth,n);await Xn(r,s.auth);const o=await ri(s);return r._openRedirect(s.auth,e,"reauthViaRedirect",o)}(t,e,n)}function ni(t,e,n){return async function(t,e,n){const s=(0,i.m9)(t);x(s.auth,e,Vt);const r=Fn(s.auth,n);await ne(!1,s,e.providerId),await Xn(r,s.auth);const o=await ri(s);return r._openRedirect(s.auth,e,"linkViaRedirect",o)}(t,e,n)}async function ii(t,e){return await wt(t)._initializationPromise,si(t,e,!1)}async function si(t,e,n=!1){const i=wt(t),s=Fn(i,e),r=new Yn(i,s,n),o=await r.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}async function ri(t){const e=sn(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}class oi{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ci(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!ci(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(_(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ai(t))}saveEventToCache(t){this.cachedEventUids.add(ai(t)),this.lastProcessedEventTime=Date.now()}}function ai(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function ci({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const li=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ui=/^https?/;function hi(t){const e=D(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return""===s.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===i}if(!ui.test(n))return!1;if(li.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const di=new M(3e4,6e4);function fi(){const t=on().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let pi=null;function gi(t){return pi=pi||function(t){return new Promise(((e,n)=>{var i,s,r;function o(){fi(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fi(),n(_(t,"network-request-failed"))},timeout:di.get()})}if(null===(s=null===(i=on().gapi)||void 0===i?void 0:i.iframes)||void 0===s?void 0:s.Iframe)e(gapi.iframes.getContext());else{if(!(null===(r=on().gapi)||void 0===r?void 0:r.load)){const e=bn("iframefcb");return on()[e]=()=>{gapi.load?o():n(_(t,"network-request-failed"))},vn(`https://apis.google.com/js/api.js?onload=${e}`).catch((t=>n(t)))}o()}})).catch((t=>{throw pi=null,t}))}(t),pi}const mi=new M(5e3,15e3),yi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bi(t){const e=t.config;T(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?L(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:s.Jn},o=vi.get(t.config.apiHost);o&&(r.eid=o);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,i.xO)(r).slice(1)}`}const _i={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class wi{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function xi(t,e,n,r,o,a){T(t.config.authDomain,t,"auth-domain-config-required"),T(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:s.Jn,eventId:o};if(e instanceof Vt){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",(0,i.xb)(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(a||{}))c[t]=e}if(e instanceof jt){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(c.scopes=t.join(","))}t.tenantId&&(c.tid=t.tenantId);const l=c;for(const t of Object.keys(l))void 0===l[t]&&delete l[t];return`${function({config:t}){return t.emulator?L(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${(0,i.xO)(l).slice(1)}`}const Ii="webStorageSupport",Ti=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=en,this._completeRedirectFn=si,this._overrideRedirectResult=Qn}async _openPopup(t,e,n,s){var r;return S(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()"),function(t,e,n,s=500,r=600){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const l=Object.assign(Object.assign({},_i),{width:s.toString(),height:r.toString(),top:o,left:a}),u=(0,i.z$)().toLowerCase();n&&(c=ht(u)?"_blank":n),lt(u)&&(e=e||"http://localhost",l.scrollbars="yes");const h=Object.entries(l).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=(0,i.z$)()){var e;return mt(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==c)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",c),new wi(null);const d=window.open(e||"",c,h);T(d,t,"popup-blocked");try{d.focus()}catch(t){}return new wi(d)}(t,xi(t,e,n,D(),s),sn())}async _openRedirect(t,e,n,i){var s;return await this._originValidation(t),s=xi(t,e,n,D(),i),on().location.href=s,new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(S(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await async function(t){const e=await gi(t),n=on().gapi;return T(n,t,"internal-error"),e.open({where:document.body,url:bi(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yi,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const s=_(t,"network-request-failed"),r=on().setTimeout((()=>{i(s)}),mi.get());function o(){on().clearTimeout(r),n(e)}e.ping(o).then(o,(()=>{i(s)}))}))))}(t),n=new oi(t);return e.register("authEvent",(e=>(T(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:n.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Ii,{type:Ii},(n=>{var i;const s=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i.webStorageSupport;void 0!==s&&e(!!s),b(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return j(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(hi(t))return}catch(t){}b(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return yt()||ut()||mt()}};class Ei extends class{constructor(t){this.factorId=t}_process(t,e,n){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,n);case"signin":return this._finalizeSignIn(t,e.credential);default:return E("unexpected MultiFactorSessionType")}}}{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new Ei(t)}_finalizeEnroll(t,e,n){return function(t,e){return j(t,"POST","/v2/accounts/mfaEnrollment:finalize",V(t,e))}(t,{idToken:e,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return function(t,e){return j(t,"POST","/v2/accounts/mfaSignIn:finalize",V(t,e))}(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Si{constructor(){}static assertion(t){return Ei._fromCredential(t)}}Si.FACTOR_ID="phone";var ki,Ai="@firebase/auth",Ci="0.20.2";class Di{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{var n;t((null===(n=e)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){T(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ni(t=(0,s.Mq)()){const e=(0,s.qX)(t,"auth");return e.isInitialized()?e.getImmediate():C(t,{popupRedirectResolver:Ti,persistence:[yn,Ze,en]})}ki="Browser",(0,s.Xd)(new a.wA("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),{apiKey:s,authDomain:r}=n.options;return((t,n)=>{T(s&&!s.includes(":"),"invalid-api-key",{appName:t.name}),T(!(null==r?void 0:r.includes(":")),"argument-error",{appName:t.name});const i={apiKey:s,authDomain:r,clientPlatform:ki,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vt(ki)},o=new _t(t,n,i);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(A);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(o,e),o})(n,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),(0,s.Xd)(new a.wA("auth-internal",(t=>{return e=wt(t.getProvider("auth").getImmediate()),new Di(e);var e}),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.KN)(Ai,Ci,void 0),(0,s.KN)(Ai,Ci,"esm2017")},591:(t,e,n)=>{"use strict";n.r(e),n.d(e,{AbstractUserDataWriter:()=>gp,Bytes:()=>uf,CACHE_SIZE_UNLIMITED:()=>Hd,CollectionReference:()=>Pd,DocumentReference:()=>Md,DocumentSnapshot:()=>zf,FieldPath:()=>cf,FieldValue:()=>hf,Firestore:()=>$d,FirestoreError:()=>Mi,GeoPoint:()=>df,LoadBundleTask:()=>zd,Query:()=>Ld,QueryConstraint:()=>Yf,QueryDocumentSnapshot:()=>Hf,QuerySnapshot:()=>$f,SnapshotMetadata:()=>qf,Timestamp:()=>Xi,Transaction:()=>Pp,WriteBatch:()=>vp,_DatabaseId:()=>ms,_DocumentKey:()=>_s,_EmptyAppCheckTokenProvider:()=>zi,_EmptyAuthCredentialsProvider:()=>Ri,_FieldPath:()=>ss,_cast:()=>Ad,_debugAssert:()=>Di,_isBase64Available:()=>os,_logWarn:()=>Si,_setIndexConfiguration:()=>zp,_validateIsNotUsedTogether:()=>Td,addDoc:()=>Dp,arrayRemove:()=>Up,arrayUnion:()=>jp,clearIndexedDbPersistence:()=>Zd,collection:()=>Rd,collectionGroup:()=>Fd,connectFirestoreEmulator:()=>Od,deleteDoc:()=>Cp,deleteField:()=>Fp,disableNetwork:()=>nf,doc:()=>Vd,documentId:()=>lf,enableIndexedDbPersistence:()=>Xd,enableMultiTabIndexedDbPersistence:()=>Qd,enableNetwork:()=>ef,endAt:()=>lp,endBefore:()=>cp,ensureFirestoreConfigured:()=>Gd,executeWrite:()=>Mp,getDoc:()=>_p,getDocFromCache:()=>xp,getDocFromServer:()=>Ip,getDocs:()=>Tp,getDocsFromCache:()=>Ep,getDocsFromServer:()=>Sp,getFirestore:()=>Kd,increment:()=>Bp,initializeFirestore:()=>Wd,limit:()=>np,limitToLast:()=>ip,loadBundle:()=>rf,namedQuery:()=>of,onSnapshot:()=>Np,onSnapshotsInSync:()=>Op,orderBy:()=>tp,query:()=>Xf,queryEqual:()=>Ud,refEqual:()=>jd,runTransaction:()=>Rp,serverTimestamp:()=>Vp,setDoc:()=>kp,setLogLevel:()=>Ii,snapshotEqual:()=>Kf,startAfter:()=>op,startAt:()=>rp,terminate:()=>sf,updateDoc:()=>Ap,waitForPendingWrites:()=>tf,where:()=>Jf,writeBatch:()=>qp});var i,s=n(389),r=n(463),o=n(333),a=n(444),c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},l={},u=u||{},h=c||self;function d(){}function f(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var g="closure_uid_"+(1e9*Math.random()>>>0),m=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function w(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,i){for(var s=Array(arguments.length-2),r=2;r<arguments.length;r++)s[r-2]=arguments[r];return e.prototype[n].apply(t,s)}}function x(){this.s=this.s,this.o=this.o}var I={};x.prototype.s=!1,x.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,g)&&t[g]||(t[g]=++m)}(this);delete I[t]}},x.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const T=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},E=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const i=t.length,s="string"==typeof t?t.split(""):t;for(let r=0;r<i;r++)r in s&&e.call(n,s[r],r,t)};function S(t){return Array.prototype.concat.apply([],arguments)}function k(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function A(t){return/^[\s\xa0]*$/.test(t)}var C,D=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function N(t,e){return-1!=t.indexOf(e)}function O(t,e){return t<e?-1:t>e?1:0}t:{var M=h.navigator;if(M){var L=M.userAgent;if(L){C=L;break t}}C=""}function P(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function R(t){const e={};for(const n in t)e[n]=t[n];return e}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(t,e){let n,i;for(let e=1;e<arguments.length;e++){for(n in i=arguments[e],i)t[n]=i[n];for(let e=0;e<F.length;e++)n=F[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function j(t){return j[" "](t),t}j[" "]=d;var U,B,q=N(C,"Opera"),z=N(C,"Trident")||N(C,"MSIE"),H=N(C,"Edge"),$=H||z,W=N(C,"Gecko")&&!(N(C.toLowerCase(),"webkit")&&!N(C,"Edge"))&&!(N(C,"Trident")||N(C,"MSIE"))&&!N(C,"Edge"),K=N(C.toLowerCase(),"webkit")&&!N(C,"Edge");function G(){var t=h.document;return t?t.documentMode:void 0}t:{var Y="",X=(B=C,W?/rv:([^\);]+)(\)|;)/.exec(B):H?/Edge\/([\d\.]+)/.exec(B):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(B):K?/WebKit\/(\S+)/.exec(B):q?/(?:Version)[ \/]?(\S+)/.exec(B):void 0);if(X&&(Y=X?X[1]:""),z){var Q=G();if(null!=Q&&Q>parseFloat(Y)){U=String(Q);break t}}U=Y}var J,Z={};function tt(){return t=Z,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let t=0;const e=D(String(U)).split("."),n=D("9").split("."),i=Math.max(e.length,n.length);for(let o=0;0==t&&o<i;o++){var s=e[o]||"",r=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],0==s[0].length&&0==r[0].length)break;t=O(0==s[1].length?0:parseInt(s[1],10),0==r[1].length?0:parseInt(r[1],10))||O(0==s[2].length,0==r[2].length)||O(s[2],r[2]),s=s[3],r=r[3]}while(0==t)}return 0<=t}();var t}h.document&&z?J=G()||parseInt(U,10)||void 0:J=void 0;var et=J,nt=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{h.addEventListener("test",d,e),h.removeEventListener("test",d,e)}catch(t){}return t}();function it(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function st(t,e){if(it.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(W){t:{try{j(e.nodeName);var s=!0;break t}catch(t){}s=!1}s||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:rt[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&st.Z.h.call(this)}}it.prototype.h=function(){this.defaultPrevented=!0},w(st,it);var rt={2:"touch",3:"pen",4:"mouse"};st.prototype.h=function(){st.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ot="closure_listenable_"+(1e6*Math.random()|0),at=0;function ct(t,e,n,i,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ia=s,this.key=++at,this.ca=this.fa=!1}function lt(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function ut(t){this.src=t,this.g={},this.h=0}function ht(t,e){var n=e.type;if(n in t.g){var i,s=t.g[n],r=T(s,e);(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(lt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function dt(t,e,n,i){for(var s=0;s<t.length;++s){var r=t[s];if(!r.ca&&r.listener==e&&r.capture==!!n&&r.ia==i)return s}return-1}ut.prototype.add=function(t,e,n,i,s){var r=t.toString();(t=this.g[r])||(t=this.g[r]=[],this.h++);var o=dt(t,e,i,s);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new ct(e,this.src,r,!!i,s)).fa=n,t.push(e)),e};var ft="closure_lm_"+(1e6*Math.random()|0),pt={};function gt(t,e,n,i,s){if(i&&i.once)return yt(t,e,n,i,s);if(Array.isArray(e)){for(var r=0;r<e.length;r++)gt(t,e[r],n,i,s);return null}return n=Tt(n),t&&t[ot]?t.N(e,n,p(i)?!!i.capture:!!i,s):mt(t,e,n,!1,i,s)}function mt(t,e,n,i,s,r){if(!e)throw Error("Invalid event type");var o=p(s)?!!s.capture:!!s,a=xt(t);if(a||(t[ft]=a=new ut(t)),(n=a.add(e,n,i,o,r)).proxy)return n;if(i=function(){var t=wt;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)nt||(s=o),void 0===s&&(s=!1),t.addEventListener(e.toString(),i,s);else if(t.attachEvent)t.attachEvent(_t(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function yt(t,e,n,i,s){if(Array.isArray(e)){for(var r=0;r<e.length;r++)yt(t,e[r],n,i,s);return null}return n=Tt(n),t&&t[ot]?t.O(e,n,p(i)?!!i.capture:!!i,s):mt(t,e,n,!0,i,s)}function vt(t,e,n,i,s){if(Array.isArray(e))for(var r=0;r<e.length;r++)vt(t,e[r],n,i,s);else i=p(i)?!!i.capture:!!i,n=Tt(n),t&&t[ot]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=dt(r=t.g[e],n,i,s))&&(lt(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete t.g[e],t.h--))):t&&(t=xt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dt(e,n,i,s)),(n=-1<t?e[t]:null)&&bt(n))}function bt(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[ot])ht(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(_t(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=xt(e))?(ht(n,t),0==n.h&&(n.src=null,e[ft]=null)):lt(t)}}}function _t(t){return t in pt?pt[t]:pt[t]="on"+t}function wt(t,e){if(t.ca)t=!0;else{e=new st(e,this);var n=t.listener,i=t.ia||t.src;t.fa&&bt(t),t=n.call(i,e)}return t}function xt(t){return(t=t[ft])instanceof ut?t:null}var It="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tt(t){return"function"==typeof t?t:(t[It]||(t[It]=function(e){return t.handleEvent(e)}),t[It])}function Et(){x.call(this),this.i=new ut(this),this.P=this,this.I=null}function St(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,"string"==typeof e)e=new it(e,t);else if(e instanceof it)e.target=e.target||t;else{var s=e;V(e=new it(i,t),s)}if(s=!0,n)for(var r=n.length-1;0<=r;r--){var o=e.g=n[r];s=kt(o,i,!0,e)&&s}if(s=kt(o=e.g=t,i,!0,e)&&s,s=kt(o,i,!1,e)&&s,n)for(r=0;r<n.length;r++)s=kt(o=e.g=n[r],i,!1,e)&&s}function kt(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&ht(t.i,o),s=!1!==a.call(c,i)&&s}}return s&&!i.defaultPrevented}w(Et,x),Et.prototype[ot]=!0,Et.prototype.removeEventListener=function(t,e,n,i){vt(this,t,e,n,i)},Et.prototype.M=function(){if(Et.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)lt(n[i]);delete e.g[t],e.h--}}this.I=null},Et.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},Et.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var At=h.JSON.stringify;function Ct(){var t=Rt;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Dt,Nt=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new Ot),(t=>t.reset()));class Ot{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Mt(t){h.setTimeout((()=>{throw t}),0)}function Lt(t,e){Dt||function(){var t=h.Promise.resolve(void 0);Dt=function(){t.then(Ft)}}(),Pt||(Dt(),Pt=!0),Rt.add(t,e)}var Pt=!1,Rt=new class{constructor(){this.h=this.g=null}add(t,e){const n=Nt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function Ft(){for(var t;t=Ct();){try{t.h.call(t.g)}catch(t){Mt(t)}var e=Nt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Pt=!1}function Vt(t,e){Et.call(this),this.h=t||1,this.g=e||h,this.j=b(this.kb,this),this.l=Date.now()}function jt(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Ut(t,e,n){if("function"==typeof t)n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:h.setTimeout(t,e||0)}function Bt(t){t.g=Ut((()=>{t.g=null,t.i&&(t.i=!1,Bt(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}w(Vt,Et),(i=Vt.prototype).da=!1,i.S=null,i.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),St(this,"tick"),this.da&&(jt(this),this.start()))}},i.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},i.M=function(){Vt.Z.M.call(this),jt(this),delete this.g};class qt extends x{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Bt(this)}M(){super.M(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zt(t){x.call(this),this.h=t,this.g={}}w(zt,x);var Ht=[];function $t(t,e,n,i){Array.isArray(n)||(n&&(Ht[0]=n.toString()),n=Ht);for(var s=0;s<n.length;s++){var r=gt(e,n[s],i||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}}function Wt(t){P(t.g,(function(t,e){this.g.hasOwnProperty(e)&&bt(t)}),t),t.g={}}function Kt(){this.g=!0}function Gt(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<s.length;o++)s[o]=""}}}return At(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}zt.prototype.M=function(){zt.Z.M.call(this),Wt(this)},zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Kt.prototype.Aa=function(){this.g=!1},Kt.prototype.info=function(){};var Yt={},Xt=null;function Qt(){return Xt=Xt||new Et}function Jt(t){it.call(this,Yt.Ma,t)}function Zt(t){const e=Qt();St(e,new Jt(e,t))}function te(t,e){it.call(this,Yt.STAT_EVENT,t),this.stat=e}function ee(t){const e=Qt();St(e,new te(e,t))}function ne(t,e){it.call(this,Yt.Na,t),this.size=e}function ie(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return h.setTimeout((function(){t()}),e)}Yt.Ma="serverreachability",w(Jt,it),Yt.STAT_EVENT="statevent",w(te,it),Yt.Na="timingevent",w(ne,it);var se={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},re={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function oe(){}function ae(t){return t.h||(t.h=t.i())}function ce(){}oe.prototype.h=null;var le,ue={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function he(){it.call(this,"d")}function de(){it.call(this,"c")}function fe(){}function pe(t,e,n,i){this.l=t,this.j=e,this.m=n,this.X=i||1,this.V=new zt(this),this.P=me,t=$?125:void 0,this.W=new Vt(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ge}function ge(){this.i=null,this.g="",this.h=!1}w(he,it),w(de,it),w(fe,oe),fe.prototype.g=function(){return new XMLHttpRequest},fe.prototype.i=function(){return{}},le=new fe;var me=45e3,ye={},ve={};function be(t,e,n){t.K=1,t.v=qe(Re(e)),t.s=n,t.U=!0,_e(t,null)}function _e(t,e){t.F=Date.now(),Te(t),t.A=Re(t.v);var n=t.A,i=t.X;Array.isArray(i)||(i=[String(i)]),en(n.h,"t",i),t.C=0,n=t.l.H,t.h=new ge,t.g=ni(t.l,n?e:null,!t.s),0<t.O&&(t.L=new qt(b(t.Ia,t,t.g),t.O)),$t(t.V,t.g,"readystatechange",t.gb),e=t.H?R(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Zt(1),function(t,e,n,i,s,r){t.info((function(){if(t.g)if(r)for(var o="",a=r.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function we(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function xe(t,e,n){let i,s=!0;for(;!t.I&&t.C<n.length;){if(i=Ie(t,n),i==ve){4==e&&(t.o=4,ee(14),s=!1),Gt(t.j,t.m,null,"[Incomplete Response]");break}if(i==ye){t.o=4,ee(15),Gt(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}Gt(t.j,t.m,i,null),Ce(t,i)}we(t)&&i!=ve&&i!=ye&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ee(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gn(e),e.L=!0,ee(11))):(Gt(t.j,t.m,n,"[Invalid Chunked Response]"),Ae(t),ke(t))}function Ie(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?ve:(n=Number(e.substring(n,i)),isNaN(n)?ye:(i+=1)+n>e.length?ve:(e=e.substr(i,n),t.C=i+n,e))}function Te(t){t.Y=Date.now()+t.P,Ee(t,t.P)}function Ee(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=ie(b(t.eb,t),e)}function Se(t){t.B&&(h.clearTimeout(t.B),t.B=null)}function ke(t){0==t.l.G||t.I||Qn(t.l,t)}function Ae(t){Se(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,jt(t.W),Wt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Ce(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||cn(n.i,t)))if(n.I=t.N,!t.J&&cn(n.i,t)&&3==n.G){try{var i=n.Ca.g.parse(e)}catch(t){i=null}if(Array.isArray(i)&&3==i.length){var s=i;if(0==s[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Xn(n),jn(n)}Kn(n),ee(18)}}else n.ta=s[1],0<n.ta-n.U&&37500>s[2]&&n.N&&0==n.A&&!n.v&&(n.v=ie(b(n.ab,n),6e3));if(1>=an(n.i)&&n.ka){try{n.ka()}catch(t){}n.ka=void 0}}else Zn(n,11)}else if((t.J||n.g==t)&&Xn(n),!A(e))for(s=n.Ca.g.parse(e),e=0;e<s.length;e++){let l=s[e];if(n.U=l[0],l=l[1],2==n.G)if("c"==l[0]){n.J=l[1],n.la=l[2];const e=l[3];null!=e&&(n.ma=e,n.h.info("VER="+n.ma));const s=l[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(i=1.5*u,n.K=i,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var r=i.i;!r.g&&(N(t,"spdy")||N(t,"quic")||N(t,"h2"))&&(r.j=r.l,r.g=new Set,r.h&&(ln(r,r.h),r.h=null))}if(i.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.sa=t,Be(i.F,i.D,t))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((i=n).oa=ei(i,i.H?i.la:null,i.W),o.J){un(i.i,o);var a=o,c=i.K;c&&a.setTimeout(c),a.B&&(Se(a),Te(a)),i.g=o}else Wn(i);0<n.l.length&&qn(n)}else"stop"!=l[0]&&"close"!=l[0]||Zn(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Zn(n,7):Vn(n):"noop"!=l[0]&&n.j&&n.j.wa(l),n.A=0)}Zt(4)}catch(t){}}function De(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)E(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(f(t)||"string"==typeof t){n=[];for(var i=t.length,s=0;s<i;s++)n.push(s)}else for(s in n=[],i=0,t)n[i++]=s;i=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),s=i.length;for(var r=0;r<s;r++)e.call(void 0,i[r],n&&n[r],t)}}function Ne(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof Ne)for(n=t.T(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function Oe(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var i=t.g[e];Me(t.h,i)&&(t.g[n++]=i),e++}t.g.length=n}if(t.i!=t.g.length){var s={};for(n=e=0;e<t.g.length;)Me(s,i=t.g[e])||(t.g[n++]=i,s[i]=1),e++;t.g.length=n}}function Me(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(i=pe.prototype).setTimeout=function(t){this.P=t},i.gb=function(t){t=t.target;const e=this.L;e&&3==Mn(t)?e.l():this.Ia(t)},i.Ia=function(t){try{if(t==this.g)t:{const u=Mn(this.g);var e=this.g.Da();const d=this.g.ba();if(!(3>u)&&(3!=u||$||this.g&&(this.h.h||this.g.ga()||Ln(this.g)))){this.I||4!=u||7==e||Zt(8==e||0>=d?3:2),Se(this);var n=this.g.ba();this.N=n;e:if(we(this)){var i=Ln(this.g);t="";var s=i.length,r=4==Mn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ae(this),ke(this);var o="";break e}this.h.i=new h.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:r&&e==s-1});i.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(t,e,n,i,s,r,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+"\n"+n+"\n"+r+" "+o}))}(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(a)){var l=a;break e}}l=null}if(!(n=l)){this.i=!1,this.o=3,ee(12),Ae(this),ke(this);break t}Gt(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ce(this,n)}this.U?(xe(this,u,o),$&&this.i&&3==u&&($t(this.V,this.W,"tick",this.fb),this.W.start())):(Gt(this.j,this.m,o,null),Ce(this,o)),4==u&&Ae(this),this.i&&!this.I&&(4==u?Qn(this.l,this):(this.i=!1,Te(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,ee(12)):(this.o=0,ee(13)),Ae(this),ke(this)}}}catch(t){}},i.fb=function(){if(this.g){var t=Mn(this.g),e=this.g.ga();this.C<e.length&&(Se(this),xe(this,t,e),this.i&&4!=t&&Te(this))}},i.cancel=function(){this.I=!0,Ae(this)},i.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Zt(3),ee(17)),Ae(this),this.o=2,ke(this)):Ee(this,this.Y-t)},(i=Ne.prototype).R=function(){Oe(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},i.T=function(){return Oe(this),this.g.concat()},i.get=function(t,e){return Me(this.h,t)?this.h[t]:e},i.set=function(t,e){Me(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},i.forEach=function(t,e){for(var n=this.T(),i=0;i<n.length;i++){var s=n[i],r=this.get(s);t.call(e,r,s,this)}};var Le=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pe(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Pe){this.g=void 0!==e?e:t.g,Fe(this,t.j),this.s=t.s,Ve(this,t.i),je(this,t.m),this.l=t.l,e=t.h;var n=new Qe;n.i=e.i,e.g&&(n.g=new Ne(e.g),n.h=e.h),Ue(this,n),this.o=t.o}else t&&(n=String(t).match(Le))?(this.g=!!e,Fe(this,n[1]||"",!0),this.s=ze(n[2]||""),Ve(this,n[3]||"",!0),je(this,n[4]),this.l=ze(n[5]||"",!0),Ue(this,n[6]||"",!0),this.o=ze(n[7]||"")):(this.g=!!e,this.h=new Qe(null,this.g))}function Re(t){return new Pe(t)}function Fe(t,e,n){t.j=n?ze(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ve(t,e,n){t.i=n?ze(e,!0):e}function je(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ue(t,e,n){e instanceof Qe?(t.h=e,function(t,e){e&&!t.j&&(Je(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ze(this,e),en(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=He(e,Ye)),t.h=new Qe(e,t.g))}function Be(t,e,n){t.h.set(e,n)}function qe(t){return Be(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ze(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function He(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,$e),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $e(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pe.prototype.toString=function(){var t=[],e=this.j;e&&t.push(He(e,We,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(He(e,We,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(He(n,"/"==n.charAt(0)?Ge:Ke,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",He(n,Xe)),t.join("")};var We=/[#\/\?@]/g,Ke=/[#\?:]/g,Ge=/[#\?]/g,Ye=/[#\?@]/g,Xe=/#/g;function Qe(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Je(t){t.g||(t.g=new Ne,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),s=null;if(0<=i){var r=t[n].substring(0,i);s=t[n].substring(i+1)}else r=t[n];e(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ze(t,e){Je(t),e=nn(t,e),Me(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Me((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Oe(t)))}function tn(t,e){return Je(t),e=nn(t,e),Me(t.g.h,e)}function en(t,e,n){Ze(t,e),0<n.length&&(t.i=null,t.g.set(nn(t,e),k(n)),t.h+=n.length)}function nn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function sn(t){this.l=t||rn,t=h.PerformanceNavigationTiming?0<(t=h.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(h.g&&h.g.Ea&&h.g.Ea()&&h.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(i=Qe.prototype).add=function(t,e){Je(this),this.i=null,t=nn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},i.forEach=function(t,e){Je(this),this.g.forEach((function(n,i){E(n,(function(n){t.call(e,n,i,this)}),this)}),this)},i.T=function(){Je(this);for(var t=this.g.R(),e=this.g.T(),n=[],i=0;i<e.length;i++)for(var s=t[i],r=0;r<s.length;r++)n.push(e[i]);return n},i.R=function(t){Je(this);var e=[];if("string"==typeof t)tn(this,t)&&(e=S(e,this.g.get(nn(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=S(e,t[n])}return e},i.set=function(t,e){return Je(this),this.i=null,tn(this,t=nn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},i.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},i.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var i=e[n],s=encodeURIComponent(String(i));i=this.R(i);for(var r=0;r<i.length;r++){var o=s;""!==i[r]&&(o+="="+encodeURIComponent(String(i[r]))),t.push(o)}}return this.i=t.join("&")};var rn=10;function on(t){return!!t.h||!!t.g&&t.g.size>=t.j}function an(t){return t.h?1:t.g?t.g.size:0}function cn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function ln(t,e){t.g?t.g.add(e):t.h=e}function un(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function hn(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return k(t.i)}function dn(){}function fn(){this.g=new dn}function pn(t,e,n){const i=n||"";try{De(t,(function(t,n){let s=t;p(t)&&(s=At(t)),e.push(i+n+"="+encodeURIComponent(s))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function gn(t,e,n,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch(t){}}function mn(t){this.l=t.$b||null,this.j=t.ib||!1}function yn(t,e){Et.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=vn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}sn.prototype.cancel=function(){if(this.i=hn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},dn.prototype.stringify=function(t){return h.JSON.stringify(t,void 0)},dn.prototype.parse=function(t){return h.JSON.parse(t,void 0)},w(mn,oe),mn.prototype.g=function(){return new yn(this.l,this.j)},mn.prototype.i=function(t){return function(){return t}}({}),w(yn,Et);var vn=0;function bn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function _n(t){t.readyState=4,t.l=null,t.j=null,t.A=null,wn(t)}function wn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(i=yn.prototype).open=function(t,e){if(this.readyState!=vn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,wn(this)},i.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||h).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},i.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_n(this)),this.readyState=vn},i.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,wn(this)),this.g&&(this.readyState=3,wn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==h.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;bn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},i.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?_n(this):wn(this),3==this.readyState&&bn(this)}},i.Ua=function(t){this.g&&(this.response=this.responseText=t,_n(this))},i.Ta=function(t){this.g&&(this.response=t,_n(this))},i.ha=function(){this.g&&_n(this)},i.setRequestHeader=function(t,e){this.v.append(t,e)},i.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(yn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var xn=h.JSON.parse;function In(t){Et.call(this),this.headers=new Ne,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Tn,this.K=this.L=!1}w(In,Et);var Tn="",En=/^https?$/i,Sn=["POST","PUT"];function kn(t){return"content-type"==t.toLowerCase()}function An(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Cn(t),Nn(t)}function Cn(t){t.D||(t.D=!0,St(t,"complete"),St(t,"error"))}function Dn(t){if(t.h&&void 0!==u&&(!t.C[1]||4!=Mn(t)||2!=t.ba()))if(t.v&&4==Mn(t))Ut(t.Fa,0,t);else if(St(t,"readystatechange"),4==Mn(t)){t.h=!1;try{const a=t.ba();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===a){var s=String(t.H).match(Le)[1]||null;if(!s&&h.self&&h.self.location){var r=h.self.location.protocol;s=r.substr(0,r.length-1)}i=!En.test(s?s.toLowerCase():"")}n=i}if(n)St(t,"complete"),St(t,"success");else{t.m=6;try{var o=2<Mn(t)?t.g.statusText:""}catch(t){o=""}t.j=o+" ["+t.ba()+"]",Cn(t)}}finally{Nn(t)}}}function Nn(t,e){if(t.g){On(t);const n=t.g,i=t.C[0]?d:null;t.g=null,t.C=null,e||St(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function On(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(h.clearTimeout(t.A),t.A=null)}function Mn(t){return t.g?t.g.readyState:0}function Ln(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Tn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Pn(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=function(t){let e="";return P(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Be(t,e,n))}function Rn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Fn(t){this.za=0,this.l=[],this.h=new Kt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Rn("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Rn("baseRetryDelayMs",5e3,t),this.$a=Rn("retryDelaySeedMs",1e4,t),this.Ya=Rn("forwardChannelMaxRetries",2,t),this.ra=Rn("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new sn(t&&t.concurrentRequestLimit),this.Ca=new fn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Vn(t){if(Un(t),3==t.G){var e=t.V++,n=Re(t.F);Be(n,"SID",t.J),Be(n,"RID",e),Be(n,"TYPE","terminate"),Hn(t,n),(e=new pe(t,t.h,e,void 0)).K=2,e.v=qe(Re(n)),n=!1,h.navigator&&h.navigator.sendBeacon&&(n=h.navigator.sendBeacon(e.v.toString(),"")),!n&&h.Image&&((new Image).src=e.v,n=!0),n||(e.g=ni(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Te(e)}ti(t)}function jn(t){t.g&&(Gn(t),t.g.cancel(),t.g=null)}function Un(t){jn(t),t.u&&(h.clearTimeout(t.u),t.u=null),Xn(t),t.i.cancel(),t.m&&("number"==typeof t.m&&h.clearTimeout(t.m),t.m=null)}function Bn(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&qn(t)}function qn(t){on(t.i)||t.m||(t.m=!0,Lt(t.Ha,t),t.C=0)}function zn(t,e){var n;n=e?e.m:t.V++;const i=Re(t.F);Be(i,"SID",t.J),Be(i,"RID",n),Be(i,"AID",t.U),Hn(t,i),t.o&&t.s&&Pn(i,t.o,t.s),n=new pe(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=$n(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),ln(t.i,n),be(n,i,e)}function Hn(t,e){t.j&&De({},(function(t,n){Be(e,n,t)}))}function $n(t,e,n){n=Math.min(t.l.length,n);var i=t.j?b(t.j.Oa,t.j,t):null;t:{var s=t.l;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=s[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let r=!0;for(let o=0;o<n;o++){let n=s[o].h;const a=s[o].g;if(n-=e,0>n)e=Math.max(0,s[o].h-100),r=!1;else try{pn(a,t,"req"+n+"_")}catch(t){i&&i(a)}}if(r){i=t.join("&");break t}}}return t=t.l.splice(0,n),e.D=t,i}function Wn(t){t.g||t.u||(t.Y=1,Lt(t.Ga,t),t.A=0)}function Kn(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=ie(b(t.Ga,t),Jn(t,t.A)),t.A++,0))}function Gn(t){null!=t.B&&(h.clearTimeout(t.B),t.B=null)}function Yn(t){t.g=new pe(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Re(t.oa);Be(e,"RID","rpc"),Be(e,"SID",t.J),Be(e,"CI",t.N?"0":"1"),Be(e,"AID",t.U),Hn(t,e),Be(e,"TYPE","xmlhttp"),t.o&&t.s&&Pn(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=qe(Re(e)),n.s=null,n.U=!0,_e(n,t)}function Xn(t){null!=t.v&&(h.clearTimeout(t.v),t.v=null)}function Qn(t,e){var n=null;if(t.g==e){Xn(t),Gn(t),t.g=null;var i=2}else{if(!cn(t.i,e))return;n=e.D,un(t.i,e),i=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;St(i=Qt(),new ne(i,n,e,s)),qn(t)}else Wn(t);else if(3==(s=e.o)||0==s&&0<t.I||!(1==i&&function(t,e){return!(an(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=ie(b(t.Ha,t,e),Jn(t,t.C)),t.C++,0)))}(t,e)||2==i&&Kn(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Zn(t,5);break;case 4:Zn(t,10);break;case 3:Zn(t,6);break;default:Zn(t,2)}}function Jn(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Zn(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var i=b(t.jb,t);n||(n=new Pe("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||Fe(n,"https"),qe(n)),function(t,e){const n=new Kt;if(h.Image){const i=new Image;i.onload=_(gn,n,i,"TestLoadImage: loaded",!0,e),i.onerror=_(gn,n,i,"TestLoadImage: error",!1,e),i.onabort=_(gn,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=_(gn,n,i,"TestLoadImage: timeout",!1,e),h.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else ee(2);t.G=0,t.j&&t.j.va(e),ti(t),Un(t)}function ti(t){t.G=0,t.I=-1,t.j&&(0==hn(t.i).length&&0==t.l.length||(t.i.i.length=0,k(t.l),t.l.length=0),t.j.ua())}function ei(t,e,n){let i=function(t){return t instanceof Pe?Re(t):new Pe(t,void 0)}(n);if(""!=i.i)e&&Ve(i,e+"."+i.i),je(i,i.m);else{const t=h.location;i=function(t,e,n,i){var s=new Pe(null,void 0);return t&&Fe(s,t),e&&Ve(s,e),n&&je(s,n),i&&(s.l=i),s}(t.protocol,e?e+"."+t.hostname:t.hostname,+t.port,n)}return t.aa&&P(t.aa,(function(t,e){Be(i,e,t)})),e=t.D,n=t.sa,e&&n&&Be(i,e,n),Be(i,"VER",t.ma),Hn(t,i),i}function ni(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new In(new mn({ib:!0})):new In(t.qa)).L=t.H,e}function ii(){}function si(){if(z&&!(10<=Number(et)))throw Error("Environmental error: no available transport.")}function ri(t,e){Et.call(this),this.g=new Fn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!A(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!A(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new ci(this)}function oi(t){he.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ai(){de.call(this),this.status=1}function ci(t){this.g=t}(i=In.prototype).ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():le.g(),this.C=this.u?ae(this.u):ae(le),this.g.onreadystatechange=b(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void An(this,t)}t=n||"";const s=new Ne(this.headers);i&&De(i,(function(t,e){s.set(e,t)})),i=function(t){t:{var e=kn;const n=t.length,i="string"==typeof t?t.split(""):t;for(let s=0;s<n;s++)if(s in i&&e.call(void 0,i[s],s,t)){e=s;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(s.T()),n=h.FormData&&t instanceof h.FormData,!(0<=T(Sn,e))||i||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{On(this),0<this.B&&((this.K=function(t){return z&&tt()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=b(this.pa,this)):this.A=Ut(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){An(this,t)}},i.pa=function(){void 0!==u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,St(this,"timeout"),this.abort(8))},i.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,St(this,"complete"),St(this,"abort"),Nn(this))},i.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Nn(this,!0)),In.Z.M.call(this)},i.Fa=function(){this.s||(this.F||this.v||this.l?Dn(this):this.cb())},i.cb=function(){Dn(this)},i.ba=function(){try{return 2<Mn(this)?this.g.status:-1}catch(t){return-1}},i.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},i.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),xn(e)}},i.Da=function(){return this.m},i.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(i=Fn.prototype).ma=8,i.G=1,i.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},i.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const s=new pe(this,this.h,t,void 0);let r=this.s;if(this.P&&(r?(r=R(r),V(r,this.P)):r=this.P),null===this.o&&(s.H=r),this.ja)t:{for(var e=0,n=0;n<this.l.length;n++){var i=this.l[n];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=n;break t}if(4096===e||n===this.l.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=$n(this,s,e),Be(n=Re(this.F),"RID",t),Be(n,"CVER",22),this.D&&Be(n,"X-HTTP-Session-Id",this.D),Hn(this,n),this.o&&r&&Pn(n,this.o,r),ln(this.i,s),this.Ra&&Be(n,"TYPE","init"),this.ja?(Be(n,"$req",e),Be(n,"SID","null"),s.$=!0,be(s,n,null)):be(s,n,e),this.G=2}}else 3==this.G&&(t?zn(this,t):0==this.l.length||on(this.i)||zn(this))},i.Ga=function(){if(this.u=null,Yn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=ie(b(this.bb,this),t)}},i.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ee(10),jn(this),Yn(this))},i.ab=function(){null!=this.v&&(this.v=null,jn(this),Kn(this),ee(19))},i.jb=function(t){t?(this.h.info("Successfully pinged google.com"),ee(2)):(this.h.info("Failed to ping google.com"),ee(1))},(i=ii.prototype).xa=function(){},i.wa=function(){},i.va=function(){},i.ua=function(){},i.Oa=function(){},si.prototype.g=function(t,e){return new ri(t,e)},w(ri,Et),ri.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Lt(b(t.hb,t,e))),ee(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=ei(t,null,t.W),qn(t)},ri.prototype.close=function(){Vn(this.g)},ri.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Bn(this.g,e)}else this.v?((e={}).__data__=At(t),Bn(this.g,e)):Bn(this.g,t)},ri.prototype.M=function(){this.g.j=null,delete this.j,Vn(this.g),delete this.g,ri.Z.M.call(this)},w(oi,he),w(ai,de),w(ci,ii),ci.prototype.xa=function(){St(this.g,"a")},ci.prototype.wa=function(t){St(this.g,new oi(t))},ci.prototype.va=function(t){St(this.g,new ai(t))},ci.prototype.ua=function(){St(this.g,"b")},si.prototype.createWebChannel=si.prototype.g,ri.prototype.send=ri.prototype.u,ri.prototype.open=ri.prototype.m,ri.prototype.close=ri.prototype.close,se.NO_ERROR=0,se.TIMEOUT=8,se.HTTP_ERROR=6,re.COMPLETE="complete",ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",Et.prototype.listen=Et.prototype.N,In.prototype.listenOnce=In.prototype.O,In.prototype.getLastError=In.prototype.La,In.prototype.getLastErrorCode=In.prototype.Da,In.prototype.getStatus=In.prototype.ba,In.prototype.getResponseJson=In.prototype.Qa,In.prototype.getResponseText=In.prototype.ga,In.prototype.send=In.prototype.ea;var li=l.createWebChannelTransport=function(){return new si},ui=l.getStatEventTarget=function(){return Qt()},hi=l.ErrorCode=se,di=l.EventType=re,fi=l.Event=Yt,pi=l.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},gi=l.FetchXmlHttpFactory=mn,mi=l.WebChannel=ce,yi=l.XhrIo=In;const vi="@firebase/firestore";class bi{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}bi.UNAUTHENTICATED=new bi(null),bi.GOOGLE_CREDENTIALS=new bi("google-credentials-uid"),bi.FIRST_PARTY=new bi("first-party-uid"),bi.MOCK_USER=new bi("mock-user");let _i="9.8.0";const wi=new o.Yd("@firebase/firestore");function xi(){return wi.logLevel}function Ii(t){wi.setLogLevel(t)}function Ti(t,...e){if(wi.logLevel<=o.in.DEBUG){const n=e.map(ki);wi.debug(`Firestore (${_i}): ${t}`,...n)}}function Ei(t,...e){if(wi.logLevel<=o.in.ERROR){const n=e.map(ki);wi.error(`Firestore (${_i}): ${t}`,...n)}}function Si(t,...e){if(wi.logLevel<=o.in.WARN){const n=e.map(ki);wi.warn(`Firestore (${_i}): ${t}`,...n)}}function ki(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Ai(t="Unexpected state"){const e=`FIRESTORE (${_i}) INTERNAL ASSERTION FAILED: `+t;throw Ei(e),new Error(e)}function Ci(t,e){t||Ai()}function Di(t,e){t||Ai()}function Ni(t,e){return t}const Oi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Mi extends a.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Li{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Pi{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ri{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(bi.UNAUTHENTICATED)))}shutdown(){}}class Fi{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Vi{constructor(t){this.t=t,this.currentUser=bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let s=new Li;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Li,t.enqueueRetryable((()=>i(this.currentUser)))};const r=()=>{const e=s;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{Ti("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),r()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Ti("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Li)}}),0),r()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Ti("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Ci("string"==typeof e.accessToken),new Pi(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Ci(null===t||"string"==typeof t),new bi(t)}}class ji{constructor(t,e,n){this.type="FirstParty",this.user=bi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class Ui{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new ji(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(bi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Bi{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qi{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const n=t=>{null!=t.error&&Ti("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.p;return this.p=t.token,Ti("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{Ti("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.g.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.g.getImmediate({optional:!0});t?i(t):Ti("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Ci("string"==typeof t.token),this.p=t.token,new Bi(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class zi{getToken(){return Promise.resolve(new Bi(""))}invalidateToken(){}start(t,e){}shutdown(){}}class Hi{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.I(t),this.T=t=>e.writeSequenceNumber(t))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function $i(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}Hi.A=-1;class Wi{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=$i(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<e&&(n+=t.charAt(i[s]%t.length))}return n}}function Ki(t,e){return t<e?-1:t>e?1:0}function Gi(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}function Yi(t){return t+"\0"}class Xi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Mi(Oi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Mi(Oi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Mi(Oi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Mi(Oi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Xi.fromMillis(Date.now())}static fromDate(t){return Xi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Xi(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ki(this.nanoseconds,t.nanoseconds):Ki(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Qi{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Qi(t)}static min(){return new Qi(new Xi(0,0))}static max(){return new Qi(new Xi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ji(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ts(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class es{constructor(t,e,n){void 0===e?e=0:e>t.length&&Ai(),void 0===n?n=t.length-e:n>t.length-e&&Ai(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===es.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof es?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),s=e.get(i);if(n<s)return-1;if(n>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class ns extends es{construct(t,e,n){return new ns(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Mi(Oi.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new ns(e)}static emptyPath(){return new ns([])}}const is=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ss extends es{construct(t,e,n){return new ss(t,e,n)}static isValidIdentifier(t){return is.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ss.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ss(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const s=()=>{if(0===n.length)throw new Mi(Oi.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let r=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new Mi(Oi.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Mi(Oi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(r=!r,i++):"."!==e||r?(n+=e,i++):(s(),i++)}if(s(),r)throw new Mi(Oi.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ss(e)}static emptyPath(){return new ss([])}}class rs{constructor(t){this.fields=t,t.sort(ss.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Gi(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}function os(){return"undefined"!=typeof atob}class as{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new as(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new as(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ki(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}as.EMPTY_BYTE_STRING=new as("");const cs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ls(t){if(Ci(!!t),"string"==typeof t){let e=0;const n=cs.exec(t);if(Ci(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:us(t.seconds),nanos:us(t.nanos)}}function us(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function hs(t){return"string"==typeof t?as.fromBase64String(t):as.fromUint8Array(t)}function ds(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function fs(t){const e=t.mapValue.fields.__previous_value__;return ds(e)?fs(e):e}function ps(t){const e=ls(t.mapValue.fields.__local_write_time__.timestampValue);return new Xi(e.seconds,e.nanos)}class gs{constructor(t,e,n,i,s,r,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=r,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class ms{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new ms("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof ms&&t.projectId===this.projectId&&t.database===this.database}}function ys(t){return null==t}function vs(t){return 0===t&&1/t==-1/0}function bs(t){return"number"==typeof t&&Number.isInteger(t)&&!vs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}class _s{constructor(t){this.path=t}static fromPath(t){return new _s(ns.fromString(t))}static fromName(t){return new _s(ns.fromString(t).popFirst(5))}static empty(){return new _s(ns.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===ns.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return ns.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new _s(new ns(t.slice()))}}const ws={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xs={nullValue:"NULL_VALUE"};function Is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ds(t)?4:Fs(t)?9007199254740991:10:Ai()}function Ts(t,e){if(t===e)return!0;const n=Is(t);if(n!==Is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ps(t).isEqual(ps(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=ls(t.timestampValue),i=ls(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return hs(t.bytesValue).isEqual(hs(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return us(t.geoPointValue.latitude)===us(e.geoPointValue.latitude)&&us(t.geoPointValue.longitude)===us(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return us(t.integerValue)===us(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=us(t.doubleValue),i=us(e.doubleValue);return n===i?vs(n)===vs(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Gi(t.arrayValue.values||[],e.arrayValue.values||[],Ts);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Ji(n)!==Ji(i))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===i[t]||!Ts(n[t],i[t])))return!1;return!0}(t,e);default:return Ai()}}function Es(t,e){return void 0!==(t.values||[]).find((t=>Ts(t,e)))}function Ss(t,e){if(t===e)return 0;const n=Is(t),i=Is(e);if(n!==i)return Ki(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ki(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=us(t.integerValue||t.doubleValue),i=us(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return ks(t.timestampValue,e.timestampValue);case 4:return ks(ps(t),ps(e));case 5:return Ki(t.stringValue,e.stringValue);case 6:return function(t,e){const n=hs(t),i=hs(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let t=0;t<n.length&&t<i.length;t++){const e=Ki(n[t],i[t]);if(0!==e)return e}return Ki(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Ki(us(t.latitude),us(e.latitude));return 0!==n?n:Ki(us(t.longitude),us(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let t=0;t<n.length&&t<i.length;++t){const e=Ss(n[t],i[t]);if(e)return e}return Ki(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===ws.mapValue&&e===ws.mapValue)return 0;if(t===ws.mapValue)return 1;if(e===ws.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),s=e.fields||{},r=Object.keys(s);i.sort(),r.sort();for(let t=0;t<i.length&&t<r.length;++t){const e=Ki(i[t],r[t]);if(0!==e)return e;const o=Ss(n[i[t]],s[r[t]]);if(0!==o)return o}return Ki(i.length,r.length)}(t.mapValue,e.mapValue);default:throw Ai()}}function ks(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ki(t,e);const n=ls(t),i=ls(e),s=Ki(n.seconds,i.seconds);return 0!==s?s:Ki(n.nanos,i.nanos)}function As(t){return Cs(t)}function Cs(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=ls(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?hs(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,_s.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=Cs(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const s of e)i?i=!1:n+=",",n+=`${s}:${Cs(t.fields[s])}`;return n+"}"}(t.mapValue):Ai();var e,n}function Ds(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ns(t){return!!t&&"integerValue"in t}function Os(t){return!!t&&"arrayValue"in t}function Ms(t){return!!t&&"nullValue"in t}function Ls(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ps(t){return!!t&&"mapValue"in t}function Rs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zi(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Rs(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Rs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Fs(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function Vs(t){return"nullValue"in t?xs:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ds(ms.empty(),_s.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Ai()}function js(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ds(ms.empty(),_s.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ws:Ai()}function Us(t,e){const n=Ss(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Bs(t,e){const n=Ss(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class qs{constructor(t){this.value=t}static empty(){return new qs({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Ps(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Rs(e)}setAll(t){let e=ss.emptyPath(),n={},i=[];t.forEach(((t,s)=>{if(!e.isImmediateParentOf(s)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=s.popLast()}t?n[s.lastSegment()]=Rs(t):i.push(s.lastSegment())}));const s=this.getFieldsMap(e);this.applyChanges(s,n,i)}delete(t){const e=this.field(t.popLast());Ps(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ts(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];Ps(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Zi(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new qs(Rs(this.value))}}function zs(t){const e=[];return Zi(t.fields,((t,n)=>{const i=new ss([t]);if(Ps(n)){const t=zs(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new rs(e)}class Hs{constructor(t,e,n,i,s,r){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.data=s,this.documentState=r}static newInvalidDocument(t){return new Hs(t,0,Qi.min(),Qi.min(),qs.empty(),0)}static newFoundDocument(t,e,n){return new Hs(t,1,e,Qi.min(),n,0)}static newNoDocument(t,e){return new Hs(t,2,e,Qi.min(),qs.empty(),0)}static newUnknownDocument(t,e){return new Hs(t,3,e,Qi.min(),qs.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=qs.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=qs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Hs&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Hs(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $s{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}function Ws(t){return t.fields.find((t=>2===t.kind))}function Ks(t){return t.fields.filter((t=>2!==t.kind))}$s.UNKNOWN_ID=-1;class Gs{constructor(t,e){this.fieldPath=t,this.kind=e}}class Ys{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Ys(0,Js.min())}}function Xs(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Qi.fromTimestamp(1e9===i?new Xi(n+1,0):new Xi(n,i));return new Js(s,_s.empty(),e)}function Qs(t){return new Js(t.readTime,t.key,-1)}class Js{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Js(Qi.min(),_s.empty(),-1)}static max(){return new Js(Qi.max(),_s.empty(),-1)}}function Zs(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=_s.comparator(t.documentKey,e.documentKey),0!==n?n:Ki(t.largestBatchId,e.largestBatchId))}class tr{constructor(t,e){this.comparator=t,this.root=e||nr.EMPTY}insert(t,e){return new tr(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,nr.BLACK,null,null))}remove(t){return new tr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,nr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new er(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new er(this.root,t,this.comparator,!1)}getReverseIterator(){return new er(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new er(this.root,t,this.comparator,!0)}}class er{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class nr{constructor(t,e,n,i,s){this.key=t,this.value=e,this.color=null!=n?n:nr.RED,this.left=null!=i?i:nr.EMPTY,this.right=null!=s?s:nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,s){return new nr(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const s=n(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===s?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nr.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return nr.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ai();if(this.right.isRed())throw Ai();const t=this.left.check();if(t!==this.right.check())throw Ai();return t+(this.isRed()?0:1)}}nr.EMPTY=null,nr.RED=!0,nr.BLACK=!1,nr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ai()}get value(){throw Ai()}get color(){throw Ai()}get left(){throw Ai()}get right(){throw Ai()}copy(t,e,n,i,s){return this}insert(t,e,n){return new nr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ir{constructor(t){this.comparator=t,this.data=new tr(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new sr(this.data.getIterator())}getIteratorFrom(t){return new sr(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof ir))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new ir(this.comparator);return e.data=t,e}}class sr{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rr(t){return t.hasNext()?t.getNext():void 0}class or{constructor(t,e=null,n=[],i=[],s=null,r=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=r,this.endAt=o,this.P=null}}function ar(t,e=null,n=[],i=[],s=null,r=null,o=null){return new or(t,e,n,i,s,r,o)}function cr(t){const e=Ni(t);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>{return(e=t).field.canonicalString()+e.op.toString()+As(e.value);var e})).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),ys(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>As(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>As(t))).join(",")),e.P=t}return e.P}function lr(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Er(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(n=t.filters[s],i=e.filters[s],n.op!==i.op||!n.field.isEqual(i.field)||!Ts(n.value,i.value))return!1;var n,i;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kr(t.startAt,e.startAt)&&kr(t.endAt,e.endAt)}function ur(t){return _s.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function hr(t,e){return t.filters.filter((t=>t instanceof pr&&t.field.isEqual(e)))}function dr(t,e,n){let i=xs,s=!0;for(const n of hr(t,e)){let t=xs,e=!0;switch(n.op){case"<":case"<=":t=Vs(n.value);break;case"==":case"in":case">=":t=n.value;break;case">":t=n.value,e=!1;break;case"!=":case"not-in":t=xs}Us({value:i,inclusive:s},{value:t,inclusive:e})<0&&(i=t,s=e)}if(null!==n)for(let r=0;r<t.orderBy.length;++r)if(t.orderBy[r].field.isEqual(e)){const t=n.position[r];Us({value:i,inclusive:s},{value:t,inclusive:n.inclusive})<0&&(i=t,s=n.inclusive);break}return{value:i,inclusive:s}}function fr(t,e,n){let i=ws,s=!0;for(const n of hr(t,e)){let t=ws,e=!0;switch(n.op){case">=":case">":t=js(n.value),e=!1;break;case"==":case"in":case"<=":t=n.value;break;case"<":t=n.value,e=!1;break;case"!=":case"not-in":t=ws}Bs({value:i,inclusive:s},{value:t,inclusive:e})>0&&(i=t,s=e)}if(null!==n)for(let r=0;r<t.orderBy.length;++r)if(t.orderBy[r].field.isEqual(e)){const t=n.position[r];Bs({value:i,inclusive:s},{value:t,inclusive:n.inclusive})>0&&(i=t,s=n.inclusive);break}return{value:i,inclusive:s}}class pr extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.V(t,e,n):new gr(t,e,n):"array-contains"===e?new br(t,n):"in"===e?new _r(t,n):"not-in"===e?new wr(t,n):"array-contains-any"===e?new xr(t,n):new pr(t,e,n)}static V(t,e,n){return"in"===e?new mr(t,n):new yr(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(Ss(e,this.value)):null!==e&&Is(this.value)===Is(e)&&this.v(Ss(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ai()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class gr extends pr{constructor(t,e,n){super(t,e,n),this.key=_s.fromName(n.referenceValue)}matches(t){const e=_s.comparator(t.key,this.key);return this.v(e)}}class mr extends pr{constructor(t,e){super(t,"in",e),this.keys=vr(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class yr extends pr{constructor(t,e){super(t,"not-in",e),this.keys=vr(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function vr(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>_s.fromName(t.referenceValue)))}class br extends pr{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Os(e)&&Es(e.arrayValue,this.value)}}class _r extends pr{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Es(this.value.arrayValue,e)}}class wr extends pr{constructor(t,e){super(t,"not-in",e)}matches(t){if(Es(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Es(this.value.arrayValue,e)}}class xr extends pr{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Os(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Es(this.value.arrayValue,t)))}}class Ir{constructor(t,e){this.position=t,this.inclusive=e}}class Tr{constructor(t,e="asc"){this.field=t,this.dir=e}}function Er(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Sr(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],o=t.position[s];if(i=r.field.isKeyField()?_s.comparator(_s.fromName(o.referenceValue),n.key):Ss(o,n.data.field(r.field)),"desc"===r.dir&&(i*=-1),0!==i)break}return i}function kr(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ts(t.position[n],e.position[n]))return!1;return!0}class Ar{constructor(t,e=null,n=[],i=[],s=null,r="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=r,this.startAt=o,this.endAt=a,this.D=null,this.C=null,this.startAt,this.endAt}}function Cr(t,e,n,i,s,r,o,a){return new Ar(t,e,n,i,s,r,o,a)}function Dr(t){return new Ar(t)}function Nr(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Or(t){for(const e of t.filters)if(e.S())return e.field;return null}function Mr(t){return null!==t.collectionGroup}function Lr(t){const e=Ni(t);if(null===e.D){e.D=[];const t=Or(e),n=Nr(e);if(null!==t&&null===n)t.isKeyField()||e.D.push(new Tr(t)),e.D.push(new Tr(ss.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.D.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Tr(ss.keyField(),t))}}}return e.D}function Pr(t){const e=Ni(t);if(!e.C)if("F"===e.limitType)e.C=ar(e.path,e.collectionGroup,Lr(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of Lr(e)){const e="desc"===n.dir?"asc":"desc";t.push(new Tr(n.field,e))}const n=e.endAt?new Ir(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ir(e.startAt.position,e.startAt.inclusive):null;e.C=ar(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}return e.C}function Rr(t,e,n){return new Ar(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fr(t,e){return lr(Pr(t),Pr(e))&&t.limitType===e.limitType}function Vr(t){return`${cr(Pr(t))}|lt:${t.limitType}`}function jr(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>{return`${(e=t).field.canonicalString()} ${e.op} ${As(e.value)}`;var e})).join(", ")}]`),ys(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>As(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>As(t))).join(",")),`Target(${e})`}(Pr(t))}; limitType=${t.limitType})`}function Ur(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):_s.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=Sr(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,Lr(t),e)||t.endAt&&!function(t,e,n){const i=Sr(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,Lr(t),e))}(t,e)}function Br(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qr(t){return(e,n)=>{let i=!1;for(const s of Lr(t)){const t=zr(s,e,n);if(0!==t)return t;i=i||s.field.isKeyField()}return 0}}function zr(t,e,n){const i=t.field.isKeyField()?_s.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),s=n.data.field(t);return null!==i&&null!==s?Ss(i,s):Ai()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ai()}}function Hr(t,e){if(t.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vs(e)?"-0":e}}function $r(t){return{integerValue:""+t}}function Wr(t,e){return bs(e)?$r(e):Hr(t,e)}class Kr{constructor(){this._=void 0}}function Gr(t,e,n){return t instanceof Qr?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Jr?Zr(t,e):t instanceof to?eo(t,e):function(t,e){const n=Xr(t,e),i=io(n)+io(t.k);return Ns(n)&&Ns(t.k)?$r(i):Hr(t.M,i)}(t,e)}function Yr(t,e,n){return t instanceof Jr?Zr(t,e):t instanceof to?eo(t,e):n}function Xr(t,e){return t instanceof no?Ns(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class Qr extends Kr{}class Jr extends Kr{constructor(t){super(),this.elements=t}}function Zr(t,e){const n=so(e);for(const e of t.elements)n.some((t=>Ts(t,e)))||n.push(e);return{arrayValue:{values:n}}}class to extends Kr{constructor(t){super(),this.elements=t}}function eo(t,e){let n=so(e);for(const e of t.elements)n=n.filter((t=>!Ts(t,e)));return{arrayValue:{values:n}}}class no extends Kr{constructor(t,e){super(),this.M=t,this.k=e}}function io(t){return us(t.integerValue||t.doubleValue)}function so(t){return Os(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class ro{constructor(t,e){this.field=t,this.transform=e}}class oo{constructor(t,e){this.version=t,this.transformResults=e}}class ao{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ao}static exists(t){return new ao(void 0,t)}static updateTime(t){return new ao(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function co(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class lo{}function uo(t,e,n){t instanceof mo?function(t,e,n){const i=t.value.clone(),s=bo(t.fieldTransforms,e,n.transformResults);i.setAll(s),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof yo?function(t,e,n){if(!co(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=bo(t.fieldTransforms,e,n.transformResults),s=e.data;s.setAll(vo(t)),s.setAll(i),e.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ho(t,e,n){t instanceof mo?function(t,e,n){if(!co(t.precondition,e))return;const i=t.value.clone(),s=_o(t.fieldTransforms,n,e);i.setAll(s),e.convertToFoundDocument(go(e),i).setHasLocalMutations()}(t,e,n):t instanceof yo?function(t,e,n){if(!co(t.precondition,e))return;const i=_o(t.fieldTransforms,n,e),s=e.data;s.setAll(vo(t)),s.setAll(i),e.convertToFoundDocument(go(e),s).setHasLocalMutations()}(t,e,n):function(t,e){co(t.precondition,e)&&e.convertToNoDocument(Qi.min())}(t,e)}function fo(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),s=Xr(i.transform,t||null);null!=s&&(null==n&&(n=qs.empty()),n.set(i.field,s))}return n||null}function po(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Gi(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Jr&&e instanceof Jr||t instanceof to&&e instanceof to?Gi(t.elements,e.elements,Ts):t instanceof no&&e instanceof no?Ts(t.k,e.k):t instanceof Qr&&e instanceof Qr}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function go(t){return t.isFoundDocument()?t.version:Qi.min()}class mo extends lo{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}}class yo extends lo{constructor(t,e,n,i,s=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}}function vo(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function bo(t,e,n){const i=new Map;Ci(t.length===n.length);for(let s=0;s<n.length;s++){const r=t[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,Yr(o,a,n[s]))}return i}function _o(t,e,n){const i=new Map;for(const s of t){const t=s.transform,r=n.data.field(s.field);i.set(s.field,Gr(t,r,e))}return i}class wo extends lo{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class xo extends lo{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class Io{constructor(t){this.count=t}}var To,Eo;function So(t){switch(t){default:return Ai();case Oi.CANCELLED:case Oi.UNKNOWN:case Oi.DEADLINE_EXCEEDED:case Oi.RESOURCE_EXHAUSTED:case Oi.INTERNAL:case Oi.UNAVAILABLE:case Oi.UNAUTHENTICATED:return!1;case Oi.INVALID_ARGUMENT:case Oi.NOT_FOUND:case Oi.ALREADY_EXISTS:case Oi.PERMISSION_DENIED:case Oi.FAILED_PRECONDITION:case Oi.ABORTED:case Oi.OUT_OF_RANGE:case Oi.UNIMPLEMENTED:case Oi.DATA_LOSS:return!0}}function ko(t){if(void 0===t)return Ei("GRPC error has no .code"),Oi.UNKNOWN;switch(t){case To.OK:return Oi.OK;case To.CANCELLED:return Oi.CANCELLED;case To.UNKNOWN:return Oi.UNKNOWN;case To.DEADLINE_EXCEEDED:return Oi.DEADLINE_EXCEEDED;case To.RESOURCE_EXHAUSTED:return Oi.RESOURCE_EXHAUSTED;case To.INTERNAL:return Oi.INTERNAL;case To.UNAVAILABLE:return Oi.UNAVAILABLE;case To.UNAUTHENTICATED:return Oi.UNAUTHENTICATED;case To.INVALID_ARGUMENT:return Oi.INVALID_ARGUMENT;case To.NOT_FOUND:return Oi.NOT_FOUND;case To.ALREADY_EXISTS:return Oi.ALREADY_EXISTS;case To.PERMISSION_DENIED:return Oi.PERMISSION_DENIED;case To.FAILED_PRECONDITION:return Oi.FAILED_PRECONDITION;case To.ABORTED:return Oi.ABORTED;case To.OUT_OF_RANGE:return Oi.OUT_OF_RANGE;case To.UNIMPLEMENTED:return Oi.UNIMPLEMENTED;case To.DATA_LOSS:return Oi.DATA_LOSS;default:return Ai()}}(Eo=To||(To={}))[Eo.OK=0]="OK",Eo[Eo.CANCELLED=1]="CANCELLED",Eo[Eo.UNKNOWN=2]="UNKNOWN",Eo[Eo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Eo[Eo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Eo[Eo.NOT_FOUND=5]="NOT_FOUND",Eo[Eo.ALREADY_EXISTS=6]="ALREADY_EXISTS",Eo[Eo.PERMISSION_DENIED=7]="PERMISSION_DENIED",Eo[Eo.UNAUTHENTICATED=16]="UNAUTHENTICATED",Eo[Eo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Eo[Eo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Eo[Eo.ABORTED=10]="ABORTED",Eo[Eo.OUT_OF_RANGE=11]="OUT_OF_RANGE",Eo[Eo.UNIMPLEMENTED=12]="UNIMPLEMENTED",Eo[Eo.INTERNAL=13]="INTERNAL",Eo[Eo.UNAVAILABLE=14]="UNAVAILABLE",Eo[Eo.DATA_LOSS=15]="DATA_LOSS";class Ao{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,i]of n)if(this.equalsFn(e,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return void(i[n]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Zi(this.inner,((e,n)=>{for(const[e,i]of n)t(e,i)}))}isEmpty(){return ts(this.inner)}size(){return this.innerSize}}const Co=new tr(_s.comparator);function Do(){return Co}const No=new tr(_s.comparator);function Oo(...t){let e=No;for(const n of t)e=e.insert(n.key,n);return e}function Mo(){return new Ao((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Lo=new tr(_s.comparator),Po=new ir(_s.comparator);function Ro(...t){let e=Po;for(const n of t)e=e.add(n);return e}const Fo=new ir(Ki);function Vo(){return Fo}class jo{constructor(t,e,n,i,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e){const n=new Map;return n.set(t,Uo.createSynthesizedTargetChangeForCurrentChange(t,e)),new jo(Qi.min(),n,Vo(),Do(),Ro())}}class Uo{constructor(t,e,n,i,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e){return new Uo(as.EMPTY_BYTE_STRING,e,Ro(),Ro(),Ro())}}class Bo{constructor(t,e,n,i){this.O=t,this.removedTargetIds=e,this.key=n,this.F=i}}class qo{constructor(t,e){this.targetId=t,this.$=e}}class zo{constructor(t,e,n=as.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class Ho{constructor(){this.B=0,this.L=Ko(),this.U=as.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=Ro(),e=Ro(),n=Ro();return this.L.forEach(((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:Ai()}})),new Uo(this.U,this.q,t,e,n)}J(){this.K=!1,this.L=Ko()}Y(t,e){this.K=!0,this.L=this.L.insert(t,e)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class $o{constructor(t){this.nt=t,this.st=new Map,this.it=Do(),this.rt=Wo(),this.ot=new ir(Ki)}ut(t){for(const e of t.O)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ht(t){this.forEachTarget(t,(e=>{const n=this.lt(e);switch(t.state){case 0:this.ft(e)&&n.W(t.resumeToken);break;case 1:n.tt(),n.G||n.J(),n.W(t.resumeToken);break;case 2:n.tt(),n.G||this.removeTarget(e);break;case 3:this.ft(e)&&(n.et(),n.W(t.resumeToken));break;case 4:this.ft(e)&&(this.dt(e),n.W(t.resumeToken));break;default:Ai()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach(((t,n)=>{this.ft(n)&&e(n)}))}_t(t){const e=t.targetId,n=t.$.count,i=this.wt(e);if(i){const t=i.target;if(ur(t))if(0===n){const n=new _s(t.path);this.ct(e,n,Hs.newNoDocument(n,Qi.min()))}else Ci(1===n);else this.gt(e)!==n&&(this.dt(e),this.ot=this.ot.add(e))}}yt(t){const e=new Map;this.st.forEach(((n,i)=>{const s=this.wt(i);if(s){if(n.current&&ur(s.target)){const e=new _s(s.target.path);null!==this.it.get(e)||this.It(i,e)||this.ct(i,e,Hs.newNoDocument(e,t))}n.j&&(e.set(i,n.H()),n.J())}}));let n=Ro();this.rt.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.wt(t);return!e||2===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))})),this.it.forEach(((e,n)=>n.setReadTime(t)));const i=new jo(t,e,this.ot,this.it,n);return this.it=Do(),this.rt=Wo(),this.ot=new ir(Ki),i}at(t,e){if(!this.ft(t))return;const n=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,n),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,n){if(!this.ft(t))return;const i=this.lt(t);this.It(t,e)?i.Y(e,1):i.X(e),this.rt=this.rt.insert(e,this.Tt(e).delete(t)),n&&(this.it=this.it.insert(e,n))}removeTarget(t){this.st.delete(t)}gt(t){const e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let e=this.st.get(t);return e||(e=new Ho,this.st.set(t,e)),e}Tt(t){let e=this.rt.get(t);return e||(e=new ir(Ki),this.rt=this.rt.insert(t,e)),e}ft(t){const e=null!==this.wt(t);return e||Ti("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.st.get(t);return e&&e.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new Ho),this.nt.getRemoteKeysForTarget(t).forEach((e=>{this.ct(t,e,null)}))}It(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}function Wo(){return new tr(_s.comparator)}function Ko(){return new tr(_s.comparator)}const Go={asc:"ASCENDING",desc:"DESCENDING"},Yo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Xo{constructor(t,e){this.databaseId=t,this.N=e}}function Qo(t,e){return t.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jo(t,e){return t.N?e.toBase64():e.toUint8Array()}function Zo(t,e){return Qo(t,e.toTimestamp())}function ta(t){return Ci(!!t),Qi.fromTimestamp(function(t){const e=ls(t);return new Xi(e.seconds,e.nanos)}(t))}function ea(t,e){return function(t){return new ns(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function na(t){const e=ns.fromString(t);return Ci(Ta(e)),e}function ia(t,e){return ea(t.databaseId,e.path)}function sa(t,e){const n=na(e);if(n.get(1)!==t.databaseId.projectId)throw new Mi(Oi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Mi(Oi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _s(ca(n))}function ra(t,e){return ea(t.databaseId,e)}function oa(t){const e=na(t);return 4===e.length?ns.emptyPath():ca(e)}function aa(t){return new ns(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ca(t){return Ci(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function la(t,e,n){return{name:ia(t,e),fields:n.value.mapValue.fields}}function ua(t,e,n){const i=sa(t,e.name),s=ta(e.updateTime),r=new qs({mapValue:{fields:e.fields}}),o=Hs.newFoundDocument(i,s,r);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function ha(t,e){let n;if(e instanceof mo)n={update:la(t,e.key,e.value)};else if(e instanceof wo)n={delete:ia(t,e.key)};else if(e instanceof yo)n={update:la(t,e.key,e.data),updateMask:Ia(e.fieldMask)};else{if(!(e instanceof xo))return Ai();n={verify:ia(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof Qr)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Jr)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof to)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof no)return{fieldPath:e.field.canonicalString(),increment:n.k};throw Ai()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Zo(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ai()}(t,e.precondition)),n}function da(t,e){const n=e.currentDocument?function(t){return void 0!==t.updateTime?ao.updateTime(ta(t.updateTime)):void 0!==t.exists?ao.exists(t.exists):ao.none()}(e.currentDocument):ao.none(),i=e.updateTransforms?e.updateTransforms.map((e=>function(t,e){let n=null;if("setToServerValue"in e)Ci("REQUEST_TIME"===e.setToServerValue),n=new Qr;else if("appendMissingElements"in e){const t=e.appendMissingElements.values||[];n=new Jr(t)}else if("removeAllFromArray"in e){const t=e.removeAllFromArray.values||[];n=new to(t)}else"increment"in e?n=new no(t,e.increment):Ai();const i=ss.fromServerFormat(e.fieldPath);return new ro(i,n)}(t,e))):[];if(e.update){e.update.name;const s=sa(t,e.update.name),r=new qs({mapValue:{fields:e.update.fields}});if(e.updateMask){const t=function(t){const e=t.fieldPaths||[];return new rs(e.map((t=>ss.fromServerFormat(t))))}(e.updateMask);return new yo(s,r,t,n,i)}return new mo(s,r,n,i)}if(e.delete){const i=sa(t,e.delete);return new wo(i,n)}if(e.verify){const i=sa(t,e.verify);return new xo(i,n)}return Ai()}function fa(t,e){return{documents:[ra(t,e.path)]}}function pa(t,e){const n={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(n.parent=ra(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ra(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(t){if(0===t.length)return;const e=t.map((t=>function(t){if("=="===t.op){if(Ls(t.value))return{unaryFilter:{field:ba(t.field),op:"IS_NAN"}};if(Ms(t.value))return{unaryFilter:{field:ba(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ls(t.value))return{unaryFilter:{field:ba(t.field),op:"IS_NOT_NAN"}};if(Ms(t.value))return{unaryFilter:{field:ba(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ba(t.field),op:va(t.op),value:t.value}}}(t)));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(e.filters);s&&(n.structuredQuery.where=s);const r=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:ba(t.field),direction:ya(t.dir)}}(t)))}(e.orderBy);r&&(n.structuredQuery.orderBy=r);const o=function(t,e){return t.N||ys(e)?e:{value:e}}(t,e.limit);var a;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function ga(t){let e=oa(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Ci(1===i);const t=n.from[0];t.allDescendants?s=t.collectionId:e=e.child(t.collectionId)}let r=[];n.where&&(r=ma(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new Tr(_a(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,ys(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new Ir(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new Ir(n,e)}(n.endAt)),Cr(e,s,o,r,a,"F",c,l)}function ma(t){return t?void 0!==t.unaryFilter?[xa(t)]:void 0!==t.fieldFilter?[wa(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((t=>ma(t))).reduce(((t,e)=>t.concat(e))):Ai():[]}function ya(t){return Go[t]}function va(t){return Yo[t]}function ba(t){return{fieldPath:t.canonicalString()}}function _a(t){return ss.fromServerFormat(t.fieldPath)}function wa(t){return pr.create(_a(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ai()}}(t.fieldFilter.op),t.fieldFilter.value)}function xa(t){switch(t.unaryFilter.op){case"IS_NAN":const e=_a(t.unaryFilter.field);return pr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=_a(t.unaryFilter.field);return pr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_a(t.unaryFilter.field);return pr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=_a(t.unaryFilter.field);return pr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ai()}}function Ia(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Ta(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Ea(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ka(e)),e=Sa(t.get(n),e);return ka(e)}function Sa(t,e){let n=e;const i=t.length;for(let e=0;e<i;e++){const i=t.charAt(e);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function ka(t){return t+""}function Aa(t){const e=t.length;if(Ci(e>=2),2===e)return Ci(""===t.charAt(0)&&""===t.charAt(1)),ns.emptyPath();const n=e-2,i=[];let s="";for(let r=0;r<e;){const e=t.indexOf("",r);switch((e<0||e>n)&&Ai(),t.charAt(e+1)){case"":const n=t.substring(r,e);let o;0===s.length?o=n:(s+=n,o=s,s=""),i.push(o);break;case"":s+=t.substring(r,e),s+="\0";break;case"":s+=t.substring(r,e+1);break;default:Ai()}r=e+2}return new ns(i)}const Ca=["userId","batchId"];function Da(t,e){return[t,Ea(e)]}function Na(t,e,n){return[t,Ea(e),n]}const Oa={},Ma=["prefixPath","collectionGroup","readTime","documentId"],La=["prefixPath","collectionGroup","documentId"],Pa=["collectionGroup","readTime","prefixPath","documentId"],Ra=["canonicalId","targetId"],Fa=["targetId","path"],Va=["path","targetId"],ja=["collectionId","parent"],Ua=["indexId","uid"],Ba=["uid","sequenceNumber"],qa=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],za=["indexId","uid","orderedDocumentKey"],Ha=["userId","collectionPath","documentId"],$a=["userId","collectionPath","largestBatchId"],Wa=["userId","collectionGroup","largestBatchId"],Ka=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ga=[...Ka,"documentOverlays"],Ya=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xa=[...Ya,"indexConfiguration","indexState","indexEntries"],Qa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ja{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}class Za{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ai(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Za(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Za?e:Za.resolve(e)}catch(t){return Za.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Za.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Za.reject(e)}static resolve(t){return new Za(((e,n)=>{e(t)}))}static reject(t){return new Za(((e,n)=>{n(t)}))}static waitFor(t){return new Za(((e,n)=>{let i=0,s=0,r=!1;t.forEach((t=>{++i,t.next((()=>{++s,r&&s===i&&e()}),(t=>n(t)))})),r=!0,s===i&&e()}))}static or(t){let e=Za.resolve(!1);for(const n of t)e=e.next((t=>t?Za.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}}class tc{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.At=new Li,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{e.error?this.At.reject(new ic(t,e.error)):this.At.resolve()},this.transaction.onerror=e=>{const n=cc(e.target.error);this.At.reject(new ic(t,n))}}static open(t,e,n,i){try{return new tc(e,t.transaction(i,n))}catch(t){throw new ic(e,t)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||(Ti("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new rc(e)}}class ec{constructor(t,e,n){this.name=t,this.version=e,this.Pt=n,12.2===ec.Vt((0,a.z$)())&&Ei("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Ti("SimpleDb","Removing database:",t),oc(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!(0,a.hl)())return!1;if(ec.St())return!0;const t=(0,a.z$)(),e=ec.Vt(t),n=0<e&&e<10,i=ec.Dt(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||s)}static St(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Ct)}static xt(t,e){return t.store(e)}static Vt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Dt(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async Nt(t){return this.db||(Ti("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=t=>{const n=t.target.result;e(n)},i.onblocked=()=>{n(new ic(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const i=e.target.error;"VersionError"===i.name?n(new Mi(Oi.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new Mi(Oi.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new ic(t,i))},i.onupgradeneeded=t=>{Ti("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.Pt.kt(e,i.transaction,t.oldVersion,this.version).next((()=>{Ti("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.Mt&&(this.db.onversionchange=t=>this.Mt(t)),this.db}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,i){const s="readonly"===e;let r=0;for(;;){++r;try{this.db=await this.Nt(t);const e=tc.open(this.db,t,s?"readonly":"readwrite",n),r=i(e).next((t=>(e.bt(),t))).catch((t=>(e.abort(t),Za.reject(t)))).toPromise();return r.catch((()=>{})),await e.Rt,r}catch(t){const e="FirebaseError"!==t.name&&r<3;if(Ti("SimpleDb","Transaction failed with error:",t.message,"Retrying:",e),this.close(),!e)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class nc{constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return oc(this.Ft.delete())}}class ic extends Mi{constructor(t,e){super(Oi.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function sc(t){return"IndexedDbTransactionError"===t.name}class rc{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(Ti("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ti("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),oc(n)}add(t){return Ti("SimpleDb","ADD",this.store.name,t,t),oc(this.store.add(t))}get(t){return oc(this.store.get(t)).next((e=>(void 0===e&&(e=null),Ti("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return Ti("SimpleDb","DELETE",this.store.name,t),oc(this.store.delete(t))}count(){return Ti("SimpleDb","COUNT",this.store.name),oc(this.store.count())}qt(t,e){const n=this.options(t,e);if(n.index||"function"!=typeof this.store.getAll){const t=this.cursor(n),e=[];return this.Kt(t,((t,n)=>{e.push(n)})).next((()=>e))}{const t=this.store.getAll(n.range);return new Za(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}}Gt(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new Za(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}Qt(t,e){Ti("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.jt=!1;const i=this.cursor(n);return this.Kt(i,((t,e,n)=>n.delete()))}Wt(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.Kt(i,e)}zt(t){const e=this.cursor({});return new Za(((n,i)=>{e.onerror=t=>{const e=cc(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next((t=>{t?i.continue():n()})):n()}}))}Kt(t,e){const n=[];return new Za(((i,s)=>{t.onerror=t=>{s(t.target.error)},t.onsuccess=t=>{const s=t.target.result;if(!s)return void i();const r=new nc(s),o=e(s.primaryKey,s.value,r);if(o instanceof Za){const t=o.catch((t=>(r.done(),Za.reject(t))));n.push(t)}r.isDone?i():null===r.Lt?s.continue():s.continue(r.Lt)}})).next((()=>Za.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.jt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function oc(t){return new Za(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=cc(t.target.error);n(e)}}))}let ac=!1;function cc(t){const e=ec.Vt((0,a.z$)());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new Mi("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ac||(ac=!0,setTimeout((()=>{throw t}),0)),t}}return t}class lc extends Ja{constructor(t,e){super(),this.Ht=t,this.currentSequenceNumber=e}}function uc(t,e){const n=Ni(t);return ec.xt(n.Ht,e)}class hc{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const i=this.mutations[e];i.key.isEqual(t.key)&&uo(i,t,n[e])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&ho(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&ho(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach((e=>{const n=t.get(e.key),i=n;this.applyToLocalView(i),n.isValidDocument()||i.convertToNoDocument(Qi.min())}))}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Ro())}isEqual(t){return this.batchId===t.batchId&&Gi(this.mutations,t.mutations,((t,e)=>po(t,e)))&&Gi(this.baseMutations,t.baseMutations,((t,e)=>po(t,e)))}}class dc{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){Ci(t.mutations.length===n.length);let i=Lo;const s=t.mutations;for(let t=0;t<s.length;t++)i=i.insert(s[t].key,n[t].version);return new dc(t,e,n,i)}}class fc{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class pc{constructor(t,e,n,i,s=Qi.min(),r=Qi.min(),o=as.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=o}withSequenceNumber(t){return new pc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new pc(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new pc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class gc{constructor(t){this.Jt=t}}function mc(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:yc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(t,e){return{name:ia(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Qo(t,e.version.toTimestamp())}}(t.Jt,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:vc(e.version)};else{if(!e.isUnknownDocument())return Ai();i.unknownDocument={path:n.path.toArray(),version:vc(e.version)}}return i}function yc(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function vc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bc(t){const e=new Xi(t.seconds,t.nanoseconds);return Qi.fromTimestamp(e)}function _c(t,e){const n=(e.baseMutations||[]).map((e=>da(t.Jt,e)));for(let t=0;t<e.mutations.length-1;++t){const n=e.mutations[t];if(t+1<e.mutations.length&&void 0!==e.mutations[t+1].transform){const i=e.mutations[t+1];n.updateTransforms=i.transform.fieldTransforms,e.mutations.splice(t+1,1),++t}}const i=e.mutations.map((e=>da(t.Jt,e))),s=Xi.fromMillis(e.localWriteTimeMs);return new hc(e.batchId,s,n,i)}function wc(t){const e=bc(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?bc(t.lastLimboFreeSnapshotVersion):Qi.min();let i;var s;return void 0!==t.query.documents?(Ci(1===(s=t.query).documents.length),i=Pr(Dr(oa(s.documents[0])))):i=function(t){return Pr(ga(t))}(t.query),new pc(i,t.targetId,0,t.lastListenSequenceNumber,e,n,as.fromBase64String(t.resumeToken))}function xc(t,e){const n=vc(e.snapshotVersion),i=vc(e.lastLimboFreeSnapshotVersion);let s;s=ur(e.target)?fa(t.Jt,e.target):pa(t.Jt,e.target);const r=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:cr(e.target),readTime:n,resumeToken:r,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function Ic(t){const e=ga({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Rr(e,e.limit,"L"):e}function Tc(t,e){return new fc(e.largestBatchId,da(t.Jt,e.overlayMutation))}function Ec(t,e){const n=e.path.lastSegment();return[t,Ea(e.path.popLast()),n]}class Sc{getBundleMetadata(t,e){return kc(t).get(e).next((t=>{if(t)return{id:(e=t).bundleId,createTime:bc(e.createTime),version:e.version};var e}))}saveBundleMetadata(t,e){return kc(t).put({bundleId:(n=e).id,createTime:vc(ta(n.createTime)),version:n.version});var n}getNamedQuery(t,e){return Ac(t).get(e).next((t=>{if(t)return{name:(e=t).name,query:Ic(e.bundledQuery),readTime:bc(e.readTime)};var e}))}saveNamedQuery(t,e){return Ac(t).put(function(t){return{name:t.name,readTime:vc(ta(t.readTime)),bundledQuery:t.bundledQuery}}(e))}}function kc(t){return uc(t,"bundles")}function Ac(t){return uc(t,"namedQueries")}class Cc{constructor(t,e){this.M=t,this.userId=e}static Yt(t,e){const n=e.uid||"";return new Cc(t,n)}getOverlay(t,e){return Dc(t).get(Ec(this.userId,e)).next((t=>t?Tc(this.M,t):null))}saveOverlays(t,e,n){const i=[];return n.forEach(((n,s)=>{const r=new fc(e,s);i.push(this.Xt(t,r))})),Za.waitFor(i)}removeOverlaysForBatchId(t,e,n){const i=new Set;e.forEach((t=>i.add(Ea(t.getCollectionPath()))));const s=[];return i.forEach((e=>{const i=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,n+1],!1,!0);s.push(Dc(t).Qt("collectionPathOverlayIndex",i))})),Za.waitFor(s)}getOverlaysForCollection(t,e,n){const i=Mo(),s=Ea(e),r=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Dc(t).qt("collectionPathOverlayIndex",r).next((t=>{for(const e of t){const t=Tc(this.M,e);i.set(t.getKey(),t)}return i}))}getOverlaysForCollectionGroup(t,e,n,i){const s=Mo();let r;const o=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Dc(t).Wt({index:"collectionGroupOverlayIndex",range:o},((t,e,n)=>{const o=Tc(this.M,e);s.size()<i||o.largestBatchId===r?(s.set(o.getKey(),o),r=o.largestBatchId):n.done()})).next((()=>s))}Xt(t,e){return Dc(t).put(function(t,e,n){const[i,s,r]=Ec(e,n.mutation.key);return{userId:e,collectionPath:s,documentId:r,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ha(t.Jt,n.mutation)}}(this.M,this.userId,e))}}function Dc(t){return uc(t,"documentOverlays")}class Nc{constructor(){}Zt(t,e){this.te(t,e),e.ee()}te(t,e){if("nullValue"in t)this.ne(e,5);else if("booleanValue"in t)this.ne(e,10),e.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(e,15),e.se(us(t.integerValue));else if("doubleValue"in t){const n=us(t.doubleValue);isNaN(n)?this.ne(e,13):(this.ne(e,15),vs(n)?e.se(0):e.se(n))}else if("timestampValue"in t){const n=t.timestampValue;this.ne(e,20),"string"==typeof n?e.ie(n):(e.ie(`${n.seconds||""}`),e.se(n.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,e),this.oe(e);else if("bytesValue"in t)this.ne(e,30),e.ue(hs(t.bytesValue)),this.oe(e);else if("referenceValue"in t)this.ae(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.ne(e,45),e.se(n.latitude||0),e.se(n.longitude||0)}else"mapValue"in t?Fs(t)?this.ne(e,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,e),this.oe(e)):"arrayValue"in t?(this.he(t.arrayValue,e),this.oe(e)):Ai()}re(t,e){this.ne(e,25),this.le(t,e)}le(t,e){e.ie(t)}ce(t,e){const n=t.fields||{};this.ne(e,55);for(const t of Object.keys(n))this.re(t,e),this.te(n[t],e)}he(t,e){const n=t.values||[];this.ne(e,50);for(const t of n)this.te(t,e)}ae(t,e){this.ne(e,37),_s.fromName(t).path.forEach((t=>{this.ne(e,60),this.le(t,e)}))}ne(t,e){t.se(e)}oe(t){t.se(2)}}function Oc(t){if(0===t)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function Mc(t){const e=64-function(t){let e=0;for(let n=0;n<8;++n){const i=Oc(255&t[n]);if(e+=i,8!==i)break}return e}(t);return Math.ceil(e/8)}Nc.fe=new Nc;class Lc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this._e(n.value),n=e.next();this.we()}me(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.ge(n.value),n=e.next();this.ye()}pe(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this._e(t);else if(t<2048)this._e(960|t>>>6),this._e(128|63&t);else if(e<"\ud800"||"\udbff"<e)this._e(480|t>>>12),this._e(128|63&t>>>6),this._e(128|63&t);else{const t=e.codePointAt(0);this._e(240|t>>>18),this._e(128|63&t>>>12),this._e(128|63&t>>>6),this._e(128|63&t)}}this.we()}Ie(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.ge(t);else if(t<2048)this.ge(960|t>>>6),this.ge(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.ge(480|t>>>12),this.ge(128|63&t>>>6),this.ge(128|63&t);else{const t=e.codePointAt(0);this.ge(240|t>>>18),this.ge(128|63&t>>>12),this.ge(128|63&t>>>6),this.ge(128|63&t)}}this.ye()}Te(t){const e=this.Ee(t),n=Mc(e);this.Ae(1+n),this.buffer[this.position++]=255&n;for(let t=e.length-n;t<e.length;++t)this.buffer[this.position++]=255&e[t]}Re(t){const e=this.Ee(t),n=Mc(e);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(let t=e.length-n;t<e.length;++t)this.buffer[this.position++]=~(255&e[t])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const e=function(t){const e=new DataView(new ArrayBuffer(8));return e.setFloat64(0,t,!1),new Uint8Array(e.buffer)}(t),n=0!=(128&e[0]);e[0]^=n?255:128;for(let t=1;t<e.length;++t)e[t]^=n?255:0;return e}_e(t){const e=255&t;0===e?(this.Pe(0),this.Pe(255)):255===e?(this.Pe(255),this.Pe(0)):this.Pe(e)}ge(t){const e=255&t;0===e?(this.ve(0),this.ve(255)):255===e?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const e=t+this.position;if(e<=this.buffer.length)return;let n=2*this.buffer.length;n<e&&(n=e);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class Pc{constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.be()}}class Rc{constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class Fc{constructor(){this.De=new Lc,this.Ce=new Pc(this.De),this.xe=new Rc(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Vc{constructor(t,e,n,i){this.indexId=t,this.documentKey=e,this.arrayValue=n,this.directionalValue=i}ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,n=new Uint8Array(e);return n.set(this.directionalValue,0),e!==t?n.set([0],this.directionalValue.length):++n[n.length-1],new Vc(this.indexId,this.documentKey,this.arrayValue,n)}}function jc(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=Uc(t.arrayValue,e.arrayValue),0!==n?n:(n=Uc(t.directionalValue,e.directionalValue),0!==n?n:_s.comparator(t.documentKey,e.documentKey)))}function Uc(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(0!==i)return i}return t.length-e.length}class Bc{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const e of t.filters){const t=e;t.S()?this.Fe=t:this.Oe.push(t)}}$e(t){const e=Ws(t);if(void 0!==e&&!this.Be(e))return!1;const n=Ks(t);let i=0,s=0;for(;i<n.length&&this.Be(n[i]);++i);if(i===n.length)return!0;if(void 0!==this.Fe){const t=n[i];if(!this.Le(this.Fe,t)||!this.Ue(this.Me[s++],t))return!1;++i}for(;i<n.length;++i){const t=n[i];if(s>=this.Me.length||!this.Ue(this.Me[s++],t))return!1}return!0}Be(t){for(const e of this.Oe)if(this.Le(e,t))return!0;return!1}Le(t,e){if(void 0===t||!t.field.isEqual(e.fieldPath))return!1;const n="array-contains"===t.op||"array-contains-any"===t.op;return 2===e.kind===n}Ue(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class qc{constructor(){this.qe=new zc}addToCollectionParentIndex(t,e){return this.qe.add(e),Za.resolve()}getCollectionParents(t,e){return Za.resolve(this.qe.getEntries(e))}addFieldIndex(t,e){return Za.resolve()}deleteFieldIndex(t,e){return Za.resolve()}getDocumentsMatchingTarget(t,e){return Za.resolve(null)}getIndexType(t,e){return Za.resolve(0)}getFieldIndexes(t,e){return Za.resolve([])}getNextCollectionGroupToUpdate(t){return Za.resolve(null)}getMinOffset(t,e){return Za.resolve(Js.min())}updateCollectionGroup(t,e,n){return Za.resolve()}updateIndexEntries(t,e){return Za.resolve()}}class zc{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new ir(ns.comparator),s=!i.has(n);return this.index[e]=i.add(n),s}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new ir(ns.comparator)).toArray()}}const Hc=new Uint8Array(0);class $c{constructor(t,e){this.user=t,this.databaseId=e,this.Ke=new zc,this.Ge=new Ao((t=>cr(t)),((t,e)=>lr(t,e))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ke.has(e)){const n=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((()=>{this.Ke.add(e)}));const s={collectionId:n,parent:Ea(i)};return Wc(t).put(s)}return Za.resolve()}getCollectionParents(t,e){const n=[],i=IDBKeyRange.bound([e,""],[Yi(e),""],!1,!0);return Wc(t).qt(i).next((t=>{for(const i of t){if(i.collectionId!==e)break;n.push(Aa(i.parent))}return n}))}addFieldIndex(t,e){const n=Gc(t),i=function(t){return{indexId:t.indexId,collectionGroup:t.collectionGroup,fields:t.fields.map((t=>[t.fieldPath.canonicalString(),t.kind]))}}(e);return delete i.indexId,n.add(i).next()}deleteFieldIndex(t,e){const n=Gc(t),i=Yc(t),s=Kc(t);return n.delete(e.indexId).next((()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}getDocumentsMatchingTarget(t,e){const n=Kc(t);let i=!0;const s=new Map;return Za.forEach(this.Qe(e),(e=>this.je(t,e).next((t=>{i&&(i=!!t),s.set(e,t)})))).next((()=>{if(i){let t=Ro();const i=[];return Za.forEach(s,((s,r)=>{var o;Ti("IndexedDbIndexManager",`Using index ${o=s,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map((t=>`${t.fieldPath}:${t.kind}`)).join(",")}`} to execute ${cr(e)}`);const a=function(t,e){const n=Ws(e);if(void 0===n)return null;for(const e of hr(t,n.fieldPath))switch(e.op){case"array-contains-any":return e.value.arrayValue.values||[];case"array-contains":return[e.value]}return null}(r,s),c=function(t,e){const n=new Map;for(const i of Ks(e))for(const e of hr(t,i.fieldPath))switch(e.op){case"==":case"in":n.set(i.fieldPath.canonicalString(),e.value);break;case"not-in":case"!=":return n.set(i.fieldPath.canonicalString(),e.value),Array.from(n.values())}return null}(r,s),l=function(t,e){const n=[];let i=!0;for(const s of Ks(e)){const e=0===s.kind?dr(t,s.fieldPath,t.startAt):fr(t,s.fieldPath,t.startAt);n.push(e.value),i&&(i=e.inclusive)}return new Ir(n,i)}(r,s),u=function(t,e){const n=[];let i=!0;for(const s of Ks(e)){const e=0===s.kind?fr(t,s.fieldPath,t.endAt):dr(t,s.fieldPath,t.endAt);n.push(e.value),i&&(i=e.inclusive)}return new Ir(n,i)}(r,s),h=this.We(s,r,l),d=this.We(s,r,u),f=this.ze(s,r,c),p=this.He(s.indexId,a,h,l.inclusive,d,u.inclusive,f);return Za.forEach(p,(s=>n.Gt(s,e.limit).next((e=>{e.forEach((e=>{const n=_s.fromSegments(e.documentKey);t.has(n)||(t=t.add(n),i.push(n))}))}))))})).next((()=>i))}return Za.resolve(null)}))}Qe(t){let e=this.Ge.get(t);return e||(e=[t],this.Ge.set(t,e),e)}He(t,e,n,i,s,r,o){const a=(null!=e?e.length:1)*Math.max(n.length,s.length),c=a/(null!=e?e.length:1),l=[];for(let u=0;u<a;++u){const a=e?this.Je(e[u/c]):Hc,h=this.Ye(t,a,n[u%c],i),d=this.Xe(t,a,s[u%c],r),f=o.map((e=>this.Ye(t,a,e,!0)));l.push(...this.createRange(h,d,f))}return l}Ye(t,e,n,i){const s=new Vc(t,_s.empty(),e,n);return i?s:s.ke()}Xe(t,e,n,i){const s=new Vc(t,_s.empty(),e,n);return i?s.ke():s}je(t,e){const n=new Bc(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next((t=>{let e=null;for(const i of t)n.$e(i)&&(!e||i.fields.length>e.fields.length)&&(e=i);return e}))}getIndexType(t,e){let n=2;return Za.forEach(this.Qe(e),(e=>this.je(t,e).next((t=>{t?0!==n&&t.fields.length<function(t){let e=new ir(ss.comparator),n=!1;for(const i of t.filters){const t=i;t.field.isKeyField()||("array-contains"===t.op||"array-contains-any"===t.op?n=!0:e=e.add(t.field))}for(const n of t.orderBy)n.field.isKeyField()||(e=e.add(n.field));return e.size+(n?1:0)}(e)&&(n=1):n=0})))).next((()=>n))}Ze(t,e){const n=new Fc;for(const i of Ks(t)){const t=e.data.field(i.fieldPath);if(null==t)return null;const s=n.Ne(i.kind);Nc.fe.Zt(t,s)}return n.Se()}Je(t){const e=new Fc;return Nc.fe.Zt(t,e.Ne(0)),e.Se()}tn(t,e){const n=new Fc;return Nc.fe.Zt(Ds(this.databaseId,e),n.Ne(function(t){const e=Ks(t);return 0===e.length?0:e[e.length-1].kind}(t))),n.Se()}ze(t,e,n){if(null===n)return[];let i=[];i.push(new Fc);let s=0;for(const r of Ks(t)){const t=n[s++];for(const n of i)if(this.en(e,r.fieldPath)&&Os(t))i=this.nn(i,r,t);else{const e=n.Ne(r.kind);Nc.fe.Zt(t,e)}}return this.sn(i)}We(t,e,n){return this.ze(t,e,n.position)}sn(t){const e=[];for(let n=0;n<t.length;++n)e[n]=t[n].Se();return e}nn(t,e,n){const i=[...t],s=[];for(const t of n.arrayValue.values||[])for(const n of i){const i=new Fc;i.seed(n.Se()),Nc.fe.Zt(t,i.Ne(e.kind)),s.push(i)}return s}en(t,e){return!!t.filters.find((t=>t instanceof pr&&t.field.isEqual(e)&&("in"===t.op||"not-in"===t.op)))}getFieldIndexes(t,e){const n=Gc(t),i=Yc(t);return(e?n.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)):n.qt()).next((t=>{const e=[];return Za.forEach(t,(t=>i.get([t.indexId,this.uid]).next((n=>{e.push(function(t,e){const n=e?new Ys(e.sequenceNumber,new Js(bc(e.readTime),new _s(Aa(e.documentKey)),e.largestBatchId)):Ys.empty(),i=t.fields.map((([t,e])=>new Gs(ss.fromServerFormat(t),e)));return new $s(t.indexId,t.collectionGroup,i,n)}(t,n))})))).next((()=>e))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((t=>0===t.length?null:(t.sort(((t,e)=>{const n=t.indexState.sequenceNumber-e.indexState.sequenceNumber;return 0!==n?n:Ki(t.collectionGroup,e.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(t,e,n){const i=Gc(t),s=Yc(t);return this.rn(t).next((t=>i.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)).next((e=>Za.forEach(e,(e=>s.put(function(t,e,n,i){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:vc(i.readTime),documentKey:Ea(i.documentKey.path),largestBatchId:i.largestBatchId}}(e.indexId,this.user,t,n))))))))}updateIndexEntries(t,e){const n=new Map;return Za.forEach(e,((e,i)=>{const s=n.get(e.collectionGroup);return(s?Za.resolve(s):this.getFieldIndexes(t,e.collectionGroup)).next((s=>(n.set(e.collectionGroup,s),Za.forEach(s,(n=>this.on(t,e,n).next((e=>{const s=this.un(i,n);return e.isEqual(s)?Za.resolve():this.an(t,i,n,e,s)})))))))}))}cn(t,e,n,i){return Kc(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(n,e.key),documentKey:e.key.path.toArray()})}hn(t,e,n,i){return Kc(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(n,e.key),e.key.path.toArray()])}on(t,e,n){const i=Kc(t);let s=new ir(jc);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,e)])},((t,i)=>{s=s.add(new Vc(n.indexId,e,i.arrayValue,i.directionalValue))})).next((()=>s))}un(t,e){let n=new ir(jc);const i=this.Ze(e,t);if(null==i)return n;const s=Ws(e);if(null!=s){const r=t.data.field(s.fieldPath);if(Os(r))for(const s of r.arrayValue.values||[])n=n.add(new Vc(e.indexId,t.key,this.Je(s),i))}else n=n.add(new Vc(e.indexId,t.key,Hc,i));return n}an(t,e,n,i,s){Ti("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const r=[];return function(t,e,n,i,s){const r=t.getIterator(),o=e.getIterator();let a=rr(r),c=rr(o);for(;a||c;){let t=!1,e=!1;if(a&&c){const i=n(a,c);i<0?e=!0:i>0&&(t=!0)}else null!=a?e=!0:t=!0;t?(i(c),c=rr(o)):e?(s(a),a=rr(r)):(a=rr(r),c=rr(o))}}(i,s,jc,(i=>{r.push(this.cn(t,e,n,i))}),(i=>{r.push(this.hn(t,e,n,i))})),Za.waitFor(r)}rn(t){let e=1;return Yc(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((t,n,i)=>{i.done(),e=n.sequenceNumber+1})).next((()=>e))}createRange(t,e,n){n=n.sort(((t,e)=>jc(t,e))).filter(((t,e,n)=>!e||0!==jc(t,n[e-1])));const i=[];i.push(t);for(const s of n){const n=jc(s,t),r=jc(s,e);if(0===n)i[0]=t.ke();else if(n>0&&r<0)i.push(s),i.push(s.ke());else if(r>0)break}i.push(e);const s=[];for(let t=0;t<i.length;t+=2)s.push(IDBKeyRange.bound([i[t].indexId,this.uid,i[t].arrayValue,i[t].directionalValue,Hc,[]],[i[t+1].indexId,this.uid,i[t+1].arrayValue,i[t+1].directionalValue,Hc,[]]));return s}getMinOffset(t,e){let n;return Za.forEach(this.Qe(e),(e=>this.je(t,e).next((t=>{t?(!n||Zs(t.indexState.offset,n)<0)&&(n=t.indexState.offset):n=Js.min()})))).next((()=>n))}}function Wc(t){return uc(t,"collectionParents")}function Kc(t){return uc(t,"indexEntries")}function Gc(t){return uc(t,"indexConfiguration")}function Yc(t){return uc(t,"indexState")}const Xc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qc{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Qc(t,Qc.DEFAULT_COLLECTION_PERCENTILE,Qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Jc(t,e,n){const i=t.store("mutations"),s=t.store("documentMutations"),r=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=i.Wt({range:o},((t,e,n)=>(a++,n.delete())));r.push(c.next((()=>{Ci(1===a)})));const l=[];for(const t of n.mutations){const i=Na(e,t.key.path,n.batchId);r.push(s.delete(i)),l.push(t.key)}return Za.waitFor(r).next((()=>l))}function Zc(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ai();e=t.noDocument}return JSON.stringify(e).length}Qc.DEFAULT_COLLECTION_PERCENTILE=10,Qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qc.DEFAULT=new Qc(41943040,Qc.DEFAULT_COLLECTION_PERCENTILE,Qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qc.DISABLED=new Qc(-1,0,0);class tl{constructor(t,e,n,i){this.userId=t,this.M=e,this.indexManager=n,this.referenceDelegate=i,this.ln={}}static Yt(t,e,n,i){Ci(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new tl(s,e,n,i)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nl(t).Wt({index:"userMutationsIndex",range:n},((t,n,i)=>{e=!1,i.done()})).next((()=>e))}addMutationBatch(t,e,n,i){const s=il(t),r=nl(t);return r.add({}).next((o=>{Ci("number"==typeof o);const a=new hc(o,e,n,i),c=function(t,e,n){const i=n.baseMutations.map((e=>ha(t.Jt,e))),s=n.mutations.map((e=>ha(t.Jt,e)));return{userId:e,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:i,mutations:s}}(this.M,this.userId,a),l=[];let u=new ir(((t,e)=>Ki(t.canonicalString(),e.canonicalString())));for(const t of i){const e=Na(this.userId,t.key.path,o);u=u.add(t.key.path.popLast()),l.push(r.put(c)),l.push(s.put(e,Oa))}return u.forEach((e=>{l.push(this.indexManager.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((()=>{this.ln[o]=a.keys()})),Za.waitFor(l).next((()=>a))}))}lookupMutationBatch(t,e){return nl(t).get(e).next((t=>t?(Ci(t.userId===this.userId),_c(this.M,t)):null))}fn(t,e){return this.ln[e]?Za.resolve(this.ln[e]):this.lookupMutationBatch(t,e).next((t=>{if(t){const n=t.keys();return this.ln[e]=n,n}return null}))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return nl(t).Wt({index:"userMutationsIndex",range:i},((t,e,i)=>{e.userId===this.userId&&(Ci(e.batchId>=n),s=_c(this.M,e)),i.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return nl(t).Wt({index:"userMutationsIndex",range:e,reverse:!0},((t,e,i)=>{n=e.batchId,i.done()})).next((()=>n))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nl(t).qt("userMutationsIndex",e).next((t=>t.map((t=>_c(this.M,t)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=Da(this.userId,e.path),i=IDBKeyRange.lowerBound(n),s=[];return il(t).Wt({range:i},((n,i,r)=>{const[o,a,c]=n,l=Aa(a);if(o===this.userId&&e.path.isEqual(l))return nl(t).get(c).next((t=>{if(!t)throw Ai();Ci(t.userId===this.userId),s.push(_c(this.M,t))}));r.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new ir(Ki);const i=[];return e.forEach((e=>{const s=Da(this.userId,e.path),r=IDBKeyRange.lowerBound(s),o=il(t).Wt({range:r},((t,i,s)=>{const[r,o,a]=t,c=Aa(o);r===this.userId&&e.path.isEqual(c)?n=n.add(a):s.done()}));i.push(o)})),Za.waitFor(i).next((()=>this.dn(t,n)))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1,s=Da(this.userId,n),r=IDBKeyRange.lowerBound(s);let o=new ir(Ki);return il(t).Wt({range:r},((t,e,s)=>{const[r,a,c]=t,l=Aa(a);r===this.userId&&n.isPrefixOf(l)?l.length===i&&(o=o.add(c)):s.done()})).next((()=>this.dn(t,o)))}dn(t,e){const n=[],i=[];return e.forEach((e=>{i.push(nl(t).get(e).next((t=>{if(null===t)throw Ai();Ci(t.userId===this.userId),n.push(_c(this.M,t))})))})),Za.waitFor(i).next((()=>n))}removeMutationBatch(t,e){return Jc(t.Ht,this.userId,e).next((n=>(t.addOnCommittedListener((()=>{this._n(e.batchId)})),Za.forEach(n,(e=>this.referenceDelegate.markPotentiallyOrphaned(t,e))))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return Za.resolve();const n=IDBKeyRange.lowerBound([this.userId]),i=[];return il(t).Wt({range:n},((t,e,n)=>{if(t[0]===this.userId){const e=Aa(t[1]);i.push(e)}else n.done()})).next((()=>{Ci(0===i.length)}))}))}containsKey(t,e){return el(t,this.userId,e)}wn(t){return sl(t).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function el(t,e,n){const i=Da(e,n.path),s=i[1],r=IDBKeyRange.lowerBound(i);let o=!1;return il(t).Wt({range:r,jt:!0},((t,n,i)=>{const[r,a,c]=t;r===e&&a===s&&(o=!0),i.done()})).next((()=>o))}function nl(t){return uc(t,"mutations")}function il(t){return uc(t,"documentMutations")}function sl(t){return uc(t,"mutationQueues")}class rl{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new rl(0)}static yn(){return new rl(-1)}}class ol{constructor(t,e){this.referenceDelegate=t,this.M=e}allocateTargetId(t){return this.pn(t).next((e=>{const n=new rl(e.highestTargetId);return e.highestTargetId=n.next(),this.In(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.pn(t).next((t=>Qi.fromTimestamp(new Xi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.pn(t).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(t,e,n){return this.pn(t).next((i=>(i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.In(t,i))))}addTargetData(t,e){return this.Tn(t,e).next((()=>this.pn(t).next((n=>(n.targetCount+=1,this.En(e,n),this.In(t,n))))))}updateTargetData(t,e){return this.Tn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>al(t).delete(e.targetId))).next((()=>this.pn(t))).next((e=>(Ci(e.targetCount>0),e.targetCount-=1,this.In(t,e))))}removeTargets(t,e,n){let i=0;const s=[];return al(t).Wt(((r,o)=>{const a=wc(o);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,s.push(this.removeTargetData(t,a)))})).next((()=>Za.waitFor(s))).next((()=>i))}forEachTarget(t,e){return al(t).Wt(((t,n)=>{const i=wc(n);e(i)}))}pn(t){return cl(t).get("targetGlobalKey").next((t=>(Ci(null!==t),t)))}In(t,e){return cl(t).put("targetGlobalKey",e)}Tn(t,e){return al(t).put(xc(this.M,e))}En(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.pn(t).next((t=>t.targetCount))}getTargetData(t,e){const n=cr(e),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return al(t).Wt({range:i,index:"queryTargetsIndex"},((t,n,i)=>{const r=wc(n);lr(e,r.target)&&(s=r,i.done())})).next((()=>s))}addMatchingKeys(t,e,n){const i=[],s=ll(t);return e.forEach((e=>{const r=Ea(e.path);i.push(s.put({targetId:n,path:r})),i.push(this.referenceDelegate.addReference(t,n,e))})),Za.waitFor(i)}removeMatchingKeys(t,e,n){const i=ll(t);return Za.forEach(e,(e=>{const s=Ea(e.path);return Za.waitFor([i.delete([n,s]),this.referenceDelegate.removeReference(t,n,e)])}))}removeMatchingKeysForTargetId(t,e){const n=ll(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),i=ll(t);let s=Ro();return i.Wt({range:n,jt:!0},((t,e,n)=>{const i=Aa(t[1]),r=new _s(i);s=s.add(r)})).next((()=>s))}containsKey(t,e){const n=Ea(e.path),i=IDBKeyRange.bound([n],[Yi(n)],!1,!0);let s=0;return ll(t).Wt({index:"documentTargetsIndex",jt:!0,range:i},(([t,e],n,i)=>{0!==t&&(s++,i.done())})).next((()=>s>0))}Et(t,e){return al(t).get(e).next((t=>t?wc(t):null))}}function al(t){return uc(t,"targets")}function cl(t){return uc(t,"targetGlobal")}function ll(t){return uc(t,"targetDocuments")}async function ul(t){if(t.code!==Oi.FAILED_PRECONDITION||t.message!==Qa)throw t;Ti("LocalStore","Unexpectedly lost primary lease")}function hl([t,e],[n,i]){const s=Ki(t,n);return 0===s?Ki(e,i):s}class dl{constructor(t){this.An=t,this.buffer=new ir(hl),this.Rn=0}bn(){return++this.Rn}Pn(t){const e=[t,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();hl(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class fl{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){const e=this.Vn?3e5:6e4;Ti("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.vn=null,this.Vn=!0;try{await t.collectGarbage(this.garbageCollector)}catch(t){sc(t)?Ti("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await ul(t)}await this.Sn(t)}))}}class pl{constructor(t,e){this.Dn=t,this.params=e}calculateTargetCount(t,e){return this.Dn.Cn(t).next((t=>Math.floor(e/100*t)))}nthSequenceNumber(t,e){if(0===e)return Za.resolve(Hi.A);const n=new dl(e);return this.Dn.forEachTarget(t,(t=>n.Pn(t.sequenceNumber))).next((()=>this.Dn.xn(t,(t=>n.Pn(t))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.Dn.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.Dn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Ti("LruGarbageCollector","Garbage collection skipped; disabled"),Za.resolve(Xc)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ti("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xc):this.Nn(t,e)))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,e){let n,i,s,r,a,c,l;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((e=>(e>this.params.maximumSequenceNumbersToCollect?(Ti("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),i=this.params.maximumSequenceNumbersToCollect):i=e,r=Date.now(),this.nthSequenceNumber(t,i)))).next((i=>(n=i,a=Date.now(),this.removeTargets(t,n,e)))).next((e=>(s=e,c=Date.now(),this.removeOrphanedDocuments(t,n)))).next((t=>(l=Date.now(),xi()<=o.in.DEBUG&&Ti("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${r-u}ms\n\tDetermined least recently used ${i} in `+(a-r)+"ms\n"+`\tRemoved ${s} targets in `+(c-a)+"ms\n"+`\tRemoved ${t} documents in `+(l-c)+"ms\n"+`Total Duration: ${l-u}ms`),Za.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:t}))))}}class gl{constructor(t,e){this.db=t,this.garbageCollector=function(t,e){return new pl(t,e)}(this,e)}Cn(t){const e=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}kn(t){let e=0;return this.xn(t,(t=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}xn(t,e){return this.Mn(t,((t,n)=>e(n)))}addReference(t,e,n){return ml(t,n)}removeReference(t,e,n){return ml(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return ml(t,e)}On(t,e){return function(t,e){let n=!1;return sl(t).zt((i=>el(t,i,e).next((t=>(t&&(n=!0),Za.resolve(!t)))))).next((()=>n))}(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Mn(t,((r,o)=>{if(o<=e){const e=this.On(t,r).next((e=>{if(!e)return s++,n.getEntry(t,r).next((()=>(n.removeEntry(r,Qi.min()),ll(t).delete([0,Ea(r.path)]))))}));i.push(e)}})).next((()=>Za.waitFor(i))).next((()=>n.apply(t))).next((()=>s))}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return ml(t,e)}Mn(t,e){const n=ll(t);let i,s=Hi.A;return n.Wt({index:"documentTargetsIndex"},(([t,n],{path:r,sequenceNumber:o})=>{0===t?(s!==Hi.A&&e(new _s(Aa(i)),s),s=o,i=r):s=Hi.A})).next((()=>{s!==Hi.A&&e(new _s(Aa(i)),s)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function ml(t,e){return ll(t).put(function(t,e){return{targetId:0,path:Ea(t.path),sequenceNumber:e}}(e,t.currentSequenceNumber))}class yl{constructor(){this.changes=new Ao((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Hs.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Za.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class vl{constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,n){return wl(t).put(n)}removeEntry(t,e,n){return wl(t).delete(function(t,e){const n=t.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],yc(e),n[n.length-1]]}(e,n))}updateMetadata(t,e){return this.getMetadata(t).next((n=>(n.byteSize+=e,this.Fn(t,n))))}getEntry(t,e){let n=Hs.newInvalidDocument(e);return wl(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(xl(e))},((t,i)=>{n=this.$n(e,i)})).next((()=>n))}Bn(t,e){let n={size:0,document:Hs.newInvalidDocument(e)};return wl(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(xl(e))},((t,i)=>{n={document:this.$n(e,i),size:Zc(i)}})).next((()=>n))}getEntries(t,e){let n=Do();return this.Ln(t,e,((t,e)=>{const i=this.$n(t,e);n=n.insert(t,i)})).next((()=>n))}Un(t,e){let n=Do(),i=new tr(_s.comparator);return this.Ln(t,e,((t,e)=>{const s=this.$n(t,e);n=n.insert(t,s),i=i.insert(t,Zc(e))})).next((()=>({documents:n,qn:i})))}Ln(t,e,n){if(e.isEmpty())return Za.resolve();let i=new ir(Tl);e.forEach((t=>i=i.add(t)));const s=IDBKeyRange.bound(xl(i.first()),xl(i.last())),r=i.getIterator();let o=r.getNext();return wl(t).Wt({index:"documentKeyIndex",range:s},((t,e,i)=>{const s=_s.fromSegments([...e.prefixPath,e.collectionGroup,e.documentId]);for(;o&&Tl(o,s)<0;)n(o,null),o=r.getNext();o&&o.isEqual(s)&&(n(o,e),o=r.hasNext()?r.getNext():null),o?i.Ut(xl(o)):i.done()})).next((()=>{for(;o;)n(o,null),o=r.hasNext()?r.getNext():null}))}getAllFromCollection(t,e,n){const i=[e.popLast().toArray(),e.lastSegment(),yc(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wl(t).qt(IDBKeyRange.bound(i,s,!0)).next((t=>{let e=Do();for(const n of t){const t=this.$n(_s.fromSegments(n.prefixPath.concat(n.collectionGroup,n.documentId)),n);e=e.insert(t.key,t)}return e}))}getAllFromCollectionGroup(t,e,n,i){let s=Do();const r=Il(e,n),o=Il(e,Js.max());return wl(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(r,o,!0)},((t,e,n)=>{const r=this.$n(_s.fromSegments(e.prefixPath.concat(e.collectionGroup,e.documentId)),e);s=s.insert(r.key,r),s.size===i&&n.done()})).next((()=>s))}newChangeBuffer(t){return new bl(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((t=>t.byteSize))}getMetadata(t){return _l(t).get("remoteDocumentGlobalKey").next((t=>(Ci(!!t),t)))}Fn(t,e){return _l(t).put("remoteDocumentGlobalKey",e)}$n(t,e){if(e){const t=function(t,e){let n;if(e.document)n=ua(t.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const t=_s.fromSegments(e.noDocument.path),i=bc(e.noDocument.readTime);n=Hs.newNoDocument(t,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ai();{const t=_s.fromSegments(e.unknownDocument.path),i=bc(e.unknownDocument.version);n=Hs.newUnknownDocument(t,i)}}return e.readTime&&n.setReadTime(function(t){const e=new Xi(t[0],t[1]);return Qi.fromTimestamp(e)}(e.readTime)),n}(this.M,e);if(!t.isNoDocument()||!t.version.isEqual(Qi.min()))return t}return Hs.newInvalidDocument(t)}}class bl extends yl{constructor(t,e){super(),this.Kn=t,this.trackRemovals=e,this.Gn=new Ao((t=>t.toString()),((t,e)=>t.isEqual(e)))}applyChanges(t){const e=[];let n=0,i=new ir(((t,e)=>Ki(t.canonicalString(),e.canonicalString())));return this.changes.forEach(((s,r)=>{const o=this.Gn.get(s);if(e.push(this.Kn.removeEntry(t,s,o.readTime)),r.isValidDocument()){const a=mc(this.Kn.M,r);i=i.add(s.path.popLast());const c=Zc(a);n+=c-o.size,e.push(this.Kn.addEntry(t,s,a))}else if(n-=o.size,this.trackRemovals){const n=mc(this.Kn.M,r.convertToNoDocument(Qi.min()));e.push(this.Kn.addEntry(t,s,n))}})),i.forEach((n=>{e.push(this.Kn.indexManager.addToCollectionParentIndex(t,n))})),e.push(this.Kn.updateMetadata(t,n)),Za.waitFor(e)}getFromCache(t,e){return this.Kn.Bn(t,e).next((t=>(this.Gn.set(e,{size:t.size,readTime:t.document.readTime}),t.document)))}getAllFromCache(t,e){return this.Kn.Un(t,e).next((({documents:t,qn:e})=>(e.forEach(((e,n)=>{this.Gn.set(e,{size:n,readTime:t.get(e).readTime})})),t)))}}function _l(t){return uc(t,"remoteDocumentGlobal")}function wl(t){return uc(t,"remoteDocumentsV14")}function xl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Il(t,e){const n=e.documentKey.path.toArray();return[t,yc(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Tl(t,e){const n=t.path.toArray(),i=e.path.toArray();let s=0;for(let t=0;t<n.length-2&&t<i.length-2;++t)if(s=Ki(n[t],i[t]),s)return s;return s=Ki(n.length,i.length),s||(s=Ki(n[n.length-2],i[i.length-2]),s||Ki(n[n.length-1],i[i.length-1]))}class El{constructor(t){this.M=t}kt(t,e,n,i){const s=new tc("createOrUpgrade",e);n<1&&i>=1&&(function(t){t.createObjectStore("owner")}(t),function(t){t.createObjectStore("mutationQueues",{keyPath:"userId"}),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ca,{unique:!0}),t.createObjectStore("documentMutations")}(t),Sl(t),function(t){t.createObjectStore("remoteDocuments")}(t));let r=Za.resolve();return n<3&&i>=3&&(0!==n&&(function(t){t.deleteObjectStore("targetDocuments"),t.deleteObjectStore("targets"),t.deleteObjectStore("targetGlobal")}(t),Sl(t)),r=r.next((()=>function(t){const e=t.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Qi.min().toTimestamp(),targetCount:0};return e.put("targetGlobalKey",n)}(s)))),n<4&&i>=4&&(0!==n&&(r=r.next((()=>function(t,e){return e.store("mutations").qt().next((n=>{t.deleteObjectStore("mutations"),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ca,{unique:!0});const i=e.store("mutations"),s=n.map((t=>i.put(t)));return Za.waitFor(s)}))}(t,s)))),r=r.next((()=>{!function(t){t.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)}))),n<5&&i>=5&&(r=r.next((()=>this.Qn(s)))),n<6&&i>=6&&(r=r.next((()=>(function(t){t.createObjectStore("remoteDocumentGlobal")}(t),this.jn(s))))),n<7&&i>=7&&(r=r.next((()=>this.Wn(s)))),n<8&&i>=8&&(r=r.next((()=>this.zn(t,s)))),n<9&&i>=9&&(r=r.next((()=>{!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t)}))),n<10&&i>=10&&(r=r.next((()=>this.Hn(s)))),n<11&&i>=11&&(r=r.next((()=>{!function(t){t.createObjectStore("bundles",{keyPath:"bundleId"})}(t),function(t){t.createObjectStore("namedQueries",{keyPath:"name"})}(t)}))),n<12&&i>=12&&(r=r.next((()=>{!function(t){const e=t.createObjectStore("documentOverlays",{keyPath:Ha});e.createIndex("collectionPathOverlayIndex",$a,{unique:!1}),e.createIndex("collectionGroupOverlayIndex",Wa,{unique:!1})}(t)}))),n<13&&i>=13&&(r=r.next((()=>function(t){const e=t.createObjectStore("remoteDocumentsV14",{keyPath:Ma});e.createIndex("documentKeyIndex",La),e.createIndex("collectionGroupIndex",Pa)}(t))).next((()=>this.Jn(t,s))).next((()=>t.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(r=r.next((()=>{!function(t){t.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),t.createObjectStore("indexState",{keyPath:Ua}).createIndex("sequenceNumberIndex",Ba,{unique:!1}),t.createObjectStore("indexEntries",{keyPath:qa}).createIndex("documentKeyIndex",za,{unique:!1})}(t)}))),r}jn(t){let e=0;return t.store("remoteDocuments").Wt(((t,n)=>{e+=Zc(n)})).next((()=>{const n={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Qn(t){const e=t.store("mutationQueues"),n=t.store("mutations");return e.qt().next((e=>Za.forEach(e,(e=>{const i=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return n.qt("userMutationsIndex",i).next((n=>Za.forEach(n,(n=>{Ci(n.userId===e.userId);const i=_c(this.M,n);return Jc(t,e.userId,i).next((()=>{}))}))))}))))}Wn(t){const e=t.store("targetDocuments"),n=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next((t=>{const i=[];return n.Wt(((n,s)=>{const r=new ns(n),o=function(t){return[0,Ea(t)]}(r);i.push(e.get(o).next((n=>n?Za.resolve():(n=>e.put({targetId:0,path:Ea(n),sequenceNumber:t.highestListenSequenceNumber}))(r))))})).next((()=>Za.waitFor(i)))}))}zn(t,e){t.createObjectStore("collectionParents",{keyPath:ja});const n=e.store("collectionParents"),i=new zc,s=t=>{if(i.add(t)){const e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Ea(i)})}};return e.store("remoteDocuments").Wt({jt:!0},((t,e)=>{const n=new ns(t);return s(n.popLast())})).next((()=>e.store("documentMutations").Wt({jt:!0},(([t,e,n],i)=>{const r=Aa(e);return s(r.popLast())}))))}Hn(t){const e=t.store("targets");return e.Wt(((t,n)=>{const i=wc(n),s=xc(this.M,i);return e.put(s)}))}Jn(t,e){const n=e.store("remoteDocuments"),i=[];return n.Wt(((t,n)=>{const s=e.store("remoteDocumentsV14"),r=(o=n,o.document?new _s(ns.fromString(o.document.name).popFirst(5)):o.noDocument?_s.fromSegments(o.noDocument.path):o.unknownDocument?_s.fromSegments(o.unknownDocument.path):Ai()).path.toArray();var o;const a={prefixPath:r.slice(0,r.length-2),collectionGroup:r[r.length-2],documentId:r[r.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};i.push(s.put(a))})).next((()=>Za.waitFor(i)))}}function Sl(t){t.createObjectStore("targetDocuments",{keyPath:Fa}).createIndex("documentTargetsIndex",Va,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ra,{unique:!0}),t.createObjectStore("targetGlobal")}const kl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Al{constructor(t,e,n,i,s,r,o,a,c,l,u=13){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Yn=s,this.window=r,this.document=o,this.Xn=c,this.Zn=l,this.ts=u,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=t=>Promise.resolve(),!Al.vt())throw new Mi(Oi.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gl(this,i),this.hs=e+"main",this.M=new gc(a),this.ls=new ec(this.hs,this.ts,new El(this.M)),this.fs=new ol(this.referenceDelegate,this.M),this.ds=function(t){return new vl(t)}(this.M),this._s=new Sc,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&Ei("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Mi(Oi.FAILED_PRECONDITION,kl);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.fs.getHighestSequenceNumber(t)))})).then((t=>{this.es=new Hi(t,this.Xn)})).then((()=>{this.ns=!0})).catch((t=>(this.ls&&this.ls.close(),Promise.reject(t))))}Ts(t){return this.cs=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot((async e=>{null===e.newVersion&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget((async()=>{this.started&&await this.gs()})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>Dl(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Es(t).next((t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable((()=>this.cs(!1))))}))})).next((()=>this.As(t))).next((e=>this.isPrimary&&!e?this.Rs(t).next((()=>!1)):!!e&&this.bs(t).next((()=>!0)))))).catch((t=>{if(sc(t))return Ti("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Ti("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable((()=>this.cs(t))),this.isPrimary=t}))}Es(t){return Cl(t).get("owner").next((t=>Za.resolve(this.Ps(t))))}Vs(t){return Dl(t).delete(this.clientId)}async vs(){if(this.isPrimary&&!this.Ss(this.us,18e5)){this.us=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const e=uc(t,"clientMetadata");return e.qt().next((t=>{const n=this.Ds(t,18e5),i=t.filter((t=>-1===n.indexOf(t)));return Za.forEach(i,(t=>e.delete(t.clientId))).next((()=>i))}))})).catch((()=>[]));if(this.ws)for(const e of t)this.ws.removeItem(this.Cs(e.clientId))}}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.gs().then((()=>this.vs())).then((()=>this.Is()))))}Ps(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?Za.resolve(!0):Cl(t).get("owner").next((e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)){if(this.Ps(e)&&this.networkEnabled)return!0;if(!this.Ps(e)){if(!e.allowTabSynchronization)throw new Mi(Oi.FAILED_PRECONDITION,kl);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dl(t).qt().next((t=>void 0===this.Ds(t,5e3).find((t=>{if(this.clientId!==t.clientId){const e=!this.networkEnabled&&t.networkEnabled,n=!this.inForeground&&t.inForeground,i=this.networkEnabled===t.networkEnabled;if(e||n&&i)return!0}return!1}))))})).next((t=>(this.isPrimary!==t&&Ti("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),await this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(t=>{const e=new lc(t,Hi.A);return this.Rs(e).next((()=>this.Vs(e)))})),this.ls.close(),this.Os()}Ds(t,e){return t.filter((t=>this.Ss(t.updateTimeMs,e)&&!this.xs(t.clientId)))}Fs(){return this.runTransaction("getActiveClients","readonly",(t=>Dl(t).qt().next((t=>this.Ds(t,18e5).map((t=>t.clientId))))))}get started(){return this.ns}getMutationQueue(t,e){return tl.Yt(t,this.M,e,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new $c(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return Cc.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,e,n){Ti("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",s=14===(r=this.ts)?Xa:13===r?Ya:12===r?Ga:11===r?Ka:void Ai();var r;let o;return this.ls.runTransaction(t,i,s,(i=>(o=new lc(i,this.es?this.es.next():Hi.A),"readwrite-primary"===e?this.Es(o).next((t=>!!t||this.As(o))).next((e=>{if(!e)throw Ei(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable((()=>this.cs(!1))),new Mi(Oi.FAILED_PRECONDITION,Qa);return n(o)})).next((t=>this.bs(o).next((()=>t)))):this.$s(o).next((()=>n(o)))))).then((t=>(o.raiseOnCommittedEvent(),t)))}$s(t){return Cl(t).get("owner").next((t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Mi(Oi.FAILED_PRECONDITION,kl)}))}bs(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cl(t).put("owner",e)}static vt(){return ec.vt()}Rs(t){const e=Cl(t);return e.get("owner").next((t=>this.Ps(t)?(Ti("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):Za.resolve()))}Ss(t,e){const n=Date.now();return!(t<n-e||t>n&&(Ei(`Detected an update time that is in the future: ${t} > ${n}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.gs())))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),(0,a.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var e;try{const n=null!==(null===(e=this.ws)||void 0===e?void 0:e.getItem(this.Cs(t)));return Ti("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(t){return Ei("IndexedDbPersistence","Failed to get zombied client id.",t),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(t){Ei("Failed to set zombie client id.",t)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(t){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Cl(t){return uc(t,"owner")}function Dl(t){return uc(t,"clientMetadata")}function Nl(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class Ol{constructor(t,e,n){this.ds=t,this.Bs=e,this.indexManager=n}Ls(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,e).next((n=>this.Us(t,e,n)))}Us(t,e,n){return this.ds.getEntry(t,e).next((t=>{for(const e of n)e.applyToLocalView(t);return t}))}qs(t,e){t.forEach(((t,n)=>{for(const t of e)t.applyToLocalView(n)}))}Ks(t,e){return this.ds.getEntries(t,e).next((e=>this.Gs(t,e).next((()=>e))))}Gs(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>this.qs(e,t)))}Qs(t,e,n){return function(t){return _s.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.js(t,e.path):Mr(e)?this.Ws(t,e,n):this.zs(t,e,n)}js(t,e){return this.Ls(t,new _s(e)).next((t=>{let e=Oo();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}Ws(t,e,n){const i=e.collectionGroup;let s=Oo();return this.indexManager.getCollectionParents(t,i).next((r=>Za.forEach(r,(r=>{const o=function(t,e){return new Ar(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,r.child(i));return this.zs(t,o,n).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}zs(t,e,n){let i;return this.ds.getAllFromCollection(t,e.path,n).next((n=>(i=n,this.Bs.getAllMutationBatchesAffectingQuery(t,e)))).next((t=>{for(const e of t)for(const t of e.mutations){const n=t.key;let s=i.get(n);null==s&&(s=Hs.newInvalidDocument(n),i=i.insert(n,s)),ho(t,s,e.localWriteTime),s.isFoundDocument()||(i=i.remove(n))}})).next((()=>(i.forEach(((t,n)=>{Ur(e,n)||(i=i.remove(t))})),i)))}}class Ml{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Hs=n,this.Js=i}static Ys(t,e){let n=Ro(),i=Ro();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:i=i.add(t.doc.key)}return new Ml(t,e.fromCache,n,i)}}class Ll{constructor(){this.Xs=!1}initialize(t,e){this.Zs=t,this.indexManager=e,this.Xs=!0}Qs(t,e,n,i){return this.ti(t,e).next((s=>s||this.ei(t,e,i,n))).next((n=>n||this.ni(t,e)))}ti(t,e){return Za.resolve(null)}ei(t,e,n,i){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||i.isEqual(Qi.min())?this.ni(t,e):this.Zs.Ks(t,n).next((s=>{const r=this.si(e,s);return this.ii(e,r,n,i)?this.ni(t,e):(xi()<=o.in.DEBUG&&Ti("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jr(e)),this.ri(t,r,e,Xs(i,-1)))}))}si(t,e){let n=new ir(qr(t));return e.forEach(((e,i)=>{Ur(t,i)&&(n=n.add(i))})),n}ii(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ni(t,e){return xi()<=o.in.DEBUG&&Ti("QueryEngine","Using full collection scan to execute query:",jr(e)),this.Zs.Qs(t,e,Js.min())}ri(t,e,n,i){return this.Zs.Qs(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class Pl{constructor(t,e,n,i){this.persistence=t,this.oi=e,this.M=i,this.ui=new tr(Ki),this.ai=new Ao((t=>cr(t)),lr),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(n)}li(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.fi=new Ol(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ui)))}}function Rl(t,e,n,i){return new Pl(t,e,n,i)}async function Fl(t,e){const n=Ni(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.Bs.getAllMutationBatches(t).next((s=>(i=s,n.li(e),n.Bs.getAllMutationBatches(t)))).next((e=>{const s=[],r=[];let o=Ro();for(const t of i){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.fi.Ks(t,o).next((t=>({di:t,removedBatchIds:s,addedBatchIds:r})))}))}))}function Vl(t){const e=Ni(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.fs.getLastRemoteSnapshotVersion(t)))}function jl(t,e,n){let i=Ro();return n.forEach((t=>i=i.add(t))),e.getEntries(t,i).next((t=>{let i=Do();return n.forEach(((n,s)=>{const r=t.get(n);s.isNoDocument()&&s.version.isEqual(Qi.min())?(e.removeEntry(n,s.readTime),i=i.insert(n,s)):!r.isValidDocument()||s.version.compareTo(r.version)>0||0===s.version.compareTo(r.version)&&r.hasPendingWrites?(e.addEntry(s),i=i.insert(n,s)):Ti("LocalStore","Ignoring outdated watch update for ",n,". Current version:",r.version," Watch version:",s.version)})),i}))}function Ul(t,e){const n=Ni(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.Bs.getNextMutationBatchAfterBatchId(t,e))))}function Bl(t,e){const n=Ni(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.fs.getTargetData(t,e).next((s=>s?(i=s,Za.resolve(i)):n.fs.allocateTargetId(t).next((s=>(i=new pc(e,s,0,t.currentSequenceNumber),n.fs.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.ui.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ui=n.ui.insert(t.targetId,t),n.ai.set(e,t.targetId)),t}))}async function ql(t,e,n){const i=Ni(t),s=i.ui.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,(t=>i.persistence.referenceDelegate.removeTarget(t,s)))}catch(t){if(!sc(t))throw t;Ti("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}i.ui=i.ui.remove(e),i.ai.delete(s.target)}function zl(t,e,n){const i=Ni(t);let s=Qi.min(),r=Ro();return i.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const i=Ni(t),s=i.ai.get(n);return void 0!==s?Za.resolve(i.ui.get(s)):i.fs.getTargetData(e,n)}(i,t,Pr(e)).next((e=>{if(e)return s=e.lastLimboFreeSnapshotVersion,i.fs.getMatchingKeysForTargetId(t,e.targetId).next((t=>{r=t}))})).next((()=>i.oi.Qs(t,e,n?s:Qi.min(),n?r:Ro()))).next((t=>(Wl(i,Br(e),t),{documents:t,_i:r})))))}function Hl(t,e){const n=Ni(t),i=Ni(n.fs),s=n.ui.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",(t=>i.Et(t,e).next((t=>t?t.target:null))))}function $l(t,e){const n=Ni(t),i=n.ci.get(e)||Qi.min();return n.persistence.runTransaction("Get new document changes","readonly",(t=>n.hi.getAllFromCollectionGroup(t,e,Xs(i,-1),Number.MAX_SAFE_INTEGER))).then((t=>(Wl(n,e,t),t)))}function Wl(t,e,n){let i=Qi.min();n.forEach(((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.ci.set(e,i)}async function Kl(t,e,n=Ro()){const i=await Bl(t,Pr(Ic(e.bundledQuery))),s=Ni(t);return s.persistence.runTransaction("Save named query","readwrite",(t=>{const r=ta(e.readTime);if(i.snapshotVersion.compareTo(r)>=0)return s._s.saveNamedQuery(t,e);const o=i.withResumeToken(as.EMPTY_BYTE_STRING,r);return s.ui=s.ui.insert(o.targetId,o),s.fs.updateTargetData(t,o).next((()=>s.fs.removeMatchingKeysForTargetId(t,i.targetId))).next((()=>s.fs.addMatchingKeys(t,n,i.targetId))).next((()=>s._s.saveNamedQuery(t,e)))}))}class Gl{constructor(t){this.M=t,this.yi=new Map,this.pi=new Map}getBundleMetadata(t,e){return Za.resolve(this.yi.get(e))}saveBundleMetadata(t,e){var n;return this.yi.set(e.id,{id:(n=e).id,version:n.version,createTime:ta(n.createTime)}),Za.resolve()}getNamedQuery(t,e){return Za.resolve(this.pi.get(e))}saveNamedQuery(t,e){return this.pi.set(e.name,function(t){return{name:t.name,query:Ic(t.bundledQuery),readTime:ta(t.readTime)}}(e)),Za.resolve()}}class Yl{constructor(){this.overlays=new tr(_s.comparator),this.Ii=new Map}getOverlay(t,e){return Za.resolve(this.overlays.get(e))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.Xt(t,e,i)})),Za.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.Ii.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.Ii.delete(n)),Za.resolve()}getOverlaysForCollection(t,e,n){const i=Mo(),s=e.length+1,r=new _s(e.child("")),o=this.overlays.getIteratorFrom(r);for(;o.hasNext();){const t=o.getNext().value,r=t.getKey();if(!e.isPrefixOf(r.path))break;r.path.length===s&&t.largestBatchId>n&&i.set(t.getKey(),t)}return Za.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let s=new tr(((t,e)=>t-e));const r=this.overlays.getIterator();for(;r.hasNext();){const t=r.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=s.get(t.largestBatchId);null===e&&(e=Mo(),s=s.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Mo(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=i)););return Za.resolve(o)}Xt(t,e,n){if(null===n)return;const i=this.overlays.get(n.key);if(null!==i){const t=this.Ii.get(i.largestBatchId).delete(n.key);this.Ii.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new fc(e,n));let s=this.Ii.get(e);void 0===s&&(s=Ro(),this.Ii.set(e,s)),this.Ii.set(e,s.add(n.key))}}class Xl{constructor(){this.Ti=new ir(Ql.Ei),this.Ai=new ir(Ql.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(t,e){const n=new Ql(t,e);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}bi(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Pi(new Ql(t,e))}Vi(t,e){t.forEach((t=>this.removeReference(t,e)))}vi(t){const e=new _s(new ns([])),n=new Ql(e,t),i=new Ql(e,t+1),s=[];return this.Ai.forEachInRange([n,i],(t=>{this.Pi(t),s.push(t.key)})),s}Si(){this.Ti.forEach((t=>this.Pi(t)))}Pi(t){this.Ti=this.Ti.delete(t),this.Ai=this.Ai.delete(t)}Di(t){const e=new _s(new ns([])),n=new Ql(e,t),i=new Ql(e,t+1);let s=Ro();return this.Ai.forEachInRange([n,i],(t=>{s=s.add(t.key)})),s}containsKey(t){const e=new Ql(t,0),n=this.Ti.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Ql{constructor(t,e){this.key=t,this.Ci=e}static Ei(t,e){return _s.comparator(t.key,e.key)||Ki(t.Ci,e.Ci)}static Ri(t,e){return Ki(t.Ci,e.Ci)||_s.comparator(t.key,e.key)}}class Jl{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.Bs=[],this.xi=1,this.Ni=new ir(Ql.Ei)}checkEmpty(t){return Za.resolve(0===this.Bs.length)}addMutationBatch(t,e,n,i){const s=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];const r=new hc(s,e,n,i);this.Bs.push(r);for(const e of i)this.Ni=this.Ni.add(new Ql(e.key,s)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return Za.resolve(r)}lookupMutationBatch(t,e){return Za.resolve(this.ki(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.Mi(n),s=i<0?0:i;return Za.resolve(this.Bs.length>s?this.Bs[s]:null)}getHighestUnacknowledgedBatchId(){return Za.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(t){return Za.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Ql(e,0),i=new Ql(e,Number.POSITIVE_INFINITY),s=[];return this.Ni.forEachInRange([n,i],(t=>{const e=this.ki(t.Ci);s.push(e)})),Za.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new ir(Ki);return e.forEach((t=>{const e=new Ql(t,0),i=new Ql(t,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([e,i],(t=>{n=n.add(t.Ci)}))})),Za.resolve(this.Oi(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let s=n;_s.isDocumentKey(s)||(s=s.child(""));const r=new Ql(new _s(s),0);let o=new ir(Ki);return this.Ni.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.Ci)),!0)}),r),Za.resolve(this.Oi(o))}Oi(t){const e=[];return t.forEach((t=>{const n=this.ki(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Ci(0===this.Fi(e.batchId,"removed")),this.Bs.shift();let n=this.Ni;return Za.forEach(e.mutations,(i=>{const s=new Ql(i.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Ni=n}))}_n(t){}containsKey(t,e){const n=new Ql(e,0),i=this.Ni.firstAfterOrEqual(n);return Za.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.Bs.length,Za.resolve()}Fi(t,e){return this.Mi(t)}Mi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}ki(t){const e=this.Mi(t);return e<0||e>=this.Bs.length?null:this.Bs[e]}}class Zl{constructor(t){this.$i=t,this.docs=new tr(_s.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),s=i?i.size:0,r=this.$i(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:r}),this.size+=r-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Za.resolve(n?n.document.mutableCopy():Hs.newInvalidDocument(e))}getEntries(t,e){let n=Do();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Hs.newInvalidDocument(t))})),Za.resolve(n)}getAllFromCollection(t,e,n){let i=Do();const s=new _s(e.child("")),r=this.docs.getIteratorFrom(s);for(;r.hasNext();){const{key:t,value:{document:s}}=r.getNext();if(!e.isPrefixOf(t.path))break;t.path.length>e.length+1||Zs(Qs(s),n)<=0||(i=i.insert(s.key,s.mutableCopy()))}return Za.resolve(i)}getAllFromCollectionGroup(t,e,n,i){Ai()}Bi(t,e){return Za.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new tu(this)}getSize(t){return Za.resolve(this.size)}}class tu extends yl{constructor(t){super(),this.Kn=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.Kn.addEntry(t,i)):this.Kn.removeEntry(n)})),Za.waitFor(e)}getFromCache(t,e){return this.Kn.getEntry(t,e)}getAllFromCache(t,e){return this.Kn.getEntries(t,e)}}class eu{constructor(t){this.persistence=t,this.Li=new Ao((t=>cr(t)),lr),this.lastRemoteSnapshotVersion=Qi.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Xl,this.targetCount=0,this.Ki=rl.gn()}forEachTarget(t,e){return this.Li.forEach(((t,n)=>e(n))),Za.resolve()}getLastRemoteSnapshotVersion(t){return Za.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Za.resolve(this.Ui)}allocateTargetId(t){return this.highestTargetId=this.Ki.next(),Za.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ui&&(this.Ui=e),Za.resolve()}Tn(t){this.Li.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ki=new rl(e),this.highestTargetId=e),t.sequenceNumber>this.Ui&&(this.Ui=t.sequenceNumber)}addTargetData(t,e){return this.Tn(e),this.targetCount+=1,Za.resolve()}updateTargetData(t,e){return this.Tn(e),Za.resolve()}removeTargetData(t,e){return this.Li.delete(e.target),this.qi.vi(e.targetId),this.targetCount-=1,Za.resolve()}removeTargets(t,e,n){let i=0;const s=[];return this.Li.forEach(((r,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Li.delete(r),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),Za.waitFor(s).next((()=>i))}getTargetCount(t){return Za.resolve(this.targetCount)}getTargetData(t,e){const n=this.Li.get(e)||null;return Za.resolve(n)}addMatchingKeys(t,e,n){return this.qi.bi(e,n),Za.resolve()}removeMatchingKeys(t,e,n){this.qi.Vi(e,n);const i=this.persistence.referenceDelegate,s=[];return i&&e.forEach((e=>{s.push(i.markPotentiallyOrphaned(t,e))})),Za.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.qi.vi(e),Za.resolve()}getMatchingKeysForTargetId(t,e){const n=this.qi.Di(e);return Za.resolve(n)}containsKey(t,e){return Za.resolve(this.qi.containsKey(e))}}class nu{constructor(t,e){this.Gi={},this.overlays={},this.es=new Hi(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new eu(this),this.indexManager=new qc,this.ds=function(t){return new Zl(t)}((t=>this.referenceDelegate.Qi(t))),this.M=new gc(e),this._s=new Gl(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Yl,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Gi[t.toKey()];return n||(n=new Jl(e,this.referenceDelegate),this.Gi[t.toKey()]=n),n}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,e,n){Ti("MemoryPersistence","Starting transaction:",t);const i=new iu(this.es.next());return this.referenceDelegate.ji(),n(i).next((t=>this.referenceDelegate.Wi(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}zi(t,e){return Za.or(Object.values(this.Gi).map((n=>()=>n.containsKey(t,e))))}}class iu extends Ja{constructor(t){super(),this.currentSequenceNumber=t}}class su{constructor(t){this.persistence=t,this.Hi=new Xl,this.Ji=null}static Yi(t){return new su(t)}get Xi(){if(this.Ji)return this.Ji;throw Ai()}addReference(t,e,n){return this.Hi.addReference(n,e),this.Xi.delete(n.toString()),Za.resolve()}removeReference(t,e,n){return this.Hi.removeReference(n,e),this.Xi.add(n.toString()),Za.resolve()}markPotentiallyOrphaned(t,e){return this.Xi.add(e.toString()),Za.resolve()}removeTarget(t,e){this.Hi.vi(e.targetId).forEach((t=>this.Xi.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Xi.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}ji(){this.Ji=new Set}Wi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Za.forEach(this.Xi,(n=>{const i=_s.fromPath(n);return this.Zi(t,i).next((t=>{t||e.removeEntry(i,Qi.min())}))})).next((()=>(this.Ji=null,e.apply(t))))}updateLimboDocument(t,e){return this.Zi(t,e).next((t=>{t?this.Xi.delete(e.toString()):this.Xi.add(e.toString())}))}Qi(t){return 0}Zi(t,e){return Za.or([()=>Za.resolve(this.Hi.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.zi(t,e)])}}function ru(t,e){return`firestore_clients_${t}_${e}`}function ou(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function au(t,e){return`firestore_targets_${t}_${e}`}class cu{constructor(t,e,n,i){this.user=t,this.batchId=e,this.state=n,this.error=i}static tr(t,e,n){const i=JSON.parse(n);let s,r="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return r&&i.error&&(r="string"==typeof i.error.message&&"string"==typeof i.error.code,r&&(s=new Mi(i.error.code,i.error.message))),r?new cu(t,e,i.state,s):(Ei("SharedClientState",`Failed to parse mutation state for ID '${e}': ${n}`),null)}er(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class lu{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static tr(t,e){const n=JSON.parse(e);let i,s="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return s&&n.error&&(s="string"==typeof n.error.message&&"string"==typeof n.error.code,s&&(i=new Mi(n.error.code,n.error.message))),s?new lu(t,n.state,i):(Ei("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}er(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class uu{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static tr(t,e){const n=JSON.parse(e);let i="object"==typeof n&&n.activeTargetIds instanceof Array,s=Vo();for(let t=0;i&&t<n.activeTargetIds.length;++t)i=bs(n.activeTargetIds[t]),s=s.add(n.activeTargetIds[t]);return i?new uu(t,s):(Ei("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class hu{constructor(t,e){this.clientId=t,this.onlineState=e}static tr(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new hu(e.clientId,e.onlineState):(Ei("SharedClientState",`Failed to parse online state: ${t}`),null)}}class du{constructor(){this.activeTargetIds=Vo()}nr(t){this.activeTargetIds=this.activeTargetIds.add(t)}sr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}er(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fu{constructor(t,e,n,i,s){this.window=t,this.Yn=e,this.persistenceKey=n,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new tr(Ki),this.started=!1,this.cr=[];const r=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.hr=ru(this.persistenceKey,this.ir),this.lr=function(t){return`firestore_sequence_number_${t}`}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new du),this.dr=new RegExp(`^firestore_clients_${r}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${r}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${r}_(\\d+)$`),this.mr=function(t){return`firestore_online_state_${t}`}(this.persistenceKey),this.gr=function(t){return`firestore_bundle_loaded_v2_${t}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Fs();for(const e of t){if(e===this.ir)continue;const t=this.getItem(ru(this.persistenceKey,e));if(t){const n=uu.tr(e,t);n&&(this.ar=this.ar.insert(n.clientId,n))}}this.yr();const e=this.storage.getItem(this.mr);if(e){const t=this.pr(e);t&&this.Ir(t)}for(const t of this.cr)this.ur(t);this.cr=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.lr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(t){let e=!1;return this.ar.forEach(((n,i)=>{i.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.Er(t,"pending")}updateMutationState(t,e,n){this.Er(t,e,n),this.Ar(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const n=this.storage.getItem(au(this.persistenceKey,t));if(n){const i=lu.tr(t,n);i&&(e=i.state)}}return this.Rr.nr(t),this.yr(),e}removeLocalQueryTarget(t){this.Rr.sr(t),this.yr()}isLocalQueryTarget(t){return this.Rr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(au(this.persistenceKey,t))}updateQueryState(t,e,n){this.br(t,e,n)}handleUserChange(t,e,n){e.forEach((t=>{this.Ar(t)})),this.currentUser=t,n.forEach((t=>{this.addPendingMutation(t)}))}setOnlineState(t){this.Pr(t)}notifyBundleLoaded(t){this.Vr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Ti("SharedClientState","READ",t,e),e}setItem(t,e){Ti("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Ti("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ur(t){const e=t;if(e.storageArea===this.storage){if(Ti("SharedClientState","EVENT",e.key,e.newValue),e.key===this.hr)return void Ei("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((async()=>{if(this.started){if(null!==e.key)if(this.dr.test(e.key)){if(null==e.newValue){const t=this.vr(e.key);return this.Sr(t,null)}{const t=this.Dr(e.key,e.newValue);if(t)return this.Sr(t.clientId,t)}}else if(this._r.test(e.key)){if(null!==e.newValue){const t=this.Cr(e.key,e.newValue);if(t)return this.Nr(t)}}else if(this.wr.test(e.key)){if(null!==e.newValue){const t=this.kr(e.key,e.newValue);if(t)return this.Mr(t)}}else if(e.key===this.mr){if(null!==e.newValue){const t=this.pr(e.newValue);if(t)return this.Ir(t)}}else if(e.key===this.lr){const t=function(t){let e=Hi.A;if(null!=t)try{const n=JSON.parse(t);Ci("number"==typeof n),e=n}catch(t){Ei("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(e.newValue);t!==Hi.A&&this.sequenceNumberHandler(t)}else if(e.key===this.gr){const t=this.Or(e.newValue);await Promise.all(t.map((t=>this.syncEngine.Fr(t))))}}else this.cr.push(e)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(t,e,n){const i=new cu(this.currentUser,t,e,n),s=ou(this.persistenceKey,this.currentUser,t);this.setItem(s,i.er())}Ar(t){const e=ou(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Pr(t){const e={clientId:this.ir,onlineState:t};this.storage.setItem(this.mr,JSON.stringify(e))}br(t,e,n){const i=au(this.persistenceKey,t),s=new lu(t,e,n);this.setItem(i,s.er())}Vr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.gr,e)}vr(t){const e=this.dr.exec(t);return e?e[1]:null}Dr(t,e){const n=this.vr(t);return uu.tr(n,e)}Cr(t,e){const n=this._r.exec(t),i=Number(n[1]),s=void 0!==n[2]?n[2]:null;return cu.tr(new bi(s),i,e)}kr(t,e){const n=this.wr.exec(t),i=Number(n[1]);return lu.tr(i,e)}pr(t){return hu.tr(t)}Or(t){return JSON.parse(t)}async Nr(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.$r(t.batchId,t.state,t.error);Ti("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)}Mr(t){return this.syncEngine.Br(t.targetId,t.state,t.error)}Sr(t,e){const n=e?this.ar.insert(t,e):this.ar.remove(t),i=this.Tr(this.ar),s=this.Tr(n),r=[],o=[];return s.forEach((t=>{i.has(t)||r.push(t)})),i.forEach((t=>{s.has(t)||o.push(t)})),this.syncEngine.Lr(r,o).then((()=>{this.ar=n}))}Ir(t){this.ar.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Tr(t){let e=Vo();return t.forEach(((t,n)=>{e=e.unionWith(n.activeTargetIds)})),e}}class pu{constructor(){this.Ur=new du,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.Ur.nr(t),this.qr[t]||"not-current"}updateQueryState(t,e,n){this.qr[t]=e}removeLocalQueryTarget(t){this.Ur.sr(t)}isLocalQueryTarget(t){return this.Ur.activeTargetIds.has(t)}clearQueryState(t){delete this.qr[t]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(t){return this.Ur.activeTargetIds.has(t)}start(){return this.Ur=new du,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class gu{Kr(t){}shutdown(){}}class mu{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(t){this.zr.push(t)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ti("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.zr)t(0)}Wr(){Ti("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.zr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const yu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class vu{constructor(t){this.Jr=t.Jr,this.Yr=t.Yr}Xr(t){this.Zr=t}eo(t){this.no=t}onMessage(t){this.so=t}close(){this.Yr()}send(t){this.Jr(t)}io(){this.Zr()}ro(t){this.no(t)}oo(t){this.so(t)}}class bu extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.uo=e+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(t,e,n,i,s){const r=this.ho(t,e);Ti("RestConnection","Sending: ",r,n);const o={};return this.lo(o,i,s),this.fo(t,r,o,n).then((t=>(Ti("RestConnection","Received: ",t),t)),(e=>{throw Si("RestConnection",`${t} failed with error: `,e,"url: ",r,"request:",n),e}))}_o(t,e,n,i,s){return this.co(t,e,n,i,s)}lo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+_i,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}ho(t,e){const n=yu[t];return`${this.uo}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,n,i){return new Promise(((s,r)=>{const o=new yi;o.listenOnce(di.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case hi.NO_ERROR:const e=o.getResponseJson();Ti("Connection","XHR received:",JSON.stringify(e)),s(e);break;case hi.TIMEOUT:Ti("Connection",'RPC "'+t+'" timed out'),r(new Mi(Oi.DEADLINE_EXCEEDED,"Request time out"));break;case hi.HTTP_ERROR:const n=o.getStatus();if(Ti("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Oi).indexOf(e)>=0?e:Oi.UNKNOWN}(t.status);r(new Mi(e,t.message))}else r(new Mi(Oi.UNKNOWN,"Server responded with status "+o.getStatus()))}else r(new Mi(Oi.UNAVAILABLE,"Connection failed."));break;default:Ai()}}finally{Ti("Connection",'RPC "'+t+'" completed.')}}));const a=JSON.stringify(i);o.send(e,"POST",a,n,15)}))}wo(t,e,n){const i=[this.uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=li(),r=ui(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new gi({})),this.lo(o.initMessageHeaders,e,n),(0,a.uI)()||(0,a.b$)()||(0,a.d)()||(0,a.w1)()||(0,a.Mn)()||(0,a.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");const c=i.join("");Ti("Connection","Creating WebChannel: "+c,o);const l=s.createWebChannel(c,o);let u=!1,h=!1;const d=new vu({Jr:t=>{h?Ti("Connection","Not sending because WebChannel is closed:",t):(u||(Ti("Connection","Opening WebChannel transport."),l.open(),u=!0),Ti("Connection","WebChannel sending:",t),l.send(t))},Yr:()=>l.close()}),f=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return f(l,mi.EventType.OPEN,(()=>{h||Ti("Connection","WebChannel transport opened.")})),f(l,mi.EventType.CLOSE,(()=>{h||(h=!0,Ti("Connection","WebChannel transport closed"),d.ro())})),f(l,mi.EventType.ERROR,(t=>{h||(h=!0,Si("Connection","WebChannel transport errored:",t),d.ro(new Mi(Oi.UNAVAILABLE,"The operation could not be completed")))})),f(l,mi.EventType.MESSAGE,(t=>{var e;if(!h){const n=t.data[0];Ci(!!n);const i=n,s=i.error||(null===(e=i[0])||void 0===e?void 0:e.error);if(s){Ti("Connection","WebChannel received error:",s);const t=s.status;let e=function(t){const e=To[t];if(void 0!==e)return ko(e)}(t),n=s.message;void 0===e&&(e=Oi.INTERNAL,n="Unknown error status: "+t+" with message "+s.message),h=!0,d.ro(new Mi(e,n)),l.close()}else Ti("Connection","WebChannel received:",n),d.oo(n)}})),f(r,fi.STAT_EVENT,(t=>{t.stat===pi.PROXY?Ti("Connection","Detected buffering proxy"):t.stat===pi.NOPROXY&&Ti("Connection","Detected no buffering proxy")})),setTimeout((()=>{d.io()}),0),d}}function _u(){return"undefined"!=typeof window?window:null}function wu(){return"undefined"!=typeof document?document:null}function xu(t){return new Xo(t,!0)}class Iu{constructor(t,e,n=1e3,i=1.5,s=6e4){this.Yn=t,this.timerId=e,this.mo=n,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),n=Math.max(0,Date.now()-this.Eo),i=Math.max(0,e-n);i>0&&Ti("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,(()=>(this.Eo=Date.now(),t()))),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Tu{constructor(t,e,n,i,s,r,o,a){this.Yn=t,this.Vo=n,this.vo=i,this.So=s,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Iu(t,e)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}async stop(){this.ko()&&await this.close(0)}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(()=>this.Bo())))}Lo(t){this.Uo(),this.stream.send(t)}async Bo(){if(this.Mo())return this.close(0)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}async close(t,e){this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():e&&e.code===Oi.RESOURCE_EXHAUSTED?(Ei(e.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):e&&e.code===Oi.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,await this.listener.eo(e)}Ko(){}auth(){this.state=1;const t=this.Go(this.Do),e=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Do===e&&this.Qo(t,n)}),(e=>{t((()=>{const t=new Mi(Oi.UNKNOWN,"Fetching auth token failed: "+e.message);return this.jo(t)}))}))}Qo(t,e){const n=this.Go(this.Do);this.stream=this.Wo(t,e),this.stream.Xr((()=>{n((()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,(()=>(this.Mo()&&(this.state=3),Promise.resolve()))),this.listener.Xr())))})),this.stream.eo((t=>{n((()=>this.jo(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Oo(){this.state=5,this.No.Ro((async()=>{this.state=0,this.start()}))}jo(t){return Ti("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Go(t){return e=>{this.Yn.enqueueAndForget((()=>this.Do===t?e():(Ti("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Eu extends Tu{constructor(t,e,n,i,s,r){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,r),this.M=s}Wo(t,e){return this.So.wo("Listen",t,e)}onMessage(t){this.No.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ai()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(t,e){return t.N?(Ci(void 0===e||"string"==typeof e),as.fromBase64String(e||"")):(Ci(void 0===e||e instanceof Uint8Array),as.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Oi.UNKNOWN:ko(t.code);return new Mi(e,t.message||"")}(o);n=new zo(i,s,r,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=sa(t,i.document.name),r=ta(i.document.updateTime),o=new qs({mapValue:{fields:i.document.fields}}),a=Hs.newFoundDocument(s,r,o),c=i.targetIds||[],l=i.removedTargetIds||[];n=new Bo(c,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=sa(t,i.document),r=i.readTime?ta(i.readTime):Qi.min(),o=Hs.newNoDocument(s,r),a=i.removedTargetIds||[];n=new Bo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=sa(t,i.document),r=i.removedTargetIds||[];n=new Bo([],r,s,null)}else{if(!("filter"in e))return Ai();{e.filter;const t=e.filter;t.targetId;const i=t.count||0,s=new Io(i),r=t.targetId;n=new qo(r,s)}}return n}(this.M,t),n=function(t){if(!("targetChange"in t))return Qi.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Qi.min():e.readTime?ta(e.readTime):Qi.min()}(t);return this.listener.zo(e,n)}Ho(t){const e={};e.database=aa(this.M),e.addTarget=function(t,e){let n;const i=e.target;return n=ur(i)?{documents:fa(t,i)}:{query:pa(t,i)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Jo(t,e.resumeToken):e.snapshotVersion.compareTo(Qi.min())>0&&(n.readTime=Qo(t,e.snapshotVersion.toTimestamp())),n}(this.M,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ai()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,t);n&&(e.labels=n),this.Lo(e)}Jo(t){const e={};e.database=aa(this.M),e.removeTarget=t,this.Lo(e)}}class Su extends Tu{constructor(t,e,n,i,s,r){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,r),this.M=s,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(t,e){return this.So.wo("Write",t,e)}onMessage(t){if(Ci(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Yo){this.No.reset();const e=function(t,e){return t&&t.length>0?(Ci(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?ta(t.updateTime):ta(e);return n.isEqual(Qi.min())&&(n=ta(e)),new oo(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=ta(t.commitTime);return this.listener.tu(n,e)}return Ci(!t.writeResults||0===t.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const t={};t.database=aa(this.M),this.Lo(t)}Zo(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>ha(this.M,t)))};this.Lo(e)}}class ku extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.So=n,this.M=i,this.su=!1}iu(){if(this.su)throw new Mi(Oi.FAILED_PRECONDITION,"The client has already been terminated.")}co(t,e,n){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.So.co(t,e,n,i,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Oi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Mi(Oi.UNKNOWN,t.toString())}))}_o(t,e,n){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.So._o(t,e,n,i,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Oi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Mi(Oi.UNKNOWN,t.toString())}))}terminate(){this.su=!0}}class Au{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve()))))}lu(t){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.fu(),this.ru=0,"Online"===t&&(this.uu=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}hu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Ei(e),this.uu=!1):Ti("OnlineStateTracker",e)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Cu{constructor(t,e,n,i,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=s,this.gu.Kr((t=>{n.enqueueAndForget((async()=>{Vu(this)&&(Ti("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Ni(t);e.wu.add(4),await Nu(e),e.yu.set("Unknown"),e.wu.delete(4),await Du(e)}(this))}))})),this.yu=new Au(n,i)}}async function Du(t){if(Vu(t))for(const e of t.mu)await e(!0)}async function Nu(t){for(const e of t.mu)await e(!1)}function Ou(t,e){const n=Ni(t);n._u.has(e.targetId)||(n._u.set(e.targetId,e),Fu(n)?Ru(n):nh(n).Mo()&&Lu(n,e))}function Mu(t,e){const n=Ni(t),i=nh(n);n._u.delete(e),i.Mo()&&Pu(n,e),0===n._u.size&&(i.Mo()?i.$o():Vu(n)&&n.yu.set("Unknown"))}function Lu(t,e){t.pu.Z(e.targetId),nh(t).Ho(e)}function Pu(t,e){t.pu.Z(e),nh(t).Jo(e)}function Ru(t){t.pu=new $o({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t._u.get(e)||null}),nh(t).start(),t.yu.au()}function Fu(t){return Vu(t)&&!nh(t).ko()&&t._u.size>0}function Vu(t){return 0===Ni(t).wu.size}function ju(t){t.pu=void 0}async function Uu(t){t._u.forEach(((e,n)=>{Lu(t,e)}))}async function Bu(t,e){ju(t),Fu(t)?(t.yu.lu(e),Ru(t)):t.yu.set("Unknown")}async function qu(t,e,n){if(t.yu.set("Online"),e instanceof zo&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t._u.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t._u.delete(i),t.pu.removeTarget(i))}(t,e)}catch(n){Ti("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await zu(t,n)}else if(e instanceof Bo?t.pu.ut(e):e instanceof qo?t.pu._t(e):t.pu.ht(e),!n.isEqual(Qi.min()))try{const e=await Vl(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.pu.yt(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const s=t._u.get(i);s&&t._u.set(i,s.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((e=>{const n=t._u.get(e);if(!n)return;t._u.set(e,n.withResumeToken(as.EMPTY_BYTE_STRING,n.snapshotVersion)),Pu(t,e);const i=new pc(n.target,e,1,n.sequenceNumber);Lu(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Ti("RemoteStore","Failed to raise snapshot:",e),await zu(t,e)}}async function zu(t,e,n){if(!sc(e))throw e;t.wu.add(1),await Nu(t),t.yu.set("Offline"),n||(n=()=>Vl(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ti("RemoteStore","Retrying IndexedDB access"),await n(),t.wu.delete(1),await Du(t)}))}function Hu(t,e){return e().catch((n=>zu(t,n,e)))}async function $u(t){const e=Ni(t),n=ih(e);let i=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Wu(e);)try{const t=await Ul(e.localStore,i);if(null===t){0===e.du.length&&n.$o();break}i=t.batchId,Ku(e,t)}catch(t){await zu(e,t)}Gu(e)&&Yu(e)}function Wu(t){return Vu(t)&&t.du.length<10}function Ku(t,e){t.du.push(e);const n=ih(t);n.Mo()&&n.Xo&&n.Zo(e.mutations)}function Gu(t){return Vu(t)&&!ih(t).ko()&&t.du.length>0}function Yu(t){ih(t).start()}async function Xu(t){ih(t).nu()}async function Qu(t){const e=ih(t);for(const n of t.du)e.Zo(n.mutations)}async function Ju(t,e,n){const i=t.du.shift(),s=dc.from(i,e,n);await Hu(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await $u(t)}async function Zu(t,e){e&&ih(t).Xo&&await async function(t,e){if(So(n=e.code)&&n!==Oi.ABORTED){const n=t.du.shift();ih(t).Fo(),await Hu(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await $u(t)}var n}(t,e),Gu(t)&&Yu(t)}async function th(t,e){const n=Ni(t);n.asyncQueue.verifyOperationInProgress(),Ti("RemoteStore","RemoteStore received new credentials");const i=Vu(n);n.wu.add(3),await Nu(n),i&&n.yu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.wu.delete(3),await Du(n)}async function eh(t,e){const n=Ni(t);e?(n.wu.delete(2),await Du(n)):e||(n.wu.add(2),await Nu(n),n.yu.set("Unknown"))}function nh(t){return t.Iu||(t.Iu=function(t,e,n){const i=Ni(t);return i.iu(),new Eu(e,i.So,i.authCredentials,i.appCheckCredentials,i.M,n)}(t.datastore,t.asyncQueue,{Xr:Uu.bind(null,t),eo:Bu.bind(null,t),zo:qu.bind(null,t)}),t.mu.push((async e=>{e?(t.Iu.Fo(),Fu(t)?Ru(t):t.yu.set("Unknown")):(await t.Iu.stop(),ju(t))}))),t.Iu}function ih(t){return t.Tu||(t.Tu=function(t,e,n){const i=Ni(t);return i.iu(),new Su(e,i.So,i.authCredentials,i.appCheckCredentials,i.M,n)}(t.datastore,t.asyncQueue,{Xr:Xu.bind(null,t),eo:Zu.bind(null,t),eu:Qu.bind(null,t),tu:Ju.bind(null,t)}),t.mu.push((async e=>{e?(t.Tu.Fo(),await $u(t)):(await t.Tu.stop(),t.du.length>0&&(Ti("RemoteStore",`Stopping write stream with ${t.du.length} pending writes`),t.du=[]))}))),t.Tu}class sh{constructor(t,e,n,i,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new Li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,i,s){const r=Date.now()+n,o=new sh(t,e,r,i,s);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Mi(Oi.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rh(t,e){if(Ei("AsyncQueue",`${e}: ${t}`),sc(t))return new Mi(Oi.UNAVAILABLE,`${e}: ${t}`);throw t}class oh{constructor(t){this.comparator=t?(e,n)=>t(e,n)||_s.comparator(e.key,n.key):(t,e)=>_s.comparator(t.key,e.key),this.keyedMap=Oo(),this.sortedSet=new tr(this.comparator)}static emptySet(t){return new oh(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof oh))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new oh;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class ah{constructor(){this.Eu=new tr(_s.comparator)}track(t){const e=t.doc.key,n=this.Eu.get(e);n?0!==t.type&&3===n.type?this.Eu=this.Eu.insert(e,t):3===t.type&&1!==n.type?this.Eu=this.Eu.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Eu=this.Eu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Eu=this.Eu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Eu=this.Eu.remove(e):1===t.type&&2===n.type?this.Eu=this.Eu.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Eu=this.Eu.insert(e,{type:2,doc:t.doc}):Ai():this.Eu=this.Eu.insert(e,t)}Au(){const t=[];return this.Eu.inorderTraversal(((e,n)=>{t.push(n)})),t}}class ch{constructor(t,e,n,i,s,r,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=r,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(t,e,n,i){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new ch(t,e,oh.emptySet(e),s,n,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Fr(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class lh{constructor(){this.Ru=void 0,this.listeners=[]}}class uh{constructor(){this.queries=new Ao((t=>Vr(t)),Fr),this.onlineState="Unknown",this.bu=new Set}}async function hh(t,e){const n=Ni(t),i=e.query;let s=!1,r=n.queries.get(i);if(r||(s=!0,r=new lh),s)try{r.Ru=await n.onListen(i)}catch(t){const n=rh(t,`Initialization of query '${jr(e.query)}' failed`);return void e.onError(n)}n.queries.set(i,r),r.listeners.push(e),e.Pu(n.onlineState),r.Ru&&e.Vu(r.Ru)&&gh(n)}async function dh(t,e){const n=Ni(t),i=e.query;let s=!1;const r=n.queries.get(i);if(r){const t=r.listeners.indexOf(e);t>=0&&(r.listeners.splice(t,1),s=0===r.listeners.length)}if(s)return n.queries.delete(i),n.onUnlisten(i)}function fh(t,e){const n=Ni(t);let i=!1;for(const t of e){const e=t.query,s=n.queries.get(e);if(s){for(const e of s.listeners)e.Vu(t)&&(i=!0);s.Ru=t}}i&&gh(n)}function ph(t,e,n){const i=Ni(t),s=i.queries.get(e);if(s)for(const t of s.listeners)t.onError(n);i.queries.delete(e)}function gh(t){t.bu.forEach((t=>{t.next()}))}class mh{constructor(t,e,n){this.query=t,this.vu=e,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=n||{}}Vu(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new ch(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.Su?this.Cu(t)&&(this.vu.next(t),e=!0):this.xu(t,this.onlineState)&&(this.Nu(t),e=!0),this.Du=t,e}onError(t){this.vu.error(t)}Pu(t){this.onlineState=t;let e=!1;return this.Du&&!this.Su&&this.xu(this.Du,t)&&(this.Nu(this.Du),e=!0),e}xu(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return!(this.options.ku&&n||t.docs.isEmpty()&&"Offline"!==e)}Cu(t){if(t.docChanges.length>0)return!0;const e=this.Du&&this.Du.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Nu(t){t=ch.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Su=!0,this.vu.next(t)}}class yh{constructor(t,e){this.payload=t,this.byteLength=e}Mu(){return"metadata"in this.payload}}class vh{constructor(t){this.M=t}wi(t){return sa(this.M,t)}mi(t){return t.metadata.exists?ua(this.M,t.document,!1):Hs.newNoDocument(this.wi(t.metadata.name),this.gi(t.metadata.readTime))}gi(t){return ta(t)}}class bh{constructor(t,e,n){this.Ou=t,this.localStore=e,this.M=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_h(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const n=ns.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,n=new vh(this.M);for(const i of t)if(i.metadata.queries){const t=n.wi(i.metadata.name);for(const n of i.metadata.queries){const i=(e.get(n)||Ro()).add(t);e.set(n,i)}}return e}async complete(){const t=await async function(t,e,n,i){const s=Ni(t);let r=Ro(),o=Do();for(const t of n){const n=e.wi(t.metadata.name);t.document&&(r=r.add(n));const i=e.mi(t);i.setReadTime(e.gi(t.metadata.readTime)),o=o.insert(n,i)}const a=s.hi.newChangeBuffer({trackRemovals:!0}),c=await Bl(s,function(t){return Pr(Dr(ns.fromString(`__bundle__/docs/${t}`)))}(i));return s.persistence.runTransaction("Apply bundle documents","readwrite",(t=>jl(t,a,o).next((e=>(a.apply(t),e))).next((e=>s.fs.removeMatchingKeysForTargetId(t,c.targetId).next((()=>s.fs.addMatchingKeys(t,r,c.targetId))).next((()=>s.fi.Gs(t,e))).next((()=>e))))))}(this.localStore,new vh(this.M),this.documents,this.Ou.id),e=this.$u(this.documents);for(const t of this.queries)await Kl(this.localStore,t,e.get(t.name));return this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}}}function _h(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class wh{constructor(t){this.key=t}}class xh{constructor(t){this.key=t}}class Ih{constructor(t,e){this.query=t,this.Uu=e,this.qu=null,this.current=!1,this.Ku=Ro(),this.mutatedKeys=Ro(),this.Gu=qr(t),this.Qu=new oh(this.Gu)}get ju(){return this.Uu}Wu(t,e){const n=e?e.zu:new ah,i=e?e.Qu:this.Qu;let s=e?e.mutatedKeys:this.mutatedKeys,r=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const l=i.get(t),u=Ur(this.query,e)?e:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Hu(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Gu(u,a)>0||c&&this.Gu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(r=r.add(u),s=d?s.add(t):s.delete(t)):(r=r.delete(t),s=s.delete(t)))})),null!==this.query.limit)for(;r.size>this.query.limit;){const t="F"===this.query.limitType?r.last():r.first();r=r.delete(t.key),s=s.delete(t.key),n.track({type:1,doc:t})}return{Qu:r,zu:n,ii:o,mutatedKeys:s}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const i=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const s=t.zu.Au();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ai()}};return n(t)-n(e)}(t.type,e.type)||this.Gu(t.doc,e.doc))),this.Ju(n);const r=e?this.Yu():[],o=0===this.Ku.size&&this.current?1:0,a=o!==this.qu;return this.qu=o,0!==s.length||a?{snapshot:new ch(this.query,t.Qu,i,s,t.mutatedKeys,0===o,a,!1),Xu:r}:{Xu:r}}Pu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new ah,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(t){return!this.Uu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach((t=>this.Uu=this.Uu.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.Uu=this.Uu.delete(t))),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=Ro(),this.Qu.forEach((t=>{this.Zu(t.key)&&(this.Ku=this.Ku.add(t.key))}));const e=[];return t.forEach((t=>{this.Ku.has(t)||e.push(new xh(t))})),this.Ku.forEach((n=>{t.has(n)||e.push(new wh(n))})),e}ta(t){this.Uu=t._i,this.Ku=Ro();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ea(){return ch.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class Th{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Eh{constructor(t){this.key=t,this.na=!1}}class Sh{constructor(t,e,n,i,s,r){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=r,this.sa={},this.ia=new Ao((t=>Vr(t)),Fr),this.ra=new Map,this.oa=new Set,this.ua=new tr(_s.comparator),this.aa=new Map,this.ca=new Xl,this.ha={},this.la=new Map,this.fa=rl.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}async function kh(t,e){const n=Zh(t);let i,s;const r=n.ia.get(e);if(r)i=r.targetId,n.sharedClientState.addLocalQueryTarget(i),s=r.view.ea();else{const t=await Bl(n.localStore,Pr(e));n.isPrimaryClient&&Ou(n.remoteStore,t);const r=n.sharedClientState.addLocalQueryTarget(t.targetId);i=t.targetId,s=await Ah(n,e,i,"current"===r)}return s}async function Ah(t,e,n,i){t._a=(e,n,i)=>async function(t,e,n,i){let s=e.view.Wu(n);s.ii&&(s=await zl(t.localStore,e.query,!1).then((({documents:t})=>e.view.Wu(t,s))));const r=i&&i.targetChanges.get(e.targetId),o=e.view.applyChanges(s,t.isPrimaryClient,r);return jh(t,e.targetId,o.Xu),o.snapshot}(t,e,n,i);const s=await zl(t.localStore,e,!0),r=new Ih(e,s._i),o=r.Wu(s.documents),a=Uo.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState),c=r.applyChanges(o,t.isPrimaryClient,a);jh(t,n,c.Xu);const l=new Th(e,n,r);return t.ia.set(e,l),t.ra.has(n)?t.ra.get(n).push(e):t.ra.set(n,[e]),c.snapshot}async function Ch(t,e){const n=Ni(t),i=n.ia.get(e),s=n.ra.get(i.targetId);if(s.length>1)return n.ra.set(i.targetId,s.filter((t=>!Fr(t,e)))),void n.ia.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await ql(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),Mu(n.remoteStore,i.targetId),Fh(n,i.targetId)})).catch(ul)):(Fh(n,i.targetId),await ql(n.localStore,i.targetId,!0))}async function Dh(t,e){const n=Ni(t);try{const t=await function(t,e){const n=Ni(t),i=e.snapshotVersion;let s=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const r=n.hi.newChangeBuffer({trackRemovals:!0});s=n.ui;const o=[];e.targetChanges.forEach(((r,a)=>{const c=s.get(a);if(!c)return;o.push(n.fs.removeMatchingKeys(t,r.removedDocuments,a).next((()=>n.fs.addMatchingKeys(t,r.addedDocuments,a))));let l=c.withSequenceNumber(t.currentSequenceNumber);e.targetMismatches.has(a)?l=l.withResumeToken(as.EMPTY_BYTE_STRING,Qi.min()).withLastLimboFreeSnapshotVersion(Qi.min()):r.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(r.resumeToken,i)),s=s.insert(a,l),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,r)&&o.push(n.fs.updateTargetData(t,l))}));let a=Do();if(e.documentUpdates.forEach((i=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push(jl(t,r,e.documentUpdates).next((t=>{a=t}))),!i.isEqual(Qi.min())){const e=n.fs.getLastRemoteSnapshotVersion(t).next((e=>n.fs.setTargetsMetadata(t,t.currentSequenceNumber,i)));o.push(e)}return Za.waitFor(o).next((()=>r.apply(t))).next((()=>n.fi.Gs(t,a))).next((()=>a))})).then((t=>(n.ui=s,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.aa.get(e);i&&(Ci(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.na=!0:t.modifiedDocuments.size>0?Ci(i.na):t.removedDocuments.size>0&&(Ci(i.na),i.na=!1))})),await qh(n,t,e)}catch(t){await ul(t)}}function Nh(t,e,n){const i=Ni(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ia.forEach(((n,i)=>{const s=i.view.Pu(e);s.snapshot&&t.push(s.snapshot)})),function(t,e){const n=Ni(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.Pu(e)&&(i=!0)})),i&&gh(n)}(i.eventManager,e),t.length&&i.sa.zo(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Oh(t,e,n){const i=Ni(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.aa.get(e),r=s&&s.key;if(r){let t=new tr(_s.comparator);t=t.insert(r,Hs.newNoDocument(r,Qi.min()));const n=Ro().add(r),s=new jo(Qi.min(),new Map,new ir(Ki),t,n);await Dh(i,s),i.ua=i.ua.remove(r),i.aa.delete(e),Bh(i)}else await ql(i.localStore,e,!1).then((()=>Fh(i,e,n))).catch(ul)}async function Mh(t,e){const n=Ni(t),i=e.batch.batchId;try{const t=await function(t,e){const n=Ni(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),s=n.hi.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const s=n.batch,r=s.keys();let o=Za.resolve();return r.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const r=n.docVersions.get(t);Ci(null!==r),e.version.compareTo(r)<0&&(s.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.Bs.removeMutationBatch(e,s)))}(n,t,e,s).next((()=>s.apply(t))).next((()=>n.Bs.performConsistencyCheck(t))).next((()=>n.fi.Ks(t,i)))}))}(n.localStore,e);Rh(n,i,null),Ph(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await qh(n,t)}catch(t){await ul(t)}}async function Lh(t,e,n){const i=Ni(t);try{const t=await function(t,e){const n=Ni(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.Bs.lookupMutationBatch(t,e).next((e=>(Ci(null!==e),i=e.keys(),n.Bs.removeMutationBatch(t,e)))).next((()=>n.Bs.performConsistencyCheck(t))).next((()=>n.fi.Ks(t,i)))}))}(i.localStore,e);Rh(i,e,n),Ph(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await qh(i,t)}catch(n){await ul(n)}}function Ph(t,e){(t.la.get(e)||[]).forEach((t=>{t.resolve()})),t.la.delete(e)}function Rh(t,e,n){const i=Ni(t);let s=i.ha[i.currentUser.toKey()];if(s){const t=s.get(e);t&&(n?t.reject(n):t.resolve(),s=s.remove(e)),i.ha[i.currentUser.toKey()]=s}}function Fh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.ra.get(e))t.ia.delete(i),n&&t.sa.wa(i,n);t.ra.delete(e),t.isPrimaryClient&&t.ca.vi(e).forEach((e=>{t.ca.containsKey(e)||Vh(t,e)}))}function Vh(t,e){t.oa.delete(e.path.canonicalString());const n=t.ua.get(e);null!==n&&(Mu(t.remoteStore,n),t.ua=t.ua.remove(e),t.aa.delete(n),Bh(t))}function jh(t,e,n){for(const i of n)i instanceof wh?(t.ca.addReference(i.key,e),Uh(t,i)):i instanceof xh?(Ti("SyncEngine","Document no longer in limbo: "+i.key),t.ca.removeReference(i.key,e),t.ca.containsKey(i.key)||Vh(t,i.key)):Ai()}function Uh(t,e){const n=e.key,i=n.path.canonicalString();t.ua.get(n)||t.oa.has(i)||(Ti("SyncEngine","New document in limbo: "+n),t.oa.add(i),Bh(t))}function Bh(t){for(;t.oa.size>0&&t.ua.size<t.maxConcurrentLimboResolutions;){const e=t.oa.values().next().value;t.oa.delete(e);const n=new _s(ns.fromString(e)),i=t.fa.next();t.aa.set(i,new Eh(n)),t.ua=t.ua.insert(n,i),Ou(t.remoteStore,new pc(Pr(Dr(n.path)),i,2,Hi.A))}}async function qh(t,e,n){const i=Ni(t),s=[],r=[],o=[];i.ia.isEmpty()||(i.ia.forEach(((t,a)=>{o.push(i._a(a,e,n).then((t=>{if(t){i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),s.push(t);const e=Ml.Ys(a.targetId,t);r.push(e)}})))})),await Promise.all(o),i.sa.zo(s),await async function(t,e){const n=Ni(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Za.forEach(e,(e=>Za.forEach(e.Hs,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>Za.forEach(e.Js,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!sc(t))throw t;Ti("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.ui.get(e),i=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(i);n.ui=n.ui.insert(e,s)}}}(i.localStore,r))}async function zh(t,e){const n=Ni(t);if(!n.currentUser.isEqual(e)){Ti("SyncEngine","User change. New user:",e.toKey());const t=await Fl(n.localStore,e);n.currentUser=e,function(t,e){t.la.forEach((t=>{t.forEach((t=>{t.reject(new Mi(Oi.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.la.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await qh(n,t.di)}}function Hh(t,e){const n=Ni(t),i=n.aa.get(e);if(i&&i.na)return Ro().add(i.key);{let t=Ro();const i=n.ra.get(e);if(!i)return t;for(const e of i){const i=n.ia.get(e);t=t.unionWith(i.view.ju)}return t}}async function $h(t,e){const n=Ni(t),i=await zl(n.localStore,e.query,!0),s=e.view.ta(i);return n.isPrimaryClient&&jh(n,e.targetId,s.Xu),s}async function Wh(t,e){const n=Ni(t);return $l(n.localStore,e).then((t=>qh(n,t)))}async function Kh(t,e,n,i){const s=Ni(t),r=await function(t,e){const n=Ni(t),i=Ni(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(t=>i.fn(t,e).next((e=>e?n.fi.Ks(t,e):Za.resolve(null)))))}(s.localStore,e);null!==r?("pending"===n?await $u(s.remoteStore):"acknowledged"===n||"rejected"===n?(Rh(s,e,i||null),Ph(s,e),function(t,e){Ni(Ni(t).Bs)._n(e)}(s.localStore,e)):Ai(),await qh(s,r)):Ti("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Gh(t,e,n){const i=Ni(t),s=[],r=[];for(const t of e){let e;const n=i.ra.get(t);if(n&&0!==n.length){e=await Bl(i.localStore,Pr(n[0]));for(const t of n){const e=i.ia.get(t),n=await $h(i,e);n.snapshot&&r.push(n.snapshot)}}else{const n=await Hl(i.localStore,t);e=await Bl(i.localStore,n),await Ah(i,Yh(n),t,!1)}s.push(e)}return i.sa.zo(r),s}function Yh(t){return Cr(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Xh(t){const e=Ni(t);return Ni(Ni(e.localStore).persistence).Fs()}async function Qh(t,e,n,i){const s=Ni(t);if(s.da)return void Ti("SyncEngine","Ignoring unexpected query state notification.");const r=s.ra.get(e);if(r&&r.length>0)switch(n){case"current":case"not-current":{const t=await $l(s.localStore,Br(r[0])),i=jo.createSynthesizedRemoteEventForCurrentChange(e,"current"===n);await qh(s,t,i);break}case"rejected":await ql(s.localStore,e,!0),Fh(s,e,i);break;default:Ai()}}async function Jh(t,e,n){const i=Zh(t);if(i.da){for(const t of e){if(i.ra.has(t)){Ti("SyncEngine","Adding an already active target "+t);continue}const e=await Hl(i.localStore,t),n=await Bl(i.localStore,e);await Ah(i,Yh(e),n.targetId,!1),Ou(i.remoteStore,n)}for(const t of n)i.ra.has(t)&&await ql(i.localStore,t,!1).then((()=>{Mu(i.remoteStore,t),Fh(i,t)})).catch(ul)}}function Zh(t){const e=Ni(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Oh.bind(null,e),e.sa.zo=fh.bind(null,e.eventManager),e.sa.wa=ph.bind(null,e.eventManager),e}function td(t){const e=Ni(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Mh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lh.bind(null,e),e}class ed{constructor(){this.synchronizeTabs=!1}async initialize(t){this.M=xu(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),await this.persistence.start(),this.gcScheduler=this.pa(t),this.localStore=this.Ia(t)}pa(t){return null}Ia(t){return Rl(this.persistence,new Ll,t.initialUser,this.M)}ya(t){return new nu(su.Yi,this.M)}ga(t){return new pu}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class nd extends ed{constructor(t,e,n){super(),this.Ta=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.Ta.initialize(this,t),await td(this.Ta.syncEngine),await $u(this.Ta.remoteStore),await this.persistence.Ts((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve())))}Ia(t){return Rl(this.persistence,new Ll,t.initialUser,this.M)}pa(t){const e=this.persistence.referenceDelegate.garbageCollector;return new fl(e,t.asyncQueue)}ya(t){const e=Nl(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Qc.withCacheSize(this.cacheSizeBytes):Qc.DEFAULT;return new Al(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,_u(),wu(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(t){return new pu}}class id extends nd{constructor(t,e){super(t,e,!1),this.Ta=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.Ta.syncEngine;this.sharedClientState instanceof fu&&(this.sharedClientState.syncEngine={$r:Kh.bind(null,e),Br:Qh.bind(null,e),Lr:Jh.bind(null,e),Fs:Xh.bind(null,e),Fr:Wh.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ts((async t=>{await async function(t,e){const n=Ni(t);if(Zh(n),td(n),!0===e&&!0!==n.da){const t=n.sharedClientState.getAllActiveQueryTargets(),e=await Gh(n,t.toArray());n.da=!0,await eh(n.remoteStore,!0);for(const t of e)Ou(n.remoteStore,t)}else if(!1===e&&!1!==n.da){const t=[];let e=Promise.resolve();n.ra.forEach(((i,s)=>{n.sharedClientState.isLocalQueryTarget(s)?t.push(s):e=e.then((()=>(Fh(n,s),ql(n.localStore,s,!0)))),Mu(n.remoteStore,s)})),await e,await Gh(n,t),function(t){const e=Ni(t);e.aa.forEach(((t,n)=>{Mu(e.remoteStore,n)})),e.ca.Si(),e.aa=new Map,e.ua=new tr(_s.comparator)}(n),n.da=!1,await eh(n.remoteStore,!1)}}(this.Ta.syncEngine,t),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop())}))}ga(t){const e=_u();if(!fu.vt(e))throw new Mi(Oi.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Nl(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new fu(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class sd{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Nh(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=zh.bind(null,this.syncEngine),await eh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new uh}createDatastore(t){const e=xu(t.databaseInfo.databaseId),n=(i=t.databaseInfo,new bu(i));var i;return function(t,e,n,i){return new ku(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,i=t.asyncQueue,s=t=>Nh(this.syncEngine,t,0),r=mu.vt()?new mu:new gu,new Cu(e,n,i,s,r);var e,n,i,s,r}createSyncEngine(t,e){return function(t,e,n,i,s,r,o){const a=new Sh(t,e,n,i,s,r);return o&&(a.da=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=Ni(t);Ti("RemoteStore","RemoteStore shutting down."),e.wu.add(5),await Nu(e),e.gu.shutdown(),e.yu.set("Unknown")}(this.remoteStore)}}function rd(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}class od{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ea(this.observer.next,t)}error(t){this.observer.error?this.Ea(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Aa(){this.muted=!0}Ea(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class ad{constructor(t,e){this.Ra=t,this.M=e,this.metadata=new Li,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((t=>{t&&t.Mu()?this.metadata.resolve(t.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==t?void 0:t.payload)}`))}),(t=>this.metadata.reject(t)))}close(){return this.Ra.cancel()}async getMetadata(){return this.metadata.promise}async ma(){return await this.getMetadata(),this.Pa()}async Pa(){const t=await this.Va();if(null===t)return null;const e=this.ba.decode(t),n=Number(e);isNaN(n)&&this.va(`length string (${e}) is not valid number`);const i=await this.Sa(n);return new yh(JSON.parse(i),t.length+n)}Da(){return this.buffer.findIndex((t=>t==="{".charCodeAt(0)))}async Va(){for(;this.Da()<0&&!await this.Ca(););if(0===this.buffer.length)return null;const t=this.Da();t<0&&this.va("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async Sa(t){for(;this.buffer.length<t;)await this.Ca()&&this.va("Reached the end of bundle when more is expected.");const e=this.ba.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}va(t){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${t}`)}async Ca(){const t=await this.Ra.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}class cd{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Mi(Oi.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const e=await async function(t,e){const n=Ni(t),i=aa(n.M)+"/documents",s={documents:e.map((t=>ia(n.M,t)))},r=await n._o("BatchGetDocuments",i,s),o=new Map;r.forEach((t=>{const e=function(t,e){return"found"in e?function(t,e){Ci(!!e.found),e.found.name,e.found.updateTime;const n=sa(t,e.found.name),i=ta(e.found.updateTime),s=new qs({mapValue:{fields:e.found.fields}});return Hs.newFoundDocument(n,i,s)}(t,e):"missing"in e?function(t,e){Ci(!!e.missing),Ci(!!e.readTime);const n=sa(t,e.missing),i=ta(e.readTime);return Hs.newNoDocument(n,i)}(t,e):Ai()}(n.M,t);o.set(e.key.toString(),e)}));const a=[];return e.forEach((t=>{const e=o.get(t.toString());Ci(!!e),a.push(e)})),a}(this.datastore,t);return e.forEach((t=>this.recordVersion(t))),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())}delete(t){this.write(new wo(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const t=this.readVersions;this.mutations.forEach((e=>{t.delete(e.key.toString())})),t.forEach(((t,e)=>{const n=_s.fromPath(e);this.mutations.push(new xo(n,this.precondition(n)))})),await async function(t,e){const n=Ni(t),i=aa(n.M)+"/documents",s={writes:e.map((t=>ha(n.M,t)))};await n.co("Commit",i,s)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Ai();e=Qi.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Mi(Oi.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ao.updateTime(e):ao.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Qi.min()))throw new Mi(Oi.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ao.updateTime(e)}return ao.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class ld{constructor(t,e,n,i,s){this.asyncQueue=t,this.datastore=e,this.options=n,this.updateFunction=i,this.deferred=s,this.xa=n.maxAttempts,this.No=new Iu(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){this.No.Ro((async()=>{const t=new cd(this.datastore),e=this.ka(t);e&&e.then((e=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(e)})).catch((t=>{this.Ma(t)}))))})).catch((t=>{this.Ma(t)}))}))}ka(t){try{const e=this.updateFunction(t);return!ys(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(t){this.xa>0&&this.Oa(t)?(this.xa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Na(),Promise.resolve())))):this.deferred.reject(t)}Oa(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!So(e)}return!1}}class ud{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=bi.UNAUTHENTICATED,this.clientId=Wi.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Ti("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Ti("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Mi(Oi.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=rh(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function hd(t,e){t.asyncQueue.verifyOperationInProgress(),Ti("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await Fl(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t.offlineComponents=e}async function dd(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fd(t);Ti("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener((t=>th(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>th(e.remoteStore,n))),t.onlineComponents=e}async function fd(t){return t.offlineComponents||(Ti("FirestoreClient","Using default OfflineComponentProvider"),await hd(t,new ed)),t.offlineComponents}async function pd(t){return t.onlineComponents||(Ti("FirestoreClient","Using default OnlineComponentProvider"),await dd(t,new sd)),t.onlineComponents}function gd(t){return fd(t).then((t=>t.persistence))}function md(t){return fd(t).then((t=>t.localStore))}function yd(t){return pd(t).then((t=>t.remoteStore))}function vd(t){return pd(t).then((t=>t.syncEngine))}async function bd(t){const e=await pd(t),n=e.eventManager;return n.onListen=kh.bind(null,e.syncEngine),n.onUnlisten=Ch.bind(null,e.syncEngine),n}function _d(t,e,n={}){const i=new Li;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,s){const r=new od({next:r=>{e.enqueueAndForget((()=>dh(t,o)));const a=r.docs.has(n);!a&&r.fromCache?s.reject(new Mi(Oi.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&r.fromCache&&i&&"server"===i.source?s.reject(new Mi(Oi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(r)},error:t=>s.reject(t)}),o=new mh(Dr(n.path),r,{includeMetadataChanges:!0,ku:!0});return hh(t,o)}(await bd(t),t.asyncQueue,e,n,i))),i.promise}function wd(t,e,n={}){const i=new Li;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,s){const r=new od({next:n=>{e.enqueueAndForget((()=>dh(t,o))),n.fromCache&&"server"===i.source?s.reject(new Mi(Oi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:t=>s.reject(t)}),o=new mh(n,r,{includeMetadataChanges:!0,ku:!0});return hh(t,o)}(await bd(t),t.asyncQueue,e,n,i))),i.promise}const xd=new Map;function Id(t,e,n){if(!n)throw new Mi(Oi.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Td(t,e,n,i){if(!0===e&&!0===i)throw new Mi(Oi.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ed(t){if(!_s.isDocumentKey(t))throw new Mi(Oi.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Sd(t){if(_s.isDocumentKey(t))throw new Mi(Oi.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kd(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":Ai()}function Ad(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Mi(Oi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kd(t);throw new Mi(Oi.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Cd(t,e){if(e<=0)throw new Mi(Oi.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class Dd{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Mi(Oi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Mi(Oi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Td("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Nd{constructor(t,e,n){this._authCredentials=e,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dd({}),this._settingsFrozen=!1,t instanceof ms?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Mi(Oi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ms(t.options.projectId)}(t))}get app(){if(!this._app)throw new Mi(Oi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Mi(Oi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dd(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Ri;switch(t.type){case"gapi":const e=t.client;return Ci(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ui(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Mi(Oi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=xd.get(t);e&&(Ti("ComponentProvider","Removing Datastore"),xd.delete(t),e.terminate())}(this),Promise.resolve()}}function Od(t,e,n,i={}){var s;const r=(t=Ad(t,Nd))._getSettings();if("firestore.googleapis.com"!==r.host&&r.host!==e&&Si("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:`${e}:${n}`,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=bi.MOCK_USER;else{e=(0,a.Sg)(i.mockUserToken,null===(s=t._app)||void 0===s?void 0:s.options.projectId);const r=i.mockUserToken.sub||i.mockUserToken.user_id;if(!r)throw new Mi(Oi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new bi(r)}t._authCredentials=new Fi(new Pi(e,n))}}class Md{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pd(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Md(this.firestore,t,this._key)}}class Ld{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Ld(this.firestore,t,this._query)}}class Pd extends Ld{constructor(t,e,n){super(t,e,Dr(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Md(this.firestore,null,new _s(t))}withConverter(t){return new Pd(this.firestore,t,this._path)}}function Rd(t,e,...n){if(t=(0,a.m9)(t),Id("collection","path",e),t instanceof Nd){const i=ns.fromString(e,...n);return Sd(i),new Pd(t,null,i)}{if(!(t instanceof Md||t instanceof Pd))throw new Mi(Oi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ns.fromString(e,...n));return Sd(i),new Pd(t.firestore,null,i)}}function Fd(t,e){if(t=Ad(t,Nd),Id("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Mi(Oi.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ld(t,null,function(t){return new Ar(ns.emptyPath(),t)}(e))}function Vd(t,e,...n){if(t=(0,a.m9)(t),1===arguments.length&&(e=Wi.R()),Id("doc","path",e),t instanceof Nd){const i=ns.fromString(e,...n);return Ed(i),new Md(t,null,new _s(i))}{if(!(t instanceof Md||t instanceof Pd))throw new Mi(Oi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ns.fromString(e,...n));return Ed(i),new Md(t.firestore,t instanceof Pd?t.converter:null,new _s(i))}}function jd(t,e){return t=(0,a.m9)(t),e=(0,a.m9)(e),(t instanceof Md||t instanceof Pd)&&(e instanceof Md||e instanceof Pd)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Ud(t,e){return t=(0,a.m9)(t),e=(0,a.m9)(e),t instanceof Ld&&e instanceof Ld&&t.firestore===e.firestore&&Fr(t._query,e._query)&&t.converter===e.converter}class Bd{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Iu(this,"async_queue_retry"),this.Qa=()=>{const t=wu();t&&Ti("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const t=wu();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ja(),this.Wa(t)}enterRestrictedMode(t){if(!this.Ba){this.Ba=!0,this.Ka=t||!1;const e=wu();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Qa)}}enqueue(t){if(this.ja(),this.Ba)return new Promise((()=>{}));const e=new Li;return this.Wa((()=>this.Ba&&this.Ka?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.$a.push(t),this.za())))}async za(){if(0!==this.$a.length){try{await this.$a[0](),this.$a.shift(),this.No.reset()}catch(t){if(!sc(t))throw t;Ti("AsyncQueue","Operation failed with retryable error: "+t)}this.$a.length>0&&this.No.Ro((()=>this.za()))}}Wa(t){const e=this.Fa.then((()=>(this.qa=!0,t().catch((t=>{this.Ua=t,this.qa=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw Ei("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.qa=!1,t))))));return this.Fa=e,e}enqueueAfterDelay(t,e,n){this.ja(),this.Ga.indexOf(t)>-1&&(e=0);const i=sh.createAndSchedule(this,t,e,n,(t=>this.Ha(t)));return this.La.push(i),i}ja(){this.Ua&&Ai()}verifyOperationInProgress(){}async Ja(){let t;do{t=this.Fa,await t}while(t!==this.Fa)}Ya(t){for(const e of this.La)if(e.timerId===t)return!0;return!1}Xa(t){return this.Ja().then((()=>{this.La.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.La)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Ja()}))}Za(t){this.Ga.push(t)}Ha(t){const e=this.La.indexOf(t);this.La.splice(e,1)}}function qd(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const t of["next","error","complete"])if(t in n&&"function"==typeof n[t])return!0;return!1}(t)}class zd{constructor(){this._progressObserver={},this._taskCompletionResolver=new Li,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}const Hd=-1;class $d extends Nd{constructor(t,e,n){super(t,e,n),this.type="firestore",this._queue=new Bd,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Yd(this),this._firestoreClient.terminate()}}function Wd(t,e){const n=(0,s.qX)(t,"firestore");if(n.isInitialized()){const t=n.getImmediate(),i=n.getOptions();if((0,a.vZ)(i,e))return t;throw new Mi(Oi.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==e.cacheSizeBytes&&-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Mi(Oi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e})}function Kd(t=(0,s.Mq)()){return(0,s.qX)(t,"firestore").getImmediate()}function Gd(t){return t._firestoreClient||Yd(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Yd(t){var e;const n=t._freezeSettings(),i=function(t,e,n,i){return new gs(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new ud(t._authCredentials,t._appCheckCredentials,t._queue,i)}function Xd(t,e){af(t=Ad(t,$d));const n=Gd(t),i=t._freezeSettings(),s=new sd;return Jd(n,s,new nd(s,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function Qd(t){af(t=Ad(t,$d));const e=Gd(t),n=t._freezeSettings(),i=new sd;return Jd(e,i,new id(i,n.cacheSizeBytes))}function Jd(t,e,n){const i=new Li;return t.asyncQueue.enqueue((async()=>{try{await hd(t,n),await dd(t,e),i.resolve()}catch(t){if(!function(t){return"FirebaseError"===t.name?t.code===Oi.FAILED_PRECONDITION||t.code===Oi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(t))throw t;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),i.reject(t)}})).then((()=>i.promise))}function Zd(t){if(t._initialized&&!t._terminated)throw new Mi(Oi.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Li;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(t){if(!ec.vt())return Promise.resolve();const e=t+"main";await ec.delete(e)}(Nl(t._databaseId,t._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function tf(t){return function(t){const e=new Li;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e){const n=Ni(t);Vu(n.remoteStore)||Ti("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const t=await function(t){const e=Ni(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(t=>e.Bs.getHighestUnacknowledgedBatchId(t)))}(n.localStore);if(-1===t)return void e.resolve();const i=n.la.get(t)||[];i.push(e),n.la.set(t,i)}catch(t){const n=rh(t,"Initialization of waitForPendingWrites() operation failed");e.reject(n)}}(await vd(t),e))),e.promise}(Gd(t=Ad(t,$d)))}function ef(t){return function(t){return t.asyncQueue.enqueue((async()=>{const e=await gd(t),n=await yd(t);return e.setNetworkEnabled(!0),function(t){const e=Ni(t);return e.wu.delete(0),Du(e)}(n)}))}(Gd(t=Ad(t,$d)))}function nf(t){return function(t){return t.asyncQueue.enqueue((async()=>{const e=await gd(t),n=await yd(t);return e.setNetworkEnabled(!1),async function(t){const e=Ni(t);e.wu.add(0),await Nu(e),e.yu.set("Offline")}(n)}))}(Gd(t=Ad(t,$d)))}function sf(t){return(0,s.wN)(t.app,"firestore"),t._delete()}function rf(t,e){const n=Gd(t=Ad(t,$d)),i=new zd;return function(t,e,n,i){const s=function(t,e){let n;return n="string"==typeof t?(new TextEncoder).encode(t):t,function(t,e){return new ad(t,e)}(function(t,e){if(t instanceof Uint8Array)return rd(t,e);if(t instanceof ArrayBuffer)return rd(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),e)}(n,xu(e));t.asyncQueue.enqueueAndForget((async()=>{!function(t,e,n){const i=Ni(t);(async function(t,e,n){try{const i=await e.getMetadata();if(await function(t,e){const n=Ni(t),i=ta(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(t=>n._s.getBundleMetadata(t,e.id))).then((t=>!!t&&t.createTime.compareTo(i)>=0))}(t.localStore,i))return await e.close(),n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(i)),Promise.resolve(new Set);n._updateProgress(_h(i));const s=new bh(i,t.localStore,e.M);let r=await e.ma();for(;r;){const t=await s.Fu(r);t&&n._updateProgress(t),r=await e.ma()}const o=await s.complete();return await qh(t,o.Lu,void 0),await function(t,e){const n=Ni(t);return n.persistence.runTransaction("Save bundle","readwrite",(t=>n._s.saveBundleMetadata(t,e)))}(t.localStore,i),n._completeWith(o.progress),Promise.resolve(o.Bu)}catch(t){return Si("SyncEngine",`Loading bundle failed with ${t}`),n._failWith(t),Promise.resolve(new Set)}})(i,e,n).then((t=>{i.sharedClientState.notifyBundleLoaded(t)}))}(await vd(t),s,i)}))}(n,t._databaseId,e,i),i}function of(t,e){return function(t,e){return t.asyncQueue.enqueue((async()=>function(t,e){const n=Ni(t);return n.persistence.runTransaction("Get named query","readonly",(t=>n._s.getNamedQuery(t,e)))}(await md(t),e)))}(Gd(t=Ad(t,$d)),e).then((e=>e?new Ld(t,null,e.query):null))}function af(t){if(t._initialized||t._terminated)throw new Mi(Oi.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class cf{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Mi(Oi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ss(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}function lf(){return new cf("__name__")}class uf{constructor(t){this._byteString=t}static fromBase64String(t){try{return new uf(as.fromBase64String(t))}catch(t){throw new Mi(Oi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new uf(as.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class hf{constructor(t){this._methodName=t}}class df{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Mi(Oi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Mi(Oi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ki(this._lat,t._lat)||Ki(this._long,t._long)}}const ff=/^__.*__$/;class pf{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new yo(t,this.data,this.fieldMask,e,this.fieldTransforms):new mo(t,this.data,e,this.fieldTransforms)}}class gf{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new yo(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function mf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ai()}}class yf{constructor(t,e,n,i,s,r){this.settings=t,this.databaseId=e,this.M=n,this.ignoreUndefinedProperties=i,void 0===s&&this.tc(),this.fieldTransforms=s||[],this.fieldMask=r||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(t){return new yf(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.nc({path:n,ic:!1});return i.rc(t),i}oc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.nc({path:n,ic:!1});return i.tc(),i}uc(t){return this.nc({path:void 0,ic:!0})}ac(t){return Ff(t,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}tc(){if(this.path)for(let t=0;t<this.path.length;t++)this.rc(this.path.get(t))}rc(t){if(0===t.length)throw this.ac("Document fields must not be empty");if(mf(this.ec)&&ff.test(t))throw this.ac('Document fields cannot begin and end with "__"')}}class vf{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.M=n||xu(t)}lc(t,e,n,i=!1){return new yf({ec:t,methodName:e,hc:n,path:ss.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function bf(t){const e=t._freezeSettings(),n=xu(t._databaseId);return new vf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _f(t,e,n,i,s,r={}){const o=t.lc(r.merge||r.mergeFields?2:0,e,n,s);Mf("Data must be an object, but it was:",o,i);const a=Nf(i,o);let c,l;if(r.merge)c=new rs(o.fieldMask),l=o.fieldTransforms;else if(r.mergeFields){const t=[];for(const i of r.mergeFields){const s=Lf(e,i,n);if(!o.contains(s))throw new Mi(Oi.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Vf(t,s)||t.push(s)}c=new rs(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new pf(new qs(a),c,l)}class wf extends hf{_toFieldTransform(t){if(2!==t.ec)throw 1===t.ec?t.ac(`${this._methodName}() can only appear at the top level of your update data`):t.ac(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof wf}}function xf(t,e,n){return new yf({ec:3,hc:e.settings.hc,methodName:t._methodName,ic:n},e.databaseId,e.M,e.ignoreUndefinedProperties)}class If extends hf{_toFieldTransform(t){return new ro(t.path,new Qr)}isEqual(t){return t instanceof If}}class Tf extends hf{constructor(t,e){super(t),this.fc=e}_toFieldTransform(t){const e=xf(this,t,!0),n=this.fc.map((t=>Df(t,e))),i=new Jr(n);return new ro(t.path,i)}isEqual(t){return this===t}}class Ef extends hf{constructor(t,e){super(t),this.fc=e}_toFieldTransform(t){const e=xf(this,t,!0),n=this.fc.map((t=>Df(t,e))),i=new to(n);return new ro(t.path,i)}isEqual(t){return this===t}}class Sf extends hf{constructor(t,e){super(t),this.dc=e}_toFieldTransform(t){const e=new no(t.M,Wr(t.M,this.dc));return new ro(t.path,e)}isEqual(t){return this===t}}function kf(t,e,n,i){const s=t.lc(1,e,n);Mf("Data must be an object, but it was:",s,i);const r=[],o=qs.empty();Zi(i,((t,i)=>{const c=Rf(e,t,n);i=(0,a.m9)(i);const l=s.oc(c);if(i instanceof wf)r.push(c);else{const t=Df(i,l);null!=t&&(r.push(c),o.set(c,t))}}));const c=new rs(r);return new gf(o,c,s.fieldTransforms)}function Af(t,e,n,i,s,r){const o=t.lc(1,e,n),c=[Lf(e,i,n)],l=[s];if(r.length%2!=0)throw new Mi(Oi.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<r.length;t+=2)c.push(Lf(e,r[t])),l.push(r[t+1]);const u=[],h=qs.empty();for(let t=c.length-1;t>=0;--t)if(!Vf(u,c[t])){const e=c[t];let n=l[t];n=(0,a.m9)(n);const i=o.oc(e);if(n instanceof wf)u.push(e);else{const t=Df(n,i);null!=t&&(u.push(e),h.set(e,t))}}const d=new rs(u);return new gf(h,d,o.fieldTransforms)}function Cf(t,e,n,i=!1){return Df(n,t.lc(i?4:3,e))}function Df(t,e){if(Of(t=(0,a.m9)(t)))return Mf("Unsupported field value:",e,t),Nf(t,e);if(t instanceof hf)return function(t,e){if(!mf(e.ec))throw e.ac(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.ac(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const s of t){let t=Df(s,e.uc(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,a.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Wr(e.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Xi.fromDate(t);return{timestampValue:Qo(e.M,n)}}if(t instanceof Xi){const n=new Xi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Qo(e.M,n)}}if(t instanceof df)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof uf)return{bytesValue:Jo(e.M,t._byteString)};if(t instanceof Md){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.ac(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ea(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.ac(`Unsupported field value: ${kd(t)}`)}(t,e)}function Nf(t,e){const n={};return ts(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zi(t,((t,i)=>{const s=Df(i,e.sc(t));null!=s&&(n[t]=s)})),{mapValue:{fields:n}}}function Of(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Xi||t instanceof df||t instanceof uf||t instanceof Md||t instanceof hf)}function Mf(t,e,n){if(!Of(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=kd(n);throw"an object"===i?e.ac(t+" a custom object"):e.ac(t+" "+i)}}function Lf(t,e,n){if((e=(0,a.m9)(e))instanceof cf)return e._internalPath;if("string"==typeof e)return Rf(t,e);throw Ff("Field path arguments must be of type string or ",t,!1,void 0,n)}const Pf=new RegExp("[~\\*/\\[\\]]");function Rf(t,e,n){if(e.search(Pf)>=0)throw Ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new cf(...e.split("."))._internalPath}catch(i){throw Ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ff(t,e,n,i,s){const r=i&&!i.isEmpty(),o=void 0!==s;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${i}`),o&&(c+=` in document ${s}`),c+=")"),new Mi(Oi.INVALID_ARGUMENT,a+t+c)}function Vf(t,e){return t.some((t=>t.isEqual(e)))}class jf{constructor(t,e,n,i,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Md(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Uf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Bf("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Uf extends jf{data(){return super.data()}}function Bf(t,e){return"string"==typeof e?Rf(t,e):e instanceof cf?e._internalPath:e._delegate._internalPath}class qf{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class zf extends jf{constructor(t,e,n,i,s,r){super(t,e,n,i,r),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Bf("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Hf extends zf{data(t={}){return super.data(t)}}class $f{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new qf(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Hf(this._firestore,this._userDataWriter,n.key,n,new qf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Mi(Oi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>({type:"added",doc:new Hf(t._firestore,t._userDataWriter,n.doc.key,n.doc,new qf(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:e++})))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new Hf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new qf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let s=-1,r=-1;return 0!==e.type&&(s=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),r=n.indexOf(e.doc.key)),{type:Wf(e.type),doc:i,oldIndex:s,newIndex:r}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Wf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ai()}}function Kf(t,e){return t instanceof zf&&e instanceof zf?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof $f&&e instanceof $f&&t._firestore===e._firestore&&Ud(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Gf(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Mi(Oi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yf{}function Xf(t,...e){for(const n of e)t=n._apply(t);return t}class Qf extends Yf{constructor(t,e,n){super(),this._c=t,this.wc=e,this.mc=n,this.type="where"}_apply(t){const e=bf(t.firestore),n=function(t,e,n,i,s,r,o){let a;if(s.isKeyField()){if("array-contains"===r||"array-contains-any"===r)throw new Mi(Oi.INVALID_ARGUMENT,`Invalid Query. You can't perform '${r}' queries on documentId().`);if("in"===r||"not-in"===r){dp(o,r);const e=[];for(const n of o)e.push(hp(i,t,n));a={arrayValue:{values:e}}}else a=hp(i,t,o)}else"in"!==r&&"not-in"!==r&&"array-contains-any"!==r||dp(o,r),a=Cf(n,"where",o,"in"===r||"not-in"===r);const c=pr.create(s,r,a);return function(t,e){if(e.S()){const n=Or(t);if(null!==n&&!n.isEqual(e.field))throw new Mi(Oi.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${e.field.toString()}'`);const i=Nr(t);null!==i&&fp(0,e.field,i)}const n=function(t,e){for(const n of t.filters)if(e.indexOf(n.op)>=0)return n.op;return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new Mi(Oi.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Mi(Oi.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}(t,c),c}(t._query,0,e,t.firestore._databaseId,this._c,this.wc,this.mc);return new Ld(t.firestore,t.converter,function(t,e){const n=t.filters.concat([e]);return new Ar(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))}}function Jf(t,e,n){const i=e,s=Bf("where",t);return new Qf(s,i,n)}class Zf extends Yf{constructor(t,e){super(),this._c=t,this.gc=e,this.type="orderBy"}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new Mi(Oi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Mi(Oi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const i=new Tr(e,n);return function(t,e){if(null===Nr(t)){const n=Or(t);null!==n&&fp(0,n,e.field)}}(t,i),i}(t._query,this._c,this.gc);return new Ld(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new Ar(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}function tp(t,e="asc"){const n=e,i=Bf("orderBy",t);return new Zf(i,n)}class ep extends Yf{constructor(t,e,n){super(),this.type=t,this.yc=e,this.Ic=n}_apply(t){return new Ld(t.firestore,t.converter,Rr(t._query,this.yc,this.Ic))}}function np(t){return Cd("limit",t),new ep("limit",t,"F")}function ip(t){return Cd("limitToLast",t),new ep("limitToLast",t,"L")}class sp extends Yf{constructor(t,e,n){super(),this.type=t,this.Tc=e,this.Ec=n}_apply(t){const e=up(t,this.type,this.Tc,this.Ec);return new Ld(t.firestore,t.converter,function(t,e){return new Ar(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}function rp(...t){return new sp("startAt",t,!0)}function op(...t){return new sp("startAfter",t,!1)}class ap extends Yf{constructor(t,e,n){super(),this.type=t,this.Tc=e,this.Ec=n}_apply(t){const e=up(t,this.type,this.Tc,this.Ec);return new Ld(t.firestore,t.converter,function(t,e){return new Ar(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))}}function cp(...t){return new ap("endBefore",t,!1)}function lp(...t){return new ap("endAt",t,!0)}function up(t,e,n,i){if(n[0]=(0,a.m9)(n[0]),n[0]instanceof jf)return function(t,e,n,i,s){if(!i)throw new Mi(Oi.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const r=[];for(const n of Lr(t))if(n.field.isKeyField())r.push(Ds(e,i.key));else{const t=i.data.field(n.field);if(ds(t))throw new Mi(Oi.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=n.field.canonicalString();throw new Mi(Oi.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${t}' (used as the orderBy) does not exist.`)}r.push(t)}return new Ir(r,s)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const s=bf(t.firestore);return function(t,e,n,i,s,r){const o=t.explicitOrderBy;if(s.length>o.length)throw new Mi(Oi.INVALID_ARGUMENT,`Too many arguments provided to ${i}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let r=0;r<s.length;r++){const c=s[r];if(o[r].field.isKeyField()){if("string"!=typeof c)throw new Mi(Oi.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${i}(), but got a ${typeof c}`);if(!Mr(t)&&-1!==c.indexOf("/"))throw new Mi(Oi.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${i}() must be a plain document ID, but '${c}' contains a slash.`);const n=t.path.child(ns.fromString(c));if(!_s.isDocumentKey(n))throw new Mi(Oi.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${i}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const s=new _s(n);a.push(Ds(e,s))}else{const t=Cf(n,i,c);a.push(t)}}return new Ir(a,r)}(t._query,t.firestore._databaseId,s,e,n,i)}}function hp(t,e,n){if("string"==typeof(n=(0,a.m9)(n))){if(""===n)throw new Mi(Oi.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mr(e)&&-1!==n.indexOf("/"))throw new Mi(Oi.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ns.fromString(n));if(!_s.isDocumentKey(i))throw new Mi(Oi.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ds(t,new _s(i))}if(n instanceof Md)return Ds(t,n._key);throw new Mi(Oi.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kd(n)}.`)}function dp(t,e){if(!Array.isArray(t)||0===t.length)throw new Mi(Oi.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new Mi(Oi.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function fp(t,e,n){if(!n.isEqual(e))throw new Mi(Oi.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}const pp={maxAttempts:5};class gp{convertValue(t,e="none"){switch(Is(t)){case 0:return null;case 1:return t.booleanValue;case 2:return us(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(hs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Ai()}}convertObject(t,e){const n={};return Zi(t.fields,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertGeoPoint(t){return new df(us(t.latitude),us(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=fs(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ps(t));default:return null}}convertTimestamp(t){const e=ls(t);return new Xi(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=ns.fromString(t);Ci(Ta(n));const i=new ms(n.get(1),n.get(3)),s=new _s(n.popFirst(5));return i.isEqual(e)||Ei(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function mp(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class yp extends gp{constructor(t){super(),this.firestore=t}convertBytes(t){return new uf(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Md(this.firestore,null,e)}}class vp{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=bf(t)}set(t,e,n){this._verifyNotCommitted();const i=bp(t,this._firestore),s=mp(i.converter,e,n),r=_f(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,n);return this._mutations.push(r.toMutation(i._key,ao.none())),this}update(t,e,n,...i){this._verifyNotCommitted();const s=bp(t,this._firestore);let r;return r="string"==typeof(e=(0,a.m9)(e))||e instanceof cf?Af(this._dataReader,"WriteBatch.update",s._key,e,n,i):kf(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(r.toMutation(s._key,ao.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=bp(t,this._firestore);return this._mutations=this._mutations.concat(new wo(e._key,ao.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Mi(Oi.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bp(t,e){if((t=(0,a.m9)(t)).firestore!==e)throw new Mi(Oi.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function _p(t){t=Ad(t,Md);const e=Ad(t.firestore,$d);return _d(Gd(e),t._key).then((n=>Lp(e,t,n)))}class wp extends gp{constructor(t){super(),this.firestore=t}convertBytes(t){return new uf(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Md(this.firestore,null,e)}}function xp(t){t=Ad(t,Md);const e=Ad(t.firestore,$d),n=Gd(e),i=new wp(e);return function(t,e){const n=new Li;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){try{const i=await function(t,e){const n=Ni(t);return n.persistence.runTransaction("read document","readonly",(t=>n.fi.Ls(t,e)))}(t,e);i.isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Mi(Oi.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(t){const i=rh(t,`Failed to get document '${e} from cache`);n.reject(i)}}(await md(t),e,n))),n.promise}(n,t._key).then((n=>new zf(e,i,t._key,n,new qf(null!==n&&n.hasLocalMutations,!0),t.converter)))}function Ip(t){t=Ad(t,Md);const e=Ad(t.firestore,$d);return _d(Gd(e),t._key,{source:"server"}).then((n=>Lp(e,t,n)))}function Tp(t){t=Ad(t,Ld);const e=Ad(t.firestore,$d),n=Gd(e),i=new wp(e);return Gf(t._query),wd(n,t._query).then((n=>new $f(e,i,t,n)))}function Ep(t){t=Ad(t,Ld);const e=Ad(t.firestore,$d),n=Gd(e),i=new wp(e);return function(t,e){const n=new Li;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){try{const i=await zl(t,e,!0),s=new Ih(e,i._i),r=s.Wu(i.documents),o=s.applyChanges(r,!1);n.resolve(o.snapshot)}catch(t){const i=rh(t,`Failed to execute query '${e} against cache`);n.reject(i)}}(await md(t),e,n))),n.promise}(n,t._query).then((n=>new $f(e,i,t,n)))}function Sp(t){t=Ad(t,Ld);const e=Ad(t.firestore,$d),n=Gd(e),i=new wp(e);return wd(n,t._query,{source:"server"}).then((n=>new $f(e,i,t,n)))}function kp(t,e,n){t=Ad(t,Md);const i=Ad(t.firestore,$d),s=mp(t.converter,e,n);return Mp(i,[_f(bf(i),"setDoc",t._key,s,null!==t.converter,n).toMutation(t._key,ao.none())])}function Ap(t,e,n,...i){t=Ad(t,Md);const s=Ad(t.firestore,$d),r=bf(s);let o;return o="string"==typeof(e=(0,a.m9)(e))||e instanceof cf?Af(r,"updateDoc",t._key,e,n,i):kf(r,"updateDoc",t._key,e),Mp(s,[o.toMutation(t._key,ao.exists(!0))])}function Cp(t){return Mp(Ad(t.firestore,$d),[new wo(t._key,ao.none())])}function Dp(t,e){const n=Ad(t.firestore,$d),i=Vd(t),s=mp(t.converter,e);return Mp(n,[_f(bf(t.firestore),"addDoc",i._key,s,null!==t.converter,{}).toMutation(i._key,ao.exists(!1))]).then((()=>i))}function Np(t,...e){var n,i,s;t=(0,a.m9)(t);let r={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||qd(e[o])||(r=e[o],o++);const c={includeMetadataChanges:r.includeMetadataChanges};if(qd(e[o])){const t=e[o];e[o]=null===(n=t.next)||void 0===n?void 0:n.bind(t),e[o+1]=null===(i=t.error)||void 0===i?void 0:i.bind(t),e[o+2]=null===(s=t.complete)||void 0===s?void 0:s.bind(t)}let l,u,h;if(t instanceof Md)u=Ad(t.firestore,$d),h=Dr(t._key.path),l={next:n=>{e[o]&&e[o](Lp(u,t,n))},error:e[o+1],complete:e[o+2]};else{const n=Ad(t,Ld);u=Ad(n.firestore,$d),h=n._query;const i=new wp(u);l={next:t=>{e[o]&&e[o](new $f(u,i,n,t))},error:e[o+1],complete:e[o+2]},Gf(t._query)}return function(t,e,n,i){const s=new od(i),r=new mh(e,s,n);return t.asyncQueue.enqueueAndForget((async()=>hh(await bd(t),r))),()=>{s.Aa(),t.asyncQueue.enqueueAndForget((async()=>dh(await bd(t),r)))}}(Gd(u),h,c,l)}function Op(t,e){return function(t,e){const n=new od(e);return t.asyncQueue.enqueueAndForget((async()=>function(t,e){Ni(t).bu.add(e),e.next()}(await bd(t),n))),()=>{n.Aa(),t.asyncQueue.enqueueAndForget((async()=>function(t,e){Ni(t).bu.delete(e)}(await bd(t),n)))}}(Gd(t=Ad(t,$d)),qd(e)?e:{next:e})}function Mp(t,e){return function(t,e){const n=new Li;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=td(t);try{const t=await function(t,e){const n=Ni(t),i=Xi.now(),s=e.reduce(((t,e)=>t.add(e.key)),Ro());let r;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>n.fi.Ks(t,s).next((s=>{r=s;const o=[];for(const t of e){const e=fo(t,r.get(t.key));null!=e&&o.push(new yo(t.key,e,zs(e.value.mapValue),ao.exists(!0)))}return n.Bs.addMutationBatch(t,i,o,e)})))).then((t=>(t.applyToLocalDocumentSet(r),{batchId:t.batchId,changes:r})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.ha[t.currentUser.toKey()];i||(i=new tr(Ki)),i=i.insert(e,n),t.ha[t.currentUser.toKey()]=i}(i,t.batchId,n),await qh(i,t.changes),await $u(i.remoteStore)}catch(t){const e=rh(t,"Failed to persist write");n.reject(e)}}(await vd(t),e,n))),n.promise}(Gd(t),e)}function Lp(t,e,n){const i=n.docs.get(e._key),s=new wp(t);return new zf(t,s,e._key,i,new qf(n.hasPendingWrites,n.fromCache),e.converter)}class Pp extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=bf(t)}get(t){const e=bp(t,this._firestore),n=new yp(this._firestore);return this._transaction.lookup([e._key]).then((t=>{if(!t||1!==t.length)return Ai();const i=t[0];if(i.isFoundDocument())return new jf(this._firestore,n,i.key,i,e.converter);if(i.isNoDocument())return new jf(this._firestore,n,e._key,null,e.converter);throw Ai()}))}set(t,e,n){const i=bp(t,this._firestore),s=mp(i.converter,e,n),r=_f(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,n);return this._transaction.set(i._key,r),this}update(t,e,n,...i){const s=bp(t,this._firestore);let r;return r="string"==typeof(e=(0,a.m9)(e))||e instanceof cf?Af(this._dataReader,"Transaction.update",s._key,e,n,i):kf(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,r),this}delete(t){const e=bp(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=bp(t,this._firestore),n=new wp(this._firestore);return super.get(t).then((t=>new zf(this._firestore,n,e._key,t._document,new qf(!1,!1),e.converter)))}}function Rp(t,e,n){t=Ad(t,$d);const i=Object.assign(Object.assign({},pp),n);return function(t){if(t.maxAttempts<1)throw new Mi(Oi.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(t,e,n){const i=new Li;return t.asyncQueue.enqueueAndForget((async()=>{const s=await function(t){return pd(t).then((t=>t.datastore))}(t);new ld(t.asyncQueue,s,n,e,i).run()})),i.promise}(Gd(t),(n=>e(new Pp(t,n))),i)}function Fp(){return new wf("deleteField")}function Vp(){return new If("serverTimestamp")}function jp(...t){return new Tf("arrayUnion",t)}function Up(...t){return new Ef("arrayRemove",t)}function Bp(t){return new Sf("increment",t)}function qp(t){return Gd(t=Ad(t,$d)),new vp(t,(e=>Mp(t,e)))}function zp(t,e){Gd(t=Ad(t,$d));const n="string"==typeof e?function(t){try{return JSON.parse(t)}catch(t){throw new Mi(Oi.INVALID_ARGUMENT,"Failed to parse JSON:"+t.message)}}(e):e,i=[];if(Array.isArray(n.indexes))for(const t of n.indexes){const e=Hp(t,"collectionGroup"),n=[];if(Array.isArray(t.fields))for(const e of t.fields){const t=Rf("setIndexConfiguration",Hp(e,"fieldPath"));"CONTAINS"===e.arrayConfig?n.push(new Gs(t,2)):"ASCENDING"===e.order?n.push(new Gs(t,0)):"DESCENDING"===e.order&&n.push(new Gs(t,1))}i.push(new $s($s.UNKNOWN_ID,e,n,Ys.empty()))}return Promise.resolve()}function Hp(t,e){if("string"!=typeof t[e])throw new Mi(Oi.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}!function(t,e=!0){!function(t){_i=t}(s.Jn),(0,s.Xd)(new r.wA("firestore",((t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=new $d(i,new Vi(t.getProvider("auth-internal")),new qi(t.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:e},n),s._setSettings(n),s}),"PUBLIC")),(0,s.KN)(vi,"3.4.9",t),(0,s.KN)(vi,"3.4.9","esm2017")}()},644:(t,e,n)=>{"use strict";n.r(e),n.d(e,{connectFunctionsEmulator:()=>b,getFunctions:()=>v,httpsCallable:()=>_,httpsCallableFromURL:()=>w});var i=n(389),s=n(444),r=n(463);function o(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function a(t){if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((t=>a(t)));if("function"==typeof t||"object"==typeof t)return o(t,(t=>a(t)));throw new Error("Data cannot be encoded in JSON: "+t)}function c(t){if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((t=>c(t))):"function"==typeof t||"object"==typeof t?o(t,(t=>c(t))):t}const l="functions",u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class h extends s.ZR{constructor(t,e,n){super(`functions/${t}`,e||""),this.details=n}}class d{constructor(t,e,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((t=>this.auth=t),(()=>{})),this.messaging||e.get().then((t=>this.messaging=t),(()=>{})),this.appCheck||n.get().then((t=>this.appCheck=t),(()=>{}))}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return null==t?void 0:t.accessToken}catch(t){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(t){return}}async getAppCheckToken(){if(this.appCheck){const t=await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken()}}}class f{constructor(t,e,n,i,s="us-central1",r){this.app=t,this.fetchImpl=r,this.emulatorOrigin=null,this.contextProvider=new d(e,n,i),this.cancelAllRequests=new Promise((t=>{this.deleteService=()=>Promise.resolve(t())}));try{const t=new URL(s);this.customDomain=t.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const e=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${e}/${this.region}/${t}`:null!==this.customDomain?`${this.customDomain}/${t}`:`https://${this.region}-${e}.cloudfunctions.net/${t}`}}async function p(t,e,n,i){let s;n["Content-Type"]="application/json";try{s=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch(t){return{status:0,json:null}}let r=null;try{r=await s.json()}catch(t){}return{status:s.status,json:r}}async function g(t,e,n,i){const s={data:n=a(n)},r={},o=await t.contextProvider.getContext();o.authToken&&(r.Authorization="Bearer "+o.authToken),o.messagingToken&&(r["Firebase-Instance-ID-Token"]=o.messagingToken),null!==o.appCheckToken&&(r["X-Firebase-AppCheck"]=o.appCheckToken);const l=function(t){let e=null;return{promise:new Promise(((n,i)=>{e=setTimeout((()=>{i(new h("deadline-exceeded","deadline-exceeded"))}),t)})),cancel:()=>{e&&clearTimeout(e)}}}(i.timeout||7e4),d=await Promise.race([p(e,s,r,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!d)throw new h("cancelled","Firebase Functions instance was deleted.");const f=function(t,e){let n,i=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),s=i;try{const t=e&&e.error;if(t){const e=t.status;if("string"==typeof e){if(!u[e])return new h("internal","internal");i=u[e],s=e}const r=t.message;"string"==typeof r&&(s=r),n=t.details,void 0!==n&&(n=c(n))}}catch(t){}return"ok"===i?null:new h(i,s,n)}(d.status,d.json);if(f)throw f;if(!d.json)throw new h("internal","Response is not valid JSON object.");let g=d.json.data;if(void 0===g&&(g=d.json.result),void 0===g)throw new h("internal","Response is missing data field.");return{data:c(g)}}const m="@firebase/functions",y="0.8.1";function v(t=(0,i.Mq)(),e="us-central1"){return(0,i.qX)((0,s.m9)(t),l).getImmediate({identifier:e})}function b(t,e,n){!function(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}((0,s.m9)(t),e,n)}function _(t,e,n){return function(t,e,n){return i=>function(t,e,n,i){const s=t._url(e);return g(t,s,n,i)}(t,e,i,n||{})}((0,s.m9)(t),e,n)}function w(t,e,n){return function(t,e,n){return i=>g(t,e,i,n||{})}((0,s.m9)(t),e,n)}var x;x=fetch.bind(self),(0,i.Xd)(new r.wA(l,((t,{instanceIdentifier:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("messaging-internal"),r=t.getProvider("app-check-internal");return new f(n,i,s,r,e,x)}),"PUBLIC").setMultipleInstances(!0)),(0,i.KN)(m,y,undefined),(0,i.KN)(m,y,"esm2017")},755:function(t,e){var n;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(i,s){"use strict";var r=[],o=Object.getPrototypeOf,a=r.slice,c=r.flat?function(t){return r.flat.call(t)}:function(t){return r.concat.apply([],t)},l=r.push,u=r.indexOf,h={},d=h.toString,f=h.hasOwnProperty,p=f.toString,g=p.call(Object),m={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},v=function(t){return null!=t&&t===t.window},b=i.document,_={type:!0,src:!0,nonce:!0,noModule:!0};function w(t,e,n){var i,s,r=(n=n||b).createElement("script");if(r.text=t,e)for(i in _)(s=e[i]||e.getAttribute&&e.getAttribute(i))&&r.setAttribute(i,s);n.head.appendChild(r).parentNode.removeChild(r)}function x(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[d.call(t)]||"object":typeof t}var I="3.6.0",T=function(t,e){return new T.fn.init(t,e)};function E(t){var e=!!t&&"length"in t&&t.length,n=x(t);return!y(t)&&!v(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}T.fn=T.prototype={jquery:I,constructor:T,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=T.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return T.each(this,t)},map:function(t){return this.pushStack(T.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(T.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:r.sort,splice:r.splice},T.extend=T.fn.extend=function(){var t,e,n,i,s,r,o=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||y(o)||(o={}),a===c&&(o=this,a--);a<c;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&o!==i&&(l&&i&&(T.isPlainObject(i)||(s=Array.isArray(i)))?(n=o[e],r=s&&!Array.isArray(n)?[]:s||T.isPlainObject(n)?n:{},s=!1,o[e]=T.extend(l,r,i)):void 0!==i&&(o[e]=i));return o},T.extend({expando:"jQuery"+(I+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==d.call(t)||(e=o(t))&&("function"!=typeof(n=f.call(e,"constructor")&&e.constructor)||p.call(n)!==g))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){w(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,i=0;if(E(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(E(Object(t))?T.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:u.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,s=t.length;i<n;i++)t[s++]=e[i];return t.length=s,t},grep:function(t,e,n){for(var i=[],s=0,r=t.length,o=!n;s<r;s++)!e(t[s],s)!==o&&i.push(t[s]);return i},map:function(t,e,n){var i,s,r=0,o=[];if(E(t))for(i=t.length;r<i;r++)null!=(s=e(t[r],r,n))&&o.push(s);else for(r in t)null!=(s=e(t[r],r,n))&&o.push(s);return c(o)},guid:1,support:m}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=r[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var S=function(t){var e,n,i,s,r,o,a,c,l,u,h,d,f,p,g,m,y,v,b,_="sizzle"+1*new Date,w=t.document,x=0,I=0,T=ct(),E=ct(),S=ct(),k=ct(),A=function(t,e){return t===e&&(h=!0),0},C={}.hasOwnProperty,D=[],N=D.pop,O=D.push,M=D.push,L=D.slice,P=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",V="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",j="\\[[\\x20\\t\\r\\n\\f]*("+V+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+V+"))|)"+F+"*\\]",U=":("+V+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",B=new RegExp(F+"+","g"),q=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),z=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),H=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),$=new RegExp(F+"|>"),W=new RegExp(U),K=new RegExp("^"+V+"$"),G={ID:new RegExp("^#("+V+")"),CLASS:new RegExp("^\\.("+V+")"),TAG:new RegExp("^("+V+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,st=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){d()},ot=_t((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{M.apply(D=L.call(w.childNodes),w.childNodes),D[w.childNodes.length].nodeType}catch(t){M={apply:D.length?function(t,e){O.apply(t,L.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function at(t,e,i,s){var r,a,l,u,h,p,y,v=e&&e.ownerDocument,w=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==w&&9!==w&&11!==w)return i;if(!s&&(d(e),e=e||f,g)){if(11!==w&&(h=Z.exec(t)))if(r=h[1]){if(9===w){if(!(l=e.getElementById(r)))return i;if(l.id===r)return i.push(l),i}else if(v&&(l=v.getElementById(r))&&b(e,l)&&l.id===r)return i.push(l),i}else{if(h[2])return M.apply(i,e.getElementsByTagName(t)),i;if((r=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return M.apply(i,e.getElementsByClassName(r)),i}if(n.qsa&&!k[t+" "]&&(!m||!m.test(t))&&(1!==w||"object"!==e.nodeName.toLowerCase())){if(y=t,v=e,1===w&&($.test(t)||H.test(t))){for((v=tt.test(t)&&yt(e.parentNode)||e)===e&&n.scope||((u=e.getAttribute("id"))?u=u.replace(it,st):e.setAttribute("id",u=_)),a=(p=o(t)).length;a--;)p[a]=(u?"#"+u:":scope")+" "+bt(p[a]);y=p.join(",")}try{return M.apply(i,v.querySelectorAll(y)),i}catch(e){k(t,!0)}finally{u===_&&e.removeAttribute("id")}}}return c(t.replace(q,"$1"),e,i,s)}function ct(){var t=[];return function e(n,s){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=s}}function lt(t){return t[_]=!0,t}function ut(t){var e=f.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),s=n.length;s--;)i.attrHandle[n[s]]=e}function dt(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ft(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ot(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function mt(t){return lt((function(e){return e=+e,lt((function(n,i){for(var s,r=t([],n.length,e),o=r.length;o--;)n[s=r[o]]&&(n[s]=!(i[s]=n[s]))}))}))}function yt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=at.support={},r=at.isXML=function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!Y.test(e||n&&n.nodeName||"HTML")},d=at.setDocument=function(t){var e,s,o=t?t.ownerDocument||t:w;return o!=f&&9===o.nodeType&&o.documentElement?(p=(f=o).documentElement,g=!r(f),w!=f&&(s=f.defaultView)&&s.top!==s&&(s.addEventListener?s.addEventListener("unload",rt,!1):s.attachEvent&&s.attachEvent("onunload",rt)),n.scope=ut((function(t){return p.appendChild(t).appendChild(f.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),n.attributes=ut((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ut((function(t){return t.appendChild(f.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(f.getElementsByClassName),n.getById=ut((function(t){return p.appendChild(t).id=_,!f.getElementsByName||!f.getElementsByName(_).length})),n.getById?(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,i,s,r=e.getElementById(t);if(r){if((n=r.getAttributeNode("id"))&&n.value===t)return[r];for(s=e.getElementsByName(t),i=0;r=s[i++];)if((n=r.getAttributeNode("id"))&&n.value===t)return[r]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],s=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[s++];)1===n.nodeType&&i.push(n);return i}return r},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},y=[],m=[],(n.qsa=J.test(f.querySelectorAll))&&(ut((function(t){var e;p.appendChild(t).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+R+")"),t.querySelectorAll("[id~="+_+"-]").length||m.push("~="),(e=f.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||m.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+_+"+*").length||m.push(".#.+[+~]"),t.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),ut((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=f.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=J.test(v=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ut((function(t){n.disconnectedMatch=v.call(t,"*"),v.call(t,"[s!='']:x"),y.push("!=",U)})),m=m.length&&new RegExp(m.join("|")),y=y.length&&new RegExp(y.join("|")),e=J.test(p.compareDocumentPosition),b=e||J.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},A=e?function(t,e){if(t===e)return h=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t==f||t.ownerDocument==w&&b(w,t)?-1:e==f||e.ownerDocument==w&&b(w,e)?1:u?P(u,t)-P(u,e):0:4&i?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,i=0,s=t.parentNode,r=e.parentNode,o=[t],a=[e];if(!s||!r)return t==f?-1:e==f?1:s?-1:r?1:u?P(u,t)-P(u,e):0;if(s===r)return dt(t,e);for(n=t;n=n.parentNode;)o.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;o[i]===a[i];)i++;return i?dt(o[i],a[i]):o[i]==w?-1:a[i]==w?1:0},f):f},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if(d(t),n.matchesSelector&&g&&!k[e+" "]&&(!y||!y.test(e))&&(!m||!m.test(e)))try{var i=v.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){k(e,!0)}return at(e,f,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!=f&&d(t),b(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!=f&&d(t);var s=i.attrHandle[e.toLowerCase()],r=s&&C.call(i.attrHandle,e.toLowerCase())?s(t,e,!g):void 0;return void 0!==r?r:n.attributes||!g?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},at.escape=function(t){return(t+"").replace(it,st)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,i=[],s=0,r=0;if(h=!n.detectDuplicates,u=!n.sortStable&&t.slice(0),t.sort(A),h){for(;e=t[r++];)e===t[r]&&(s=i.push(r));for(;s--;)t.splice(i[s],1)}return u=null,t},s=at.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=s(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=s(e);return n},i=at.selectors={cacheLength:50,createPseudo:lt,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return G.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&W.test(n)&&(e=o(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=T[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+F+"|$)"))&&T(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var s=at.attr(i,t);return null==s?"!="===e:!e||(s+="","="===e?s===n:"!="===e?s!==n:"^="===e?n&&0===s.indexOf(n):"*="===e?n&&s.indexOf(n)>-1:"$="===e?n&&s.slice(-n.length)===n:"~="===e?(" "+s.replace(B," ")+" ").indexOf(n)>-1:"|="===e&&(s===n||s.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,s){var r="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===s?function(t){return!!t.parentNode}:function(e,n,c){var l,u,h,d,f,p,g=r!==o?"nextSibling":"previousSibling",m=e.parentNode,y=a&&e.nodeName.toLowerCase(),v=!c&&!a,b=!1;if(m){if(r){for(;g;){for(d=e;d=d[g];)if(a?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[o?m.firstChild:m.lastChild],o&&v){for(b=(f=(l=(u=(h=(d=m)[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===x&&l[1])&&l[2],d=f&&m.childNodes[f];d=++f&&d&&d[g]||(b=f=0)||p.pop();)if(1===d.nodeType&&++b&&d===e){u[t]=[x,f,b];break}}else if(v&&(b=f=(l=(u=(h=(d=e)[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===x&&l[1]),!1===b)for(;(d=++f&&d&&d[g]||(b=f=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++b||(v&&((u=(h=d[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]=[x,b]),d!==e)););return(b-=s)===i||b%i==0&&b/i>=0}}},PSEUDO:function(t,e){var n,s=i.pseudos[t]||i.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return s[_]?s(e):s.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?lt((function(t,n){for(var i,r=s(t,e),o=r.length;o--;)t[i=P(t,r[o])]=!(n[i]=r[o])})):function(t){return s(t,0,n)}):s}},pseudos:{not:lt((function(t){var e=[],n=[],i=a(t.replace(q,"$1"));return i[_]?lt((function(t,e,n,s){for(var r,o=i(t,null,s,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))})):function(t,s,r){return e[0]=t,i(e,null,r,n),e[0]=null,!n.pop()}})),has:lt((function(t){return function(e){return at(t,e).length>0}})),contains:lt((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||s(e)).indexOf(t)>-1}})),lang:lt((function(t){return K.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt((function(){return[0]})),last:mt((function(t,e){return[e-1]})),eq:mt((function(t,e,n){return[n<0?n+e:n]})),even:mt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:mt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:mt((function(t,e,n){for(var i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t})),gt:mt((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}},i.pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=ft(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=pt(e);function vt(){}function bt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function _t(t,e,n){var i=e.dir,s=e.next,r=s||i,o=n&&"parentNode"===r,a=I++;return e.first?function(e,n,s){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,s);return!1}:function(e,n,c){var l,u,h,d=[x,a];if(c){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,c))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(u=(h=e[_]||(e[_]={}))[e.uniqueID]||(h[e.uniqueID]={}),s&&s===e.nodeName.toLowerCase())e=e[i]||e;else{if((l=u[r])&&l[0]===x&&l[1]===a)return d[2]=l[2];if(u[r]=d,d[2]=t(e,n,c))return!0}return!1}}function wt(t){return t.length>1?function(e,n,i){for(var s=t.length;s--;)if(!t[s](e,n,i))return!1;return!0}:t[0]}function xt(t,e,n,i,s){for(var r,o=[],a=0,c=t.length,l=null!=e;a<c;a++)(r=t[a])&&(n&&!n(r,i,s)||(o.push(r),l&&e.push(a)));return o}function It(t,e,n,i,s,r){return i&&!i[_]&&(i=It(i)),s&&!s[_]&&(s=It(s,r)),lt((function(r,o,a,c){var l,u,h,d=[],f=[],p=o.length,g=r||function(t,e,n){for(var i=0,s=e.length;i<s;i++)at(t,e[i],n);return n}(e||"*",a.nodeType?[a]:a,[]),m=!t||!r&&e?g:xt(g,d,t,a,c),y=n?s||(r?t:p||i)?[]:o:m;if(n&&n(m,y,a,c),i)for(l=xt(y,f),i(l,[],a,c),u=l.length;u--;)(h=l[u])&&(y[f[u]]=!(m[f[u]]=h));if(r){if(s||t){if(s){for(l=[],u=y.length;u--;)(h=y[u])&&l.push(m[u]=h);s(null,y=[],l,c)}for(u=y.length;u--;)(h=y[u])&&(l=s?P(r,h):d[u])>-1&&(r[l]=!(o[l]=h))}}else y=xt(y===o?y.splice(p,y.length):y),s?s(null,o,y,c):M.apply(o,y)}))}function Tt(t){for(var e,n,s,r=t.length,o=i.relative[t[0].type],a=o||i.relative[" "],c=o?1:0,u=_t((function(t){return t===e}),a,!0),h=_t((function(t){return P(e,t)>-1}),a,!0),d=[function(t,n,i){var s=!o&&(i||n!==l)||((e=n).nodeType?u(t,n,i):h(t,n,i));return e=null,s}];c<r;c++)if(n=i.relative[t[c].type])d=[_t(wt(d),n)];else{if((n=i.filter[t[c].type].apply(null,t[c].matches))[_]){for(s=++c;s<r&&!i.relative[t[s].type];s++);return It(c>1&&wt(d),c>1&&bt(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(q,"$1"),n,c<s&&Tt(t.slice(c,s)),s<r&&Tt(t=t.slice(s)),s<r&&bt(t))}d.push(n)}return wt(d)}return vt.prototype=i.filters=i.pseudos,i.setFilters=new vt,o=at.tokenize=function(t,e){var n,s,r,o,a,c,l,u=E[t+" "];if(u)return e?0:u.slice(0);for(a=t,c=[],l=i.preFilter;a;){for(o in n&&!(s=z.exec(a))||(s&&(a=a.slice(s[0].length)||a),c.push(r=[])),n=!1,(s=H.exec(a))&&(n=s.shift(),r.push({value:n,type:s[0].replace(q," ")}),a=a.slice(n.length)),i.filter)!(s=G[o].exec(a))||l[o]&&!(s=l[o](s))||(n=s.shift(),r.push({value:n,type:o,matches:s}),a=a.slice(n.length));if(!n)break}return e?a.length:a?at.error(t):E(t,c).slice(0)},a=at.compile=function(t,e){var n,s=[],r=[],a=S[t+" "];if(!a){for(e||(e=o(t)),n=e.length;n--;)(a=Tt(e[n]))[_]?s.push(a):r.push(a);a=S(t,function(t,e){var n=e.length>0,s=t.length>0,r=function(r,o,a,c,u){var h,p,m,y=0,v="0",b=r&&[],_=[],w=l,I=r||s&&i.find.TAG("*",u),T=x+=null==w?1:Math.random()||.1,E=I.length;for(u&&(l=o==f||o||u);v!==E&&null!=(h=I[v]);v++){if(s&&h){for(p=0,o||h.ownerDocument==f||(d(h),a=!g);m=t[p++];)if(m(h,o||f,a)){c.push(h);break}u&&(x=T)}n&&((h=!m&&h)&&y--,r&&b.push(h))}if(y+=v,n&&v!==y){for(p=0;m=e[p++];)m(b,_,o,a);if(r){if(y>0)for(;v--;)b[v]||_[v]||(_[v]=N.call(c));_=xt(_)}M.apply(c,_),u&&!r&&_.length>0&&y+e.length>1&&at.uniqueSort(c)}return u&&(x=T,l=w),b};return n?lt(r):r}(r,s)),a.selector=t}return a},c=at.select=function(t,e,n,s){var r,c,l,u,h,d="function"==typeof t&&t,f=!s&&o(t=d.selector||t);if(n=n||[],1===f.length){if((c=f[0]=f[0].slice(0)).length>2&&"ID"===(l=c[0]).type&&9===e.nodeType&&g&&i.relative[c[1].type]){if(!(e=(i.find.ID(l.matches[0].replace(et,nt),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(c.shift().value.length)}for(r=G.needsContext.test(t)?0:c.length;r--&&(l=c[r],!i.relative[u=l.type]);)if((h=i.find[u])&&(s=h(l.matches[0].replace(et,nt),tt.test(c[0].type)&&yt(e.parentNode)||e))){if(c.splice(r,1),!(t=s.length&&bt(c)))return M.apply(n,s),n;break}}return(d||a(t,f))(s,e,!g,n,!e||tt.test(t)&&yt(e.parentNode)||e),n},n.sortStable=_.split("").sort(A).join("")===_,n.detectDuplicates=!!h,d(),n.sortDetached=ut((function(t){return 1&t.compareDocumentPosition(f.createElement("fieldset"))})),ut((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ht("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ut((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ht("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ut((function(t){return null==t.getAttribute("disabled")}))||ht(R,(function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null})),at}(i);T.find=S,T.expr=S.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=S.uniqueSort,T.text=S.getText,T.isXMLDoc=S.isXML,T.contains=S.contains,T.escapeSelector=S.escape;var k=function(t,e,n){for(var i=[],s=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&T(t).is(n))break;i.push(t)}return i},A=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},C=T.expr.match.needsContext;function D(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(t,e,n){return y(e)?T.grep(t,(function(t,i){return!!e.call(t,i,t)!==n})):e.nodeType?T.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?T.grep(t,(function(t){return u.call(e,t)>-1!==n})):T.filter(e,t,n)}T.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?T.find.matchesSelector(i,t)?[i]:[]:T.find.matches(t,T.grep(e,(function(t){return 1===t.nodeType})))},T.fn.extend({find:function(t){var e,n,i=this.length,s=this;if("string"!=typeof t)return this.pushStack(T(t).filter((function(){for(e=0;e<i;e++)if(T.contains(s[e],this))return!0})));for(n=this.pushStack([]),e=0;e<i;e++)T.find(t,s[e],n);return i>1?T.uniqueSort(n):n},filter:function(t){return this.pushStack(O(this,t||[],!1))},not:function(t){return this.pushStack(O(this,t||[],!0))},is:function(t){return!!O(this,"string"==typeof t&&C.test(t)?T(t):t||[],!1).length}});var M,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(t,e,n){var i,s;if(!t)return this;if(n=n||M,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:L.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof T?e[0]:e,T.merge(this,T.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:b,!0)),N.test(i[1])&&T.isPlainObject(e))for(i in e)y(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(s=b.getElementById(i[2]))&&(this[0]=s,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(T):T.makeArray(t,this)}).prototype=T.fn,M=T(b);var P=/^(?:parents|prev(?:Until|All))/,R={children:!0,contents:!0,next:!0,prev:!0};function F(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}T.fn.extend({has:function(t){var e=T(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(T.contains(this,e[t]))return!0}))},closest:function(t,e){var n,i=0,s=this.length,r=[],o="string"!=typeof t&&T(t);if(!C.test(t))for(;i<s;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&T.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?T.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?u.call(T(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),T.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return k(t,"parentNode")},parentsUntil:function(t,e,n){return k(t,"parentNode",n)},next:function(t){return F(t,"nextSibling")},prev:function(t){return F(t,"previousSibling")},nextAll:function(t){return k(t,"nextSibling")},prevAll:function(t){return k(t,"previousSibling")},nextUntil:function(t,e,n){return k(t,"nextSibling",n)},prevUntil:function(t,e,n){return k(t,"previousSibling",n)},siblings:function(t){return A((t.parentNode||{}).firstChild,t)},children:function(t){return A(t.firstChild)},contents:function(t){return null!=t.contentDocument&&o(t.contentDocument)?t.contentDocument:(D(t,"template")&&(t=t.content||t),T.merge([],t.childNodes))}},(function(t,e){T.fn[t]=function(n,i){var s=T.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(s=T.filter(i,s)),this.length>1&&(R[t]||T.uniqueSort(s),P.test(t)&&s.reverse()),this.pushStack(s)}}));var V=/[^\x20\t\r\n\f]+/g;function j(t){return t}function U(t){throw t}function B(t,e,n,i){var s;try{t&&y(s=t.promise)?s.call(t).done(e).fail(n):t&&y(s=t.then)?s.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}T.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return T.each(t.match(V)||[],(function(t,n){e[n]=!0})),e}(t):T.extend({},t);var e,n,i,s,r=[],o=[],a=-1,c=function(){for(s=s||t.once,i=e=!0;o.length;a=-1)for(n=o.shift();++a<r.length;)!1===r[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=r.length,n=!1);t.memory||(n=!1),e=!1,s&&(r=n?[]:"")},l={add:function(){return r&&(n&&!e&&(a=r.length-1,o.push(n)),function e(n){T.each(n,(function(n,i){y(i)?t.unique&&l.has(i)||r.push(i):i&&i.length&&"string"!==x(i)&&e(i)}))}(arguments),n&&!e&&c()),this},remove:function(){return T.each(arguments,(function(t,e){for(var n;(n=T.inArray(e,r,n))>-1;)r.splice(n,1),n<=a&&a--})),this},has:function(t){return t?T.inArray(t,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return s=o=[],r=n="",this},disabled:function(){return!r},lock:function(){return s=o=[],n||e||(r=n=""),this},locked:function(){return!!s},fireWith:function(t,n){return s||(n=[t,(n=n||[]).slice?n.slice():n],o.push(n),e||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},T.extend({Deferred:function(t){var e=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],n="pending",s={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var t=arguments;return T.Deferred((function(n){T.each(e,(function(e,i){var s=y(t[i[4]])&&t[i[4]];r[i[1]]((function(){var t=s&&s.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,s?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,s){var r=0;function o(t,e,n,s){return function(){var a=this,c=arguments,l=function(){var i,l;if(!(t<r)){if((i=n.apply(a,c))===e.promise())throw new TypeError("Thenable self-resolution");l=i&&("object"==typeof i||"function"==typeof i)&&i.then,y(l)?s?l.call(i,o(r,e,j,s),o(r,e,U,s)):(r++,l.call(i,o(r,e,j,s),o(r,e,U,s),o(r,e,j,e.notifyWith))):(n!==j&&(a=void 0,c=[i]),(s||e.resolveWith)(a,c))}},u=s?l:function(){try{l()}catch(i){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(i,u.stackTrace),t+1>=r&&(n!==U&&(a=void 0,c=[i]),e.rejectWith(a,c))}};t?u():(T.Deferred.getStackHook&&(u.stackTrace=T.Deferred.getStackHook()),i.setTimeout(u))}}return T.Deferred((function(i){e[0][3].add(o(0,i,y(s)?s:j,i.notifyWith)),e[1][3].add(o(0,i,y(t)?t:j)),e[2][3].add(o(0,i,y(n)?n:U))})).promise()},promise:function(t){return null!=t?T.extend(t,s):s}},r={};return T.each(e,(function(t,i){var o=i[2],a=i[5];s[i[1]]=o.add,a&&o.add((function(){n=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),o.add(i[3].fire),r[i[0]]=function(){return r[i[0]+"With"](this===r?void 0:this,arguments),this},r[i[0]+"With"]=o.fireWith})),s.promise(r),t&&t.call(r,r),r},when:function(t){var e=arguments.length,n=e,i=Array(n),s=a.call(arguments),r=T.Deferred(),o=function(t){return function(n){i[t]=this,s[t]=arguments.length>1?a.call(arguments):n,--e||r.resolveWith(i,s)}};if(e<=1&&(B(t,r.done(o(n)).resolve,r.reject,!e),"pending"===r.state()||y(s[n]&&s[n].then)))return r.then();for(;n--;)B(s[n],o(n),r.reject);return r.promise()}});var q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&q.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},T.readyException=function(t){i.setTimeout((function(){throw t}))};var z=T.Deferred();function H(){b.removeEventListener("DOMContentLoaded",H),i.removeEventListener("load",H),T.ready()}T.fn.ready=function(t){return z.then(t).catch((function(t){T.readyException(t)})),this},T.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--T.readyWait:T.isReady)||(T.isReady=!0,!0!==t&&--T.readyWait>0||z.resolveWith(b,[T]))}}),T.ready.then=z.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?i.setTimeout(T.ready):(b.addEventListener("DOMContentLoaded",H),i.addEventListener("load",H));var $=function(t,e,n,i,s,r,o){var a=0,c=t.length,l=null==n;if("object"===x(n))for(a in s=!0,n)$(t,e,a,n[a],!0,r,o);else if(void 0!==i&&(s=!0,y(i)||(o=!0),l&&(o?(e.call(t,i),e=null):(l=e,e=function(t,e,n){return l.call(T(t),n)})),e))for(;a<c;a++)e(t[a],n,o?i:i.call(t[a],a,e(t[a],n)));return s?t:l?e.call(t):c?e(t[0],n):r},W=/^-ms-/,K=/-([a-z])/g;function G(t,e){return e.toUpperCase()}function Y(t){return t.replace(W,"ms-").replace(K,G)}var X=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Q(){this.expando=T.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(t){var e=t[this.expando];return e||(e={},X(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,s=this.cache(t);if("string"==typeof e)s[Y(e)]=n;else for(i in e)s[Y(i)]=e[i];return s},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Y(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(Y):(e=Y(e))in i?[e]:e.match(V)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||T.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var J=new Q,Z=new Q,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function nt(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(n)}catch(t){}Z.set(t,e,n)}else n=void 0;return n}T.extend({hasData:function(t){return Z.hasData(t)||J.hasData(t)},data:function(t,e,n){return Z.access(t,e,n)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,n){return J.access(t,e,n)},_removeData:function(t,e){J.remove(t,e)}}),T.fn.extend({data:function(t,e){var n,i,s,r=this[0],o=r&&r.attributes;if(void 0===t){if(this.length&&(s=Z.get(r),1===r.nodeType&&!J.get(r,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&(i=Y(i.slice(5)),nt(r,i,s[i]));J.set(r,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each((function(){Z.set(this,t)})):$(this,(function(e){var n;if(r&&void 0===e)return void 0!==(n=Z.get(r,t))||void 0!==(n=nt(r,t))?n:void 0;this.each((function(){Z.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Z.remove(this,t)}))}}),T.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=J.get(t,e),n&&(!i||Array.isArray(n)?i=J.access(t,e,T.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=T.queue(t,e),i=n.length,s=n.shift(),r=T._queueHooks(t,e);"inprogress"===s&&(s=n.shift(),i--),s&&("fx"===e&&n.unshift("inprogress"),delete r.stop,s.call(t,(function(){T.dequeue(t,e)}),r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return J.get(t,n)||J.access(t,n,{empty:T.Callbacks("once memory").add((function(){J.remove(t,[e+"queue",n])}))})}}),T.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?T.queue(this[0],t):void 0===e?this:this.each((function(){var n=T.queue(this,t,e);T._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&T.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){T.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,s=T.Deferred(),r=this,o=this.length,a=function(){--i||s.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=J.get(r[o],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),s.promise(e)}});var it=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,st=new RegExp("^(?:([+-])=|)("+it+")([a-z%]*)$","i"),rt=["Top","Right","Bottom","Left"],ot=b.documentElement,at=function(t){return T.contains(t.ownerDocument,t)},ct={composed:!0};ot.getRootNode&&(at=function(t){return T.contains(t.ownerDocument,t)||t.getRootNode(ct)===t.ownerDocument});var lt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===T.css(t,"display")};function ut(t,e,n,i){var s,r,o=20,a=i?function(){return i.cur()}:function(){return T.css(t,e,"")},c=a(),l=n&&n[3]||(T.cssNumber[e]?"":"px"),u=t.nodeType&&(T.cssNumber[e]||"px"!==l&&+c)&&st.exec(T.css(t,e));if(u&&u[3]!==l){for(c/=2,l=l||u[3],u=+c||1;o--;)T.style(t,e,u+l),(1-r)*(1-(r=a()/c||.5))<=0&&(o=0),u/=r;u*=2,T.style(t,e,u+l),n=n||[]}return n&&(u=+u||+c||0,s=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=u,i.end=s)),s}var ht={};function dt(t){var e,n=t.ownerDocument,i=t.nodeName,s=ht[i];return s||(e=n.body.appendChild(n.createElement(i)),s=T.css(e,"display"),e.parentNode.removeChild(e),"none"===s&&(s="block"),ht[i]=s,s)}function ft(t,e){for(var n,i,s=[],r=0,o=t.length;r<o;r++)(i=t[r]).style&&(n=i.style.display,e?("none"===n&&(s[r]=J.get(i,"display")||null,s[r]||(i.style.display="")),""===i.style.display&&lt(i)&&(s[r]=dt(i))):"none"!==n&&(s[r]="none",J.set(i,"display",n)));for(r=0;r<o;r++)null!=s[r]&&(t[r].style.display=s[r]);return t}T.fn.extend({show:function(){return ft(this,!0)},hide:function(){return ft(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){lt(this)?T(this).show():T(this).hide()}))}});var pt,gt,mt=/^(?:checkbox|radio)$/i,yt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,vt=/^$|^module$|\/(?:java|ecma)script/i;pt=b.createDocumentFragment().appendChild(b.createElement("div")),(gt=b.createElement("input")).setAttribute("type","radio"),gt.setAttribute("checked","checked"),gt.setAttribute("name","t"),pt.appendChild(gt),m.checkClone=pt.cloneNode(!0).cloneNode(!0).lastChild.checked,pt.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!pt.cloneNode(!0).lastChild.defaultValue,pt.innerHTML="<option></option>",m.option=!!pt.lastChild;var bt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function _t(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&D(t,e)?T.merge([t],n):n}function wt(t,e){for(var n=0,i=t.length;n<i;n++)J.set(t[n],"globalEval",!e||J.get(e[n],"globalEval"))}bt.tbody=bt.tfoot=bt.colgroup=bt.caption=bt.thead,bt.th=bt.td,m.option||(bt.optgroup=bt.option=[1,"<select multiple='multiple'>","</select>"]);var xt=/<|&#?\w+;/;function It(t,e,n,i,s){for(var r,o,a,c,l,u,h=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if((r=t[f])||0===r)if("object"===x(r))T.merge(d,r.nodeType?[r]:r);else if(xt.test(r)){for(o=o||h.appendChild(e.createElement("div")),a=(yt.exec(r)||["",""])[1].toLowerCase(),c=bt[a]||bt._default,o.innerHTML=c[1]+T.htmlPrefilter(r)+c[2],u=c[0];u--;)o=o.lastChild;T.merge(d,o.childNodes),(o=h.firstChild).textContent=""}else d.push(e.createTextNode(r));for(h.textContent="",f=0;r=d[f++];)if(i&&T.inArray(r,i)>-1)s&&s.push(r);else if(l=at(r),o=_t(h.appendChild(r),"script"),l&&wt(o),n)for(u=0;r=o[u++];)vt.test(r.type||"")&&n.push(r);return h}var Tt=/^([^.]*)(?:\.(.+)|)/;function Et(){return!0}function St(){return!1}function kt(t,e){return t===function(){try{return b.activeElement}catch(t){}}()==("focus"===e)}function At(t,e,n,i,s,r){var o,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)At(t,a,n,i,e[a],r);return t}if(null==i&&null==s?(s=n,i=n=void 0):null==s&&("string"==typeof n?(s=i,i=void 0):(s=i,i=n,n=void 0)),!1===s)s=St;else if(!s)return t;return 1===r&&(o=s,s=function(t){return T().off(t),o.apply(this,arguments)},s.guid=o.guid||(o.guid=T.guid++)),t.each((function(){T.event.add(this,e,s,i,n)}))}function Ct(t,e,n){n?(J.set(t,e,!1),T.event.add(t,e,{namespace:!1,handler:function(t){var i,s,r=J.get(this,e);if(1&t.isTrigger&&this[e]){if(r.length)(T.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=a.call(arguments),J.set(this,e,r),i=n(this,e),this[e](),r!==(s=J.get(this,e))||i?J.set(this,e,!1):s={},r!==s)return t.stopImmediatePropagation(),t.preventDefault(),s&&s.value}else r.length&&(J.set(this,e,{value:T.event.trigger(T.extend(r[0],T.Event.prototype),r.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===J.get(t,e)&&T.event.add(t,e,Et)}T.event={global:{},add:function(t,e,n,i,s){var r,o,a,c,l,u,h,d,f,p,g,m=J.get(t);if(X(t))for(n.handler&&(n=(r=n).handler,s=r.selector),s&&T.find.matchesSelector(ot,s),n.guid||(n.guid=T.guid++),(c=m.events)||(c=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(e){return void 0!==T&&T.event.triggered!==e.type?T.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(V)||[""]).length;l--;)f=g=(a=Tt.exec(e[l])||[])[1],p=(a[2]||"").split(".").sort(),f&&(h=T.event.special[f]||{},f=(s?h.delegateType:h.bindType)||f,h=T.event.special[f]||{},u=T.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:s,needsContext:s&&T.expr.match.needsContext.test(s),namespace:p.join(".")},r),(d=c[f])||((d=c[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,p,o)||t.addEventListener&&t.addEventListener(f,o)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),s?d.splice(d.delegateCount++,0,u):d.push(u),T.event.global[f]=!0)},remove:function(t,e,n,i,s){var r,o,a,c,l,u,h,d,f,p,g,m=J.hasData(t)&&J.get(t);if(m&&(c=m.events)){for(l=(e=(e||"").match(V)||[""]).length;l--;)if(f=g=(a=Tt.exec(e[l])||[])[1],p=(a[2]||"").split(".").sort(),f){for(h=T.event.special[f]||{},d=c[f=(i?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=d.length;r--;)u=d[r],!s&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(r,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));o&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,m.handle)||T.removeEvent(t,f,m.handle),delete c[f])}else for(f in c)T.event.remove(t,f+e[l],n,i,!0);T.isEmptyObject(c)&&J.remove(t,"handle events")}},dispatch:function(t){var e,n,i,s,r,o,a=new Array(arguments.length),c=T.event.fix(t),l=(J.get(this,"events")||Object.create(null))[c.type]||[],u=T.event.special[c.type]||{};for(a[0]=c,e=1;e<arguments.length;e++)a[e]=arguments[e];if(c.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,c)){for(o=T.event.handlers.call(this,c,l),e=0;(s=o[e++])&&!c.isPropagationStopped();)for(c.currentTarget=s.elem,n=0;(r=s.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==r.namespace&&!c.rnamespace.test(r.namespace)||(c.handleObj=r,c.data=r.data,void 0!==(i=((T.event.special[r.origType]||{}).handle||r.handler).apply(s.elem,a))&&!1===(c.result=i)&&(c.preventDefault(),c.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,c),c.result}},handlers:function(t,e){var n,i,s,r,o,a=[],c=e.delegateCount,l=t.target;if(c&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(r=[],o={},n=0;n<c;n++)void 0===o[s=(i=e[n]).selector+" "]&&(o[s]=i.needsContext?T(s,this).index(l)>-1:T.find(s,this,null,[l]).length),o[s]&&r.push(i);r.length&&a.push({elem:l,handlers:r})}return l=this,c<e.length&&a.push({elem:l,handlers:e.slice(c)}),a},addProp:function(t,e){Object.defineProperty(T.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[T.expando]?t:new T.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return mt.test(e.type)&&e.click&&D(e,"input")&&Ct(e,"click",Et),!1},trigger:function(t){var e=this||t;return mt.test(e.type)&&e.click&&D(e,"input")&&Ct(e,"click"),!0},_default:function(t){var e=t.target;return mt.test(e.type)&&e.click&&D(e,"input")&&J.get(e,"click")||D(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},T.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},T.Event=function(t,e){if(!(this instanceof T.Event))return new T.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Et:St,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&T.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:St,isPropagationStopped:St,isImmediatePropagationStopped:St,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Et,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Et,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Et,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},(function(t,e){T.event.special[t]={setup:function(){return Ct(this,t,kt),!1},trigger:function(){return Ct(this,t),!0},_default:function(){return!0},delegateType:e}})),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){T.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,s=t.relatedTarget,r=t.handleObj;return s&&(s===i||T.contains(i,s))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}})),T.fn.extend({on:function(t,e,n,i){return At(this,t,e,n,i)},one:function(t,e,n,i){return At(this,t,e,n,i,1)},off:function(t,e,n){var i,s;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,T(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=St),this.each((function(){T.event.remove(this,t,n,e)}))}});var Dt=/<script|<style|<link/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Mt(t,e){return D(t,"table")&&D(11!==e.nodeType?e:e.firstChild,"tr")&&T(t).children("tbody")[0]||t}function Lt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Pt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Rt(t,e){var n,i,s,r,o,a;if(1===e.nodeType){if(J.hasData(t)&&(a=J.get(t).events))for(s in J.remove(e,"handle events"),a)for(n=0,i=a[s].length;n<i;n++)T.event.add(e,s,a[s][n]);Z.hasData(t)&&(r=Z.access(t),o=T.extend({},r),Z.set(e,o))}}function Ft(t,e){var n=e.nodeName.toLowerCase();"input"===n&&mt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Vt(t,e,n,i){e=c(e);var s,r,o,a,l,u,h=0,d=t.length,f=d-1,p=e[0],g=y(p);if(g||d>1&&"string"==typeof p&&!m.checkClone&&Nt.test(p))return t.each((function(s){var r=t.eq(s);g&&(e[0]=p.call(this,s,r.html())),Vt(r,e,n,i)}));if(d&&(r=(s=It(e,t[0].ownerDocument,!1,t,i)).firstChild,1===s.childNodes.length&&(s=r),r||i)){for(a=(o=T.map(_t(s,"script"),Lt)).length;h<d;h++)l=s,h!==f&&(l=T.clone(l,!0,!0),a&&T.merge(o,_t(l,"script"))),n.call(t[h],l,h);if(a)for(u=o[o.length-1].ownerDocument,T.map(o,Pt),h=0;h<a;h++)l=o[h],vt.test(l.type||"")&&!J.access(l,"globalEval")&&T.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?T._evalUrl&&!l.noModule&&T._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):w(l.textContent.replace(Ot,""),l,u))}return t}function jt(t,e,n){for(var i,s=e?T.filter(e,t):t,r=0;null!=(i=s[r]);r++)n||1!==i.nodeType||T.cleanData(_t(i)),i.parentNode&&(n&&at(i)&&wt(_t(i,"script")),i.parentNode.removeChild(i));return t}T.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var i,s,r,o,a=t.cloneNode(!0),c=at(t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||T.isXMLDoc(t)))for(o=_t(a),i=0,s=(r=_t(t)).length;i<s;i++)Ft(r[i],o[i]);if(e)if(n)for(r=r||_t(t),o=o||_t(a),i=0,s=r.length;i<s;i++)Rt(r[i],o[i]);else Rt(t,a);return(o=_t(a,"script")).length>0&&wt(o,!c&&_t(t,"script")),a},cleanData:function(t){for(var e,n,i,s=T.event.special,r=0;void 0!==(n=t[r]);r++)if(X(n)){if(e=n[J.expando]){if(e.events)for(i in e.events)s[i]?T.event.remove(n,i):T.removeEvent(n,i,e.handle);n[J.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),T.fn.extend({detach:function(t){return jt(this,t,!0)},remove:function(t){return jt(this,t)},text:function(t){return $(this,(function(t){return void 0===t?T.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Vt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Mt(this,t).appendChild(t)}))},prepend:function(){return Vt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Mt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Vt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Vt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(T.cleanData(_t(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return T.clone(this,t,e)}))},html:function(t){return $(this,(function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Dt.test(t)&&!bt[(yt.exec(t)||["",""])[1].toLowerCase()]){t=T.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(T.cleanData(_t(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Vt(this,arguments,(function(e){var n=this.parentNode;T.inArray(this,t)<0&&(T.cleanData(_t(this)),n&&n.replaceChild(e,this))}),t)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){T.fn[t]=function(t){for(var n,i=[],s=T(t),r=s.length-1,o=0;o<=r;o++)n=o===r?this:this.clone(!0),T(s[o])[e](n),l.apply(i,n.get());return this.pushStack(i)}}));var Ut=new RegExp("^("+it+")(?!px)[a-z%]+$","i"),Bt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},qt=function(t,e,n){var i,s,r={};for(s in e)r[s]=t.style[s],t.style[s]=e[s];for(s in i=n.call(t),e)t.style[s]=r[s];return i},zt=new RegExp(rt.join("|"),"i");function Ht(t,e,n){var i,s,r,o,a=t.style;return(n=n||Bt(t))&&(""!==(o=n.getPropertyValue(e)||n[e])||at(t)||(o=T.style(t,e)),!m.pixelBoxStyles()&&Ut.test(o)&&zt.test(e)&&(i=a.width,s=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=i,a.minWidth=s,a.maxWidth=r)),void 0!==o?o+"":o}function $t(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ot.appendChild(l).appendChild(u);var t=i.getComputedStyle(u);n="1%"!==t.top,c=12===e(t.marginLeft),u.style.right="60%",o=36===e(t.right),s=36===e(t.width),u.style.position="absolute",r=12===e(u.offsetWidth/3),ot.removeChild(l),u=null}}function e(t){return Math.round(parseFloat(t))}var n,s,r,o,a,c,l=b.createElement("div"),u=b.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,T.extend(m,{boxSizingReliable:function(){return t(),s},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),c},scrollboxSize:function(){return t(),r},reliableTrDimensions:function(){var t,e,n,s;return null==a&&(t=b.createElement("table"),e=b.createElement("tr"),n=b.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",ot.appendChild(t).appendChild(e).appendChild(n),s=i.getComputedStyle(e),a=parseInt(s.height,10)+parseInt(s.borderTopWidth,10)+parseInt(s.borderBottomWidth,10)===e.offsetHeight,ot.removeChild(t)),a}}))}();var Wt=["Webkit","Moz","ms"],Kt=b.createElement("div").style,Gt={};function Yt(t){return T.cssProps[t]||Gt[t]||(t in Kt?t:Gt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Wt.length;n--;)if((t=Wt[n]+e)in Kt)return t}(t)||t)}var Xt=/^(none|table(?!-c[ea]).+)/,Qt=/^--/,Jt={position:"absolute",visibility:"hidden",display:"block"},Zt={letterSpacing:"0",fontWeight:"400"};function te(t,e,n){var i=st.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function ee(t,e,n,i,s,r){var o="width"===e?1:0,a=0,c=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(c+=T.css(t,n+rt[o],!0,s)),i?("content"===n&&(c-=T.css(t,"padding"+rt[o],!0,s)),"margin"!==n&&(c-=T.css(t,"border"+rt[o]+"Width",!0,s))):(c+=T.css(t,"padding"+rt[o],!0,s),"padding"!==n?c+=T.css(t,"border"+rt[o]+"Width",!0,s):a+=T.css(t,"border"+rt[o]+"Width",!0,s));return!i&&r>=0&&(c+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-c-a-.5))||0),c}function ne(t,e,n){var i=Bt(t),s=(!m.boxSizingReliable()||n)&&"border-box"===T.css(t,"boxSizing",!1,i),r=s,o=Ht(t,e,i),a="offset"+e[0].toUpperCase()+e.slice(1);if(Ut.test(o)){if(!n)return o;o="auto"}return(!m.boxSizingReliable()&&s||!m.reliableTrDimensions()&&D(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===T.css(t,"display",!1,i))&&t.getClientRects().length&&(s="border-box"===T.css(t,"boxSizing",!1,i),(r=a in t)&&(o=t[a])),(o=parseFloat(o)||0)+ee(t,e,n||(s?"border":"content"),r,i,o)+"px"}function ie(t,e,n,i,s){return new ie.prototype.init(t,e,n,i,s)}T.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ht(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,r,o,a=Y(e),c=Qt.test(e),l=t.style;if(c||(e=Yt(a)),o=T.cssHooks[e]||T.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(s=o.get(t,!1,i))?s:l[e];"string"==(r=typeof n)&&(s=st.exec(n))&&s[1]&&(n=ut(t,e,s),r="number"),null!=n&&n==n&&("number"!==r||c||(n+=s&&s[3]||(T.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,i))||(c?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,i){var s,r,o,a=Y(e);return Qt.test(e)||(e=Yt(a)),(o=T.cssHooks[e]||T.cssHooks[a])&&"get"in o&&(s=o.get(t,!0,n)),void 0===s&&(s=Ht(t,e,i)),"normal"===s&&e in Zt&&(s=Zt[e]),""===n||n?(r=parseFloat(s),!0===n||isFinite(r)?r||0:s):s}}),T.each(["height","width"],(function(t,e){T.cssHooks[e]={get:function(t,n,i){if(n)return!Xt.test(T.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ne(t,e,i):qt(t,Jt,(function(){return ne(t,e,i)}))},set:function(t,n,i){var s,r=Bt(t),o=!m.scrollboxSize()&&"absolute"===r.position,a=(o||i)&&"border-box"===T.css(t,"boxSizing",!1,r),c=i?ee(t,e,i,a,r):0;return a&&o&&(c-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(r[e])-ee(t,e,"border",!1,r)-.5)),c&&(s=st.exec(n))&&"px"!==(s[3]||"px")&&(t.style[e]=n,n=T.css(t,e)),te(0,n,c)}}})),T.cssHooks.marginLeft=$t(m.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Ht(t,"marginLeft"))||t.getBoundingClientRect().left-qt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),T.each({margin:"",padding:"",border:"Width"},(function(t,e){T.cssHooks[t+e]={expand:function(n){for(var i=0,s={},r="string"==typeof n?n.split(" "):[n];i<4;i++)s[t+rt[i]+e]=r[i]||r[i-2]||r[0];return s}},"margin"!==t&&(T.cssHooks[t+e].set=te)})),T.fn.extend({css:function(t,e){return $(this,(function(t,e,n){var i,s,r={},o=0;if(Array.isArray(e)){for(i=Bt(t),s=e.length;o<s;o++)r[e[o]]=T.css(t,e[o],!1,i);return r}return void 0!==n?T.style(t,e,n):T.css(t,e)}),t,e,arguments.length>1)}}),T.Tween=ie,ie.prototype={constructor:ie,init:function(t,e,n,i,s,r){this.elem=t,this.prop=n,this.easing=s||T.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(T.cssNumber[n]?"":"px")},cur:function(){var t=ie.propHooks[this.prop];return t&&t.get?t.get(this):ie.propHooks._default.get(this)},run:function(t){var e,n=ie.propHooks[this.prop];return this.options.duration?this.pos=e=T.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ie.propHooks._default.set(this),this}},ie.prototype.init.prototype=ie.prototype,ie.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=T.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){T.fx.step[t.prop]?T.fx.step[t.prop](t):1!==t.elem.nodeType||!T.cssHooks[t.prop]&&null==t.elem.style[Yt(t.prop)]?t.elem[t.prop]=t.now:T.style(t.elem,t.prop,t.now+t.unit)}}},ie.propHooks.scrollTop=ie.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},T.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},T.fx=ie.prototype.init,T.fx.step={};var se,re,oe=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;function ce(){re&&(!1===b.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(ce):i.setTimeout(ce,T.fx.interval),T.fx.tick())}function le(){return i.setTimeout((function(){se=void 0})),se=Date.now()}function ue(t,e){var n,i=0,s={height:t};for(e=e?1:0;i<4;i+=2-e)s["margin"+(n=rt[i])]=s["padding"+n]=t;return e&&(s.opacity=s.width=t),s}function he(t,e,n){for(var i,s=(de.tweeners[e]||[]).concat(de.tweeners["*"]),r=0,o=s.length;r<o;r++)if(i=s[r].call(n,e,t))return i}function de(t,e,n){var i,s,r=0,o=de.prefilters.length,a=T.Deferred().always((function(){delete c.elem})),c=function(){if(s)return!1;for(var e=se||le(),n=Math.max(0,l.startTime+l.duration-e),i=1-(n/l.duration||0),r=0,o=l.tweens.length;r<o;r++)l.tweens[r].run(i);return a.notifyWith(t,[l,i,n]),i<1&&o?n:(o||a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:T.extend({},e),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},n),originalProperties:e,originalOptions:n,startTime:se||le(),duration:n.duration,tweens:[],createTween:function(e,n){var i=T.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(s)return this;for(s=!0;n<i;n++)l.tweens[n].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),u=l.props;for(function(t,e){var n,i,s,r,o;for(n in t)if(s=e[i=Y(n)],r=t[n],Array.isArray(r)&&(s=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),(o=T.cssHooks[i])&&"expand"in o)for(n in r=o.expand(r),delete t[i],r)n in t||(t[n]=r[n],e[n]=s);else e[i]=s}(u,l.opts.specialEasing);r<o;r++)if(i=de.prefilters[r].call(l,t,u,l.opts))return y(i.stop)&&(T._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return T.map(u,he,l),y(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),T.fx.timer(T.extend(c,{elem:t,anim:l,queue:l.opts.queue})),l}T.Animation=T.extend(de,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ut(n.elem,t,st.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(V);for(var n,i=0,s=t.length;i<s;i++)n=t[i],de.tweeners[n]=de.tweeners[n]||[],de.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,s,r,o,a,c,l,u,h="width"in e||"height"in e,d=this,f={},p=t.style,g=t.nodeType&&lt(t),m=J.get(t,"fxshow");for(i in n.queue||(null==(o=T._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always((function(){d.always((function(){o.unqueued--,T.queue(t,"fx").length||o.empty.fire()}))}))),e)if(s=e[i],oe.test(s)){if(delete e[i],r=r||"toggle"===s,s===(g?"hide":"show")){if("show"!==s||!m||void 0===m[i])continue;g=!0}f[i]=m&&m[i]||T.style(t,i)}if((c=!T.isEmptyObject(e))||!T.isEmptyObject(f))for(i in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=m&&m.display)&&(l=J.get(t,"display")),"none"===(u=T.css(t,"display"))&&(l?u=l:(ft([t],!0),l=t.style.display||l,u=T.css(t,"display"),ft([t]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===T.css(t,"float")&&(c||(d.done((function(){p.display=l})),null==l&&(u=p.display,l="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),c=!1,f)c||(m?"hidden"in m&&(g=m.hidden):m=J.access(t,"fxshow",{display:l}),r&&(m.hidden=!g),g&&ft([t],!0),d.done((function(){for(i in g||ft([t]),J.remove(t,"fxshow"),f)T.style(t,i,f[i])}))),c=he(g?m[i]:0,i,d),i in m||(m[i]=c.start,g&&(c.end=c.start,c.start=0))}],prefilter:function(t,e){e?de.prefilters.unshift(t):de.prefilters.push(t)}}),T.speed=function(t,e,n){var i=t&&"object"==typeof t?T.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return T.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in T.fx.speeds?i.duration=T.fx.speeds[i.duration]:i.duration=T.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&T.dequeue(this,i.queue)},i},T.fn.extend({fadeTo:function(t,e,n,i){return this.filter(lt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var s=T.isEmptyObject(t),r=T.speed(e,n,i),o=function(){var e=de(this,T.extend({},t),r);(s||J.get(this,"finish"))&&e.stop(!0)};return o.finish=o,s||!1===r.queue?this.each(o):this.queue(r.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,s=null!=t&&t+"queueHooks",r=T.timers,o=J.get(this);if(s)o[s]&&o[s].stop&&i(o[s]);else for(s in o)o[s]&&o[s].stop&&ae.test(s)&&i(o[s]);for(s=r.length;s--;)r[s].elem!==this||null!=t&&r[s].queue!==t||(r[s].anim.stop(n),e=!1,r.splice(s,1));!e&&n||T.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=J.get(this),i=n[t+"queue"],s=n[t+"queueHooks"],r=T.timers,o=i?i.length:0;for(n.finish=!0,T.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish}))}}),T.each(["toggle","show","hide"],(function(t,e){var n=T.fn[e];T.fn[e]=function(t,i,s){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ue(e,!0),t,i,s)}})),T.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){T.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}})),T.timers=[],T.fx.tick=function(){var t,e=0,n=T.timers;for(se=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||T.fx.stop(),se=void 0},T.fx.timer=function(t){T.timers.push(t),T.fx.start()},T.fx.interval=13,T.fx.start=function(){re||(re=!0,ce())},T.fx.stop=function(){re=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(t,e){return t=T.fx&&T.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var s=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(s)}}))},function(){var t=b.createElement("input"),e=b.createElement("select").appendChild(b.createElement("option"));t.type="checkbox",m.checkOn=""!==t.value,m.optSelected=e.selected,(t=b.createElement("input")).value="t",t.type="radio",m.radioValue="t"===t.value}();var fe,pe=T.expr.attrHandle;T.fn.extend({attr:function(t,e){return $(this,T.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){T.removeAttr(this,t)}))}}),T.extend({attr:function(t,e,n){var i,s,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?T.prop(t,e,n):(1===r&&T.isXMLDoc(t)||(s=T.attrHooks[e.toLowerCase()]||(T.expr.match.bool.test(e)?fe:void 0)),void 0!==n?null===n?void T.removeAttr(t,e):s&&"set"in s&&void 0!==(i=s.set(t,n,e))?i:(t.setAttribute(e,n+""),n):s&&"get"in s&&null!==(i=s.get(t,e))?i:null==(i=T.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&D(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,s=e&&e.match(V);if(s&&1===t.nodeType)for(;n=s[i++];)t.removeAttribute(n)}}),fe={set:function(t,e,n){return!1===e?T.removeAttr(t,n):t.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=pe[e]||T.find.attr;pe[e]=function(t,e,i){var s,r,o=e.toLowerCase();return i||(r=pe[o],pe[o]=s,s=null!=n(t,e,i)?o:null,pe[o]=r),s}}));var ge=/^(?:input|select|textarea|button)$/i,me=/^(?:a|area)$/i;function ye(t){return(t.match(V)||[]).join(" ")}function ve(t){return t.getAttribute&&t.getAttribute("class")||""}function be(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(V)||[]}T.fn.extend({prop:function(t,e){return $(this,T.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[T.propFix[t]||t]}))}}),T.extend({prop:function(t,e,n){var i,s,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&T.isXMLDoc(t)||(e=T.propFix[e]||e,s=T.propHooks[e]),void 0!==n?s&&"set"in s&&void 0!==(i=s.set(t,n,e))?i:t[e]=n:s&&"get"in s&&null!==(i=s.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=T.find.attr(t,"tabindex");return e?parseInt(e,10):ge.test(t.nodeName)||me.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(T.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){T.propFix[this.toLowerCase()]=this})),T.fn.extend({addClass:function(t){var e,n,i,s,r,o,a,c=0;if(y(t))return this.each((function(e){T(this).addClass(t.call(this,e,ve(this)))}));if((e=be(t)).length)for(;n=this[c++];)if(s=ve(n),i=1===n.nodeType&&" "+ye(s)+" "){for(o=0;r=e[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");s!==(a=ye(i))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,s,r,o,a,c=0;if(y(t))return this.each((function(e){T(this).removeClass(t.call(this,e,ve(this)))}));if(!arguments.length)return this.attr("class","");if((e=be(t)).length)for(;n=this[c++];)if(s=ve(n),i=1===n.nodeType&&" "+ye(s)+" "){for(o=0;r=e[o++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");s!==(a=ye(i))&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):y(t)?this.each((function(n){T(this).toggleClass(t.call(this,n,ve(this),e),e)})):this.each((function(){var e,s,r,o;if(i)for(s=0,r=T(this),o=be(t);e=o[s++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==n||((e=ve(this))&&J.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":J.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+ye(ve(n))+" ").indexOf(e)>-1)return!0;return!1}});var _e=/\r/g;T.fn.extend({val:function(t){var e,n,i,s=this[0];return arguments.length?(i=y(t),this.each((function(n){var s;1===this.nodeType&&(null==(s=i?t.call(this,n,T(this).val()):t)?s="":"number"==typeof s?s+="":Array.isArray(s)&&(s=T.map(s,(function(t){return null==t?"":t+""}))),(e=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))}))):s?(e=T.valHooks[s.type]||T.valHooks[s.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(s,"value"))?n:"string"==typeof(n=s.value)?n.replace(_e,""):null==n?"":n:void 0}}),T.extend({valHooks:{option:{get:function(t){var e=T.find.attr(t,"value");return null!=e?e:ye(T.text(t))}},select:{get:function(t){var e,n,i,s=t.options,r=t.selectedIndex,o="select-one"===t.type,a=o?null:[],c=o?r+1:s.length;for(i=r<0?c:o?r:0;i<c;i++)if(((n=s[i]).selected||i===r)&&!n.disabled&&(!n.parentNode.disabled||!D(n.parentNode,"optgroup"))){if(e=T(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,s=t.options,r=T.makeArray(e),o=s.length;o--;)((i=s[o]).selected=T.inArray(T.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),T.each(["radio","checkbox"],(function(){T.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=T.inArray(T(t).val(),e)>-1}},m.checkOn||(T.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),m.focusin="onfocusin"in i;var we=/^(?:focusinfocus|focusoutblur)$/,xe=function(t){t.stopPropagation()};T.extend(T.event,{trigger:function(t,e,n,s){var r,o,a,c,l,u,h,d,p=[n||b],g=f.call(t,"type")?t.type:t,m=f.call(t,"namespace")?t.namespace.split("."):[];if(o=d=a=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!we.test(g+T.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),l=g.indexOf(":")<0&&"on"+g,(t=t[T.expando]?t:new T.Event(g,"object"==typeof t&&t)).isTrigger=s?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:T.makeArray(e,[t]),h=T.event.special[g]||{},s||!h.trigger||!1!==h.trigger.apply(n,e))){if(!s&&!h.noBubble&&!v(n)){for(c=h.delegateType||g,we.test(c+g)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||b)&&p.push(a.defaultView||a.parentWindow||i)}for(r=0;(o=p[r++])&&!t.isPropagationStopped();)d=o,t.type=r>1?c:h.bindType||g,(u=(J.get(o,"events")||Object.create(null))[t.type]&&J.get(o,"handle"))&&u.apply(o,e),(u=l&&o[l])&&u.apply&&X(o)&&(t.result=u.apply(o,e),!1===t.result&&t.preventDefault());return t.type=g,s||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),e)||!X(n)||l&&y(n[g])&&!v(n)&&((a=n[l])&&(n[l]=null),T.event.triggered=g,t.isPropagationStopped()&&d.addEventListener(g,xe),n[g](),t.isPropagationStopped()&&d.removeEventListener(g,xe),T.event.triggered=void 0,a&&(n[l]=a)),t.result}},simulate:function(t,e,n){var i=T.extend(new T.Event,n,{type:t,isSimulated:!0});T.event.trigger(i,null,e)}}),T.fn.extend({trigger:function(t,e){return this.each((function(){T.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return T.event.trigger(t,e,n,!0)}}),m.focusin||T.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){T.event.simulate(e,t.target,T.event.fix(t))};T.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,s=J.access(i,e);s||i.addEventListener(t,n,!0),J.access(i,e,(s||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,s=J.access(i,e)-1;s?J.access(i,e,s):(i.removeEventListener(t,n,!0),J.remove(i,e))}}}));var Ie=i.location,Te={guid:Date.now()},Ee=/\?/;T.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||T.error("Invalid XML: "+(n?T.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Se=/\[\]$/,ke=/\r?\n/g,Ae=/^(?:submit|button|image|reset|file)$/i,Ce=/^(?:input|select|textarea|keygen)/i;function De(t,e,n,i){var s;if(Array.isArray(e))T.each(e,(function(e,s){n||Se.test(t)?i(t,s):De(t+"["+("object"==typeof s&&null!=s?e:"")+"]",s,n,i)}));else if(n||"object"!==x(e))i(t,e);else for(s in e)De(t+"["+s+"]",e[s],n,i)}T.param=function(t,e){var n,i=[],s=function(t,e){var n=y(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!T.isPlainObject(t))T.each(t,(function(){s(this.name,this.value)}));else for(n in t)De(n,t[n],e,s);return i.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=T.prop(this,"elements");return t?T.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!T(this).is(":disabled")&&Ce.test(this.nodeName)&&!Ae.test(t)&&(this.checked||!mt.test(t))})).map((function(t,e){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,(function(t){return{name:e.name,value:t.replace(ke,"\r\n")}})):{name:e.name,value:n.replace(ke,"\r\n")}})).get()}});var Ne=/%20/g,Oe=/#.*$/,Me=/([?&])_=[^&]*/,Le=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pe=/^(?:GET|HEAD)$/,Re=/^\/\//,Fe={},Ve={},je="*/".concat("*"),Ue=b.createElement("a");function Be(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,s=0,r=e.toLowerCase().match(V)||[];if(y(n))for(;i=r[s++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function qe(t,e,n,i){var s={},r=t===Ve;function o(a){var c;return s[a]=!0,T.each(t[a]||[],(function(t,a){var l=a(e,n,i);return"string"!=typeof l||r||s[l]?r?!(c=l):void 0:(e.dataTypes.unshift(l),o(l),!1)})),c}return o(e.dataTypes[0])||!s["*"]&&o("*")}function ze(t,e){var n,i,s=T.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((s[n]?t:i||(i={}))[n]=e[n]);return i&&T.extend(!0,t,i),t}Ue.href=Ie.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ie.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ie.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":je,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ze(ze(t,T.ajaxSettings),e):ze(T.ajaxSettings,t)},ajaxPrefilter:Be(Fe),ajaxTransport:Be(Ve),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,s,r,o,a,c,l,u,h,d,f=T.ajaxSetup({},e),p=f.context||f,g=f.context&&(p.nodeType||p.jquery)?T(p):T.event,m=T.Deferred(),y=T.Callbacks("once memory"),v=f.statusCode||{},_={},w={},x="canceled",I={readyState:0,getResponseHeader:function(t){var e;if(l){if(!o)for(o={};e=Le.exec(r);)o[e[1].toLowerCase()+" "]=(o[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=o[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?r:null},setRequestHeader:function(t,e){return null==l&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==l&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)I.always(t[I.status]);else for(e in t)v[e]=[v[e],t[e]];return this},abort:function(t){var e=t||x;return n&&n.abort(e),E(0,e),this}};if(m.promise(I),f.url=((t||f.url||Ie.href)+"").replace(Re,Ie.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(V)||[""],null==f.crossDomain){c=b.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Ue.protocol+"//"+Ue.host!=c.protocol+"//"+c.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=T.param(f.data,f.traditional)),qe(Fe,f,e,I),l)return I;for(h in(u=T.event&&f.global)&&0==T.active++&&T.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Pe.test(f.type),s=f.url.replace(Oe,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ne,"+")):(d=f.url.slice(s.length),f.data&&(f.processData||"string"==typeof f.data)&&(s+=(Ee.test(s)?"&":"?")+f.data,delete f.data),!1===f.cache&&(s=s.replace(Me,"$1"),d=(Ee.test(s)?"&":"?")+"_="+Te.guid+++d),f.url=s+d),f.ifModified&&(T.lastModified[s]&&I.setRequestHeader("If-Modified-Since",T.lastModified[s]),T.etag[s]&&I.setRequestHeader("If-None-Match",T.etag[s])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&I.setRequestHeader("Content-Type",f.contentType),I.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+je+"; q=0.01":""):f.accepts["*"]),f.headers)I.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,I,f)||l))return I.abort();if(x="abort",y.add(f.complete),I.done(f.success),I.fail(f.error),n=qe(Ve,f,e,I)){if(I.readyState=1,u&&g.trigger("ajaxSend",[I,f]),l)return I;f.async&&f.timeout>0&&(a=i.setTimeout((function(){I.abort("timeout")}),f.timeout));try{l=!1,n.send(_,E)}catch(t){if(l)throw t;E(-1,t)}}else E(-1,"No Transport");function E(t,e,o,c){var h,d,b,_,w,x=e;l||(l=!0,a&&i.clearTimeout(a),n=void 0,r=c||"",I.readyState=t>0?4:0,h=t>=200&&t<300||304===t,o&&(_=function(t,e,n){for(var i,s,r,o,a=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){c.unshift(s);break}if(c[0]in n)r=c[0];else{for(s in n){if(!c[0]||t.converters[s+" "+c[0]]){r=s;break}o||(o=s)}r=r||o}if(r)return r!==c[0]&&c.unshift(r),n[r]}(f,I,o)),!h&&T.inArray("script",f.dataTypes)>-1&&T.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),_=function(t,e,n,i){var s,r,o,a,c,l={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)l[o.toLowerCase()]=t.converters[o];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!c&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=r,r=u.shift())if("*"===r)r=c;else if("*"!==c&&c!==r){if(!(o=l[c+" "+r]||l["* "+r]))for(s in l)if((a=s.split(" "))[1]===r&&(o=l[c+" "+a[0]]||l["* "+a[0]])){!0===o?o=l[s]:!0!==l[s]&&(r=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+c+" to "+r}}}return{state:"success",data:e}}(f,_,I,h),h?(f.ifModified&&((w=I.getResponseHeader("Last-Modified"))&&(T.lastModified[s]=w),(w=I.getResponseHeader("etag"))&&(T.etag[s]=w)),204===t||"HEAD"===f.type?x="nocontent":304===t?x="notmodified":(x=_.state,d=_.data,h=!(b=_.error))):(b=x,!t&&x||(x="error",t<0&&(t=0))),I.status=t,I.statusText=(e||x)+"",h?m.resolveWith(p,[d,x,I]):m.rejectWith(p,[I,x,b]),I.statusCode(v),v=void 0,u&&g.trigger(h?"ajaxSuccess":"ajaxError",[I,f,h?d:b]),y.fireWith(p,[I,x]),u&&(g.trigger("ajaxComplete",[I,f]),--T.active||T.event.trigger("ajaxStop")))}return I},getJSON:function(t,e,n){return T.get(t,e,n,"json")},getScript:function(t,e){return T.get(t,void 0,e,"script")}}),T.each(["get","post"],(function(t,e){T[e]=function(t,n,i,s){return y(n)&&(s=s||i,i=n,n=void 0),T.ajax(T.extend({url:t,type:e,dataType:s,data:n,success:i},T.isPlainObject(t)&&t))}})),T.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),T._evalUrl=function(t,e,n){return T.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){T.globalEval(t,e,n)}})},T.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=T(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return y(t)?this.each((function(e){T(this).wrapInner(t.call(this,e))})):this.each((function(){var e=T(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=y(t);return this.each((function(n){T(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){T(this).replaceWith(this.childNodes)})),this}}),T.expr.pseudos.hidden=function(t){return!T.expr.pseudos.visible(t)},T.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var He={0:200,1223:204},$e=T.ajaxSettings.xhr();m.cors=!!$e&&"withCredentials"in $e,m.ajax=$e=!!$e,T.ajaxTransport((function(t){var e,n;if(m.cors||$e&&!t.crossDomain)return{send:function(s,r){var o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];for(o in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest"),s)a.setRequestHeader(o,s[o]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(He[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){e&&n()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),T.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return T.globalEval(t),t}}}),T.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),T.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,s){e=T("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&s("error"===t.type?404:200,t.type)}),b.head.appendChild(e[0])},abort:function(){n&&n()}}}));var We,Ke=[],Ge=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ke.pop()||T.expando+"_"+Te.guid++;return this[t]=!0,t}}),T.ajaxPrefilter("json jsonp",(function(t,e,n){var s,r,o,a=!1!==t.jsonp&&(Ge.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ge.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return s=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ge,"$1"+s):!1!==t.jsonp&&(t.url+=(Ee.test(t.url)?"&":"?")+t.jsonp+"="+s),t.converters["script json"]=function(){return o||T.error(s+" was not called"),o[0]},t.dataTypes[0]="json",r=i[s],i[s]=function(){o=arguments},n.always((function(){void 0===r?T(i).removeProp(s):i[s]=r,t[s]&&(t.jsonpCallback=e.jsonpCallback,Ke.push(s)),o&&y(r)&&r(o[0]),o=r=void 0})),"script"})),m.createHTMLDocument=((We=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===We.childNodes.length),T.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(m.createHTMLDocument?((i=(e=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,e.head.appendChild(i)):e=b),r=!n&&[],(s=N.exec(t))?[e.createElement(s[1])]:(s=It([t],e,r),r&&r.length&&T(r).remove(),T.merge([],s.childNodes)));var i,s,r},T.fn.load=function(t,e,n){var i,s,r,o=this,a=t.indexOf(" ");return a>-1&&(i=ye(t.slice(a)),t=t.slice(0,a)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(s="POST"),o.length>0&&T.ajax({url:t,type:s||"GET",dataType:"html",data:e}).done((function(t){r=arguments,o.html(i?T("<div>").append(T.parseHTML(t)).find(i):t)})).always(n&&function(t,e){o.each((function(){n.apply(this,r||[t.responseText,e,t])}))}),this},T.expr.pseudos.animated=function(t){return T.grep(T.timers,(function(e){return t===e.elem})).length},T.offset={setOffset:function(t,e,n){var i,s,r,o,a,c,l=T.css(t,"position"),u=T(t),h={};"static"===l&&(t.style.position="relative"),a=u.offset(),r=T.css(t,"top"),c=T.css(t,"left"),("absolute"===l||"fixed"===l)&&(r+c).indexOf("auto")>-1?(o=(i=u.position()).top,s=i.left):(o=parseFloat(r)||0,s=parseFloat(c)||0),y(e)&&(e=e.call(t,n,T.extend({},a))),null!=e.top&&(h.top=e.top-a.top+o),null!=e.left&&(h.left=e.left-a.left+s),"using"in e?e.using.call(t,h):u.css(h)}},T.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){T.offset.setOffset(this,t,e)}));var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],s={top:0,left:0};if("fixed"===T.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===T.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((s=T(t).offset()).top+=T.css(t,"borderTopWidth",!0),s.left+=T.css(t,"borderLeftWidth",!0))}return{top:e.top-s.top-T.css(i,"marginTop",!0),left:e.left-s.left-T.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===T.css(t,"position");)t=t.offsetParent;return t||ot}))}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;T.fn[t]=function(i){return $(this,(function(t,i,s){var r;if(v(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===s)return r?r[e]:t[i];r?r.scrollTo(n?r.pageXOffset:s,n?s:r.pageYOffset):t[i]=s}),t,i,arguments.length)}})),T.each(["top","left"],(function(t,e){T.cssHooks[e]=$t(m.pixelPosition,(function(t,n){if(n)return n=Ht(t,e),Ut.test(n)?T(t).position()[e]+"px":n}))})),T.each({Height:"height",Width:"width"},(function(t,e){T.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,i){T.fn[i]=function(s,r){var o=arguments.length&&(n||"boolean"!=typeof s),a=n||(!0===s||!0===r?"margin":"border");return $(this,(function(e,n,s){var r;return v(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===s?T.css(e,n,a):T.style(e,n,s,a)}),e,o?s:void 0,o)}}))})),T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){T.fn[e]=function(t){return this.on(e,t)}})),T.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){T.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var Ye=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;T.proxy=function(t,e){var n,i,s;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return i=a.call(arguments,2),s=function(){return t.apply(e||this,i.concat(a.call(arguments)))},s.guid=t.guid=t.guid||T.guid++,s},T.holdReady=function(t){t?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=D,T.isFunction=y,T.isWindow=v,T.camelCase=Y,T.type=x,T.now=Date.now,T.isNumeric=function(t){var e=T.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},T.trim=function(t){return null==t?"":(t+"").replace(Ye,"")},void 0===(n=function(){return T}.apply(e,[]))||(t.exports=n);var Xe=i.jQuery,Qe=i.$;return T.noConflict=function(t){return i.$===T&&(i.$=Qe),t&&i.jQuery===T&&(i.jQuery=Xe),T},void 0===s&&(i.jQuery=i.$=T),T}))},336:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.log=e.formatDate=e.month=e.scrollBtm=void 0;const s=i(n(755)),r=n(762);Object.defineProperty(e,"formatDate",{enumerable:!0,get:function(){return r.formatDate}}),Object.defineProperty(e,"month",{enumerable:!0,get:function(){return r.month}}),Object.defineProperty(e,"scrollBtm",{enumerable:!0,get:function(){return r.scrollBtm}}),e.log=function(t){const e=new Date;(0,s.default)("div.log").prepend(`<p>[${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}.${String(e.getMilliseconds()).padStart(3,"0")}]<br>${t}</p>`)}},894:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(591),r=i(n(755)),o=n(99),a=n(336),c={};window.addEventListener("DOMContentLoaded",(()=>{(0,a.log)("DOMContent Loaded"),(0,o.onClassInfoLoaded)((async()=>{var t;(0,a.log)("ClassInfoLoaded"),(await(0,s.getDocs)((0,s.collection)(o.db,"chat"))).forEach((t=>{const e=t.data();(0,r.default)("main div.list").append(`<div class="cls-cont" data-cls=${t.id}><p class="cls">${e.name}</p><p class="msg">0</p></div>`);const n=new WebSocket(`wss://kss-pc-club-websocket.herokuapp.com/kss-admin-chat/${t.id}`);setInterval((()=>{n.send("[Keeping Connection... Ignore this message...]")}),3e4),n.addEventListener("open",(()=>{(0,a.log)(`WebSocket for ${e.name} Open`)})),n.addEventListener("message",(n=>{(0,a.log)(`Message from ${e.name} Received`);const i=(0,r.default)(`main div.list .cls-cont[data-cls="${t.id}"]`),s=i.find("p.msg");if(s.text(Number(s.text())+1),i.hasClass("showing")){s.text("");const t=new Date,e=(0,a.formatDate)(t);(0,r.default)("main div.chat div.history").append(`<div class="msg-cont"><div class="rec"><p class="msg">${String(n.data)}</p><p class="time">${e}</p></div></div>`),(0,a.scrollBtm)()}})),n.addEventListener("close",(()=>{(0,a.log)(`WebSocket for ${e.name} Close`)})),n.addEventListener("error",(()=>{(0,a.log)(`WebSocket for ${e.name} Error`)})),c[t.id]=n})),(0,r.default)(".cls-cont").on("click",(async function(){const t=String((0,r.default)(this).attr("data-cls"));(0,r.default)("main div.list .cls-cont.showing").find("p.msg").text("0"),(0,r.default)("main div.list .cls-cont.showing").removeClass("showing"),(0,r.default)(this).addClass("showing"),(0,r.default)("main .chat .history .msg-cont").remove(),(0,r.default)(this).find("p.msg").text("");const e=(await(0,s.getDoc)((0,s.doc)(o.db,"chat",t))).data();for(let t=0;t<e.history.length;t++){const n=e.history[t],i=n.time.toDate(),s=(0,a.formatDate)(i);(0,r.default)("main div.chat div.history").append(`<div class="msg-cont"><div class="${n.fromAdmin?"send":"rec"}"><p class="msg">${String(n.message)}</p><p class="time">${s}</p></div></div>`)}(0,a.scrollBtm)()}));const e=null===(t=document.querySelector(".type"))||void 0===t?void 0:t.querySelector("input");let n=!1;null==e||e.addEventListener("compositionstart",(()=>n=!0)),null==e||e.addEventListener("compositionend",(()=>n=!1)),null==e||e.addEventListener("keyup",(t=>{"Enter"!==t.key||n||(0,r.default)(".type button").trigger("click")})),(0,r.default)(".type button").on("click",(async function(){const t=(0,r.default)(".cls-cont.showing").attr("data-cls"),e=String((0,r.default)(".type input").val());if(!e||!t)return;const n=new Date,i=(0,a.formatDate)(n);await(0,s.updateDoc)((0,s.doc)(o.db,"chat",t),{lastUpdate:s.Timestamp.fromDate(n),history:(0,s.arrayUnion)({fromAdmin:!0,message:e,time:s.Timestamp.fromDate(n)})}),(0,r.default)("main div.chat div.history").append(`<div class="msg-cont"><div class="send"><p class="msg">${e}</p><p class="time">${i}</p></div></div>`),c[t].send(e),(0,a.scrollBtm)(),(0,r.default)(".type input").val("")}))}))})),window.addEventListener("load",(()=>{(0,a.log)("Content Loaded")}))},5:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(644),r=i(n(755)),o=n(251),a=n(99);window.addEventListener("DOMContentLoaded",(()=>{(0,a.onClassInfoLoaded)((()=>{(0,r.default)("button").on("click",(()=>{const t=(0,r.default)("input[type=text]"),e=(0,r.default)("input[type=number]"),n=(0,r.default)("button");if(n.attr("disabled","disabled"),t.attr("readonly","readonly"),e.attr("readonly","readonly"),!o.classInfo.admin)return alert("権限がありません"),void(location.pathname="/");if(13!==String(t.val()).length)alert("バーコードの形式が正しくありません"),t.removeAttr("readonly"),e.removeAttr("readonly"),n.removeAttr("disabled");else{const i=Number(e.val());(0,s.httpsCallable)(a.cloudFunctions,"chargePay")({barcode:String(t.val()),chargeAmount:i,time:new Date}).then((i=>{const s=i;if(s.data.error){switch(s.data.message){case"invalid request":alert("リクエストが無効です");break;case"user not exist":case"multiple users":alert("バーコードを再読み込みさせてください")}return t.removeAttr("readonly").val(""),e.removeAttr("readonly"),void n.removeAttr("disabled")}alert("チャージしました"),t.removeAttr("readonly").val(""),e.removeAttr("readonly").val(""),n.removeAttr("disabled")})).catch(console.error)}}))}))}))},832:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(755)),r=n(251),o=n(82),a=n(565);window.addEventListener("DOMContentLoaded",(()=>{(0,s.default)(".container#cash div.rec input").on("input",(function(){const t=a.data.sum-Number((0,s.default)(this).val());(0,s.default)(this).parent("div.rec").next().find("input").val(Math.abs(t)),t<=0?(0,s.default)(".container#cash .child-container button").removeAttr("disabled"):(0,s.default)(".container#cash .child-container button").attr("disabled","disabled"),(0,s.default)(this).parent("div.rec").next().find("span").text(t<=0?"円のおつり":"円不足")})),(0,s.default)(".container#cash .child-container button").on("click",(async function(){(0,s.default)(this).attr("disabled","disabled"),await(0,o.RecordPayment)({isPay:!1,payAt:r.classInfo.name,payId:null,sum:a.data.sum,time:new Date,list:a.data.list}),(0,o.anim)(".container#cash",".container#ok")}))}))},82:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.RecordPayment=e.anim=e.sleep=void 0;const s=n(591),r=i(n(755)),o=n(251),a=n(99),c=t=>new Promise((e=>setTimeout(e,t)));e.sleep=c,e.anim=async(t,e,n=!0)=>{const i=n?-window.outerWidth:window.outerWidth;(0,r.default)(t).animate({left:i},500),(0,r.default)(t).find("footer").fadeOut(500),await c(500),(0,r.default)(t).removeClass("showing"),await c(200),(0,r.default)(e).addClass("showing").css({left:-i}).animate({left:0},500),(0,r.default)(e).find("footer").fadeIn(500)},e.RecordPayment=async t=>{await(0,s.addDoc)((0,s.collection)(a.db,"payment_log"),t);const e=(await(0,s.getDoc)((0,s.doc)(a.db,"class_proceeds",o.classInfo.uid))).data().menus;e.forEach((e=>{const n=t.list.filter((t=>t.name===e.name))[0];n.amount>=1&&(e.customers++,e.amount+=n.amount)})),await(0,s.updateDoc)((0,s.doc)(a.db,"class_proceeds",o.classInfo.uid),{menus:e,total:(0,s.increment)(t.sum),customers:(0,s.increment)(1)})}},665:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n(832),n(851),n(838);const s=i(n(755)),r=n(82),o=n(565);window.addEventListener("load",(()=>{(0,s.default)(".container button#next").on("click",(function(){if(0===o.data.sum)return void alert("メニューを選択してください");const t=(0,s.default)(this).attr("data-next");t&&(0,r.anim)((0,s.default)(this).parents("div.container"),`.container#${t}`)})),(0,s.default)(".container button#prev").on("click",(function(){const t=(0,s.default)(this).attr("data-next");t&&(0,r.anim)((0,s.default)(this).parents("div.container"),`.container#${t}`,!1)}))})),window.onpopstate=t=>(t.preventDefault(),!1)},565:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.data=void 0;const s=i(n(755)),r=n(251),o=n(99),a={sum:0,list:[]};e.data=a,window.addEventListener("DOMContentLoaded",(()=>{(0,o.onClassInfoLoaded)((()=>{var t;for(let e=0;e<r.classInfo.menus.length;e++){const n=r.classInfo.menus[e],i=document.createElement("div");i.classList.add("item"),i.setAttribute("data-itemNum",String(e)),i.innerHTML=`<img src="https://monitor.festival.kss-pc.club/icons/${n.icon}.png"><p class="name">${n.name}</p><p class="price">${n.price}</p><input type="number" name="amount" value="0" min="0"><p class="total">0</p>`,null===(t=document.querySelector(".container#menu .child-container"))||void 0===t||t.appendChild(i),a.list.push({name:n.name,price:n.price,amount:0})}(0,s.default)(".container#menu .child-container .item").each((function(){(0,s.default)(this).find("input").on("change",(function(){(0,s.default)(this).next("p.total").text(Number((0,s.default)(this).prev("p.price").text())*Number((0,s.default)(this).val()));const t=Number((0,s.default)(this).parent("div.item").attr("data-itemNum"));a.list[t].amount=Number((0,s.default)(this).val());let e=0;(0,s.default)(".container#menu .item .total").each((function(){e+=Number((0,s.default)(this).text())})),(0,s.default)(".container#menu footer p.sum").text(e),a.sum=e}))}))}))}))},851:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(n(755)),r=n(82),o=n(565);window.addEventListener("DOMContentLoaded",(()=>{const t=(0,s.default)(".container#method");t.find("button#cash").on("click",(()=>{(0,r.anim)(t,".container#cash"),(0,s.default)(".container#cash p#sum").text(o.data.sum)})),t.find("button#pay").on("click",(()=>{(0,r.anim)(t,".container#pay"),(0,s.default)(".container#pay p#sum").text(o.data.sum),alert("読み込む前に、KSSPayユーザーに更新ボタンを押させてください。\n画面上部[：]->[更新]")}))}))},838:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(644),r=i(n(755)),o=n(251),a=n(99),c=n(82),l=n(565);window.addEventListener("DOMContentLoaded",(()=>{(0,r.default)(".container#pay .child-container button").on("click",(function(){(0,r.default)(".container#pay .child-container button").attr("disabled","disabled");const t=(0,r.default)(".container#pay input");if(13!==String(t.val()).length)return alert("バーコードの形式が正しくないようです。再読み込みしてください。"),void(0,r.default)(".container#pay .child-container button").removeAttr("disabled");(0,s.httpsCallable)(a.cloudFunctions,"readPay")({barcode:t.val(),cost:l.data.sum}).then((async t=>{const e=t;if(e.data.error){switch((0,r.default)(".container#pay .child-container button").removeAttr("disabled"),e.data.message){case"not logged in":alert("ログインしていないようです。再度ログインしてください。");break;case"user not exist":case"multiple users":alert("「更新」ボタンを押すようにお願いしてください。");break;case"cannot buy":alert("現金が足りず、支払うことができません。現金で支払ってください。"),(0,c.anim)(".container#pay",".container#cash");break;case"invalid request":alert("メニューの設定に間違いがあるようです。メニュー選択に戻って設定しなおしてください。"),(0,c.anim)(".container#pay",".container#menu",!1)}(0,r.default)(".container#pay .child-container button").removeAttr("disabled")}else{const t=e.data.uid,n=new Date;await(0,c.RecordPayment)({isPay:!0,payAt:o.classInfo.name,payId:null!=t?t:"unknown",sum:l.data.sum,time:n,list:l.data.list}),(0,s.httpsCallable)(a.cloudFunctions,"buyPay")({name:o.classInfo.name,items:l.data.list,uid:t,cost:l.data.sum,time:n}).then((t=>{t.data.error?((0,r.default)(".container#pay .child-container button").removeAttr("disabled"),alert("何か問題が発生したようです。もう一度お試しください。")):(0,c.anim)(".container#pay",".container#ok")})).catch(console.error)}})).catch(console.error)}))}))},762:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatDate=e.month=e.scrollBtm=void 0,e.scrollBtm=function(){const t=document.querySelector("main .chat .history");t&&t.scrollTo(0,t.scrollHeight-t.clientHeight)};const n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.month=n,e.formatDate=t=>`${n[t.getMonth()]} ${t.getDate()} | ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`},483:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(591),r=i(n(755)),o=n(251),a=n(99),c=n(762);window.addEventListener("DOMContentLoaded",(()=>{(0,a.onClassInfoLoaded)((async()=>{var t;const e=(0,s.doc)(a.db,"chat",o.classInfo.uid),n=(await(0,s.getDoc)(e)).data().history;n.sort(((t,e)=>t.time.seconds-e.time.seconds)),(0,r.default)("main div.chat div.history").text("");for(let t=0;t<n.length;t++){const e=n[t],i=e.time.toDate(),s=(0,c.formatDate)(i);(0,r.default)("main div.chat div.history").append(`<div class="msg-cont"><div class="${e.fromAdmin?"rec":"send"}"><p class="msg">${e.message}</p><p class="time">${s}</p></div></div>`)}(0,c.scrollBtm)();const i=new WebSocket(`wss://kss-pc-club-websocket.herokuapp.com/kss-admin-chat/${o.classInfo.uid}`);i.addEventListener("message",(t=>{const e=new Date,n=(0,c.formatDate)(e);(0,r.default)("main div.chat div.history").append(`<div class="msg-cont"><div class="rec"><p class="msg">${String(t.data)}</p><p class="time">${n}</p></div></div>`),(0,c.scrollBtm)()})),setInterval((()=>{i.send("[Keeping Connection... Ignore this message...]")}),3e4),i.addEventListener("close",(()=>{alert("接続が切断されました。「OK」を押すと再読み込みします。"),location.reload()}));const l=null===(t=document.querySelector(".type"))||void 0===t?void 0:t.querySelector("input");let u=!1;null==l||l.addEventListener("compositionstart",(()=>u=!0)),null==l||l.addEventListener("compositionend",(()=>u=!1)),null==l||l.addEventListener("keyup",(t=>{"Enter"!==t.key||u||(0,r.default)(".type button").trigger("click")})),(0,r.default)(".type button").on("click",(async function(){if(!(0,r.default)(".type input").val())return;const t=String((0,r.default)(".type input").val()),n=new Date,o=(0,c.formatDate)(n),a={fromAdmin:!1,message:t,time:s.Timestamp.fromDate(n)};await(0,s.updateDoc)(e,{lastUpdate:s.Timestamp.fromDate(n),history:(0,s.arrayUnion)(a)}),(0,r.default)("main div.chat div.history").append(`<div class="msg-cont"><div class="send"><p class="msg">${t}</p><p class="time">${o}</p></div></div>`),i.send(t),(0,c.scrollBtm)(),(0,r.default)(".type input").val("")}))}))}))},251:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.classInfo=void 0,e.classInfo={admin:!1,name:"",isFood:!1,menus:[],shop_name:"",uid:"",time:""}},570:()=>{"use strict";window.addEventListener("DOMContentLoaded",(()=>{fetch("/common/head.html").then((async t=>{document.head.innerHTML+=await t.text()})).catch(console.error),fetch("header.html").then((async t=>{const e=document.querySelector("header");t.ok&&e?e.innerHTML=await t.text():fetch("/header.html").then((async t=>{e&&(e.innerHTML=await t.text())})).catch(console.error)})).catch(console.error)}))},99:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cloudFunctions=e.db=e.onClassInfoChanged=e.onClassInfoLoaded=e.auth=e.app=void 0;const i=n(503),s=n(757),r=n(591),o=n(644),a=n(251),c=n(645),l=(0,i.initializeApp)(c.firebaseConfig);e.app=l;const u=(0,s.getAuth)(l);e.auth=u;const h=(0,r.getFirestore)(l);e.db=h;const d=(0,o.getFunctions)(l);e.cloudFunctions=d,(0,o.connectFunctionsEmulator)(d,"localhost",5001);const f=[],p=[],g=t=>{f.push(t)};e.onClassInfoLoaded=g,e.onClassInfoChanged=t=>{p.push(t)},(0,s.onAuthStateChanged)(u,(t=>{if(t){a.classInfo.uid=t.uid;let e=[],n=[],i=!0,s=!1;const o=()=>e.map((t=>{const e=n.filter((e=>e.name===t.name))[0];return{icon:t.icon,name:t.name,status:t.status,price:e.price,customers:e.customers,amount:e.amount}})),c=()=>{i&&(s?(a.classInfo.menus=o(),f.forEach((t=>t())),i=!1):s=!0),i||(a.classInfo.menus=o(),p.forEach((t=>t())))};(0,r.onSnapshot)((0,r.doc)(h,"class_info",t.uid),(t=>{if(!t.exists())return void c();const n=t.data();a.classInfo.name=n.class,a.classInfo.isFood=n.isFood,a.classInfo.shop_name=n.name,a.classInfo.time=n.time,e=n.menus,c()})),(0,r.onSnapshot)((0,r.doc)(h,"class_proceeds",t.uid),(t=>{const e=t.data();a.classInfo.admin=e.admin,n=e.menus,c()})),g((()=>{!location.pathname.startsWith("/admin/")||a.classInfo.admin?"/"===location.pathname&&a.classInfo.admin?location.pathname="/admin/":"/login"!==location.pathname||(location.pathname="/"):location.pathname="/"}))}else"/login"!==location.pathname&&(location.pathname="/login")})),u.languageCode="ja"},645:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.firebaseConfig=void 0,e.firebaseConfig={apiKey:"AIzaSyBd3YC8b6r05fpo1u9WIXbRnQsLbI5wGIo",authDomain:"kss-festival-admin.firebaseapp.com",projectId:"kss-festival-admin",storageBucket:"kss-festival-admin.appspot.com",messagingSenderId:"739103425598",appId:"1:739103425598:web:f16991d454cfe66edbfd6f"}},935:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sleep=void 0,e.sleep=t=>new Promise((e=>setTimeout(e,t)))},778:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(169),r=n(757),o=i(n(755)),a=n(99);window.addEventListener("DOMContentLoaded",(()=>{if("/login"===location.pathname){const t=[].slice.call(document.querySelectorAll(".toast")).map((t=>new s.Toast(t,{animation:!0,autohide:!0,delay:3e3})))[0];(0,o.default)("form").on("submit",(function(e){e.preventDefault(),(0,o.default)("form button").attr("disabled","disabled");const n=(0,o.default)("#inputEmail").val(),i=(0,o.default)("#inputPassword").val();(0,r.signInWithEmailAndPassword)(a.auth,n,i).then((()=>{})).catch((e=>{console.error(e),(0,o.default)(".toast").removeClass("visually-hidden"),t.show(),(0,o.default)("form button").removeAttr("disabled")}))}))}}))},519:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,s)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return s(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n(169),n(570),n(778),n(331);const a=n(757),c=o(n(755)),l=n(251),u=n(99),h=n(935);"/cashier/"===location.pathname?Promise.resolve().then((()=>r(n(665)))):"/proceeds/"===location.pathname?Promise.resolve().then((()=>r(n(753)))):"/chat/"===location.pathname?Promise.resolve().then((()=>r(n(483)))):"/monitor/"===location.pathname?Promise.resolve().then((()=>r(n(461)))):"/admin/chat/"===location.pathname?Promise.resolve().then((()=>r(n(894)))):"/admin/pay_charge/"===location.pathname&&Promise.resolve().then((()=>r(n(5)))),window.addEventListener("DOMContentLoaded",(()=>{var t,e;(0,u.onClassInfoLoaded)((()=>{(0,c.default)("header span#cls").text(l.classInfo.name)})),"/"===location.pathname&&(null===(t=document.querySelector("a#logout"))||void 0===t||t.addEventListener("click",(()=>{confirm("ログアウトしますか？")&&(0,a.signOut)(u.auth).catch(console.error)}))),"/admin/"===location.pathname&&(null===(e=document.querySelector("a#logout"))||void 0===e||e.addEventListener("click",(()=>{confirm("ログアウトしますか？")&&(0,a.signOut)(u.auth).catch(console.error)})))})),window.addEventListener("load",(async()=>{await(0,h.sleep)(3e3),(0,c.default)("header,main,footer").fadeIn(700),(0,c.default)("div.loader-container").fadeOut(700),await(0,h.sleep)(700),(0,c.default)("div.loader-container").remove()}))},636:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.availableIconsList=void 0,e.availableIconsList={curry:"カレー",ebi:"エビフライ",potato:"フライドポテト",tonkotsu:"豚骨ラーメン",unagi:"うな重",crape:"クレープ",drink:"ドリンク",kakigoori:"かき氷",wataame:"わたあめ",yakisoba:"焼きそば",frankfurt:"フランクフルト"}},107:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.previewItemElem=e.itemElem=void 0;const i=n(636);let s="";for(const t in i.availableIconsList)i.availableIconsList.hasOwnProperty(t)&&(s+=`<li><a href="#" class="dropdown-item" data-icon="${t}"><img src="https://monitor.festival.kss-pc.club/icons/${t}.png"> ${i.availableIconsList[t]}</a></li>`);const r=["green","yellow","red"],o=["op","sh","so"],a=["no","pa","en"];e.itemElem=(t,e)=>`\n<div class="input-group mt-3" data-idx="${e}">\n  <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="iconSelect">アイコン <img src="https://monitor.festival.kss-pc.club/icons/${t.icon}.png"></button>\n  <ul class="dropdown-menu dropdown-icon">${s}</ul>\n  <span class="input-group-text">商品名: </span>\n  <input type="text" class="form-control" value="${t.name}" placeholder="商品名">\n</div>\n<div class="input-group mb-3" data-idx="${e}">\n  <span class="input-group-text">値段: ￥</span>\n  <input type="number" class="form-control" value="${t.price}" placeholder="値段">\n  <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="statusSelect">ステータス <span class="circle ${r[t.status]}-circle"></span></button>\n  <ul class="dropdown-menu dropdown-status">\n    <li><a href="#" class="dropdown-item" data-statusId="0"><span class="circle green-circle"></span> 販売中・営業中</a></li>\n    <li><a href="#" class="dropdown-item" data-statusId="1"><span class="circle yellow-circle"></span> 品薄・休憩中</a></li>\n    <li><a href="#" class="dropdown-item" data-statusId="2"><span class="circle red-circle"></span> 品切れ・終了</a></li>\n  </ul>\n  <button class="btn btn-outline-danger" type="button" id="removeItem"><i class="bi bi-x-circle"></i> 削除</button>\n</div>\n`,e.previewItemElem=(t,e)=>`\n<div><img src="https://monitor.festival.kss-pc.club/icons/${t.icon}.png" class="icon" data-status="${(e?o:a)[t.status]}"><p></p></div>\n`},461:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(591),r=i(n(755)),o=n(251),a=n(99),c=n(107);window.addEventListener("DOMContentLoaded",(()=>{let t=[];const e={start:new Date,end:new Date};(0,s.onSnapshot)((0,s.doc)(a.db,"festival_duration","time"),(t=>{const n=t.data();e.start=n.start.toDate(),e.end=n.end.toDate()}));const n=()=>{const t=new Date;return e.start>t},i=()=>{(0,r.default)(".previewsection p.cls").text(o.classInfo.name),(0,r.default)(".previewsection p.shop").text(o.classInfo.shop_name),(0,r.default)(".previewsection p.time").text(o.classInfo.time),(0,r.default)(".previewsection .iconContainer .icons").attr("data-num",t.length),(0,r.default)(".previewsection .iconContainer .icons").children().remove();for(let e=0;e<t.length;e++)(0,r.default)(".previewsection .iconContainer .icons").append((0,c.previewItemElem)(t[e],o.classInfo.isFood))},l=()=>{(0,r.default)(".itemsContainer .input-group .dropdown-icon li a").off("click").on("click",(function(){if(!n())return void alert("アイコンの変更は文化祭開始前のみ可能です。");const e=String((0,r.default)(this).attr("data-icon")),s=Number((0,r.default)(this).parents(".input-group").attr("data-idx"));(0,r.default)(this).parents(".input-group").children("button#iconSelect").html(`アイコン <img src="https://monitor.festival.kss-pc.club/icons/${e}.png">`),t[s].icon=e,i()})),(0,r.default)(".itemsContainer .input-group input[type=text]").off("change").on("change",(function(){if(!n())return void alert("商品名の変更は文化祭開始前のみ可能です。");const e=Number((0,r.default)(this).parents(".input-group").attr("data-idx"));t[e].name=String((0,r.default)(this).val())})),(0,r.default)(".itemsContainer .input-group input[type=number]").off("change").on("change",(function(){if(!n())return void alert("値段の変更は文化祭開始前のみ可能です。");const e=Number((0,r.default)(this).parents(".input-group").attr("data-idx"));t[e].price=Number((0,r.default)(this).val())})),(0,r.default)(".itemsContainer .input-group .dropdown-status li a").off("click").on("click",(function(){const e=Number((0,r.default)(this).attr("data-statusId")),n=Number((0,r.default)(this).parents(".input-group").attr("data-idx"));(0,r.default)(this).parents(".input-group").children("button#statusSelect").html(`ステータス <span class="circle ${["green","yellow","red"][e]}-circle"></span>`),t[n].status=e,i()})),(0,r.default)(".itemsContainer .input-group button#removeItem").off("click").on("click",(function(){if(n()){if(confirm("削除しますか？")){const e=Number((0,r.default)(this).parents(".input-group").attr("data-idx"));(0,r.default)(this).parents(".input-group").remove(),t.splice(e,1),0===t.length?t.push({name:"不明なアイテム",icon:"unknown",status:0,amount:0,customers:0,price:0}):(0,r.default)("button#add").removeAttr("disabled"),(0,r.default)(".itemsContainer").children().remove();for(let e=0;e<t.length;e++)(0,r.default)(".itemsContainer").append((0,c.itemElem)(t[e],e));l(),i()}}else alert("削除は文化祭開始前のみ可能です。")}))};(0,a.onClassInfoLoaded)((()=>{const e=(0,s.doc)(a.db,"class_info",o.classInfo.uid),u=(0,s.doc)(a.db,"class_proceeds",o.classInfo.uid);t=o.classInfo.menus,(0,r.default)(".itemsContainer").children().remove();for(let e=0;e<t.length;e++)(0,r.default)(".itemsContainer").append((0,c.itemElem)(t[e],e));(0,r.default)("input[name=shop]").on("input",(function(){o.classInfo.shop_name=String((0,r.default)(this).val()),i()})),(0,r.default)("select[name=time]").on("change",(function(){o.classInfo.time=String((0,r.default)(this).val()),i()})),(0,r.default)("input[name=isFood]").on("change",(function(){o.classInfo.isFood=Boolean((0,r.default)(this).prop("checked")),i()})),(0,r.default)(".left-container button#add").on("click",(function(){n()?t.length>=5?alert("メニューは5つまで追加できます"):(t.push({name:"不明なアイテム",icon:"unknown",status:0,amount:0,customers:0,price:0}),(0,r.default)(".itemsContainer").append((0,c.itemElem)(t[t.length-1],t.length-1)),t.length>=5&&(0,r.default)("button#add").attr("disabled","disabled"),l(),i()):alert("追加は文化祭開始前のみ可能です。")})),(0,r.default)("button[type=submit]").on("click",(async function(){(0,r.default)(this).attr("disabled","disabled");try{await(0,s.updateDoc)(e,{isFood:o.classInfo.isFood,menus:t.map((t=>({icon:t.icon,name:t.name,status:t.status}))),name:o.classInfo.shop_name,time:o.classInfo.time}),n()&&await(0,s.updateDoc)(u,{menus:t.map((t=>({amount:0,customers:0,icon:t.icon,name:t.name,price:t.price})))}),o.classInfo.menus=t,alert("更新しました")}catch(t){console.error(t),alert("更新に失敗しました")}(0,r.default)(this).removeAttr("disabled")})),(0,r.default)("button[type=reset]").on("click",(()=>location.reload())),i()})),(0,a.onClassInfoChanged)((()=>{(0,r.default)("h1").text(o.classInfo.name),(0,r.default)("input[name=shop]").val(o.classInfo.shop_name),(0,r.default)("select[name=type]").val(o.classInfo.time),o.classInfo.isFood&&(0,r.default)("input[name=isFood]").val("true").attr("checked","checked"),t.length>=5&&(0,r.default)("button#add").attr("disabled","disabled"),l(),i()})),setInterval((()=>{n()?((0,r.default)(".input-group input[type=text]").removeAttr("readonly"),(0,r.default)("input[type=number]").removeAttr("readonly"),(0,r.default)("button#add").removeAttr("disabled"),(0,r.default)("button#iconSelect").removeAttr("disabled"),(0,r.default)("button#removeItem").removeAttr("disabled"),(0,r.default)("ul.dropdown-icon li").removeClass("d-none")):((0,r.default)(".itemsContainer input[type=text]").attr("readonly","readonly"),(0,r.default)("input[type=number]").attr("readonly","readonly"),(0,r.default)("button#add").attr("disabled","disabled"),(0,r.default)("button#iconSelect").attr("disabled","disabled"),(0,r.default)("button#removeItem").attr("disabled","disabled"),(0,r.default)("ul.dropdown-icon li").addClass("d-none"))}),1e3)}))},885:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ChartFirstDraw=void 0;const s=n(181),r=i(n(755)),o=n(787);s.Chart.register(...s.registerables),e.ChartFirstDraw=()=>{var t;const e=null===(t=document.querySelector("canvas"))||void 0===t?void 0:t.getContext("2d");if(e){const t=new s.Chart(e,{type:"pie",data:{labels:o.menuData.name,datasets:[{data:o.menuData.proceeds,backgroundColor:o.colors,borderColor:"white",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{display:!1}}}});(0,r.default)("input[name=set]").on("change",(function(){switch((0,r.default)(this).val()){case"proceeds":t.data.datasets[0].data=o.menuData.proceeds;break;case"amount":t.data.datasets[0].data=o.menuData.amount;break;case"customers":t.data.datasets[0].data=o.menuData.customers}t.update()}))}}},787:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.colors=e.menuData=void 0;const s=n(591),r=i(n(755)),o=n(251),a=n(99),c=n(885),l={name:[],amount:[],proceeds:[],customers:[]};e.menuData=l;const u=["#7e40f2","#b4f240","#405af2","#f240b4","#f27e40"];e.colors=u,window.addEventListener("DOMContentLoaded",(()=>{let t=!0;(0,a.onClassInfoChanged)((async()=>{const e=(await(0,s.getDoc)((0,s.doc)(a.db,"class_proceeds",o.classInfo.uid))).data(),n={amount:0,proceeds:0,customers:0};l.name.splice(0),l.amount.splice(0),l.proceeds.splice(0),l.customers.splice(0),(0,r.default)("p#name").text(`${o.classInfo.name} ${o.classInfo.shop_name}`),(0,r.default)("p#total").text(Number(e.total).toLocaleString()),(0,r.default)("div.items").children().remove();for(let t=0;t<e.menus.length;t++){const e=o.classInfo.menus[t];(0,r.default)("div.items").append(`\n        <div class="item">\n          <div class="color" style="background-color: ${u[t]};"></div>\n          <img src="https://monitor.festival.kss-pc.club/icons/${e.icon}.png" class="icon">\n          <p class="name">${e.name}</p>\n          <p class="proc" data-proceeds="${e.amount*e.price}" data-amount="${e.amount}" data-customers="${e.customers}"></p>\n          <p class="percentage"></p>\n        </div>\n      `),l.name.push(e.name),l.amount.push(e.amount),l.proceeds.push(e.amount*e.price),l.customers.push(e.customers),n.amount+=e.amount,n.proceeds+=e.amount*e.price,n.customers+=e.customers}for(const t in n)n.hasOwnProperty(t)&&(0,r.default)("p#total").attr(`data-${t}`,n[t]);const i=()=>{const t=(0,r.default)("input[name=set]:checked").val(),e=Number((0,r.default)("p#total").attr(`data-${String(t)}`));(0,r.default)("div.item").each((function(){const n=Number((0,r.default)(this).find("p.proc").attr("data-proceeds")),i=Number((0,r.default)(this).find("p.proc").attr("data-amount")),s=Number((0,r.default)(this).find("p.proc").attr("data-customers"));let o=0,a="";switch(t){case"proceeds":o=n,a="￥"+o.toLocaleString();break;case"amount":o=i,a=o.toLocaleString()+"個";break;case"customers":o=s,a=o.toLocaleString()+"人"}const c=(o/e*100).toFixed(2);(0,r.default)(this).find("p.proc").text(a),(0,r.default)(this).find("p.percentage").text(c)}))};(0,r.default)("input[name=set]").on("change",i),i(),t&&(t=!1,(0,c.ChartFirstDraw)())}))}))},753:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(885),window.onpopstate=t=>(t.preventDefault(),!1),window.oncontextmenu=()=>!1},331:()=>{"use strict";window.addEventListener("DOMContentLoaded",(()=>{let t=location.pathname;t.endsWith("/")&&(t+="index"),t.endsWith(".html")&&(t=t.replace(".html",""));const e=document.createElement("link");e.href=`/css/pages${t}.css`,e.rel="stylesheet",document.head.appendChild(e)}))},389:(t,e,n)=>{"use strict";n.d(e,{ZR:()=>r.ZR,Jn:()=>V,l4:()=>S,H9:()=>D,Vr:()=>N,Af:()=>A,Z8:()=>P,lz:()=>C,qX:()=>M,Xd:()=>O,wN:()=>L,P2:()=>q,Mq:()=>U,C6:()=>B,ZF:()=>j,TP:()=>H,KN:()=>z,Ub:()=>$});var i=n(463),s=n(333),r=n(444);let o,a;const c=new WeakMap,l=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap;let f={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return l.get(t);if("objectStoreNames"===e)return t.objectStoreNames||u.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return g(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function p(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(m(this),t),g(c.get(this))}:function(...t){return g(e.apply(m(this),t))}:function(t,...n){const i=e.call(m(this),t,...n);return u.set(i,t.sort?t.sort():[t]),g(i)}:(t instanceof IDBTransaction&&function(t){if(l.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",r),t.removeEventListener("abort",r)},s=()=>{e(),i()},r=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",r),t.addEventListener("abort",r)}));l.set(t,e)}(t),n=t,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>n instanceof t))?new Proxy(t,f):t);var e,n}function g(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",r)},s=()=>{e(g(t.result)),i()},r=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",r)}));return e.then((e=>{e instanceof IDBCursor&&c.set(e,t)})).catch((()=>{})),d.set(e,t),e}(t);if(h.has(t))return h.get(t);const e=p(t);return e!==t&&(h.set(t,e),d.set(e,t)),e}const m=t=>d.get(t),y=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],b=new Map;function _(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(b.get(e))return b.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=v.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!y.includes(n))return;const r=async function(t,...e){const r=this.transaction(t,s?"readwrite":"readonly");let o=r.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),s&&r.done]))[0]};return b.set(e,r),r}var w;w=f,f={...w,get:(t,e,n)=>_(t,e)||w.get(t,e,n),has:(t,e)=>!!_(t,e)||w.has(t,e)};class x{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const I="@firebase/app",T="0.7.25",E=new s.Yd("@firebase/app"),S="[DEFAULT]",k={[I]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},A=new Map,C=new Map;function D(t,e){try{t.container.addComponent(e)}catch(n){E.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function N(t,e){t.container.addOrOverwriteComponent(e)}function O(t){const e=t.name;if(C.has(e))return E.debug(`There were multiple attempts to register component ${e}.`),!1;C.set(e,t);for(const e of A.values())D(e,t);return!0}function M(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function L(t,e,n=S){M(t,e).clearInstance(n)}function P(){C.clear()}const R=new r.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class F{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw R.create("app-deleted",{appName:this._name})}}const V="9.8.2";function j(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:S,automaticDataCollectionEnabled:!1},e),s=n.name;if("string"!=typeof s||!s)throw R.create("bad-app-name",{appName:String(s)});const o=A.get(s);if(o){if((0,r.vZ)(t,o.options)&&(0,r.vZ)(n,o.config))return o;throw R.create("duplicate-app",{appName:s})}const a=new i.H0(s);for(const t of C.values())a.addComponent(t);const c=new F(t,n,a);return A.set(s,c),c}function U(t=S){const e=A.get(t);if(!e)throw R.create("no-app",{appName:t});return e}function B(){return Array.from(A.values())}async function q(t){const e=t.name;A.has(e)&&(A.delete(e),await Promise.all(t.container.getProviders().map((t=>t.delete()))),t.isDeleted=!0)}function z(t,e,n){var s;let r=null!==(s=k[t])&&void 0!==s?s:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${r}" with version "${e}":`];return o&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void E.warn(t.join(" "))}O(new i.wA(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}function H(t,e){if(null!==t&&"function"!=typeof t)throw R.create("invalid-log-argument");(0,s.Am)(t,e)}function $(t){(0,s.Ub)(t)}const W="firebase-heartbeat-store";let K=null;function G(){return K||(K=function(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),a=g(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(g(o.result),t.oldVersion,t.newVersion,g(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((t=>{r&&t.addEventListener("close",(()=>r())),s&&t.addEventListener("versionchange",(()=>s()))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(W)}}).catch((t=>{throw R.create("storage-open",{originalErrorMessage:t.message})}))),K}async function Y(t,e){try{const n=(await G()).transaction(W,"readwrite"),i=n.objectStore(W);return await i.put(e,X(t)),n.done}catch(t){throw R.create("storage-set",{originalErrorMessage:t.message})}}function X(t){return`${t.name}!${t.options.appId}`}class Q{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Z(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=J();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=J(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=1024){const n=[];let i=t.slice();for(const s of t){const t=n.find((t=>t.agent===s.agent));if(t){if(t.dates.push(s.date),tt(n)>e){t.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),tt(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=(0,r.L)(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function J(){return(new Date).toISOString().substring(0,10)}class Z{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,r.hl)()&&(0,r.eu)().then((()=>!0)).catch((()=>!1))}async read(){return await this._canUseIndexedDBPromise&&await async function(t){try{return(await G()).transaction(W).objectStore(W).get(X(t))}catch(t){throw R.create("storage-get",{originalErrorMessage:t.message})}}(this.app)||{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Y(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Y(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function tt(t){return(0,r.L)(JSON.stringify({version:2,heartbeats:t})).length}O(new i.wA("platform-logger",(t=>new x(t)),"PRIVATE")),O(new i.wA("heartbeat",(t=>new Q(t)),"PRIVATE")),z(I,T,""),z(I,T,"esm2017"),z("fire-js","")},463:(t,e,n)=>{"use strict";n.d(e,{H0:()=>a,wA:()=>s});var i=n(444);class s{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const r="[DEFAULT]";class o{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new i.BH;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:r})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t="[DEFAULT]"){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t="[DEFAULT]"){return this.instances.has(t)}getOptions(t="[DEFAULT]"){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(i);return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(t),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&t(r,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===r?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t="[DEFAULT]"){return this.component?this.component.multipleInstances?t:r:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new o(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}},333:(t,e,n)=>{"use strict";n.d(e,{Am:()=>h,Ub:()=>u,Yd:()=>l,in:()=>s});const i=[];var s;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(s||(s={}));const r={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},o=s.INFO,a={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},c=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),s=a[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[s](`[${i}]  ${t.name}:`,...n)};class l{constructor(t){this.name=t,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in s))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?r[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...t),this._logHandler(this,s.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...t),this._logHandler(this,s.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,s.INFO,...t),this._logHandler(this,s.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,s.WARN,...t),this._logHandler(this,s.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,s.ERROR,...t),this._logHandler(this,s.ERROR,...t)}}function u(t){i.forEach((e=>{e.setLogLevel(t)}))}function h(t,e){for(const n of i){let i=null;e&&e.level&&(i=r[e.level]),n.userLogHandler=null===t?null:(e,n,...r)=>{const o=r.map((t=>{if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((t=>t)).join(" ");n>=(null!=i?i:e.logLevel)&&t({level:s[n].toLowerCase(),message:o,args:r,type:e.name})}}}}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(519)})();