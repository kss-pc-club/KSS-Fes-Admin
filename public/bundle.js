/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={258:(t,e,n)=>{"use strict";n.d(e,{ZR:()=>s.ZR,Jn:()=>w,l4:()=>l,H9:()=>f,Vr:()=>p,Af:()=>h,Z8:()=>v,lz:()=>d,qX:()=>m,Xd:()=>g,wN:()=>y,P2:()=>I,Mq:()=>T,C6:()=>E,ZF:()=>x,TP:()=>k,KN:()=>S,Ub:()=>A});var i=n(909),r=n(594),s=n(589);class o{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const a="@firebase/app",c=new r.Yd("@firebase/app"),l="[DEFAULT]",u={[a]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},h=new Map,d=new Map;function f(t,e){try{t.container.addComponent(e)}catch(n){c.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function p(t,e){t.container.addOrOverwriteComponent(e)}function g(t){const e=t.name;if(d.has(e))return c.debug(`There were multiple attempts to register component ${e}.`),!1;d.set(e,t);for(const e of h.values())f(e,t);return!0}function m(t,e){return t.container.getProvider(e)}function y(t,e,n=l){m(t,e).clearInstance(n)}function v(){d.clear()}const b=new s.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class _{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw b.create("app-deleted",{appName:this._name})}}const w="9.0.0";function x(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:l,automaticDataCollectionEnabled:!1},e),r=n.name;if("string"!=typeof r||!r)throw b.create("bad-app-name",{appName:String(r)});const o=h.get(r);if(o){if((0,s.vZ)(t,o.options)&&(0,s.vZ)(n,o.config))return o;throw b.create("duplicate-app",{appName:r})}const a=new i.H0(r);for(const t of d.values())a.addComponent(t);const c=new _(t,n,a);return h.set(r,c),c}function T(t=l){const e=h.get(t);if(!e)throw b.create("no-app",{appName:t});return e}function E(){return Array.from(h.values())}async function I(t){const e=t.name;h.has(e)&&(h.delete(e),await Promise.all(t.container.getProviders().map((t=>t.delete()))),t.isDeleted=!0)}function S(t,e,n){var r;let s=null!==(r=u[t])&&void 0!==r?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${s}" with version "${e}":`];return o&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void c.warn(t.join(" "))}g(new i.wA(`${s}-version`,(()=>({library:s,version:e})),"VERSION"))}function k(t,e){if(null!==t&&"function"!=typeof t)throw b.create("invalid-log-argument");(0,r.Am)(t,e)}function A(t){(0,r.Ub)(t)}g(new i.wA("platform-logger",(t=>new o(t)),"PRIVATE")),S(a,"0.7.0",undefined),S("fire-js","")},909:(t,e,n)=>{"use strict";n.d(e,{wA:()=>s,H0:()=>c});var i=n(655),r=n(589),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),o="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new r.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:e});i&&n.resolve(i)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(t){}try{for(var r=(0,i.XA)(this.instancesDeferred.entries()),s=r.next();!s.done;s=r.next()){var a=(0,i.CR)(s.value,2),c=a[0],l=a[1],u=this.normalizeInstanceIdentifier(c);try{var h=this.getOrInitializeService({instanceIdentifier:u});l.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=o),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,i.ev)((0,i.ev)([],(0,i.CR)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),(0,i.CR)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=o),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=o),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,s=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var c=(0,i.XA)(this.instancesDeferred.entries()),l=c.next();!l.done;l=c.next()){var u=(0,i.CR)(l.value,2),h=u[0],d=u[1];o===this.normalizeInstanceIdentifier(h)&&d.resolve(a)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);var s=this.instances.get(i);return s&&t(s,i),function(){r.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,s=this.onInitCallbacks.get(e);if(s)try{for(var o=(0,i.XA)(s),a=o.next();!a.done;a=o.next()){var c=a.value;try{c(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,i=t.options,r=void 0===i?{}:i,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===o?void 0:e),options:r}),this.instances.set(n,s),this.instancesOptions.set(n,r),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(t){}return s||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=o),this.component?this.component.multipleInstances?t:o:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),c=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},594:(t,e,n)=>{"use strict";function i(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)i[r]=s[o];return i}var r;n.d(e,{in:()=>s,Yd:()=>h,Ub:()=>d,Am:()=>f});var s,o=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(s||(s={}));var a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},c=s.INFO,l=((r={})[s.DEBUG]="log",r[s.VERBOSE]="log",r[s.INFO]="info",r[s.WARN]="warn",r[s.ERROR]="error",r),u=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var s=(new Date).toISOString(),o=l[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,i(["["+s+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=c,this._logHandler=u,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.DEBUG],t)),this._logHandler.apply(this,i([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.VERBOSE],t)),this._logHandler.apply(this,i([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.INFO],t)),this._logHandler.apply(this,i([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.WARN],t)),this._logHandler.apply(this,i([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.ERROR],t)),this._logHandler.apply(this,i([this,s.ERROR],t))},t}();function d(t){o.forEach((function(e){e.setLogLevel(t)}))}function f(t,e){for(var n=function(n){var i=null;e&&e.level&&(i=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var a=r.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=i?i:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:r,type:e.name})}},i=0,r=o;i<r.length;i++)n(r[i])}},589:(t,e,n)=>{"use strict";n.d(e,{BH:()=>c,LL:()=>b,ZR:()=>v,tV:()=>a,Sg:()=>l,ne:()=>A,vZ:()=>T,pd:()=>k,m9:()=>N,z$:()=>u,ru:()=>d,d:()=>p,xb:()=>x,w1:()=>g,uI:()=>h,b$:()=>f,G6:()=>y,Mn:()=>m,xO:()=>I,zd:()=>S});var i=n(655),r=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],r=0;r<t.length;r+=3){var s=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,l=c?t[r+2]:0,u=s>>2,h=(3&s)<<4|a>>4,d=(15&a)<<2|l>>6,f=63&l;c||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,i=0;n<t.length;){var r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){var s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){var o=((7&r)<<18|(63&(s=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(o>>10)),e[i++]=String.fromCharCode(56320+(1023&o))}else{s=t[n++];var a=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],r=0;r<t.length;){var s=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0,a=++r<t.length?n[t.charAt(r)]:64,c=++r<t.length?n[t.charAt(r)]:64;if(++r,null==s||null==o||null==a||null==c)throw Error();var l=s<<2|o>>4;if(i.push(l),64!==a){var u=o<<4&240|a>>2;if(i.push(u),64!==c){var h=a<<6&192|c;i.push(h)}}}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},o=function(t){return function(t){var e=r(t);return s.encodeByteArray(e,!0)}(t).replace(/\./g,"")},a=function(t){try{return s.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null},c=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,i){n?e.reject(n):e.resolve(i),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,i))}},t}();function l(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,i.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(a)),""].join(".")}function u(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function h(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(u())}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function f(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function p(){return u().indexOf("Electron/")>=0}function g(){var t=u();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m(){return u().indexOf("MSAppHost/")>=0}function y(){return!function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var v=function(t){function e(n,i,r){var s=t.call(this,i)||this;return s.code=n,s.customData=r,s.name="FirebaseError",Object.setPrototypeOf(s,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,b.prototype.create),s}return(0,i.ZT)(e,t),e}(Error),b=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=e[0]||{},r=this.service+"/"+t,s=this.errors[t],o=s?_(s,i):"Error",a=this.serviceName+": "+o+" ("+r+").",c=new v(r,a,i);return c},t}();function _(t,e){return t.replace(w,(function(t,n){var i=e[n];return null!=i?String(i):"<"+n+"?>"}))}var w=/\{\$([^}]+)}/g;function x(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function T(t,e){if(t===e)return!0;for(var n=Object.keys(t),i=Object.keys(e),r=0,s=n;r<s.length;r++){var o=s[r];if(!i.includes(o))return!1;var a=t[o],c=e[o];if(E(a)&&E(c)){if(!T(a,c))return!1}else if(a!==c)return!1}for(var l=0,u=i;l<u.length;l++)if(o=u[l],!n.includes(o))return!1;return!0}function E(t){return null!==t&&"object"==typeof t}function I(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},i=0,r=Object.entries(t);i<r.length;i++){var s=r[i];n(s[0],s[1])}return e.length?"&"+e.join("&"):""}function S(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("="),i=n[0],r=n[1];e[decodeURIComponent(i)]=decodeURIComponent(r)}})),e}function k(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function A(t,e){var n=new C(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var s,o,a=this.chain_[0],c=this.chain_[1],l=this.chain_[2],u=this.chain_[3],h=this.chain_[4];for(i=0;i<80;i++)i<40?i<20?(s=u^c&(l^u),o=1518500249):(s=c^l^u,o=1859775393):i<60?(s=c&l|u&(c|l),o=2400959708):(s=c^l^u,o=3395469782),r=(a<<5|a>>>27)+s+h+o+n[i]&4294967295,h=u,u=l,l=4294967295&(c<<30|c>>>2),c=a,a=r;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=0,r=this.buf_,s=this.inbuf_;i<e;){if(0===s)for(;i<=n;)this.compress_(t,i),i+=this.blockSize;if("string"==typeof t){for(;i<e;)if(r[s]=t.charCodeAt(i),++i,++s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<e;)if(r[s]=t[i],++i,++s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var i=0;for(n=0;n<5;n++)for(var r=24;r>=0;r-=8)t[i]=this.chain_[n]>>r&255,++i;return t}}();var C=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var i,r=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,i=["next","error","complete"];n<i.length;n++){var r=i[n];if(r in t&&"function"==typeof t[r])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(i.next=D),void 0===i.error&&(i.error=D),void 0===i.complete&&(i.complete=D);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{r.finalError?i.error(r.finalError):i.complete()}catch(t){}})),this.observers.push(i),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function D(){}function N(t){return t&&t._delegate?t._delegate:t}},169:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Alert:()=>be,Button:()=>we,Carousel:()=>Fe,Collapse:()=>We,Dropdown:()=>fn,Modal:()=>Un,Offcanvas:()=>Kn,Popover:()=>vi,ScrollSpy:()=>Ii,Tab:()=>Ni,Toast:()=>ji,Tooltip:()=>pi});var i={};n.r(i),n.d(i,{afterMain:()=>T,afterRead:()=>_,afterWrite:()=>S,applyStyles:()=>M,arrow:()=>J,auto:()=>c,basePlacements:()=>l,beforeMain:()=>w,beforeRead:()=>v,beforeWrite:()=>E,bottom:()=>s,clippingParents:()=>d,computeStyles:()=>nt,createPopper:()=>Nt,createPopperBase:()=>Dt,createPopperLite:()=>Ot,detectOverflow:()=>yt,end:()=>h,eventListeners:()=>rt,flip:()=>vt,hide:()=>wt,left:()=>a,main:()=>x,modifierPhases:()=>k,offset:()=>xt,placements:()=>y,popper:()=>p,popperGenerator:()=>Ct,popperOffsets:()=>Tt,preventOverflow:()=>Et,read:()=>b,reference:()=>g,right:()=>o,start:()=>u,top:()=>r,variationPlacements:()=>m,viewport:()=>f,write:()=>I});var r="top",s="bottom",o="right",a="left",c="auto",l=[r,s,o,a],u="start",h="end",d="clippingParents",f="viewport",p="popper",g="reference",m=l.reduce((function(t,e){return t.concat([e+"-"+u,e+"-"+h])}),[]),y=[].concat(l,[c]).reduce((function(t,e){return t.concat([e,e+"-"+u,e+"-"+h])}),[]),v="beforeRead",b="read",_="afterRead",w="beforeMain",x="main",T="afterMain",E="beforeWrite",I="write",S="afterWrite",k=[v,b,_,w,x,T,E,I,S];function A(t){return t?(t.nodeName||"").toLowerCase():null}function C(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function D(t){return t instanceof C(t).Element||t instanceof Element}function N(t){return t instanceof C(t).HTMLElement||t instanceof HTMLElement}function O(t){return"undefined"!=typeof ShadowRoot&&(t instanceof C(t).ShadowRoot||t instanceof ShadowRoot)}const M={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];N(r)&&A(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],r=e.attributes[t]||{},s=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});N(i)&&A(i)&&(Object.assign(i.style,s),Object.keys(r).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]};function L(t){return t.split("-")[0]}var P=Math.round;function R(t,e){void 0===e&&(e=!1);var n=t.getBoundingClientRect(),i=1,r=1;if(N(t)&&e){var s=t.offsetHeight,o=t.offsetWidth;o>0&&(i=n.width/o||1),s>0&&(r=n.height/s||1)}return{width:P(n.width/i),height:P(n.height/r),top:P(n.top/r),right:P(n.right/i),bottom:P(n.bottom/r),left:P(n.left/i),x:P(n.left/i),y:P(n.top/r)}}function F(t){var e=R(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function j(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&O(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function V(t){return C(t).getComputedStyle(t)}function U(t){return["table","td","th"].indexOf(A(t))>=0}function B(t){return((D(t)?t.ownerDocument:t.document)||window.document).documentElement}function q(t){return"html"===A(t)?t:t.assignedSlot||t.parentNode||(O(t)?t.host:null)||B(t)}function z(t){return N(t)&&"fixed"!==V(t).position?t.offsetParent:null}function H(t){for(var e=C(t),n=z(t);n&&U(n)&&"static"===V(n).position;)n=z(n);return n&&("html"===A(n)||"body"===A(n)&&"static"===V(n).position)?e:n||function(t){var e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&N(t)&&"fixed"===V(t).position)return null;for(var n=q(t);N(n)&&["html","body"].indexOf(A(n))<0;){var i=V(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(t)||e}function $(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}var W=Math.max,K=Math.min,G=Math.round;function Y(t,e,n){return W(t,K(e,n))}function X(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Q(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}const J={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,c=t.options,u=n.elements.arrow,h=n.modifiersData.popperOffsets,d=L(n.placement),f=$(d),p=[a,o].indexOf(d)>=0?"height":"width";if(u&&h){var g=function(t,e){return X("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:Q(t,l))}(c.padding,n),m=F(u),y="y"===f?r:a,v="y"===f?s:o,b=n.rects.reference[p]+n.rects.reference[f]-h[f]-n.rects.popper[p],_=h[f]-n.rects.reference[f],w=H(u),x=w?"y"===f?w.clientHeight||0:w.clientWidth||0:0,T=b/2-_/2,E=g[y],I=x-m[p]-g[v],S=x/2-m[p]/2+T,k=Y(E,S,I),A=f;n.modifiersData[i]=((e={})[A]=k,e.centerOffset=k-S,e)}},effect:function(t){var e=t.state,n=t.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=e.elements.popper.querySelector(i)))&&j(e.elements.popper,i)&&(e.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Z(t){return t.split("-")[1]}var tt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function et(t){var e,n=t.popper,i=t.popperRect,c=t.placement,l=t.variation,u=t.offsets,d=t.position,f=t.gpuAcceleration,p=t.adaptive,g=t.roundOffsets,m=!0===g?function(t){var e=t.x,n=t.y,i=window.devicePixelRatio||1;return{x:G(G(e*i)/i)||0,y:G(G(n*i)/i)||0}}(u):"function"==typeof g?g(u):u,y=m.x,v=void 0===y?0:y,b=m.y,_=void 0===b?0:b,w=u.hasOwnProperty("x"),x=u.hasOwnProperty("y"),T=a,E=r,I=window;if(p){var S=H(n),k="clientHeight",A="clientWidth";S===C(n)&&"static"!==V(S=B(n)).position&&"absolute"===d&&(k="scrollHeight",A="scrollWidth"),S=S,c!==r&&(c!==a&&c!==o||l!==h)||(E=s,_-=S[k]-i.height,_*=f?1:-1),c!==a&&(c!==r&&c!==s||l!==h)||(T=o,v-=S[A]-i.width,v*=f?1:-1)}var D,N=Object.assign({position:d},p&&tt);return f?Object.assign({},N,((D={})[E]=x?"0":"",D[T]=w?"0":"",D.transform=(I.devicePixelRatio||1)<=1?"translate("+v+"px, "+_+"px)":"translate3d("+v+"px, "+_+"px, 0)",D)):Object.assign({},N,((e={})[E]=x?_+"px":"",e[T]=w?v+"px":"",e.transform="",e))}const nt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,c=void 0===a||a,l={placement:L(e.placement),variation:Z(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,et(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,et(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var it={passive:!0};const rt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=void 0===r||r,o=i.resize,a=void 0===o||o,c=C(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&l.forEach((function(t){t.addEventListener("scroll",n.update,it)})),a&&c.addEventListener("resize",n.update,it),function(){s&&l.forEach((function(t){t.removeEventListener("scroll",n.update,it)})),a&&c.removeEventListener("resize",n.update,it)}},data:{}};var st={left:"right",right:"left",bottom:"top",top:"bottom"};function ot(t){return t.replace(/left|right|bottom|top/g,(function(t){return st[t]}))}var at={start:"end",end:"start"};function ct(t){return t.replace(/start|end/g,(function(t){return at[t]}))}function lt(t){var e=C(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function ut(t){return R(B(t)).left+lt(t).scrollLeft}function ht(t){var e=V(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function dt(t){return["html","body","#document"].indexOf(A(t))>=0?t.ownerDocument.body:N(t)&&ht(t)?t:dt(q(t))}function ft(t,e){var n;void 0===e&&(e=[]);var i=dt(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),s=C(i),o=r?[s].concat(s.visualViewport||[],ht(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(ft(q(o)))}function pt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function gt(t,e){return e===f?pt(function(t){var e=C(t),n=B(t),i=e.visualViewport,r=n.clientWidth,s=n.clientHeight,o=0,a=0;return i&&(r=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,a=i.offsetTop)),{width:r,height:s,x:o+ut(t),y:a}}(t)):N(e)?function(t){var e=R(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}(e):pt(function(t){var e,n=B(t),i=lt(t),r=null==(e=t.ownerDocument)?void 0:e.body,s=W(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=W(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+ut(t),c=-i.scrollTop;return"rtl"===V(r||n).direction&&(a+=W(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:c}}(B(t)))}function mt(t){var e,n=t.reference,i=t.element,c=t.placement,l=c?L(c):null,d=c?Z(c):null,f=n.x+n.width/2-i.width/2,p=n.y+n.height/2-i.height/2;switch(l){case r:e={x:f,y:n.y-i.height};break;case s:e={x:f,y:n.y+n.height};break;case o:e={x:n.x+n.width,y:p};break;case a:e={x:n.x-i.width,y:p};break;default:e={x:n.x,y:n.y}}var g=l?$(l):null;if(null!=g){var m="y"===g?"height":"width";switch(d){case u:e[g]=e[g]-(n[m]/2-i[m]/2);break;case h:e[g]=e[g]+(n[m]/2-i[m]/2)}}return e}function yt(t,e){void 0===e&&(e={});var n=e,i=n.placement,a=void 0===i?t.placement:i,c=n.boundary,u=void 0===c?d:c,h=n.rootBoundary,m=void 0===h?f:h,y=n.elementContext,v=void 0===y?p:y,b=n.altBoundary,_=void 0!==b&&b,w=n.padding,x=void 0===w?0:w,T=X("number"!=typeof x?x:Q(x,l)),E=v===p?g:p,I=t.rects.popper,S=t.elements[_?E:v],k=function(t,e,n){var i="clippingParents"===e?function(t){var e=ft(q(t)),n=["absolute","fixed"].indexOf(V(t).position)>=0&&N(t)?H(t):t;return D(n)?e.filter((function(t){return D(t)&&j(t,n)&&"body"!==A(t)})):[]}(t):[].concat(e),r=[].concat(i,[n]),s=r[0],o=r.reduce((function(e,n){var i=gt(t,n);return e.top=W(i.top,e.top),e.right=K(i.right,e.right),e.bottom=K(i.bottom,e.bottom),e.left=W(i.left,e.left),e}),gt(t,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}(D(S)?S:S.contextElement||B(t.elements.popper),u,m),C=R(t.elements.reference),O=mt({reference:C,element:I,strategy:"absolute",placement:a}),M=pt(Object.assign({},I,O)),L=v===p?M:C,P={top:k.top-L.top+T.top,bottom:L.bottom-k.bottom+T.bottom,left:k.left-L.left+T.left,right:L.right-k.right+T.right},F=t.modifiersData.offset;if(v===p&&F){var U=F[a];Object.keys(P).forEach((function(t){var e=[o,s].indexOf(t)>=0?1:-1,n=[r,s].indexOf(t)>=0?"y":"x";P[t]+=U[n]*e}))}return P}const vt={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var h=n.mainAxis,d=void 0===h||h,f=n.altAxis,p=void 0===f||f,g=n.fallbackPlacements,v=n.padding,b=n.boundary,_=n.rootBoundary,w=n.altBoundary,x=n.flipVariations,T=void 0===x||x,E=n.allowedAutoPlacements,I=e.options.placement,S=L(I),k=g||(S!==I&&T?function(t){if(L(t)===c)return[];var e=ot(t);return[ct(t),e,ct(e)]}(I):[ot(I)]),A=[I].concat(k).reduce((function(t,n){return t.concat(L(n)===c?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,u=void 0===c?y:c,h=Z(i),d=h?a?m:m.filter((function(t){return Z(t)===h})):l,f=d.filter((function(t){return u.indexOf(t)>=0}));0===f.length&&(f=d);var p=f.reduce((function(e,n){return e[n]=yt(t,{placement:n,boundary:r,rootBoundary:s,padding:o})[L(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}(e,{placement:n,boundary:b,rootBoundary:_,padding:v,flipVariations:T,allowedAutoPlacements:E}):n)}),[]),C=e.rects.reference,D=e.rects.popper,N=new Map,O=!0,M=A[0],P=0;P<A.length;P++){var R=A[P],F=L(R),j=Z(R)===u,V=[r,s].indexOf(F)>=0,U=V?"width":"height",B=yt(e,{placement:R,boundary:b,rootBoundary:_,altBoundary:w,padding:v}),q=V?j?o:a:j?s:r;C[U]>D[U]&&(q=ot(q));var z=ot(q),H=[];if(d&&H.push(B[F]<=0),p&&H.push(B[q]<=0,B[z]<=0),H.every((function(t){return t}))){M=R,O=!1;break}N.set(R,H)}if(O)for(var $=function(t){var e=A.find((function(e){var n=N.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return M=e,"break"},W=T?3:1;W>0&&"break"!==$(W);W--);e.placement!==M&&(e.modifiersData[i]._skip=!0,e.placement=M,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function bt(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function _t(t){return[r,o,s,a].some((function(e){return t[e]>=0}))}const wt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=yt(e,{elementContext:"reference"}),a=yt(e,{altBoundary:!0}),c=bt(o,i),l=bt(a,r,s),u=_t(c),h=_t(l);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}},xt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=t.name,s=n.offset,c=void 0===s?[0,0]:s,l=y.reduce((function(t,n){return t[n]=function(t,e,n){var i=L(t),s=[a,r].indexOf(i)>=0?-1:1,c="function"==typeof n?n(Object.assign({},e,{placement:t})):n,l=c[0],u=c[1];return l=l||0,u=(u||0)*s,[a,o].indexOf(i)>=0?{x:u,y:l}:{x:l,y:u}}(n,e.rects,c),t}),{}),u=l[e.placement],h=u.x,d=u.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=d),e.modifiersData[i]=l}},Tt={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=mt({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},Et={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,c=n.mainAxis,l=void 0===c||c,h=n.altAxis,d=void 0!==h&&h,f=n.boundary,p=n.rootBoundary,g=n.altBoundary,m=n.padding,y=n.tether,v=void 0===y||y,b=n.tetherOffset,_=void 0===b?0:b,w=yt(e,{boundary:f,rootBoundary:p,padding:m,altBoundary:g}),x=L(e.placement),T=Z(e.placement),E=!T,I=$(x),S="x"===I?"y":"x",k=e.modifiersData.popperOffsets,A=e.rects.reference,C=e.rects.popper,D="function"==typeof _?_(Object.assign({},e.rects,{placement:e.placement})):_,N={x:0,y:0};if(k){if(l||d){var O="y"===I?r:a,M="y"===I?s:o,P="y"===I?"height":"width",R=k[I],j=k[I]+w[O],V=k[I]-w[M],U=v?-C[P]/2:0,B=T===u?A[P]:C[P],q=T===u?-C[P]:-A[P],z=e.elements.arrow,G=v&&z?F(z):{width:0,height:0},X=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Q=X[O],J=X[M],tt=Y(0,A[P],G[P]),et=E?A[P]/2-U-tt-Q-D:B-tt-Q-D,nt=E?-A[P]/2+U+tt+J+D:q+tt+J+D,it=e.elements.arrow&&H(e.elements.arrow),rt=it?"y"===I?it.clientTop||0:it.clientLeft||0:0,st=e.modifiersData.offset?e.modifiersData.offset[e.placement][I]:0,ot=k[I]+et-st-rt,at=k[I]+nt-st;if(l){var ct=Y(v?K(j,ot):j,R,v?W(V,at):V);k[I]=ct,N[I]=ct-R}if(d){var lt="x"===I?r:a,ut="x"===I?s:o,ht=k[S],dt=ht+w[lt],ft=ht-w[ut],pt=Y(v?K(dt,ot):dt,ht,v?W(ft,at):ft);k[S]=pt,N[S]=pt-ht}}e.modifiersData[i]=N}},requiresIfExists:["offset"]};function It(t,e,n){void 0===n&&(n=!1);var i,r,s=N(e),o=N(e)&&function(t){var e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,i=e.height/t.offsetHeight||1;return 1!==n||1!==i}(e),a=B(e),c=R(t,o),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(s||!s&&!n)&&(("body"!==A(e)||ht(a))&&(l=(i=e)!==C(i)&&N(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:lt(i)),N(e)?((u=R(e,!0)).x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=ut(a))),{x:c.left+l.scrollLeft-u.x,y:c.top+l.scrollTop-u.y,width:c.width,height:c.height}}function St(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),i}var kt={placement:"bottom",modifiers:[],strategy:"absolute"};function At(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function Ct(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,s=void 0===r?kt:r;return function(t,e,n){void 0===n&&(n=s);var r,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},kt,s),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},c=[],l=!1,u={state:a,setOptions:function(n){var r="function"==typeof n?n(a.options):n;h(),a.options=Object.assign({},s,a.options,r),a.scrollParents={reference:D(t)?ft(t):t.contextElement?ft(t.contextElement):[],popper:ft(e)};var o,l,d=function(t){var e=St(t);return k.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((o=[].concat(i,a.options.modifiers),l=o.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(l).map((function(t){return l[t]}))));return a.orderedModifiers=d.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,r=t.effect;if("function"==typeof r){var s=r({state:a,name:e,instance:u,options:i});c.push(s||function(){})}})),u.update()},forceUpdate:function(){if(!l){var t=a.elements,e=t.reference,n=t.popper;if(At(e,n)){a.rects={reference:It(e,H(n),"fixed"===a.options.strategy),popper:F(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<a.orderedModifiers.length;i++)if(!0!==a.reset){var r=a.orderedModifiers[i],s=r.fn,o=r.options,c=void 0===o?{}:o,h=r.name;"function"==typeof s&&(a=s({state:a,options:c,name:h,instance:u})||a)}else a.reset=!1,i=-1}}},update:(r=function(){return new Promise((function(t){u.forceUpdate(),t(a)}))},function(){return o||(o=new Promise((function(t){Promise.resolve().then((function(){o=void 0,t(r())}))}))),o}),destroy:function(){h(),l=!0}};if(!At(t,e))return u;function h(){c.forEach((function(t){return t()})),c=[]}return u.setOptions(n).then((function(t){!l&&n.onFirstUpdate&&n.onFirstUpdate(t)})),u}}var Dt=Ct(),Nt=Ct({defaultModifiers:[rt,Tt,nt,M,xt,vt,Et,J,wt]}),Ot=Ct({defaultModifiers:[rt,Tt,nt,M]});const Mt="transitionend",Lt=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?n.trim():null}return e},Pt=t=>{const e=Lt(t);return e&&document.querySelector(e)?e:null},Rt=t=>{const e=Lt(t);return e?document.querySelector(e):null},Ft=t=>{t.dispatchEvent(new Event(Mt))},jt=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),Vt=t=>jt(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(t):null,Ut=(t,e,n)=>{Object.keys(n).forEach((i=>{const r=n[i],s=e[i],o=s&&jt(s)?"element":null==(a=s)?`${a}`:{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase();var a;if(!new RegExp(r).test(o))throw new TypeError(`${t.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${r}".`)}))},Bt=t=>!(!jt(t)||0===t.getClientRects().length)&&"visible"===getComputedStyle(t).getPropertyValue("visibility"),qt=t=>!t||t.nodeType!==Node.ELEMENT_NODE||!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled")),zt=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?zt(t.parentNode):null},Ht=()=>{},$t=t=>{t.offsetHeight},Wt=()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-bs-no-jquery")?t:null},Kt=[],Gt=()=>"rtl"===document.documentElement.dir,Yt=t=>{var e;e=()=>{const e=Wt();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}},"loading"===document.readyState?(Kt.length||document.addEventListener("DOMContentLoaded",(()=>{Kt.forEach((t=>t()))})),Kt.push(e)):e()},Xt=t=>{"function"==typeof t&&t()},Qt=(t,e,n=!0)=>{if(!n)return void Xt(t);const i=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return i||r?(e=e.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(n))):0})(e)+5;let r=!1;const s=({target:n})=>{n===e&&(r=!0,e.removeEventListener(Mt,s),Xt(t))};e.addEventListener(Mt,s),setTimeout((()=>{r||Ft(e)}),i)},Jt=(t,e,n,i)=>{let r=t.indexOf(e);if(-1===r)return t[!n&&i?t.length-1:0];const s=t.length;return r+=n?1:-1,i&&(r=(r+s)%s),t[Math.max(0,Math.min(r,s-1))]},Zt=/[^.]*(?=\..*)\.|.*/,te=/\..*/,ee=/::\d+$/,ne={};let ie=1;const re={mouseenter:"mouseover",mouseleave:"mouseout"},se=/^(mouseenter|mouseleave)/i,oe=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ae(t,e){return e&&`${e}::${ie++}`||t.uidEvent||ie++}function ce(t){const e=ae(t);return t.uidEvent=e,ne[e]=ne[e]||{},ne[e]}function le(t,e,n=null){const i=Object.keys(t);for(let r=0,s=i.length;r<s;r++){const s=t[i[r]];if(s.originalHandler===e&&s.delegationSelector===n)return s}return null}function ue(t,e,n){const i="string"==typeof e,r=i?n:e;let s=fe(t);return oe.has(s)||(s=t),[i,r,s]}function he(t,e,n,i,r){if("string"!=typeof e||!t)return;if(n||(n=i,i=null),se.test(e)){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};i?i=t(i):n=t(n)}const[s,o,a]=ue(e,n,i),c=ce(t),l=c[a]||(c[a]={}),u=le(l,o,s?n:null);if(u)return void(u.oneOff=u.oneOff&&r);const h=ae(o,e.replace(Zt,"")),d=s?function(t,e,n){return function i(r){const s=t.querySelectorAll(e);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(let a=s.length;a--;)if(s[a]===o)return r.delegateTarget=o,i.oneOff&&pe.off(t,r.type,e,n),n.apply(o,[r]);return null}}(t,n,i):function(t,e){return function n(i){return i.delegateTarget=t,n.oneOff&&pe.off(t,i.type,e),e.apply(t,[i])}}(t,n);d.delegationSelector=s?n:null,d.originalHandler=o,d.oneOff=r,d.uidEvent=h,l[h]=d,t.addEventListener(a,d,s)}function de(t,e,n,i,r){const s=le(e[n],i,r);s&&(t.removeEventListener(n,s,Boolean(r)),delete e[n][s.uidEvent])}function fe(t){return t=t.replace(te,""),re[t]||t}const pe={on(t,e,n,i){he(t,e,n,i,!1)},one(t,e,n,i){he(t,e,n,i,!0)},off(t,e,n,i){if("string"!=typeof e||!t)return;const[r,s,o]=ue(e,n,i),a=o!==e,c=ce(t),l=e.startsWith(".");if(void 0!==s){if(!c||!c[o])return;return void de(t,c,o,s,r?n:null)}l&&Object.keys(c).forEach((n=>{!function(t,e,n,i){const r=e[n]||{};Object.keys(r).forEach((s=>{if(s.includes(i)){const i=r[s];de(t,e,n,i.originalHandler,i.delegationSelector)}}))}(t,c,n,e.slice(1))}));const u=c[o]||{};Object.keys(u).forEach((n=>{const i=n.replace(ee,"");if(!a||e.includes(i)){const e=u[n];de(t,c,o,e.originalHandler,e.delegationSelector)}}))},trigger(t,e,n){if("string"!=typeof e||!t)return null;const i=Wt(),r=fe(e),s=e!==r,o=oe.has(r);let a,c=!0,l=!0,u=!1,h=null;return s&&i&&(a=i.Event(e,n),i(t).trigger(a),c=!a.isPropagationStopped(),l=!a.isImmediatePropagationStopped(),u=a.isDefaultPrevented()),o?(h=document.createEvent("HTMLEvents"),h.initEvent(r,c,!0)):h=new CustomEvent(e,{bubbles:c,cancelable:!0}),void 0!==n&&Object.keys(n).forEach((t=>{Object.defineProperty(h,t,{get:()=>n[t]})})),u&&h.preventDefault(),l&&t.dispatchEvent(h),h.defaultPrevented&&void 0!==a&&a.preventDefault(),h}},ge=new Map;var me={set(t,e,n){ge.has(t)||ge.set(t,new Map);const i=ge.get(t);i.has(e)||0===i.size?i.set(e,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(t,e)=>ge.has(t)&&ge.get(t).get(e)||null,remove(t,e){if(!ge.has(t))return;const n=ge.get(t);n.delete(e),0===n.size&&ge.delete(t)}};class ye{constructor(t){(t=Vt(t))&&(this._element=t,me.set(this._element,this.constructor.DATA_KEY,this))}dispose(){me.remove(this._element,this.constructor.DATA_KEY),pe.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach((t=>{this[t]=null}))}_queueCallback(t,e,n=!0){Qt(t,e,n)}static getInstance(t){return me.get(Vt(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.1.1"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const ve=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;pe.on(document,n,`[data-bs-dismiss="${i}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),qt(this))return;const r=Rt(this)||this.closest(`.${i}`);t.getOrCreateInstance(r)[e]()}))};class be extends ye{static get NAME(){return"alert"}close(){if(pe.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),pe.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=be.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}ve(be,"close"),Yt(be);const _e='[data-bs-toggle="button"]';class we extends ye{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=we.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}function xe(t){return"true"===t||"false"!==t&&(t===Number(t).toString()?Number(t):""===t||"null"===t?null:t)}function Te(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}pe.on(document,"click.bs.button.data-api",_e,(t=>{t.preventDefault();const e=t.target.closest(_e);we.getOrCreateInstance(e).toggle()})),Yt(we);const Ee={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${Te(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Te(e)}`)},getDataAttributes(t){if(!t)return{};const e={};return Object.keys(t.dataset).filter((t=>t.startsWith("bs"))).forEach((n=>{let i=n.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),e[i]=xe(t.dataset[n])})),e},getDataAttribute:(t,e)=>xe(t.getAttribute(`data-bs-${Te(e)}`)),offset(t){const e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset}},position:t=>({top:t.offsetTop,left:t.offsetLeft})},Ie={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const n=[];let i=t.parentNode;for(;i&&i.nodeType===Node.ELEMENT_NODE&&3!==i.nodeType;)i.matches(e)&&n.push(i),i=i.parentNode;return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(", ");return this.find(e,t).filter((t=>!qt(t)&&Bt(t)))}},Se="carousel",ke={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},Ae={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Ce="next",De="prev",Ne="left",Oe="right",Me={ArrowLeft:Oe,ArrowRight:Ne},Le="slid.bs.carousel",Pe="active",Re=".active.carousel-item";class Fe extends ye{constructor(t,e){super(t),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._indicatorsElement=Ie.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return ke}static get NAME(){return Se}next(){this._slide(Ce)}nextWhenVisible(){!document.hidden&&Bt(this._element)&&this.next()}prev(){this._slide(De)}pause(t){t||(this._isPaused=!0),Ie.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(Ft(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(t){this._activeElement=Ie.findOne(Re,this._element);const e=this._getItemIndex(this._activeElement);if(t>this._items.length-1||t<0)return;if(this._isSliding)return void pe.one(this._element,Le,(()=>this.to(t)));if(e===t)return this.pause(),void this.cycle();const n=t>e?Ce:De;this._slide(n,this._items[t])}_getConfig(t){return t={...ke,...Ee.getDataAttributes(this._element),..."object"==typeof t?t:{}},Ut(Se,t,Ae),t}_handleSwipe(){const t=Math.abs(this.touchDeltaX);if(t<=40)return;const e=t/this.touchDeltaX;this.touchDeltaX=0,e&&this._slide(e>0?Oe:Ne)}_addEventListeners(){this._config.keyboard&&pe.on(this._element,"keydown.bs.carousel",(t=>this._keydown(t))),"hover"===this._config.pause&&(pe.on(this._element,"mouseenter.bs.carousel",(t=>this.pause(t))),pe.on(this._element,"mouseleave.bs.carousel",(t=>this.cycle(t)))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const t=t=>this._pointerEvent&&("pen"===t.pointerType||"touch"===t.pointerType),e=e=>{t(e)?this.touchStartX=e.clientX:this._pointerEvent||(this.touchStartX=e.touches[0].clientX)},n=t=>{this.touchDeltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this.touchStartX},i=e=>{t(e)&&(this.touchDeltaX=e.clientX-this.touchStartX),this._handleSwipe(),"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((t=>this.cycle(t)),500+this._config.interval))};Ie.find(".carousel-item img",this._element).forEach((t=>{pe.on(t,"dragstart.bs.carousel",(t=>t.preventDefault()))})),this._pointerEvent?(pe.on(this._element,"pointerdown.bs.carousel",(t=>e(t))),pe.on(this._element,"pointerup.bs.carousel",(t=>i(t))),this._element.classList.add("pointer-event")):(pe.on(this._element,"touchstart.bs.carousel",(t=>e(t))),pe.on(this._element,"touchmove.bs.carousel",(t=>n(t))),pe.on(this._element,"touchend.bs.carousel",(t=>i(t))))}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=Me[t.key];e&&(t.preventDefault(),this._slide(e))}_getItemIndex(t){return this._items=t&&t.parentNode?Ie.find(".carousel-item",t.parentNode):[],this._items.indexOf(t)}_getItemByOrder(t,e){const n=t===Ce;return Jt(this._items,e,n,this._config.wrap)}_triggerSlideEvent(t,e){const n=this._getItemIndex(t),i=this._getItemIndex(Ie.findOne(Re,this._element));return pe.trigger(this._element,"slide.bs.carousel",{relatedTarget:t,direction:e,from:i,to:n})}_setActiveIndicatorElement(t){if(this._indicatorsElement){const e=Ie.findOne(".active",this._indicatorsElement);e.classList.remove(Pe),e.removeAttribute("aria-current");const n=Ie.find("[data-bs-target]",this._indicatorsElement);for(let e=0;e<n.length;e++)if(Number.parseInt(n[e].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(t)){n[e].classList.add(Pe),n[e].setAttribute("aria-current","true");break}}}_updateInterval(){const t=this._activeElement||Ie.findOne(Re,this._element);if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);e?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(t,e){const n=this._directionToOrder(t),i=Ie.findOne(Re,this._element),r=this._getItemIndex(i),s=e||this._getItemByOrder(n,i),o=this._getItemIndex(s),a=Boolean(this._interval),c=n===Ce,l=c?"carousel-item-start":"carousel-item-end",u=c?"carousel-item-next":"carousel-item-prev",h=this._orderToDirection(n);if(s&&s.classList.contains(Pe))return void(this._isSliding=!1);if(this._isSliding)return;if(this._triggerSlideEvent(s,h).defaultPrevented)return;if(!i||!s)return;this._isSliding=!0,a&&this.pause(),this._setActiveIndicatorElement(s),this._activeElement=s;const d=()=>{pe.trigger(this._element,Le,{relatedTarget:s,direction:h,from:r,to:o})};if(this._element.classList.contains("slide")){s.classList.add(u),$t(s),i.classList.add(l),s.classList.add(l);const t=()=>{s.classList.remove(l,u),s.classList.add(Pe),i.classList.remove(Pe,u,l),this._isSliding=!1,setTimeout(d,0)};this._queueCallback(t,i,!0)}else i.classList.remove(Pe),s.classList.add(Pe),this._isSliding=!1,d();a&&this.cycle()}_directionToOrder(t){return[Oe,Ne].includes(t)?Gt()?t===Ne?De:Ce:t===Ne?Ce:De:t}_orderToDirection(t){return[Ce,De].includes(t)?Gt()?t===De?Ne:Oe:t===De?Oe:Ne:t}static carouselInterface(t,e){const n=Fe.getOrCreateInstance(t,e);let{_config:i}=n;"object"==typeof e&&(i={...i,...e});const r="string"==typeof e?e:i.slide;if("number"==typeof e)n.to(e);else if("string"==typeof r){if(void 0===n[r])throw new TypeError(`No method named "${r}"`);n[r]()}else i.interval&&i.ride&&(n.pause(),n.cycle())}static jQueryInterface(t){return this.each((function(){Fe.carouselInterface(this,t)}))}static dataApiClickHandler(t){const e=Rt(this);if(!e||!e.classList.contains("carousel"))return;const n={...Ee.getDataAttributes(e),...Ee.getDataAttributes(this)},i=this.getAttribute("data-bs-slide-to");i&&(n.interval=!1),Fe.carouselInterface(e,n),i&&Fe.getInstance(e).to(i),t.preventDefault()}}pe.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",Fe.dataApiClickHandler),pe.on(window,"load.bs.carousel.data-api",(()=>{const t=Ie.find('[data-bs-ride="carousel"]');for(let e=0,n=t.length;e<n;e++)Fe.carouselInterface(t[e],Fe.getInstance(t[e]))})),Yt(Fe);const je="collapse",Ve={toggle:!0,parent:null},Ue={toggle:"boolean",parent:"(null|element)"},Be="show",qe="collapse",ze="collapsing",He="collapsed",$e='[data-bs-toggle="collapse"]';class We extends ye{constructor(t,e){super(t),this._isTransitioning=!1,this._config=this._getConfig(e),this._triggerArray=[];const n=Ie.find($e);for(let t=0,e=n.length;t<e;t++){const e=n[t],i=Pt(e),r=Ie.find(i).filter((t=>t===this._element));null!==i&&r.length&&(this._selector=i,this._triggerArray.push(e))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ve}static get NAME(){return je}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t,e=[];if(this._config.parent){const t=Ie.find(".collapse .collapse",this._config.parent);e=Ie.find(".collapse.show, .collapse.collapsing",this._config.parent).filter((e=>!t.includes(e)))}const n=Ie.findOne(this._selector);if(e.length){const i=e.find((t=>n!==t));if(t=i?We.getInstance(i):null,t&&t._isTransitioning)return}if(pe.trigger(this._element,"show.bs.collapse").defaultPrevented)return;e.forEach((e=>{n!==e&&We.getOrCreateInstance(e,{toggle:!1}).hide(),t||me.set(e,"bs.collapse",null)}));const i=this._getDimension();this._element.classList.remove(qe),this._element.classList.add(ze),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ze),this._element.classList.add(qe,Be),this._element.style[i]="",pe.trigger(this._element,"shown.bs.collapse")}),this._element,!0),this._element.style[i]=`${this._element[r]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(pe.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,$t(this._element),this._element.classList.add(ze),this._element.classList.remove(qe,Be);const e=this._triggerArray.length;for(let t=0;t<e;t++){const e=this._triggerArray[t],n=Rt(e);n&&!this._isShown(n)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(ze),this._element.classList.add(qe),pe.trigger(this._element,"hidden.bs.collapse")}),this._element,!0)}_isShown(t=this._element){return t.classList.contains(Be)}_getConfig(t){return(t={...Ve,...Ee.getDataAttributes(this._element),...t}).toggle=Boolean(t.toggle),t.parent=Vt(t.parent),Ut(je,t,Ue),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=Ie.find(".collapse .collapse",this._config.parent);Ie.find($e,this._config.parent).filter((e=>!t.includes(e))).forEach((t=>{const e=Rt(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}))}_addAriaAndCollapsedClass(t,e){t.length&&t.forEach((t=>{e?t.classList.remove(He):t.classList.add(He),t.setAttribute("aria-expanded",e)}))}static jQueryInterface(t){return this.each((function(){const e={};"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1);const n=We.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}pe.on(document,"click.bs.collapse.data-api",$e,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();const e=Pt(this);Ie.find(e).forEach((t=>{We.getOrCreateInstance(t,{toggle:!1}).toggle()}))})),Yt(We);const Ke="dropdown",Ge="Escape",Ye="Space",Xe="ArrowUp",Qe="ArrowDown",Je=new RegExp("ArrowUp|ArrowDown|Escape"),Ze="click.bs.dropdown.data-api",tn="keydown.bs.dropdown.data-api",en="show",nn='[data-bs-toggle="dropdown"]',rn=".dropdown-menu",sn=Gt()?"top-end":"top-start",on=Gt()?"top-start":"top-end",an=Gt()?"bottom-end":"bottom-start",cn=Gt()?"bottom-start":"bottom-end",ln=Gt()?"left-start":"right-start",un=Gt()?"right-start":"left-start",hn={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},dn={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class fn extends ye{constructor(t,e){super(t),this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return hn}static get DefaultType(){return dn}static get NAME(){return Ke}toggle(){return this._isShown()?this.hide():this.show()}show(){if(qt(this._element)||this._isShown(this._menu))return;const t={relatedTarget:this._element};if(pe.trigger(this._element,"show.bs.dropdown",t).defaultPrevented)return;const e=fn.getParentFromElement(this._element);this._inNavbar?Ee.setDataAttribute(this._menu,"popper","none"):this._createPopper(e),"ontouchstart"in document.documentElement&&!e.closest(".navbar-nav")&&[].concat(...document.body.children).forEach((t=>pe.on(t,"mouseover",Ht))),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(en),this._element.classList.add(en),pe.trigger(this._element,"shown.bs.dropdown",t)}hide(){if(qt(this._element)||!this._isShown(this._menu))return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){pe.trigger(this._element,"hide.bs.dropdown",t).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((t=>pe.off(t,"mouseover",Ht))),this._popper&&this._popper.destroy(),this._menu.classList.remove(en),this._element.classList.remove(en),this._element.setAttribute("aria-expanded","false"),Ee.removeDataAttribute(this._menu,"popper"),pe.trigger(this._element,"hidden.bs.dropdown",t))}_getConfig(t){if(t={...this.constructor.Default,...Ee.getDataAttributes(this._element),...t},Ut(Ke,t,this.constructor.DefaultType),"object"==typeof t.reference&&!jt(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${Ke.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(t){if(void 0===i)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=t:jt(this._config.reference)?e=Vt(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const n=this._getPopperConfig(),r=n.modifiers.find((t=>"applyStyles"===t.name&&!1===t.enabled));this._popper=Nt(e,this._menu,n),r&&Ee.setDataAttribute(this._menu,"popper","static")}_isShown(t=this._element){return t.classList.contains(en)}_getMenuElement(){return Ie.next(this._element,rn)[0]}_getPlacement(){const t=this._element.parentNode;if(t.classList.contains("dropend"))return ln;if(t.classList.contains("dropstart"))return un;const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?on:sn:e?cn:an}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return"static"===this._config.display&&(t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,..."function"==typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:e}){const n=Ie.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(Bt);n.length&&Jt(n,e,t===Qe,!n.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=fn.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(t&&(2===t.button||"keyup"===t.type&&"Tab"!==t.key))return;const e=Ie.find(nn);for(let n=0,i=e.length;n<i;n++){const i=fn.getInstance(e[n]);if(!i||!1===i._config.autoClose)continue;if(!i._isShown())continue;const r={relatedTarget:i._element};if(t){const e=t.composedPath(),n=e.includes(i._menu);if(e.includes(i._element)||"inside"===i._config.autoClose&&!n||"outside"===i._config.autoClose&&n)continue;if(i._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;"click"===t.type&&(r.clickEvent=t)}i._completeHide(r)}}static getParentFromElement(t){return Rt(t)||t.parentNode}static dataApiKeydownHandler(t){if(/input|textarea/i.test(t.target.tagName)?t.key===Ye||t.key!==Ge&&(t.key!==Qe&&t.key!==Xe||t.target.closest(rn)):!Je.test(t.key))return;const e=this.classList.contains(en);if(!e&&t.key===Ge)return;if(t.preventDefault(),t.stopPropagation(),qt(this))return;const n=this.matches(nn)?this:Ie.prev(this,nn)[0],i=fn.getOrCreateInstance(n);if(t.key!==Ge)return t.key===Xe||t.key===Qe?(e||i.show(),void i._selectMenuItem(t)):void(e&&t.key!==Ye||fn.clearMenus());i.hide()}}pe.on(document,tn,nn,fn.dataApiKeydownHandler),pe.on(document,tn,rn,fn.dataApiKeydownHandler),pe.on(document,Ze,fn.clearMenus),pe.on(document,"keyup.bs.dropdown.data-api",fn.clearMenus),pe.on(document,Ze,nn,(function(t){t.preventDefault(),fn.getOrCreateInstance(this).toggle()})),Yt(fn);const pn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",gn=".sticky-top";class mn{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",(e=>e+t)),this._setElementAttributes(pn,"paddingRight",(e=>e+t)),this._setElementAttributes(gn,"marginRight",(e=>e-t))}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const i=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+i)return;this._saveInitialAttribute(t,e);const r=window.getComputedStyle(t)[e];t.style[e]=`${n(Number.parseFloat(r))}px`}))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(pn,"paddingRight"),this._resetElementAttributes(gn,"marginRight")}_saveInitialAttribute(t,e){const n=t.style[e];n&&Ee.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const n=Ee.getDataAttribute(t,e);void 0===n?t.style.removeProperty(e):(Ee.removeDataAttribute(t,e),t.style[e]=n)}))}_applyManipulationCallback(t,e){jt(t)?e(t):Ie.find(t,this._element).forEach(e)}isOverflowing(){return this.getWidth()>0}}const yn={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},vn={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},bn="show",_n="mousedown.bs.backdrop";class wn{constructor(t){this._config=this._getConfig(t),this._isAppended=!1,this._element=null}show(t){this._config.isVisible?(this._append(),this._config.isAnimated&&$t(this._getElement()),this._getElement().classList.add(bn),this._emulateAnimation((()=>{Xt(t)}))):Xt(t)}hide(t){this._config.isVisible?(this._getElement().classList.remove(bn),this._emulateAnimation((()=>{this.dispose(),Xt(t)}))):Xt(t)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_getConfig(t){return(t={...yn,..."object"==typeof t?t:{}}).rootElement=Vt(t.rootElement),Ut("backdrop",t,vn),t}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),pe.on(this._getElement(),_n,(()=>{Xt(this._config.clickCallback)})),this._isAppended=!0)}dispose(){this._isAppended&&(pe.off(this._element,_n),this._element.remove(),this._isAppended=!1)}_emulateAnimation(t){Qt(t,this._getElement(),this._config.isAnimated)}}const xn={trapElement:null,autofocus:!0},Tn={trapElement:"element",autofocus:"boolean"},En=".bs.focustrap",In="backward";class Sn{constructor(t){this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:t,autofocus:e}=this._config;this._isActive||(e&&t.focus(),pe.off(document,En),pe.on(document,"focusin.bs.focustrap",(t=>this._handleFocusin(t))),pe.on(document,"keydown.tab.bs.focustrap",(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,pe.off(document,En))}_handleFocusin(t){const{target:e}=t,{trapElement:n}=this._config;if(e===document||e===n||n.contains(e))return;const i=Ie.focusableChildren(n);0===i.length?n.focus():this._lastTabNavDirection===In?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?In:"forward")}_getConfig(t){return t={...xn,..."object"==typeof t?t:{}},Ut("focustrap",t,Tn),t}}const kn="modal",An="Escape",Cn={backdrop:!0,keyboard:!0,focus:!0},Dn={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},Nn="hidden.bs.modal",On="show.bs.modal",Mn="resize.bs.modal",Ln="click.dismiss.bs.modal",Pn="keydown.dismiss.bs.modal",Rn="mousedown.dismiss.bs.modal",Fn="modal-open",jn="show",Vn="modal-static";class Un extends ye{constructor(t,e){super(t),this._config=this._getConfig(e),this._dialog=Ie.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new mn}static get Default(){return Cn}static get NAME(){return kn}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||pe.trigger(this._element,On,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(Fn),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),pe.on(this._dialog,Rn,(()=>{pe.one(this._element,"mouseup.dismiss.bs.modal",(t=>{t.target===this._element&&(this._ignoreBackdropClick=!0)}))})),this._showBackdrop((()=>this._showElement(t))))}hide(){if(!this._isShown||this._isTransitioning)return;if(pe.trigger(this._element,"hide.bs.modal").defaultPrevented)return;this._isShown=!1;const t=this._isAnimated();t&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(jn),pe.off(this._element,Ln),pe.off(this._dialog,Rn),this._queueCallback((()=>this._hideModal()),this._element,t)}dispose(){[window,this._dialog].forEach((t=>pe.off(t,".bs.modal"))),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new wn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Sn({trapElement:this._element})}_getConfig(t){return t={...Cn,...Ee.getDataAttributes(this._element),..."object"==typeof t?t:{}},Ut(kn,t,Dn),t}_showElement(t){const e=this._isAnimated(),n=Ie.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,n&&(n.scrollTop=0),e&&$t(this._element),this._element.classList.add(jn),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,pe.trigger(this._element,"shown.bs.modal",{relatedTarget:t})}),this._dialog,e)}_setEscapeEvent(){this._isShown?pe.on(this._element,Pn,(t=>{this._config.keyboard&&t.key===An?(t.preventDefault(),this.hide()):this._config.keyboard||t.key!==An||this._triggerBackdropTransition()})):pe.off(this._element,Pn)}_setResizeEvent(){this._isShown?pe.on(window,Mn,(()=>this._adjustDialog())):pe.off(window,Mn)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(Fn),this._resetAdjustments(),this._scrollBar.reset(),pe.trigger(this._element,Nn)}))}_showBackdrop(t){pe.on(this._element,Ln,(t=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:t.target===t.currentTarget&&(!0===this._config.backdrop?this.hide():"static"===this._config.backdrop&&this._triggerBackdropTransition())})),this._backdrop.show(t)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(pe.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const{classList:t,scrollHeight:e,style:n}=this._element,i=e>document.documentElement.clientHeight;!i&&"hidden"===n.overflowY||t.contains(Vn)||(i||(n.overflowY="hidden"),t.add(Vn),this._queueCallback((()=>{t.remove(Vn),i||this._queueCallback((()=>{n.overflowY=""}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;(!n&&t&&!Gt()||n&&!t&&Gt())&&(this._element.style.paddingLeft=`${e}px`),(n&&!t&&!Gt()||!n&&t&&Gt())&&(this._element.style.paddingRight=`${e}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=Un.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}}))}}pe.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',(function(t){const e=Rt(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),pe.one(e,On,(t=>{t.defaultPrevented||pe.one(e,Nn,(()=>{Bt(this)&&this.focus()}))}));const n=Ie.findOne(".modal.show");n&&Un.getInstance(n).hide(),Un.getOrCreateInstance(e).toggle(this)})),ve(Un),Yt(Un);const Bn="offcanvas",qn={backdrop:!0,keyboard:!0,scroll:!1},zn={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},Hn="show",$n=".offcanvas.show",Wn="hidden.bs.offcanvas";class Kn extends ye{constructor(t,e){super(t),this._config=this._getConfig(e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return Bn}static get Default(){return qn}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||pe.trigger(this._element,"show.bs.offcanvas",{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||(new mn).hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Hn),this._queueCallback((()=>{this._config.scroll||this._focustrap.activate(),pe.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:t})}),this._element,!0))}hide(){this._isShown&&(pe.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove(Hn),this._backdrop.hide(),this._queueCallback((()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||(new mn).reset(),pe.trigger(this._element,Wn)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(t){return t={...qn,...Ee.getDataAttributes(this._element),..."object"==typeof t?t:{}},Ut(Bn,t,zn),t}_initializeBackDrop(){return new wn({className:"offcanvas-backdrop",isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new Sn({trapElement:this._element})}_addEventListeners(){pe.on(this._element,"keydown.dismiss.bs.offcanvas",(t=>{this._config.keyboard&&"Escape"===t.key&&this.hide()}))}static jQueryInterface(t){return this.each((function(){const e=Kn.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}pe.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',(function(t){const e=Rt(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),qt(this))return;pe.one(e,Wn,(()=>{Bt(this)&&this.focus()}));const n=Ie.findOne($n);n&&n!==e&&Kn.getInstance(n).hide(),Kn.getOrCreateInstance(e).toggle(this)})),pe.on(window,"load.bs.offcanvas.data-api",(()=>Ie.find($n).forEach((t=>Kn.getOrCreateInstance(t).show())))),ve(Kn),Yt(Kn);const Gn=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Yn=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/i,Xn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Qn=(t,e)=>{const n=t.nodeName.toLowerCase();if(e.includes(n))return!Gn.has(n)||Boolean(Yn.test(t.nodeValue)||Xn.test(t.nodeValue));const i=e.filter((t=>t instanceof RegExp));for(let t=0,e=i.length;t<e;t++)if(i[t].test(n))return!0;return!1};function Jn(t,e,n){if(!t.length)return t;if(n&&"function"==typeof n)return n(t);const i=(new window.DOMParser).parseFromString(t,"text/html"),r=Object.keys(e),s=[].concat(...i.body.querySelectorAll("*"));for(let t=0,n=s.length;t<n;t++){const n=s[t],i=n.nodeName.toLowerCase();if(!r.includes(i)){n.remove();continue}const o=[].concat(...n.attributes),a=[].concat(e["*"]||[],e[i]||[]);o.forEach((t=>{Qn(t,a)||n.removeAttribute(t.nodeName)}))}return i.body.innerHTML}const Zn="tooltip",ti=new Set(["sanitize","allowList","sanitizeFn"]),ei={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},ni={AUTO:"auto",TOP:"top",RIGHT:Gt()?"left":"right",BOTTOM:"bottom",LEFT:Gt()?"right":"left"},ii={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},ri={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},si="fade",oi="show",ai="show",ci="out",li=".tooltip-inner",ui=".modal",hi="hide.bs.modal",di="hover",fi="focus";class pi extends ye{constructor(t,e){if(void 0===i)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(e),this.tip=null,this._setListeners()}static get Default(){return ii}static get NAME(){return Zn}static get Event(){return ri}static get DefaultType(){return ei}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(t){if(this._isEnabled)if(t){const e=this._initializeOnDelegatedTarget(t);e._activeTrigger.click=!e._activeTrigger.click,e._isWithActiveTrigger()?e._enter(null,e):e._leave(null,e)}else{if(this.getTipElement().classList.contains(oi))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),pe.off(this._element.closest(ui),hi,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this.isWithContent()||!this._isEnabled)return;const t=pe.trigger(this._element,this.constructor.Event.SHOW),e=zt(this._element),n=null===e?this._element.ownerDocument.documentElement.contains(this._element):e.contains(this._element);if(t.defaultPrevented||!n)return;"tooltip"===this.constructor.NAME&&this.tip&&this.getTitle()!==this.tip.querySelector(li).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);const i=this.getTipElement(),r=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME);i.setAttribute("id",r),this._element.setAttribute("aria-describedby",r),this._config.animation&&i.classList.add(si);const s="function"==typeof this._config.placement?this._config.placement.call(this,i,this._element):this._config.placement,o=this._getAttachment(s);this._addAttachmentClass(o);const{container:a}=this._config;me.set(i,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(i),pe.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=Nt(this._element,i,this._getPopperConfig(o)),i.classList.add(oi);const c=this._resolvePossibleFunction(this._config.customClass);c&&i.classList.add(...c.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((t=>{pe.on(t,"mouseover",Ht)}));const l=this.tip.classList.contains(si);this._queueCallback((()=>{const t=this._hoverState;this._hoverState=null,pe.trigger(this._element,this.constructor.Event.SHOWN),t===ci&&this._leave(null,this)}),this.tip,l)}hide(){if(!this._popper)return;const t=this.getTipElement();if(pe.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;t.classList.remove(oi),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((t=>pe.off(t,"mouseover",Ht))),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1;const e=this.tip.classList.contains(si);this._queueCallback((()=>{this._isWithActiveTrigger()||(this._hoverState!==ai&&t.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),pe.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())}),this.tip,e),this._hoverState=""}update(){null!==this._popper&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const t=document.createElement("div");t.innerHTML=this._config.template;const e=t.children[0];return this.setContent(e),e.classList.remove(si,oi),this.tip=e,this.tip}setContent(t){this._sanitizeAndSetContent(t,this.getTitle(),li)}_sanitizeAndSetContent(t,e,n){const i=Ie.findOne(n,t);e||!i?this.setElementContent(i,e):i.remove()}setElementContent(t,e){if(null!==t)return jt(e)?(e=Vt(e),void(this._config.html?e.parentNode!==t&&(t.innerHTML="",t.append(e)):t.textContent=e.textContent)):void(this._config.html?(this._config.sanitize&&(e=Jn(e,this._config.allowList,this._config.sanitizeFn)),t.innerHTML=e):t.textContent=e)}getTitle(){const t=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(t)}updateAttachment(t){return"right"===t?"end":"left"===t?"start":t}_initializeOnDelegatedTarget(t,e){return e||this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return"function"==typeof t?t.call(this._element):t}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:t=>this._handlePopperPlacementChange(t)}],onFirstUpdate:t=>{t.options.placement!==t.placement&&this._handlePopperPlacementChange(t)}};return{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_addAttachmentClass(t){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(t)}`)}_getAttachment(t){return ni[t.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach((t=>{if("click"===t)pe.on(this._element,this.constructor.Event.CLICK,this._config.selector,(t=>this.toggle(t)));else if("manual"!==t){const e=t===di?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,n=t===di?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;pe.on(this._element,e,this._config.selector,(t=>this._enter(t))),pe.on(this._element,n,this._config.selector,(t=>this._leave(t)))}})),this._hideModalHandler=()=>{this._element&&this.hide()},pe.on(this._element.closest(ui),hi,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const t=this._element.getAttribute("title"),e=typeof this._element.getAttribute("data-bs-original-title");(t||"string"!==e)&&(this._element.setAttribute("data-bs-original-title",t||""),!t||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",t),this._element.setAttribute("title",""))}_enter(t,e){e=this._initializeOnDelegatedTarget(t,e),t&&(e._activeTrigger["focusin"===t.type?fi:di]=!0),e.getTipElement().classList.contains(oi)||e._hoverState===ai?e._hoverState=ai:(clearTimeout(e._timeout),e._hoverState=ai,e._config.delay&&e._config.delay.show?e._timeout=setTimeout((()=>{e._hoverState===ai&&e.show()}),e._config.delay.show):e.show())}_leave(t,e){e=this._initializeOnDelegatedTarget(t,e),t&&(e._activeTrigger["focusout"===t.type?fi:di]=e._element.contains(t.relatedTarget)),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=ci,e._config.delay&&e._config.delay.hide?e._timeout=setTimeout((()=>{e._hoverState===ci&&e.hide()}),e._config.delay.hide):e.hide())}_isWithActiveTrigger(){for(const t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1}_getConfig(t){const e=Ee.getDataAttributes(this._element);return Object.keys(e).forEach((t=>{ti.has(t)&&delete e[t]})),(t={...this.constructor.Default,...e,..."object"==typeof t&&t?t:{}}).container=!1===t.container?document.body:Vt(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),Ut(Zn,t,this.constructor.DefaultType),t.sanitize&&(t.template=Jn(t.template,t.allowList,t.sanitizeFn)),t}_getDelegateConfig(){const t={};for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t}_cleanTipClass(){const t=this.getTipElement(),e=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),n=t.getAttribute("class").match(e);null!==n&&n.length>0&&n.map((t=>t.trim())).forEach((e=>t.classList.remove(e)))}_getBasicClassPrefix(){return"bs-tooltip"}_handlePopperPlacementChange(t){const{state:e}=t;e&&(this.tip=e.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(e.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(t){return this.each((function(){const e=pi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Yt(pi);const gi={...pi.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},mi={...pi.DefaultType,content:"(string|element|function)"},yi={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"};class vi extends pi{static get Default(){return gi}static get NAME(){return"popover"}static get Event(){return yi}static get DefaultType(){return mi}isWithContent(){return this.getTitle()||this._getContent()}setContent(t){this._sanitizeAndSetContent(t,this.getTitle(),".popover-header"),this._sanitizeAndSetContent(t,this._getContent(),".popover-body")}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return"bs-popover"}static jQueryInterface(t){return this.each((function(){const e=vi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}Yt(vi);const bi="scrollspy",_i={offset:10,method:"auto",target:""},wi={offset:"number",method:"string",target:"(string|element)"},xi="active",Ti=".nav-link, .list-group-item, .dropdown-item",Ei="position";class Ii extends ye{constructor(t,e){super(t),this._scrollElement="BODY"===this._element.tagName?window:this._element,this._config=this._getConfig(e),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,pe.on(this._scrollElement,"scroll.bs.scrollspy",(()=>this._process())),this.refresh(),this._process()}static get Default(){return _i}static get NAME(){return bi}refresh(){const t=this._scrollElement===this._scrollElement.window?"offset":Ei,e="auto"===this._config.method?t:this._config.method,n=e===Ei?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),Ie.find(Ti,this._config.target).map((t=>{const i=Pt(t),r=i?Ie.findOne(i):null;if(r){const t=r.getBoundingClientRect();if(t.width||t.height)return[Ee[e](r).top+n,i]}return null})).filter((t=>t)).sort(((t,e)=>t[0]-e[0])).forEach((t=>{this._offsets.push(t[0]),this._targets.push(t[1])}))}dispose(){pe.off(this._scrollElement,".bs.scrollspy"),super.dispose()}_getConfig(t){return(t={..._i,...Ee.getDataAttributes(this._element),..."object"==typeof t&&t?t:{}}).target=Vt(t.target)||document.documentElement,Ut(bi,t,wi),t}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=n){const t=this._targets[this._targets.length-1];this._activeTarget!==t&&this._activate(t)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(let e=this._offsets.length;e--;)this._activeTarget!==this._targets[e]&&t>=this._offsets[e]&&(void 0===this._offsets[e+1]||t<this._offsets[e+1])&&this._activate(this._targets[e])}}_activate(t){this._activeTarget=t,this._clear();const e=Ti.split(",").map((e=>`${e}[data-bs-target="${t}"],${e}[href="${t}"]`)),n=Ie.findOne(e.join(","),this._config.target);n.classList.add(xi),n.classList.contains("dropdown-item")?Ie.findOne(".dropdown-toggle",n.closest(".dropdown")).classList.add(xi):Ie.parents(n,".nav, .list-group").forEach((t=>{Ie.prev(t,".nav-link, .list-group-item").forEach((t=>t.classList.add(xi))),Ie.prev(t,".nav-item").forEach((t=>{Ie.children(t,".nav-link").forEach((t=>t.classList.add(xi)))}))})),pe.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:t})}_clear(){Ie.find(Ti,this._config.target).filter((t=>t.classList.contains(xi))).forEach((t=>t.classList.remove(xi)))}static jQueryInterface(t){return this.each((function(){const e=Ii.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}pe.on(window,"load.bs.scrollspy.data-api",(()=>{Ie.find('[data-bs-spy="scroll"]').forEach((t=>new Ii(t)))})),Yt(Ii);const Si="active",ki="fade",Ai="show",Ci=".active",Di=":scope > li > .active";class Ni extends ye{static get NAME(){return"tab"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(Si))return;let t;const e=Rt(this._element),n=this._element.closest(".nav, .list-group");if(n){const e="UL"===n.nodeName||"OL"===n.nodeName?Di:Ci;t=Ie.find(e,n),t=t[t.length-1]}const i=t?pe.trigger(t,"hide.bs.tab",{relatedTarget:this._element}):null;if(pe.trigger(this._element,"show.bs.tab",{relatedTarget:t}).defaultPrevented||null!==i&&i.defaultPrevented)return;this._activate(this._element,n);const r=()=>{pe.trigger(t,"hidden.bs.tab",{relatedTarget:this._element}),pe.trigger(this._element,"shown.bs.tab",{relatedTarget:t})};e?this._activate(e,e.parentNode,r):r()}_activate(t,e,n){const i=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?Ie.children(e,Ci):Ie.find(Di,e))[0],r=n&&i&&i.classList.contains(ki),s=()=>this._transitionComplete(t,i,n);i&&r?(i.classList.remove(Ai),this._queueCallback(s,t,!0)):s()}_transitionComplete(t,e,n){if(e){e.classList.remove(Si);const t=Ie.findOne(":scope > .dropdown-menu .active",e.parentNode);t&&t.classList.remove(Si),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}t.classList.add(Si),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),$t(t),t.classList.contains(ki)&&t.classList.add(Ai);let i=t.parentNode;if(i&&"LI"===i.nodeName&&(i=i.parentNode),i&&i.classList.contains("dropdown-menu")){const e=t.closest(".dropdown");e&&Ie.find(".dropdown-toggle",e).forEach((t=>t.classList.add(Si))),t.setAttribute("aria-expanded",!0)}n&&n()}static jQueryInterface(t){return this.each((function(){const e=Ni.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}pe.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),qt(this)||Ni.getOrCreateInstance(this).show()})),Yt(Ni);const Oi="toast",Mi="hide",Li="show",Pi="showing",Ri={animation:"boolean",autohide:"boolean",delay:"number"},Fi={animation:!0,autohide:!0,delay:5e3};class ji extends ye{constructor(t,e){super(t),this._config=this._getConfig(e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return Ri}static get Default(){return Fi}static get NAME(){return Oi}show(){pe.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Mi),$t(this._element),this._element.classList.add(Li),this._element.classList.add(Pi),this._queueCallback((()=>{this._element.classList.remove(Pi),pe.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this._element.classList.contains(Li)&&(pe.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(Pi),this._queueCallback((()=>{this._element.classList.add(Mi),this._element.classList.remove(Pi),this._element.classList.remove(Li),pe.trigger(this._element,"hidden.bs.toast")}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this._element.classList.contains(Li)&&this._element.classList.remove(Li),super.dispose()}_getConfig(t){return t={...Fi,...Ee.getDataAttributes(this._element),..."object"==typeof t&&t?t:{}},Ut(Oi,t,this.constructor.DefaultType),t}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){pe.on(this._element,"mouseover.bs.toast",(t=>this._onInteraction(t,!0))),pe.on(this._element,"mouseout.bs.toast",(t=>this._onInteraction(t,!1))),pe.on(this._element,"focusin.bs.toast",(t=>this._onInteraction(t,!0))),pe.on(this._element,"focusout.bs.toast",(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=ji.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}ve(ji),Yt(ji)},181:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Animation:()=>an,Animations:()=>ln,ArcElement:()=>cr,BarController:()=>Cn,BarElement:()=>Er,BasePlatform:()=>oi,BasicPlatform:()=>ai,BubbleController:()=>Dn,CategoryScale:()=>ds,Chart:()=>nr,DatasetController:()=>wn,Decimation:()=>Ar,DomPlatform:()=>_i,DoughnutController:()=>Nn,Element:()=>xi,Filler:()=>Hr,Interaction:()=>Kn,Legend:()=>Kr,LineController:()=>On,LineElement:()=>mr,LinearScale:()=>gs,LogarithmicScale:()=>ys,PieController:()=>Ln,PointElement:()=>vr,PolarAreaController:()=>Mn,RadarController:()=>Pn,RadialLinearScale:()=>Es,Scale:()=>Oi,ScatterController:()=>Rn,SubTitle:()=>Qr,Ticks:()=>Ei,TimeScale:()=>Os,TimeSeriesScale:()=>Ls,Title:()=>Yr,Tooltip:()=>us,_adapters:()=>Un,_detectPlatform:()=>wi,animator:()=>rn,controllers:()=>Fn,defaults:()=>jt,elements:()=>Ir,layouts:()=>si,plugins:()=>hs,registerables:()=>Rs,registry:()=>Li,scales:()=>Ps});const i="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function r(t,e,n){const r=n||(t=>Array.prototype.slice.call(t));let s=!1,o=[];return function(...n){o=r(n),s||(s=!0,i.call(window,(()=>{s=!1,t.apply(e,o)})))}}const s=t=>"start"===t?"left":"end"===t?"right":"center",o=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function a(){}const c=function(){let t=0;return function(){return t++}}();function l(t){return null==t}function u(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)}function h(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}const d=t=>("number"==typeof t||t instanceof Number)&&isFinite(+t);function f(t,e){return d(t)?t:e}function p(t,e){return void 0===t?e:t}const g=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function m(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function y(t,e,n,i){let r,s,o;if(u(t))if(s=t.length,i)for(r=s-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<s;r++)e.call(n,t[r],r);else if(h(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function v(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function b(t){if(u(t))return t.map(b);if(h(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=b(t[n[r]]);return e}return t}function _(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function w(t,e,n,i){if(!_(t))return;const r=e[t],s=n[t];h(r)&&h(s)?x(r,s,i):e[t]=b(s)}function x(t,e,n){const i=u(e)?e:[e],r=i.length;if(!h(t))return t;const s=(n=n||{}).merger||w;for(let o=0;o<r;++o){if(!h(e=i[o]))continue;const r=Object.keys(e);for(let i=0,o=r.length;i<o;++i)s(r[i],t,e,n)}return t}function T(t,e){return x(t,e,{merger:E})}function E(t,e,n){if(!_(t))return;const i=e[t],r=n[t];h(i)&&h(r)?T(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=b(r))}function I(t,e){const n=t.indexOf(".",e);return-1===n?t.length:n}function S(t,e){if(""===e)return t;let n=0,i=I(e,n);for(;t&&i>n;)t=t[e.substr(n,i-n)],n=i+1,i=I(e,n);return t}function k(t){return t.charAt(0).toUpperCase()+t.slice(1)}const A=t=>void 0!==t,C=t=>"function"==typeof t,D=Math.PI,N=2*D,O=N+D,M=Number.POSITIVE_INFINITY,L=D/180,P=D/2,R=D/4,F=2*D/3,j=Math.log10,V=Math.sign;function U(t){const e=Math.round(t);t=q(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(j(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function B(t){return!isNaN(parseFloat(t))&&isFinite(t)}function q(t,e,n){return Math.abs(t-e)<n}function z(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function H(t){return t*(D/180)}function $(t){return t*(180/D)}function W(t){if(!d(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function K(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function G(t,e){return(t-e+O)%N-D}function Y(t){return(t%N+N)%N}function X(t,e,n,i){const r=Y(t),s=Y(e),o=Y(n),a=Y(s-r),c=Y(o-r),l=Y(r-s),u=Y(r-o);return r===s||r===o||i&&s===o||a>c&&l<u}function Q(t,e,n){return Math.max(e,Math.min(n,t))}const J=t=>0===t||1===t,Z=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*N/n),tt=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*N/n)+1,et={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*P),easeOutSine:t=>Math.sin(t*P),easeInOutSine:t=>-.5*(Math.cos(D*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>J(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>J(t)?t:Z(t,.075,.3),easeOutElastic:t=>J(t)?t:tt(t,.075,.3),easeInOutElastic(t){const e=.1125;return J(t)?t:t<.5?.5*Z(2*t,e,.45):.5+.5*tt(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-et.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*et.easeInBounce(2*t):.5*et.easeOutBounce(2*t-1)+.5},nt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},it="0123456789ABCDEF",rt=t=>it[15&t],st=t=>it[(240&t)>>4]+it[15&t],ot=t=>(240&t)>>4==(15&t);function at(t){return t+.5|0}const ct=(t,e,n)=>Math.max(Math.min(t,n),e);function lt(t){return ct(at(2.55*t),0,255)}function ut(t){return ct(at(255*t),0,255)}function ht(t){return ct(at(t/2.55)/100,0,1)}function dt(t){return ct(at(100*t),0,100)}const ft=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,pt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function gt(t,e,n){const i=e*Math.min(n,1-n),r=(e,r=(e+t/30)%12)=>n-i*Math.max(Math.min(r-3,9-r,1),-1);return[r(0),r(8),r(4)]}function mt(t,e,n){const i=(i,r=(i+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function yt(t,e,n){const i=gt(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function vt(t){const e=t.r/255,n=t.g/255,i=t.b/255,r=Math.max(e,n,i),s=Math.min(e,n,i),o=(r+s)/2;let a,c,l;return r!==s&&(l=r-s,c=o>.5?l/(2-r-s):l/(r+s),a=r===e?(n-i)/l+(n<i?6:0):r===n?(i-e)/l+2:(e-n)/l+4,a=60*a+.5),[0|a,c||0,o]}function bt(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(ut)}function _t(t,e,n){return bt(gt,t,e,n)}function wt(t){return(t%360+360)%360}const xt={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Tt={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Et;function It(t,e,n){if(t){let i=vt(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=_t(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function St(t,e){return t?Object.assign(e||{},t):t}function kt(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ut(t[3]))):(e=St(t,{r:0,g:0,b:0,a:1})).a=ut(e.a),e}function At(t){return"r"===t.charAt(0)?function(t){const e=ft.exec(t);let n,i,r,s=255;if(e){if(e[7]!==n){const t=+e[7];s=255&(e[8]?lt(t):255*t)}return n=+e[1],i=+e[3],r=+e[5],n=255&(e[2]?lt(n):n),i=255&(e[4]?lt(i):i),r=255&(e[6]?lt(r):r),{r:n,g:i,b:r,a:s}}}(t):function(t){const e=pt.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?lt(+e[5]):ut(+e[5]));const r=wt(+e[2]),s=+e[3]/100,o=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return bt(yt,t,e,n)}(r,s,o):"hsv"===e[1]?function(t,e,n){return bt(mt,t,e,n)}(r,s,o):_t(r,s,o),{r:n[0],g:n[1],b:n[2],a:i}}(t)}class Ct{constructor(t){if(t instanceof Ct)return t;const e=typeof t;let n;var i,r,s;"object"===e?n=kt(t):"string"===e&&(s=(i=t).length,"#"===i[0]&&(4===s||5===s?r={r:255&17*nt[i[1]],g:255&17*nt[i[2]],b:255&17*nt[i[3]],a:5===s?17*nt[i[4]]:255}:7!==s&&9!==s||(r={r:nt[i[1]]<<4|nt[i[2]],g:nt[i[3]]<<4|nt[i[4]],b:nt[i[5]]<<4|nt[i[6]],a:9===s?nt[i[7]]<<4|nt[i[8]]:255})),n=r||function(t){Et||(Et=function(){const t={},e=Object.keys(Tt),n=Object.keys(xt);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,xt[s]);s=parseInt(Tt[o],16),t[a]=[s>>16&255,s>>8&255,255&s]}return t}(),Et.transparent=[0,0,0,0]);const e=Et[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(t)||At(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=St(this._rgb);return t&&(t.a=ht(t.a)),t}set rgb(t){this._rgb=kt(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ht(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):this._rgb;var t}hexString(){return this._valid?(t=this._rgb,e=function(t){return ot(t.r)&&ot(t.g)&&ot(t.b)&&ot(t.a)}(t)?rt:st,t?"#"+e(t.r)+e(t.g)+e(t.b)+(t.a<255?e(t.a):""):t):this._rgb;var t,e}hslString(){return this._valid?function(t){if(!t)return;const e=vt(t),n=e[0],i=dt(e[1]),r=dt(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${ht(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}(this._rgb):this._rgb}mix(t,e){const n=this;if(t){const i=n.rgb,r=t.rgb;let s;const o=e===s?.5:e,a=2*o-1,c=i.a-r.a,l=((a*c==-1?a:(a+c)/(1+a*c))+1)/2;s=1-l,i.r=255&l*i.r+s*r.r+.5,i.g=255&l*i.g+s*r.g+.5,i.b=255&l*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,n.rgb=i}return n}clone(){return new Ct(this.rgb)}alpha(t){return this._rgb.a=ut(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=at(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return It(this._rgb,2,t),this}darken(t){return It(this._rgb,2,-t),this}saturate(t){return It(this._rgb,1,t),this}desaturate(t){return It(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=vt(t);n[0]=wt(n[0]+e),n=_t(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function Dt(t){return new Ct(t)}const Nt=t=>t instanceof CanvasGradient||t instanceof CanvasPattern;function Ot(t){return Nt(t)?t:Dt(t)}function Mt(t){return Nt(t)?t:Dt(t).saturate(.5).darken(.1).hexString()}const Lt=Object.create(null),Pt=Object.create(null);function Rt(t,e){if(!e)return t;const n=e.split(".");for(let e=0,i=n.length;e<i;++e){const i=n[e];t=t[i]||(t[i]=Object.create(null))}return t}function Ft(t,e,n){return"string"==typeof e?x(Rt(t,e),n):x(Rt(t,""),e)}var jt=new class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>Mt(e.backgroundColor),this.hoverBorderColor=(t,e)=>Mt(e.borderColor),this.hoverColor=(t,e)=>Mt(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.describe(t)}set(t,e){return Ft(this,t,e)}get(t){return Rt(this,t)}describe(t,e){return Ft(Pt,t,e)}override(t,e){return Ft(Lt,t,e)}route(t,e,n,i){const r=Rt(this,t),s=Rt(this,n),o="_"+e;Object.defineProperties(r,{[o]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[o],e=s[i];return h(t)?Object.assign({},e,t):p(t,e)},set(t){this[o]=t}}})}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Vt(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function Ut(t,e,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let c,l,h,d,f;for(c=0;c<a;c++)if(d=n[c],null!=d&&!0!==u(d))o=Vt(t,r,s,o,d);else if(u(d))for(l=0,h=d.length;l<h;l++)f=d[l],null==f||u(f)||(o=Vt(t,r,s,o,f));t.restore();const p=s.length/2;if(p>n.length){for(c=0;c<p;c++)delete r[s[c]];s.splice(0,p)}return o}function Bt(t,e,n){const i=t.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function qt(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function zt(t,e,n,i){let r,s,o,a,c;const l=e.pointStyle,u=e.rotation,h=e.radius;let d=(u||0)*L;if(l&&"object"==typeof l&&(r=l.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return t.save(),t.translate(n,i),t.rotate(d),t.drawImage(l,-l.width/2,-l.height/2,l.width,l.height),void t.restore();if(!(isNaN(h)||h<=0)){switch(t.beginPath(),l){default:t.arc(n,i,h,0,N),t.closePath();break;case"triangle":t.moveTo(n+Math.sin(d)*h,i-Math.cos(d)*h),d+=F,t.lineTo(n+Math.sin(d)*h,i-Math.cos(d)*h),d+=F,t.lineTo(n+Math.sin(d)*h,i-Math.cos(d)*h),t.closePath();break;case"rectRounded":c=.516*h,a=h-c,s=Math.cos(d+R)*a,o=Math.sin(d+R)*a,t.arc(n-s,i-o,c,d-D,d-P),t.arc(n+o,i-s,c,d-P,d),t.arc(n+s,i+o,c,d,d+P),t.arc(n-o,i+s,c,d+P,d+D),t.closePath();break;case"rect":if(!u){a=Math.SQRT1_2*h,t.rect(n-a,i-a,2*a,2*a);break}d+=R;case"rectRot":s=Math.cos(d)*h,o=Math.sin(d)*h,t.moveTo(n-s,i-o),t.lineTo(n+o,i-s),t.lineTo(n+s,i+o),t.lineTo(n-o,i+s),t.closePath();break;case"crossRot":d+=R;case"cross":s=Math.cos(d)*h,o=Math.sin(d)*h,t.moveTo(n-s,i-o),t.lineTo(n+s,i+o),t.moveTo(n+o,i-s),t.lineTo(n-o,i+s);break;case"star":s=Math.cos(d)*h,o=Math.sin(d)*h,t.moveTo(n-s,i-o),t.lineTo(n+s,i+o),t.moveTo(n+o,i-s),t.lineTo(n-o,i+s),d+=R,s=Math.cos(d)*h,o=Math.sin(d)*h,t.moveTo(n-s,i-o),t.lineTo(n+s,i+o),t.moveTo(n+o,i-s),t.lineTo(n-o,i+s);break;case"line":s=Math.cos(d)*h,o=Math.sin(d)*h,t.moveTo(n-s,i-o),t.lineTo(n+s,i+o);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(d)*h,i+Math.sin(d)*h)}t.fill(),e.borderWidth>0&&t.stroke()}}function Ht(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function $t(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Wt(t){t.restore()}function Kt(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if("middle"===r){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===r!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Gt(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Yt(t,e,n,i,r,s={}){const o=u(e)?e:[e],a=s.strokeWidth>0&&""!==s.strokeColor;let c,h;for(t.save(),t.font=r.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),l(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),c=0;c<o.length;++c)h=o[c],a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),l(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(h,n,i,s.maxWidth)),t.fillText(h,n,i,s.maxWidth),Xt(t,n,i,h,s),i+=r.lineHeight;t.restore()}function Xt(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=n-s.actualBoundingBoxAscent,l=n+s.actualBoundingBoxDescent,u=r.strikethrough?(c+l)/2:l;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Qt(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,-P,D,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,D,P,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,P,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-P,!0),t.lineTo(n+o.topLeft,i)}const Jt=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Zt=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function te(t,e){const n=(""+t).match(Jt);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}function ee(t,e){const n={},i=h(e),r=i?Object.keys(e):e,s=h(t)?i?n=>p(t[n],t[e[n]]):e=>t[e]:()=>t;for(const t of r)n[t]=+s(t)||0;return n}function ne(t){return ee(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ie(t){return ee(t,["topLeft","topRight","bottomLeft","bottomRight"])}function re(t){const e=ne(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function se(t,e){t=t||{},e=e||jt.font;let n=p(t.size,e.size);"string"==typeof n&&(n=parseInt(n,10));let i=p(t.style,e.style);i&&!(""+i).match(Zt)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");const r={family:p(t.family,e.family),lineHeight:te(p(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:p(t.weight,e.weight),string:""};return r.string=function(t){return!t||l(t.size)||l(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(r),r}function oe(t,e,n,i){let r,s,o,a=!0;for(r=0,s=t.length;r<s;++r)if(o=t[r],void 0!==o&&(void 0!==e&&"function"==typeof o&&(o=o(e),a=!1),void 0!==n&&u(o)&&(o=o[n%o.length],a=!1),void 0!==o))return i&&!a&&(i.cacheable=!1),o}function ae(t,e,n){n=n||(n=>t[n]<e);let i,r=t.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const ce=(t,e,n)=>ae(t,n,(i=>t[i][e]<n)),le=(t,e,n)=>ae(t,n,(i=>t[i][e]>=n)),ue=["push","pop","shift","splice","unshift"];function he(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);-1!==r&&i.splice(r,1),i.length>0||(ue.forEach((e=>{delete t[e]})),delete t._chartjs)}function de(t){const e=new Set;let n,i;for(n=0,i=t.length;n<i;++n)e.add(t[n]);return e.size===i?t:Array.from(e)}function fe(t,e=[""],n=t,i,r=(()=>t[0])){A(i)||(i=Ee("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:i,_getTarget:r,override:r=>fe([r,...t],e,n,i)};return new Proxy(s,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>ve(n,i,(()=>function(t,e,n,i){let r;for(const s of e)if(r=Ee(me(s,t),n),A(r))return ye(t,r)?xe(n,i,t,r):r}(i,e,t,n))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>Ie(t).includes(e),ownKeys:t=>Ie(t),set:(t,e,n)=>((t._storage||(t._storage=r()))[e]=n,delete t[e],delete t._keys,!0)})}function pe(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:ge(t,i),setContext:e=>pe(t,e,n,i),override:r=>pe(t.override(r),e,n,i)};return new Proxy(r,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>ve(t,e,(()=>function(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return C(a)&&o.isScriptable(e)&&(a=function(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);return a.add(t),e=e(s,o||i),a.delete(t),h(e)&&(e=xe(r._scopes,r,t,e)),e}(e,a,t,n)),u(a)&&a.length&&(a=function(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(A(s.index)&&i(t))e=e[s.index%e.length];else if(h(e[0])){const n=e,i=r._scopes.filter((t=>t!==n));e=[];for(const c of n){const n=xe(i,r,t,c);e.push(pe(n,s,o&&o[t],a))}}return e}(e,a,t,o.isIndexable)),ye(e,a)&&(a=pe(a,r,s&&s[e],o)),a}(t,e,n))),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function ge(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:C(n)?n:()=>n,isIndexable:C(i)?i:()=>i}}const me=(t,e)=>t?t+k(e):e,ye=(t,e)=>h(e)&&"adapters"!==t;function ve(t,e,n){let i=t[e];return A(i)||(i=n(),A(i)&&(t[e]=i)),i}function be(t,e,n){return C(t)?t(e,n):t}const _e=(t,e)=>!0===t?e:"string"==typeof t?S(e,t):void 0;function we(t,e,n,i){for(const r of e){const e=_e(n,r);if(e){t.add(e);const r=be(e._fallback,n,e);if(A(r)&&r!==n&&r!==i)return r}else if(!1===e&&A(i)&&n!==i)return null}return!1}function xe(t,e,n,i){const r=e._rootScopes,s=be(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let c=Te(a,o,n,s||n);return null!==c&&(!A(s)||s===n||(c=Te(a,o,s,c),null!==c))&&fe(Array.from(a),[""],r,s,(()=>function(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return u(r)&&h(n)?n:r}(e,n,i)))}function Te(t,e,n,i){for(;n;)n=we(t,e,n,i);return n}function Ee(t,e){for(const n of e){if(!n)continue;const e=n[t];if(A(e))return e}}function Ie(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}const Se=Number.EPSILON||1e-14,ke=(t,e)=>e<t.length&&!t[e].skip&&t[e],Ae=t=>"x"===t?"y":"x";function Ce(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=K(s,r),c=K(o,s);let l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;const h=i*l,d=i*u;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function De(t,e,n){return Math.max(Math.min(t,n),e)}function Ne(t,e,n,i,r){let s,o,a,c;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)!function(t,e="x"){const n=Ae(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,c,l=ke(t,0);for(o=0;o<i;++o)if(a=c,c=l,l=ke(t,o+1),c){if(l){const t=l[e]-c[e];r[o]=0!==t?(l[n]-c[n])/t:0}s[o]=a?l?V(r[o-1])!==V(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}!function(t,e,n){const i=t.length;let r,s,o,a,c,l=ke(t,0);for(let u=0;u<i-1;++u)c=l,l=ke(t,u+1),c&&l&&(q(e[u],0,Se)?n[u]=n[u+1]=0:(r=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=s*o*e[u])))}(t,r,s),function(t,e,n="x"){const i=Ae(n),r=t.length;let s,o,a,c=ke(t,0);for(let l=0;l<r;++l){if(o=a,a=c,c=ke(t,l+1),!a)continue;const r=a[n],u=a[i];o&&(s=(r-o[n])/3,a[`cp1${n}`]=r-s,a[`cp1${i}`]=u-s*e[l]),c&&(s=(c[n]-r)/3,a[`cp2${n}`]=r+s,a[`cp2${i}`]=u+s*e[l])}}(t,s,e)}(t,r);else{let n=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],c=Ce(n,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,n=a}e.capBezierPoints&&function(t,e){let n,i,r,s,o,a=Ht(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&Ht(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=De(r.cp1x,e.left,e.right),r.cp1y=De(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=De(r.cp2x,e.left,e.right),r.cp2y=De(r.cp2y,e.top,e.bottom)))}(t,n)}function Oe(){return"undefined"!=typeof window&&"undefined"!=typeof document}function Me(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function Le(t,e,n){let i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const Pe=t=>window.getComputedStyle(t,null),Re=["top","right","bottom","left"];function Fe(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Re[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function je(t,e){const{canvas:n,currentDevicePixelRatio:i}=e,r=Pe(n),s="border-box"===r.boxSizing,o=Fe(r,"padding"),a=Fe(r,"border","width"),{x:c,y:l,box:u}=function(t,e){const n=t.native||t,i=n.touches,r=i&&i.length?i[0]:n,{offsetX:s,offsetY:o}=r;let a,c,l=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(s,o,n.target))a=s,c=o;else{const t=e.getBoundingClientRect();a=r.clientX-t.left,c=r.clientY-t.top,l=!0}return{x:a,y:c,box:l}}(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((c-h)/f*n.width/i),y:Math.round((l-d)/p*n.height/i)}}const Ve=t=>Math.round(10*t)/10;function Ue(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=r/i,t.width=s/i;const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0)}const Be=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function qe(t,e){const n=function(t,e){return Pe(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ze(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function He(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function $e(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=ze(t,r,n),a=ze(r,s,n),c=ze(s,e,n),l=ze(o,a,n),u=ze(a,c,n);return ze(l,u,n)}const We=new Map;function Ke(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=We.get(n);return i||(i=new Intl.NumberFormat(t,e),We.set(n,i)),i}(e,n).format(t)}function Ge(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function Ye(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Xe(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Qe(t){return"angle"===t?{between:X,compare:G,normalize:Y}:{between:(t,e,n)=>t>=Math.min(e,n)&&t<=Math.max(n,e),compare:(t,e)=>t-e,normalize:t=>t}}function Je({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n==0,style:r}}function Ze(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:c,normalize:l}=Qe(i),{start:u,end:h,loop:d,style:f}=function(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=Qe(i),c=e.length;let l,u,{start:h,end:d,loop:f}=t;if(f){for(h+=c,d+=c,l=0,u=c;l<u&&o(a(e[h%c][i]),r,s);++l)h--,d--;h%=c,d%=c}return d<h&&(d+=c),{start:h,end:d,loop:f,style:t.style}}(t,e,n),p=[];let g,m,y,v=!1,b=null;for(let t=u,n=u;t<=h;++t)m=e[t%o],m.skip||(g=l(m[i]),g!==y&&(v=c(g,r,s),null===b&&(v||c(r,y,g)&&0!==a(r,y))&&(b=0===a(g,r)?t:n),null!==b&&(!v||0===a(s,g)||c(s,y,g))&&(p.push(Je({start:b,end:t,loop:d,count:o,style:f})),b=null),n=t,y=g));return null!==b&&p.push(Je({start:b,end:h,loop:d,count:o,style:f})),p}function tn(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=Ze(i[r],t.points,e);s.length&&n.push(...s)}return n}function en(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function nn(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}var rn=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const r=e.listeners[i],s=e.duration;r.forEach((i=>i({chart:t,initial:e.initial,numSteps:s,currentStep:Math.min(n-e.start,s)})))}_refresh(){const t=this;t._request||(t._running=!0,t._request=i.call(window,(()=>{t._update(),t._request=null,t._running&&t._refresh()})))}_update(t=Date.now()){const e=this;let n=0;e._charts.forEach(((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o,a=s.length-1,c=!1;for(;a>=0;--a)o=s[a],o._active?(o._total>i.duration&&(i.duration=o._total),o.tick(t),c=!0):(s[a]=s[s.length-1],s.pop());c&&(r.draw(),e._notify(r,i,t,"progress")),s.length||(i.running=!1,e._notify(r,i,t,"complete"),i.initial=!1),n+=s.length})),e._lastDate=t,0===n&&(e._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const sn="transparent",on={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=Ot(t||sn),r=i.valid&&Ot(e||sn);return r&&r.valid?r.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class an{constructor(t,e,n,i){const r=e[n];i=oe([t.to,i,r,t.from]);const s=oe([t.from,r,i]);this._active=!0,this._fn=t.fn||on[t.type||typeof s],this._easing=et[t.easing]||et.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){const i=this;if(i._active){i._notify(!1);const r=i._target[i._prop],s=n-i._start,o=i._duration-s;i._start=n,i._duration=Math.floor(Math.max(o,t.duration)),i._total+=s,i._loop=!!t.loop,i._to=oe([t.to,e,r,t.from]),i._from=oe([t.from,r,e])}}cancel(){const t=this;t._active&&(t.tick(Date.now()),t._active=!1,t._notify(!1))}tick(t){const e=this,n=t-e._start,i=e._duration,r=e._prop,s=e._from,o=e._loop,a=e._to;let c;if(e._active=s!==a&&(o||n<i),!e._active)return e._target[r]=a,void e._notify(!0);n<0?e._target[r]=s:(c=n/i%2,c=o&&c>1?2-c:c,c=e._easing(Math.min(1,Math.max(0,c))),e._target[r]=e._fn(s,a,c))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}jt.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const cn=Object.keys(jt.animation);jt.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),jt.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),jt.describe("animations",{_fallback:"animation"}),jt.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class ln{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!h(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach((n=>{const i=t[n];if(!h(i))return;const r={};for(const t of cn)r[t]=i[t];(u(i.properties)&&i.properties||[n]).forEach((t=>{t!==n&&e.has(t)||e.set(t,r)}))}))}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(n)return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n;t.options=e}(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let e=0;e<i.length;e++){const r=t[i[e]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),r}_createAnimations(t,e){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),s=Object.keys(e),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const c=s[a];if("$"===c.charAt(0))continue;if("options"===c){i.push(...this._animateOptions(t,e));continue}const l=e[c];let u=r[c];const h=n.get(c);if(u){if(h&&u.active()){u.update(h,l,o);continue}u.cancel()}h&&h.duration?(r[c]=u=new an(h,t,c,l),i.push(u)):t[c]=l}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(rn.add(this._chart,n),!0):void 0}}function un(t,e){const n=t&&t.options||{},i=n.reverse,r=void 0===n.min?e:0,s=void 0===n.max?e:0;return{start:i?s:r,end:i?r:s}}function hn(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function dn(t,e,n,i){const r=t.keys,s="single"===i.mode;let o,a,c,l;if(null!==e){for(o=0,a=r.length;o<a;++o){if(c=+r[o],c===n){if(i.all)continue;break}l=t.values[c],d(l)&&(s||0===e||V(e)===V(l))&&(e+=l)}return e}}function fn(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function pn(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function gn(t,e,n){for(const i of e.getMatchingVisibleMetas("bar").reverse()){const e=t[i.index];if(n&&e>0||!n&&e<0)return i.index}return null}function mn(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,c=s.axis,l=o.axis,u=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(s,o,i),h=e.length;let d;for(let t=0;t<h;++t){const n=e[t],{[c]:i,[l]:s}=n;d=(n._stacks||(n._stacks={}))[l]=pn(r,u,i),d[a]=s,d._top=gn(d,o,!0),d._bottom=gn(d,o,!1)}}function yn(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function vn(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n]}}}const bn=t=>"reset"===t||"none"===t,_n=(t,e)=>e?t:Object.assign({},t);class wn{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this,e=t._cachedMeta;t.configure(),t.linkScales(),e._stacked=fn(e.vScale,e),t.addElements()}updateIndex(t){this.index!==t&&vn(this._cachedMeta),this.index=t}linkScales(){const t=this,e=t.chart,n=t._cachedMeta,i=t.getDataset(),r=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,s=n.xAxisID=p(i.xAxisID,yn(e,"x")),o=n.yAxisID=p(i.yAxisID,yn(e,"y")),a=n.rAxisID=p(i.rAxisID,yn(e,"r")),c=n.indexAxis,l=n.iAxisID=r(c,s,o,a),u=n.vAxisID=r(c,o,s,a);n.xScale=t.getScaleForId(s),n.yScale=t.getScaleForId(o),n.rScale=t.getScaleForId(a),n.iScale=t.getScaleForId(l),n.vScale=t.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&he(this._data,this),t._stacked&&vn(t)}_dataCheck(){const t=this,e=t.getDataset(),n=e.data||(e.data=[]),i=t._data;if(h(n))t._data=function(t){const e=Object.keys(t),n=new Array(e.length);let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],n[i]={x:s,y:t[s]};return n}(n);else if(i!==n){if(i){he(i,t);const e=t._cachedMeta;vn(e),e._parsed=[]}n&&Object.isExtensible(n)&&(s=t,(r=n)._chartjs?r._chartjs.listeners.push(s):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),ue.forEach((t=>{const e="_onData"+k(t),n=r[t];Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value(...t){const i=n.apply(this,t);return r._chartjs.listeners.forEach((n=>{"function"==typeof n[e]&&n[e](...t)})),i}})})))),t._syncList=[],t._data=n}var r,s}addElements(){const t=this,e=t._cachedMeta;t._dataCheck(),t.datasetElementType&&(e.dataset=new t.datasetElementType)}buildOrUpdateElements(t){const e=this,n=e._cachedMeta,i=e.getDataset();let r=!1;e._dataCheck();const s=n._stacked;n._stacked=fn(n.vScale,n),n.stack!==i.stack&&(r=!0,vn(n),n.stack=i.stack),e._resyncElements(t),(r||s!==n._stacked)&&mn(e,n._parsed)}configure(){const t=this,e=t.chart.config,n=e.datasetScopeKeys(t._type),i=e.getOptionScopes(t.getDataset(),n,!0);t.options=e.createResolver(i,t.getContext()),t._parsing=t.options.parsing}parse(t,e){const n=this,{_cachedMeta:i,_data:r}=n,{iScale:s,_stacked:o}=i,a=s.axis;let c,l,d,f=0===t&&e===r.length||i._sorted,p=t>0&&i._parsed[t-1];if(!1===n._parsing)i._parsed=r,i._sorted=!0,d=r;else{d=u(r[t])?n.parseArrayData(i,r,t,e):h(r[t])?n.parseObjectData(i,r,t,e):n.parsePrimitiveData(i,r,t,e);const s=()=>null===l[a]||p&&l[a]<p[a];for(c=0;c<e;++c)i._parsed[c+t]=l=d[c],f&&(s()&&(f=!1),p=l);i._sorted=f}o&&mn(n,d)}parsePrimitiveData(t,e,n,i){const{iScale:r,vScale:s}=t,o=r.axis,a=s.axis,c=r.getLabels(),l=r===s,u=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,u[h]={[o]:l||r.parse(c[f],f),[a]:s.parse(e[f],f)};return u}parseArrayData(t,e,n,i){const{xScale:r,yScale:s}=t,o=new Array(i);let a,c,l,u;for(a=0,c=i;a<c;++a)l=a+n,u=e[l],o[a]={x:r.parse(u[0],l),y:s.parse(u[1],l)};return o}parseObjectData(t,e,n,i){const{xScale:r,yScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,c=new Array(i);let l,u,h,d;for(l=0,u=i;l<u;++l)h=l+n,d=e[h],c[l]={x:r.parse(S(d,o),h),y:s.parse(S(d,a),h)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,r=this._cachedMeta,s=e[t.axis];return dn({keys:hn(i,!0),values:e._stacks[t.axis]},s,r.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const r=n[e.axis];let s=null===r?NaN:r;const o=i&&n._stacks[e.axis];i&&o&&(i.values=o,t.min=Math.min(t.min,s),t.max=Math.max(t.max,s),s=dn(i,r,this._cachedMeta.index,{all:!0})),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){const n=this,i=n._cachedMeta,r=i._parsed,s=i._sorted&&t===i.iScale,o=r.length,a=n._getOtherScale(t),c=e&&i._stacked&&{keys:hn(n.chart,!0),values:null},l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=function(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(a);let f,p,g,m;function y(){return g=r[f],p=g[t.axis],m=g[a.axis],!d(p)||u>m||h<m}for(f=0;f<o&&(y()||(n.updateRangeFromParsed(l,t,g,c),!s));++f);if(s)for(f=o-1;f>=0;--f)if(!y()){n.updateRangeFromParsed(l,t,g,c);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i][t.axis],d(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this,n=e._cachedMeta;e.configure(),e._cachedDataOpts={},e.update(t||"default"),n._clip=function(t){let e,n,i,r;return h(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}(p(e.options.clip,function(t,e,n){if(!1===n)return!1;const i=un(t,n),r=un(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(n.xScale,n.yScale,e.getMaxOverflow())))}update(t){}draw(){const t=this,e=t._ctx,n=t.chart,i=t._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=t._drawStart||0,c=t._drawCount||r.length-a;let l;for(i.dataset&&i.dataset.draw(e,s,a,c),l=a;l<a+c;++l){const t=r[l];t.hidden||(t.active?o.push(t):t.draw(e,s))}for(l=0;l<o.length;++l)o[l].draw(e,s)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this,r=i.getDataset();let s;if(t>=0&&t<i._cachedMeta.data.length){const e=i._cachedMeta.data[t];s=e.$context||(e.$context=function(t,e,n){return Object.assign(Object.create(t),{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(i.getContext(),t,e)),s.parsed=i.getParsed(t),s.raw=r.data[t],s.index=s.dataIndex=t}else s=i.$context||(i.$context=function(t,e){return Object.assign(Object.create(t),{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(i.chart.getContext(),i.index)),s.dataset=r,s.index=s.datasetIndex=i.index;return s.active=!!e,s.mode=n,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i=this,r="active"===e,s=i._cachedDataOpts,o=t+"-"+e,a=s[o],c=i.enableOptionSharing&&A(n);if(a)return _n(a,c);const l=i.chart.config,u=l.datasetElementScopeKeys(i._type,t),h=r?[`${t}Hover`,"hover",t,""]:[t,""],d=l.getOptionScopes(i.getDataset(),u),f=Object.keys(jt.elements[t]),p=l.resolveNamedOptions(d,f,(()=>i.getContext(n,r)),h);return p.$shared&&(p.$shared=c,s[o]=Object.freeze(_n(p,c))),p}_resolveAnimations(t,e,n){const i=this,r=i.chart,s=i._cachedDataOpts,o=`animation-${e}`,a=s[o];if(a)return a;let c;if(!1!==r.options.animation){const r=i.chart.config,s=r.datasetAnimationScopeKeys(i._type,e),o=r.getOptionScopes(i.getDataset(),s);c=r.createResolver(o,i.getContext(t,n,e))}const l=new ln(r,c&&c.animations);return c&&c._cacheable&&(s[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||bn(t)||this.chart._animationsDisabled}updateElement(t,e,n,i){bn(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!bn(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this,n=e._data,i=e._cachedMeta.data;for(const[t,n,i]of e._syncList)e[t](n,i);e._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&e.parse(0,o),s>r?e._insertElements(r,s-r,t):s<r&&e._removeElements(s,r-s)}_insertElements(t,e,n=!0){const i=this,r=i._cachedMeta,s=r.data,o=t+e;let a;const c=t=>{for(t.length+=e,a=t.length-1;a>=o;a--)t[a]=t[a-e]};for(c(s),a=t;a<o;++a)s[a]=new i.dataElementType;i._parsing&&c(r._parsed),i.parse(t,e),n&&i.updateElements(s,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&vn(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){this._sync(["_removeElements",t,e]),this._sync(["_insertElements",t,arguments.length-2])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function xn(t){const e=function(t){if(!t._cache.$bar){const e=t.getMatchingVisibleMetas("bar");let n=[];for(let i=0,r=e.length;i<r;i++)n=n.concat(e[i].controller.getAllParsedValues(t));t._cache.$bar=de(n.sort(((t,e)=>t-e)))}return t._cache.$bar}(t);let n,i,r,s,o=t._length;const a=()=>{32767!==r&&-32768!==r&&(A(s)&&(o=Math.min(o,Math.abs(r-s)||o)),s=r)};for(n=0,i=e.length;n<i;++n)r=t.getPixelForValue(e[n]),a();for(s=void 0,n=0,i=t.ticks.length;n<i;++n)r=t.getPixelForTick(n),a();return o}function Tn(t,e,n,i){return u(t)?function(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[n.axis]=l,e._custom={barStart:c,barEnd:l,start:r,end:s,min:o,max:a}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function En(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,c=[];let l,u,h,d;for(l=n,u=n+i;l<u;++l)d=e[l],h={},h[r.axis]=a||r.parse(o[l],l),c.push(Tn(d,h,s,l));return c}function In(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function Sn(t,e,n,i){let r=e.borderSkipped;const s={};if(!r)return void(t.borderSkipped=s);const{start:o,end:a,reverse:c,top:l,bottom:u}=function(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}(t);"middle"===r&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=l:(n._bottom||0)===i?r=u:(s[kn(u,o,a,c)]=!0,r=l)),s[kn(r,o,a,c)]=!0,t.borderSkipped=s}function kn(t,e,n,i){var r,s,o;return i?(o=n,t=An(t=(r=t)===(s=e)?o:r===o?s:r,n,e)):t=An(t,e,n),t}function An(t,e,n){return"start"===t?e:"end"===t?n:t}wn.defaults={},wn.prototype.datasetElementType=null,wn.prototype.dataElementType=null;class Cn extends wn{parsePrimitiveData(t,e,n,i){return En(t,e,n,i)}parseArrayData(t,e,n,i){return En(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:r,vScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,c="x"===r.axis?o:a,l="x"===s.axis?o:a,u=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=e[h],f={},f[r.axis]=r.parse(S(p,c),h),u.push(Tn(S(p,l),f,s,h));return u}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,r=this.getParsed(t),s=r._custom,o=In(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:o}}initialize(){const t=this;t.enableOptionSharing=!0,super.initialize(),t._cachedMeta.stack=t.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,i){const r=this,s="reset"===i,{index:o,_cachedMeta:{vScale:a}}=r,c=a.getBasePixel(),u=a.isHorizontal(),h=r._getRuler(),d=r.resolveDataElementOptions(e,i),f=r.getSharedOptions(d),p=r.includeOptions(i,f);r.updateSharedOptions(f,i,d);for(let d=e;d<e+n;d++){const e=r.getParsed(d),n=s||l(e[a.axis])?{base:c,head:c}:r._calculateBarValuePixels(d),g=r._calculateBarIndexPixels(d,h),m=(e._stacks||{})[a.axis],y={horizontal:u,base:n.base,enableBorderRadius:!m||In(e._custom)||o===m._top||o===m._bottom,x:u?n.head:g.center,y:u?g.center:n.head,height:u?g.size:Math.abs(n.size),width:u?Math.abs(n.size):g.size};p&&(y.options=f||r.resolveDataElementOptions(d,t[d].active?"active":i)),Sn(y,y.options||t[d].options,m,o),r.updateElement(t[d],d,y,i)}}_getStacks(t,e){const n=this._cachedMeta.iScale,i=n.getMatchingVisibleMetas(this._type),r=n.options.stacked,s=i.length,o=[];let a,c;for(a=0;a<s;++a)if(c=i[a],c.controller.options.grouped){if(void 0!==e){const t=c.controller.getParsed(e)[c.controller._cachedMeta.vScale.axis];if(l(t)||isNaN(t))continue}if((!1===r||-1===o.indexOf(c.stack)||void 0===r&&void 0===c.stack)&&o.push(c.stack),c.index===t)break}return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),r=void 0!==e?i.indexOf(e):-1;return-1===r?i.length-1:r}_getRuler(){const t=this,e=t.options,n=t._cachedMeta,i=n.iScale,r=[];let s,o;for(s=0,o=n.data.length;s<o;++s)r.push(i.getPixelForValue(t.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||xn(i),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:t._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(t){const e=this,{_cachedMeta:{vScale:n,_stacked:i},options:{base:r,minBarLength:s}}=e,o=r||0,a=e.getParsed(t),c=a._custom,u=In(c);let h,d,f=a[n.axis],p=0,g=i?e.applyStack(n,a,i):f;g!==f&&(p=g-f,g=f),u&&(f=c.barStart,g=c.barEnd-c.barStart,0!==f&&V(f)!==V(c.barEnd)&&(p=0),p+=f);const m=l(r)||u?p:r;let y=n.getPixelForValue(m);if(h=e.chart.getDataVisibility(t)?n.getPixelForValue(p+g):y,d=h-y,Math.abs(d)<s&&(d=function(t,e,n){return 0!==t?V(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(d,n,o)*s,f===o&&(y-=d/2),h=y+d),y===n.getPixelForValue(o)){const t=V(d)*n.getLineWidthForValue(o)/2;y+=t,d-=t}return{size:d,base:y,head:h,center:h+d/2}}_calculateBarIndexPixels(t,e){const n=this,i=e.scale,r=n.options,s=r.skipNull,o=p(r.maxBarThickness,1/0);let a,c;if(e.grouped){const i=s?n._getStackCount(t):e.stackCount,u="flex"===r.barThickness?function(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const c=n.categoryPercentage;null===o&&(o=s-(null===a?e.end-e.start:a-s)),null===a&&(a=s+s-o);const l=s-(s-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/i,ratio:n.barPercentage,start:l}}(t,e,r,i):function(t,e,n,i){const r=n.barThickness;let s,o;return l(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}(t,e,r,i),h=n._getStackIndex(n.index,n._cachedMeta.stack,s?t:void 0);a=u.start+u.chunk*h+u.chunk/2,c=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(n.getParsed(t)[i.axis],t),c=Math.min(o,e.min*e.ratio);return{base:a-c/2,head:a+c/2,center:a,size:c}}draw(){const t=this,e=t._cachedMeta,n=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)null!==t.getParsed(s)[n.axis]&&i[s].draw(t._ctx)}}Cn.id="bar",Cn.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},Cn.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class Dn extends wn{initialize(){this.enableOptionSharing=!0,super.initialize()}parseObjectData(t,e,n,i){const{xScale:r,yScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,c=[];let l,u,h;for(l=n,u=n+i;l<u;++l)h=e[l],c.push({x:r.parse(S(h,o),l),y:s.parse(S(h,a),l),_custom:h&&h.r&&+h.r});return c}getMaxOverflow(){const{data:t,_parsed:e}=this._cachedMeta;let n=0;for(let i=t.length-1;i>=0;--i)n=Math.max(n,t[i].size()/2,e[i]._custom);return n>0&&n}getLabelAndValue(t){const e=this._cachedMeta,{xScale:n,yScale:i}=e,r=this.getParsed(t),s=n.getLabelForValue(r.x),o=i.getLabelForValue(r.y),a=r._custom;return{label:e.label,value:"("+s+", "+o+(a?", "+a:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const r=this,s="reset"===i,{iScale:o,vScale:a}=r._cachedMeta,c=r.resolveDataElementOptions(e,i),l=r.getSharedOptions(c),u=r.includeOptions(i,l),h=o.axis,d=a.axis;for(let c=e;c<e+n;c++){const e=t[c],n=!s&&r.getParsed(c),l={},f=l[h]=s?o.getPixelForDecimal(.5):o.getPixelForValue(n[h]),p=l[d]=s?a.getBasePixel():a.getPixelForValue(n[d]);l.skip=isNaN(f)||isNaN(p),u&&(l.options=r.resolveDataElementOptions(c,e.active?"active":i),s&&(l.options.radius=0)),r.updateElement(e,c,l,i)}r.updateSharedOptions(l,i,c)}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==e&&(i.radius=0),i.radius+=p(n&&n._custom,r),i}}Dn.id="bubble",Dn.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},Dn.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class Nn extends wn{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;let r,s;for(r=t,s=t+e;r<s;++r)i._parsed[r]=+n[r]}_getRotation(){return H(this.options.rotation-90)}_getCircumference(){return H(this.options.circumference)}_getRotationExtents(){let t=N,e=-N;const n=this;for(let i=0;i<n.chart.data.datasets.length;++i)if(n.chart.isDatasetVisible(i)){const r=n.chart.getDatasetMeta(i).controller,s=r._getRotation(),o=r._getCircumference();t=Math.min(t,s),e=Math.max(e,s+o)}return{rotation:t,circumference:e-t}}update(t){const e=this,n=e.chart,{chartArea:i}=n,r=e._cachedMeta,s=r.data,o=e.getMaxBorderWidth()+e.getMaxOffset(s)+e.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),c=Math.min((u=a,"string"==typeof(l=e.options.cutout)&&l.endsWith("%")?parseFloat(l)/100:l/u),1);var l,u;const h=e._getRingWeight(e.index),{circumference:d,rotation:f}=e._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:y,offsetY:v}=function(t,e,n){let i=1,r=1,s=0,o=0;if(e<N){const a=t,c=a+e,l=Math.cos(a),u=Math.sin(a),h=Math.cos(c),d=Math.sin(c),f=(t,e,i)=>X(t,a,c,!0)?1:Math.max(e,e*n,i,i*n),p=(t,e,i)=>X(t,a,c,!0)?-1:Math.min(e,e*n,i,i*n),g=f(0,l,h),m=f(P,u,d),y=p(D,l,h),v=p(D+P,u,d);i=(g-y)/2,r=(m-v)/2,s=-(g+y)/2,o=-(m+v)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}(f,d,c),b=(i.width-o)/p,_=(i.height-o)/m,w=Math.max(Math.min(b,_)/2,0),x=g(e.options.radius,w),T=(x-Math.max(x*c,0))/e._getVisibleDatasetWeightTotal();e.offsetX=y*x,e.offsetY=v*x,r.total=e.calculateTotal(),e.outerRadius=x-T*e._getRingWeightOffset(e.index),e.innerRadius=Math.max(e.outerRadius-T*h,0),e.updateElements(s,0,s.length,t)}_circumference(t,e){const n=this,i=n.options,r=n._cachedMeta,s=n._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:n.calculateCircumference(r._parsed[t]*s/N)}updateElements(t,e,n,i){const r=this,s="reset"===i,o=r.chart,a=o.chartArea,c=o.options.animation,l=(a.left+a.right)/2,u=(a.top+a.bottom)/2,h=s&&c.animateScale,d=h?0:r.innerRadius,f=h?0:r.outerRadius,p=r.resolveDataElementOptions(e,i),g=r.getSharedOptions(p),m=r.includeOptions(i,g);let y,v=r._getRotation();for(y=0;y<e;++y)v+=r._circumference(y,s);for(y=e;y<e+n;++y){const e=r._circumference(y,s),n=t[y],o={x:l+r.offsetX,y:u+r.offsetY,startAngle:v,endAngle:v+e,circumference:e,outerRadius:f,innerRadius:d};m&&(o.options=g||r.resolveDataElementOptions(y,n.active?"active":i)),v+=e,r.updateElement(n,y,o,i)}r.updateSharedOptions(g,i,p)}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const r=t._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?N*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Ke(e._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){const e=this;let n=0;const i=e.chart;let r,s,o,a,c;if(!t)for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){o=i.getDatasetMeta(r),t=o.data,a=o.controller,a!==e&&a.configure();break}if(!t)return 0;for(r=0,s=t.length;r<s;++r)c=a.resolveDataElementOptions(r),"inner"!==c.borderAlign&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(p(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Nn.id="doughnut",Nn.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},Nn.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},Nn.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map(((e,i)=>{const r=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const n=": "+t.formattedValue;return u(e)?(e=e.slice(),e[0]+=n):e+=n,e}}}}};class On extends wn{initialize(){this.enableOptionSharing=!0,super.initialize()}update(t){const e=this,n=e._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=e.chart._animationsDisabled;let{start:a,count:c}=function(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,_parsed:a}=t,c=o.axis,{min:l,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(r=Q(Math.min(ce(a,o.axis,l).lo,n?i:ce(e,c,o.getPixelForValue(l)).lo),0,i-1)),s=d?Q(Math.max(ce(a,o.axis,u).hi+1,n?0:ce(e,c,o.getPixelForValue(u)).hi+1),r,i)-r:i-r}return{start:r,count:s}}(n,r,o);e._drawStart=a,e._drawCount=c,function(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}(n)&&(a=0,c=r.length),i._datasetIndex=e.index,i._decimated=!!s._decimated,i.points=r;const l=e.resolveDatasetElementOptions(t);e.options.showLine||(l.borderWidth=0),l.segment=e.options.segment,e.updateElement(i,void 0,{animated:!o,options:l},t),e.updateElements(r,a,c,t)}updateElements(t,e,n,i){const r=this,s="reset"===i,{iScale:o,vScale:a,_stacked:c}=r._cachedMeta,u=r.resolveDataElementOptions(e,i),h=r.getSharedOptions(u),d=r.includeOptions(i,h),f=o.axis,p=a.axis,g=r.options.spanGaps,m=B(g)?g:Number.POSITIVE_INFINITY,y=r.chart._animationsDisabled||s||"none"===i;let v=e>0&&r.getParsed(e-1);for(let u=e;u<e+n;++u){const e=t[u],n=r.getParsed(u),g=y?e:{},b=l(n[p]),_=g[f]=o.getPixelForValue(n[f],u),w=g[p]=s||b?a.getBasePixel():a.getPixelForValue(c?r.applyStack(a,n,c):n[p],u);g.skip=isNaN(_)||isNaN(w)||b,g.stop=u>0&&n[f]-v[f]>m,g.parsed=n,d&&(g.options=h||r.resolveDataElementOptions(u,e.active?"active":i)),y||r.updateElement(e,u,g,i),v=n}r.updateSharedOptions(h,i,u)}getMaxOverflow(){const t=this,e=t._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(t.resolveDataElementOptions(0)),o=r[r.length-1].size(t.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}On.id="line",On.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},On.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class Mn extends wn{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Ke(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:r}}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}_updateRadius(){const t=this,e=t.chart,n=e.chartArea,i=e.options,r=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(r/2,0),o=(s-Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0))/e.getVisibleDatasetCount();t.outerRadius=s-o*t.index,t.innerRadius=t.outerRadius-o}updateElements(t,e,n,i){const r=this,s="reset"===i,o=r.chart,a=r.getDataset(),c=o.options.animation,l=r._cachedMeta.rScale,u=l.xCenter,h=l.yCenter,d=l.getIndexAngle(0)-.5*D;let f,p=d;const g=360/r.countVisibleElements();for(f=0;f<e;++f)p+=r._computeAngle(f,i,g);for(f=e;f<e+n;f++){const e=t[f];let n=p,m=p+r._computeAngle(f,i,g),y=o.getDataVisibility(f)?l.getDistanceFromCenterForValue(a.data[f]):0;p=m,s&&(c.animateScale&&(y=0),c.animateRotate&&(n=m=d));const v={x:u,y:h,innerRadius:0,outerRadius:y,startAngle:n,endAngle:m,options:r.resolveDataElementOptions(f,e.active?"active":i)};r.updateElement(e,f,v,i)}}countVisibleElements(){const t=this.getDataset(),e=this._cachedMeta;let n=0;return e.data.forEach(((e,i)=>{!isNaN(t.data[i])&&this.chart.getDataVisibility(i)&&n++})),n}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?H(this.resolveDataElementOptions(t,e).angle||n):0}}Mn.id="polarArea",Mn.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},Mn.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map(((e,i)=>{const r=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class Ln extends Nn{}Ln.id="pie",Ln.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class Pn extends wn{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}update(t){const e=this,n=e._cachedMeta,i=n.dataset,r=n.data||[],s=n.iScale.getLabels();if(i.points=r,"resize"!==t){const n=e.resolveDatasetElementOptions(t);e.options.showLine||(n.borderWidth=0);const o={_loop:!0,_fullLoop:s.length===r.length,options:n};e.updateElement(i,void 0,o,t)}e.updateElements(r,0,r.length,t)}updateElements(t,e,n,i){const r=this,s=r.getDataset(),o=r._cachedMeta.rScale,a="reset"===i;for(let c=e;c<e+n;c++){const e=t[c],n=r.resolveDataElementOptions(c,e.active?"active":i),l=o.getPointPositionForValue(c,s.data[c]),u=a?o.xCenter:l.x,h=a?o.yCenter:l.y,d={x:u,y:h,angle:l.angle,skip:isNaN(u)||isNaN(h),options:n};r.updateElement(e,c,d,i)}}}Pn.id="radar",Pn.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},Pn.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class Rn extends On{}Rn.id="scatter",Rn.defaults={showLine:!1,fill:!1},Rn.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var Fn=Object.freeze({__proto__:null,BarController:Cn,BubbleController:Dn,DoughnutController:Nn,LineController:On,PolarAreaController:Mn,PieController:Ln,RadarController:Pn,ScatterController:Rn});function jn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Vn{constructor(t){this.options=t||{}}formats(){return jn()}parse(t,e){return jn()}format(t,e){return jn()}add(t,e,n){return jn()}diff(t,e,n){return jn()}startOf(t,e,n){return jn()}endOf(t,e){return jn()}}Vn.override=function(t){Object.assign(Vn.prototype,t)};var Un={_date:Vn};function Bn(t,e){return"native"in t?{x:t.x,y:t.y}:je(t,e)}function qn(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale;if(a&&e===a.axis&&o&&s.length){const t=a._reversePixels?le:ce;if(!i)return t(s,e,n);if(r._sharedOptions){const i=s[0],r="function"==typeof i.getRange&&i.getRange(e);if(r){const i=t(s,e,n-r),o=t(s,e,n+r);return{lo:i.lo,hi:o.hi}}}}return{lo:0,hi:s.length-1}}function zn(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let t=0,n=s.length;t<n;++t){const{index:n,data:a}=s[t],{lo:c,hi:l}=qn(s[t],e,o,r);for(let t=c;t<=l;++t){const e=a[t];e.skip||i(e,n,t)}}}function Hn(t,e,n,i){const r=[];return Ht(e,t.chartArea,t._minPadding)?(zn(t,n,e,(function(t,n,s){t.inRange(e.x,e.y,i)&&r.push({element:t,datasetIndex:n,index:s})}),!0),r):r}function $n(t,e,n,i,r){const s=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const r=e?Math.abs(t.x-i.x):0,s=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let o=Number.POSITIVE_INFINITY,a=[];return Ht(e,t.chartArea,t._minPadding)?(zn(t,n,e,(function(n,c,l){if(i&&!n.inRange(e.x,e.y,r))return;const u=n.getCenterPoint(r);if(!Ht(u,t.chartArea,t._minPadding)&&!n.inRange(e.x,e.y,r))return;const h=s(e,u);h<o?(a=[{element:n,datasetIndex:c,index:l}],o=h):h===o&&a.push({element:n,datasetIndex:c,index:l})})),a):a}function Wn(t,e,n,i){const r=Bn(e,t),s=[],o=n.axis,a="x"===o?"inXRange":"inYRange";let c=!1;return function(t,e){const n=t.getSortedVisibleDatasetMetas();let i,r,s;for(let t=0,o=n.length;t<o;++t){({index:i,data:r}=n[t]);for(let t=0,n=r.length;t<n;++t)s=r[t],s.skip||e(s,i,t)}}(t,((t,e,n)=>{t[a](r[o],i)&&s.push({element:t,datasetIndex:e,index:n}),t.inRange(r.x,r.y,i)&&(c=!0)})),n.intersect&&!c?[]:s}var Kn={modes:{index(t,e,n,i){const r=Bn(e,t),s=n.axis||"x",o=n.intersect?Hn(t,r,s,i):$n(t,r,s,!1,i),a=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=o[0].index,n=t.data[e];n&&!n.skip&&a.push({element:n,datasetIndex:t.index,index:e})})),a):[]},dataset(t,e,n,i){const r=Bn(e,t),s=n.axis||"xy";let o=n.intersect?Hn(t,r,s,i):$n(t,r,s,!1,i);if(o.length>0){const e=o[0].datasetIndex,n=t.getDatasetMeta(e).data;o=[];for(let t=0;t<n.length;++t)o.push({element:n[t],datasetIndex:e,index:t})}return o},point:(t,e,n,i)=>Hn(t,Bn(e,t),n.axis||"xy",i),nearest:(t,e,n,i)=>$n(t,Bn(e,t),n.axis||"xy",n.intersect,i),x:(t,e,n,i)=>(n.axis="x",Wn(t,e,n,i)),y:(t,e,n,i)=>(n.axis="y",Wn(t,e,n,i))}};const Gn=["left","top","right","bottom"];function Yn(t,e){return t.filter((t=>t.pos===e))}function Xn(t,e){return t.filter((t=>-1===Gn.indexOf(t.pos)&&t.box.axis===e))}function Qn(t,e){return t.sort(((t,n)=>{const i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function Jn(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Zn(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function ti(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!h(r)){n.size&&(t[r]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?s.height:s.width),n.size=e.size/e.count,t[r]+=n.size}s.getPadding&&Zn(o,s.getPadding());const a=Math.max(0,e.outerWidth-Jn(o,t,"left","right")),c=Math.max(0,e.outerHeight-Jn(o,t,"top","bottom")),l=a!==t.w,u=c!==t.h;return t.w=a,t.h=c,n.horizontal?{same:l,other:u}:{same:u,other:l}}function ei(t,e){const n=e.maxPadding;return function(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{i[t]=Math.max(e[t],n[t])})),i}(t?["left","right"]:["top","bottom"])}function ni(t,e,n,i){const r=[];let s,o,a,c,l,u;for(s=0,o=t.length,l=0;s<o;++s){a=t[s],c=a.box,c.update(a.width||e.w,a.height||e.h,ei(a.horizontal,e));const{same:o,other:h}=ti(e,n,a,i);l|=o&&r.length,u=u||h,c.fullSize||r.push(a)}return l&&ni(r,e,n,i)||u}function ii(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function ri(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const t=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},l=a.stackWeight/c.weight||1;if(a.horizontal){const i=e.w*l,s=c.size||t.height;A(c.start)&&(o=c.start),t.fullSize?ii(t,r.left,o,n.outerWidth-r.right-r.left,s):ii(t,e.left+c.placed,o,i,s),c.start=o,c.placed+=i,o=t.bottom}else{const i=e.h*l,o=c.size||t.width;A(c.start)&&(s=c.start),t.fullSize?ii(t,s,r.top,o,n.outerHeight-r.bottom-r.top):ii(t,s,e.top+c.placed,o,i),c.start=s,c.placed+=i,s=t.right}}e.x=s,e.y=o}jt.set("layout",{padding:{top:0,right:0,bottom:0,left:0}});var si={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=re(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=function(t){const e=function(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],({position:s,options:{stack:o,stackWeight:a=1}}=r),e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}(t),n=Qn(e.filter((t=>t.box.fullSize)),!0),i=Qn(Yn(e,"left"),!0),r=Qn(Yn(e,"right")),s=Qn(Yn(e,"top"),!0),o=Qn(Yn(e,"bottom")),a=Xn(e,"x"),c=Xn(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(c).concat(o).concat(a),chartArea:Yn(e,"chartArea"),vertical:i.concat(r).concat(c),horizontal:s.concat(o).concat(a)}}(t.boxes),c=a.vertical,l=a.horizontal;y(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const u=c.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);Zn(d,re(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),p=function(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:r}=n;if(!t||!Gn.includes(i))continue;const s=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:o}=a.box,c=n[a.stack],l=c&&a.stackWeight/c.weight;a.horizontal?(a.width=l?l*i:o&&e.availableWidth,a.height=r):(a.width=i,a.height=l?l*r:o&&e.availableHeight)}return n}(c.concat(l),h);ni(a.fullSize,f,h,p),ni(c,f,h,p),ni(l,f,h,p)&&ni(c,f,h,p),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),ri(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,ri(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},y(a.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h)}))}};class oi{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}}class ai extends oi{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}}const ci={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},li=t=>null===t||""===t,ui=!!Be&&{passive:!0};function hi(t,e,n){t.canvas.removeEventListener(e,n,ui)}function di(t,e,n){const i=t.canvas,r=i&&Me(i)||i,s=new MutationObserver((t=>{const e=Me(r);t.forEach((t=>{for(let i=0;i<t.addedNodes.length;i++){const s=t.addedNodes[i];s!==r&&s!==e||n(t.target)}}))}));return s.observe(document,{childList:!0,subtree:!0}),s}function fi(t,e,n){const i=t.canvas,r=i&&Me(i);if(!r)return;const s=new MutationObserver((t=>{t.forEach((t=>{for(let e=0;e<t.removedNodes.length;e++)if(t.removedNodes[e]===i){n();break}}))}));return s.observe(r,{childList:!0}),s}const pi=new Map;let gi=0;function mi(){const t=window.devicePixelRatio;t!==gi&&(gi=t,pi.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function yi(t,e,n){const i=t.canvas,s=i&&Me(i);if(!s)return;const o=r(((t,e)=>{const i=s.clientWidth;n(t,e),i<s.clientWidth&&n()}),window),a=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||o(n,i)}));return a.observe(s),function(t,e){pi.size||window.addEventListener("resize",mi),pi.set(t,e)}(t,o),a}function vi(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){pi.delete(t),pi.size||window.removeEventListener("resize",mi)}(t)}function bi(t,e,n){const i=t.canvas,s=r((e=>{null!==t.ctx&&n(function(t,e){const n=ci[t.type]||t.type,{x:i,y:r}=je(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==r?r:null}}(e,t))}),t,(t=>{const e=t[0];return[e,e.offsetX,e.offsetY]}));return function(t,e,n){t.addEventListener(e,n,ui)}(i,e,s),s}class _i extends oi{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t.$chartjs={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",li(r)){const e=qe(t,"width");void 0!==e&&(t.width=e)}if(li(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=qe(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e.$chartjs)return!1;const n=e.$chartjs.initial;["height","width"].forEach((t=>{const i=n[t];l(i)?e.removeAttribute(t):e.setAttribute(t,i)}));const i=n.style||{};return Object.keys(i).forEach((t=>{e.style[t]=i[t]})),e.width=e.width,delete e.$chartjs,!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),r={attach:di,detach:fi,resize:yi}[e]||bi;i[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];i&&(({attach:vi,detach:vi,resize:vi}[e]||hi)(t,e,i),n[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return function(t,e,n,i){const r=Pe(t),s=Fe(r,"margin"),o=Le(r.maxWidth,t,"clientWidth")||M,a=Le(r.maxHeight,t,"clientHeight")||M,c=function(t,e,n){let i,r;if(void 0===e||void 0===n){const s=Me(t);if(s){const t=s.getBoundingClientRect(),o=Pe(s),a=Fe(o,"border","width"),c=Fe(o,"padding");e=t.width-c.width-a.width,n=t.height-c.height-a.height,i=Le(o.maxWidth,s,"clientWidth"),r=Le(o.maxHeight,s,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||M,maxHeight:r||M}}(t,e,n);let{width:l,height:u}=c;if("content-box"===r.boxSizing){const t=Fe(r,"border","width"),e=Fe(r,"padding");l-=e.width+t.width,u-=e.height+t.height}return l=Math.max(0,l-s.width),u=Math.max(0,i?Math.floor(l/i):u-s.height),l=Ve(Math.min(l,o,c.maxWidth)),u=Ve(Math.min(u,a,c.maxHeight)),l&&!u&&(u=Ve(l/2)),{width:l,height:u}}(t,e,n,i)}isAttached(t){const e=Me(t);return!(!e||!e.isConnected)}}function wi(t){return!Oe()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?ai:_i}class xi{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return B(this.x)&&B(this.y)}getProps(t,e){const n=this,i=this.$animations;if(!e||!i)return n;const r={};return t.forEach((t=>{r[t]=i[t]&&i[t].active()?i[t]._to:n[t]})),r}}xi.defaults={},xi.defaultRoutes=void 0;const Ti={values:t=>u(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(r="scientific"),s=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}(t,n)}const o=j(Math.abs(s)),a=Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Ke(t,i,c)},logarithmic(t,e,n){if(0===t)return"0";const i=t/Math.pow(10,Math.floor(j(t)));return 1===i||2===i||5===i?Ti.numeric.call(this,t,e,n):""}};var Ei={formatters:Ti};function Ii(t,e,n,i,r){const s=p(i,0),o=Math.min(p(r,t.length),t.length);let a,c,l,u=0;for(n=Math.ceil(n),r&&(a=r-i,n=a/Math.floor(a/n)),l=s;l<0;)u++,l=Math.round(s+u*n);for(c=Math.max(s,0);c<o;c++)c===l&&(e.push(t[c]),u++,l=Math.round(s+u*n))}jt.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ei.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),jt.route("scale.ticks","color","","color"),jt.route("scale.grid","color","","borderColor"),jt.route("scale.grid","borderColor","","borderColor"),jt.route("scale.title","color","","color"),jt.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),jt.describe("scales",{_fallback:"scale"}),jt.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const Si=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n;function ki(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function Ai(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let c,l=t.getPixelForTick(r);if(!(n&&(c=1===i?Math.max(l-s,o-l):0===e?(t.getPixelForTick(1)-l)/2:(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function Ci(t){return t.drawTicks?t.tickLength:0}function Di(t,e){if(!t.display)return 0;const n=se(t.font,e),i=re(t.padding);return(u(t.text)?t.text.length:1)*n.lineHeight+i.height}function Ni(t,e,n){let i=s(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class Oi extends xi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){const e=this;e.options=t.setContext(e.getContext()),e.axis=t.axis,e._userMin=e.parse(t.min),e._userMax=e.parse(t.max),e._suggestedMin=e.parse(t.suggestedMin),e._suggestedMax=e.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=f(t,Number.POSITIVE_INFINITY),e=f(e,Number.NEGATIVE_INFINITY),n=f(n,Number.POSITIVE_INFINITY),i=f(i,Number.NEGATIVE_INFINITY),{min:f(t,n),max:f(e,i),minDefined:d(t),maxDefined:d(e)}}getMinMax(t){const e=this;let n,{min:i,max:r,minDefined:s,maxDefined:o}=e.getUserBounds();if(s&&o)return{min:i,max:r};const a=e.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)n=a[c].controller.getMinMax(e,t),s||(i=Math.min(i,n.min)),o||(r=Math.max(r,n.max));return{min:f(i,f(r,i)),max:f(r,f(i,r))}}getPadding(){const t=this;return{left:t.paddingLeft||0,top:t.paddingTop||0,right:t.paddingRight||0,bottom:t.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){m(this.options.beforeUpdate,[this])}update(t,e,n){const i=this,r=i.options.ticks,s=r.sampleSize;i.beforeUpdate(),i.maxWidth=t,i.maxHeight=e,i._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),i.ticks=null,i._labelSizes=null,i._gridLineItems=null,i._labelItems=null,i.beforeSetDimensions(),i.setDimensions(),i.afterSetDimensions(),i._maxLength=i.isHorizontal()?i.width+n.left+n.right:i.height+n.top+n.bottom,i._dataLimitsCached||(i.beforeDataLimits(),i.determineDataLimits(),i.afterDataLimits(),i._range=function(t,e){const{min:n,max:i}=t;return{min:n-Math.abs(g(e,n)),max:i+g(e,i)}}(i,i.options.grace),i._dataLimitsCached=!0),i.beforeBuildTicks(),i.ticks=i.buildTicks()||[],i.afterBuildTicks();const o=s<i.ticks.length;i._convertTicksToLabels(o?ki(i.ticks,s):i.ticks),i.configure(),i.beforeCalculateLabelRotation(),i.calculateLabelRotation(),i.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(i.ticks=function(t,e){const n=t.options.ticks,i=n.maxTicksLimit||function(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}(t),r=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],s=r.length,o=r[0],a=r[s-1],c=[];if(s>i)return function(t,e,n,i){let r,s=0,o=n[0];for(i=Math.ceil(i),r=0;r<t.length;r++)r===o&&(e.push(t[r]),s++,o=n[s*i])}(e,c,r,s/i),c;const u=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),r=e.length/n;if(!i)return Math.max(r,1);const s=function(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i==0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}(i);for(let t=0,e=s.length-1;t<e;t++){const e=s[t];if(e>r)return e}return Math.max(r,1)}(r,e,i);if(s>0){let t,n;const i=s>1?Math.round((a-o)/(s-1)):null;for(Ii(e,c,u,l(i)?0:o-i,o),t=0,n=s-1;t<n;t++)Ii(e,c,u,r[t],r[t+1]);return Ii(e,c,u,a,l(i)?e.length:a+i),c}return Ii(e,c,u),c}(i,i.ticks),i._labelSizes=null),o&&i._convertTicksToLabels(i.ticks),i.beforeFit(),i.fit(),i.afterFit(),i.afterUpdate()}configure(){const t=this;let e,n,i=t.options.reverse;t.isHorizontal()?(e=t.left,n=t.right):(e=t.top,n=t.bottom,i=!i),t._startPixel=e,t._endPixel=n,t._reversePixels=i,t._length=n-e,t._alignToPixels=t.options.alignToPixels}afterUpdate(){m(this.options.afterUpdate,[this])}beforeSetDimensions(){m(this.options.beforeSetDimensions,[this])}setDimensions(){const t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0}afterSetDimensions(){m(this.options.afterSetDimensions,[this])}_callHooks(t){const e=this;e.chart.notifyPlugins(t,e.getContext()),m(e.options[t],[e])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){m(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this,n=e.options.ticks;let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=m(n.callback,[s.value,i,t],e)}afterTickToLabelConversion(){m(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){m(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this,e=t.options,n=e.ticks,i=t.ticks.length,r=n.minRotation||0,s=n.maxRotation;let o,a,c,l=r;if(!t._isVisible()||!n.display||r>=s||i<=1||!t.isHorizontal())return void(t.labelRotation=r);const u=t._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=Q(t.chart.width-h,0,t.maxWidth);o=e.offset?t.maxWidth/i:f/(i-1),h+6>o&&(o=f/(i-(e.offset?.5:1)),a=t.maxHeight-Ci(e.grid)-n.padding-Di(e.title,t.chart.options.font),c=Math.sqrt(h*h+d*d),l=$(Math.min(Math.asin(Q((u.highest.height+6)/o,-1,1)),Math.asin(Q(a/c,-1,1))-Math.asin(Q(d/c,-1,1)))),l=Math.max(r,Math.min(s,l))),t.labelRotation=l}afterCalculateLabelRotation(){m(this.options.afterCalculateLabelRotation,[this])}beforeFit(){m(this.options.beforeFit,[this])}fit(){const t=this,e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=t,o=t._isVisible(),a=t.isHorizontal();if(o){const o=Di(r,n.options.font);if(a?(e.width=t.maxWidth,e.height=Ci(s)+o):(e.height=t.maxHeight,e.width=Ci(s)+o),i.display&&t.ticks.length){const{first:n,last:r,widest:s,highest:o}=t._getLabelSizes(),c=2*i.padding,l=H(t.labelRotation),u=Math.cos(l),h=Math.sin(l);if(a){const n=i.mirror?0:h*s.width+u*o.height;e.height=Math.min(t.maxHeight,e.height+n+c)}else{const n=i.mirror?0:u*s.width+h*o.height;e.width=Math.min(t.maxWidth,e.width+n+c)}t._calculatePadding(n,r,h,u)}}t._handleMargins(),a?(t.width=t._length=n.width-t._margins.left-t._margins.right,t.height=e.height):(t.width=e.width,t.height=t._length=n.height-t._margins.top-t._margins.bottom)}_calculatePadding(t,e,n,i){const r=this,{ticks:{align:s,padding:o},position:a}=r.options,c=0!==r.labelRotation,l="top"!==a&&"x"===r.axis;if(r.isHorizontal()){const a=r.getPixelForTick(0)-r.left,u=r.right-r.getPixelForTick(r.ticks.length-1);let h=0,d=0;c?l?(h=i*t.width,d=n*e.height):(h=n*t.height,d=i*e.width):"start"===s?d=e.width:"end"===s?h=t.width:(h=t.width/2,d=e.width/2),r.paddingLeft=Math.max((h-a+o)*r.width/(r.width-a),0),r.paddingRight=Math.max((d-u+o)*r.width/(r.width-u),0)}else{let n=e.height/2,i=t.height/2;"start"===s?(n=0,i=t.height):"end"===s&&(n=e.height,i=0),r.paddingTop=n+o,r.paddingBottom=i+o}}_handleMargins(){const t=this;t._margins&&(t._margins.left=Math.max(t.paddingLeft,t._margins.left),t._margins.top=Math.max(t.paddingTop,t._margins.top),t._margins.right=Math.max(t.paddingRight,t._margins.right),t._margins.bottom=Math.max(t.paddingBottom,t._margins.bottom))}afterFit(){m(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){const e=this;let n,i;for(e.beforeTickToLabelConversion(),e.generateTickLabels(t),n=0,i=t.length;n<i;n++)l(t[n].label)&&(t.splice(n,1),i--,n--);e.afterTickToLabelConversion()}_getLabelSizes(){const t=this;let e=t._labelSizes;if(!e){const n=t.options.ticks.sampleSize;let i=t.ticks;n<i.length&&(i=ki(i,n)),t._labelSizes=e=t._computeLabelSizes(i,i.length)}return e}_computeLabelSizes(t,e){const{ctx:n,_longestTextCache:i}=this,r=[],s=[];let o,a,c,h,d,f,p,g,m,v,b,_=0,w=0;for(o=0;o<e;++o){if(h=t[o].label,d=this._resolveTickFontOptions(o),n.font=f=d.string,p=i[f]=i[f]||{data:{},gc:[]},g=d.lineHeight,m=v=0,l(h)||u(h)){if(u(h))for(a=0,c=h.length;a<c;++a)b=h[a],l(b)||u(b)||(m=Vt(n,p.data,p.gc,m,b),v+=g)}else m=Vt(n,p.data,p.gc,m,h),v=g;r.push(m),s.push(v),_=Math.max(m,_),w=Math.max(v,w)}!function(t,e){y(t,(t=>{const n=t.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[n[r]];n.splice(0,i)}}))}(i,e);const x=r.indexOf(_),T=s.indexOf(w),E=t=>({width:r[t]||0,height:s[t]||0});return{first:E(0),last:E(e-1),widest:E(x),highest:E(T),widths:r,heights:s}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){const e=this;e._reversePixels&&(t=1-t);const n=e._startPixel+t*e._length;return Q(e._alignToPixels?Bt(e.chart,n,0):n,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this,n=e.ticks||[];if(t>=0&&t<n.length){const i=n[t];return i.$context||(i.$context=function(t,e,n){return Object.assign(Object.create(t),{tick:n,index:e,type:"tick"})}(e.getContext(),t,i))}return e.$context||(e.$context=(i=e.chart.getContext(),r=e,Object.assign(Object.create(i),{scale:r,type:"scale"})));var i,r}_tickSize(){const t=this,e=t.options.ticks,n=H(t.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=t._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return t.isHorizontal()?c*i>a*r?a/i:c/r:c*r<a*i?c/i:a/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this,n=e.axis,i=e.chart,r=e.options,{grid:s,position:o}=r,a=s.offset,c=e.isHorizontal(),l=e.ticks.length+(a?1:0),u=Ci(s),d=[],f=s.setContext(e.getContext()),g=f.drawBorder?f.borderWidth:0,m=g/2,y=function(t){return Bt(i,t,g)};let v,b,_,w,x,T,E,I,S,k,A,C;if("top"===o)v=y(e.bottom),T=e.bottom-u,I=v-m,k=y(t.top)+m,C=t.bottom;else if("bottom"===o)v=y(e.top),k=t.top,C=y(t.bottom)-m,T=v+m,I=e.top+u;else if("left"===o)v=y(e.right),x=e.right-u,E=v-m,S=y(t.left)+m,A=t.right;else if("right"===o)v=y(e.left),S=t.left,A=y(t.right)-m,x=v+m,E=e.left+u;else if("x"===n){if("center"===o)v=y((t.top+t.bottom)/2+.5);else if(h(o)){const t=Object.keys(o)[0],n=o[t];v=y(e.chart.scales[t].getPixelForValue(n))}k=t.top,C=t.bottom,T=v+m,I=T+u}else if("y"===n){if("center"===o)v=y((t.left+t.right)/2);else if(h(o)){const t=Object.keys(o)[0],n=o[t];v=y(e.chart.scales[t].getPixelForValue(n))}x=v-m,E=x-u,S=t.left,A=t.right}const D=p(r.ticks.maxTicksLimit,l),N=Math.max(1,Math.ceil(l/D));for(b=0;b<l;b+=N){const t=s.setContext(e.getContext(b)),n=t.lineWidth,r=t.color,o=s.borderDash||[],l=t.borderDashOffset,u=t.tickWidth,h=t.tickColor,f=t.tickBorderDash||[],p=t.tickBorderDashOffset;_=Ai(e,b,a),void 0!==_&&(w=Bt(i,_,n),c?x=E=S=A=w:T=I=k=C=w,d.push({tx1:x,ty1:T,tx2:E,ty2:I,x1:S,y1:k,x2:A,y2:C,width:n,color:r,borderDash:o,borderDashOffset:l,tickWidth:u,tickColor:h,tickBorderDash:f,tickBorderDashOffset:p}))}return e._ticksLength=l,e._borderValue=v,d}_computeLabelItems(t){const e=this,n=e.axis,i=e.options,{position:r,ticks:s}=i,o=e.isHorizontal(),a=e.ticks,{align:c,crossAlign:l,padding:d,mirror:f}=s,p=Ci(i.grid),g=p+d,m=f?-d:g,y=-H(e.labelRotation),v=[];let b,_,w,x,T,E,I,S,k,A,C,D,N="middle";if("top"===r)E=e.bottom-m,I=e._getXAxisLabelAlignment();else if("bottom"===r)E=e.top+m,I=e._getXAxisLabelAlignment();else if("left"===r){const t=e._getYAxisLabelAlignment(p);I=t.textAlign,T=t.x}else if("right"===r){const t=e._getYAxisLabelAlignment(p);I=t.textAlign,T=t.x}else if("x"===n){if("center"===r)E=(t.top+t.bottom)/2+g;else if(h(r)){const t=Object.keys(r)[0],n=r[t];E=e.chart.scales[t].getPixelForValue(n)+g}I=e._getXAxisLabelAlignment()}else if("y"===n){if("center"===r)T=(t.left+t.right)/2-g;else if(h(r)){const t=Object.keys(r)[0],n=r[t];T=e.chart.scales[t].getPixelForValue(n)}I=e._getYAxisLabelAlignment(p).textAlign}"y"===n&&("start"===c?N="top":"end"===c&&(N="bottom"));const O=e._getLabelSizes();for(b=0,_=a.length;b<_;++b){w=a[b],x=w.label;const t=s.setContext(e.getContext(b));S=e.getPixelForTick(b)+s.labelOffset,k=e._resolveTickFontOptions(b),A=k.lineHeight,C=u(x)?x.length:1;const n=C/2,i=t.color,c=t.textStrokeColor,h=t.textStrokeWidth;let d;if(o?(T=S,D="top"===r?"near"===l||0!==y?-C*A+A/2:"center"===l?-O.highest.height/2-n*A+A:-O.highest.height+A/2:"near"===l||0!==y?A/2:"center"===l?O.highest.height/2-n*A:O.highest.height-C*A,f&&(D*=-1)):(E=S,D=(1-C)*A/2),t.showLabelBackdrop){const e=re(t.backdropPadding),n=O.heights[b],i=O.widths[b];let r=E+D-e.top,s=T-e.left;switch(N){case"middle":r-=n/2;break;case"bottom":r-=n}switch(I){case"center":s-=i/2;break;case"right":s-=i}d={left:s,top:r,width:i+e.width,height:n+e.height,color:t.backdropColor}}v.push({rotation:y,label:x,font:k,color:i,strokeColor:c,strokeWidth:h,textOffset:D,textAlign:I,textBaseline:N,translation:[T,E],backdrop:d})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-H(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align&&(n="right"),n}_getYAxisLabelAlignment(t){const e=this,{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=e.options,o=t+s,a=e._getLabelSizes().widest.width;let c,l;return"left"===n?r?(l=e.right+s,"near"===i?c="left":"center"===i?(c="center",l+=a/2):(c="right",l+=a)):(l=e.right-o,"near"===i?c="right":"center"===i?(c="center",l-=a/2):(c="left",l=e.left)):"right"===n?r?(l=e.left+s,"near"===i?c="right":"center"===i?(c="center",l-=a/2):(c="left",l-=a)):(l=e.left+o,"near"===i?c="left":"center"===i?(c="center",l+=a/2):(c="right",l=e.right)):c="right",{textAlign:c,x:l}}_computeLabelArea(){const t=this;if(t.options.ticks.mirror)return;const e=t.chart,n=t.options.position;return"left"===n||"right"===n?{top:0,left:t.left,bottom:e.height,right:t.right}:"top"===n||"bottom"===n?{top:t.top,left:0,bottom:t.bottom,right:e.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:r,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,r,s),t.restore())}getLineWidthForValue(t){const e=this,n=e.options.grid;if(!e._isVisible()||!n.display)return 0;const i=e.ticks.findIndex((e=>e.value===t));return i>=0?n.setContext(e.getContext(i)).lineWidth:0}drawGrid(t){const e=this,n=e.options.grid,i=e.ctx,r=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(t));let s,o;const a=(t,e,n)=>{n.width&&n.color&&(i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.setLineDash(n.borderDash||[]),i.lineDashOffset=n.borderDashOffset,i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const t=r[s];n.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),n.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const t=this,{chart:e,ctx:n,options:{grid:i}}=t,r=i.setContext(t.getContext()),s=i.drawBorder?r.borderWidth:0;if(!s)return;const o=i.setContext(t.getContext(0)).lineWidth,a=t._borderValue;let c,l,u,h;t.isHorizontal()?(c=Bt(e,t.left,s)-s/2,l=Bt(e,t.right,o)+o/2,u=h=a):(u=Bt(e,t.top,s)-s/2,h=Bt(e,t.bottom,o)+o/2,c=l=a),n.save(),n.lineWidth=r.borderWidth,n.strokeStyle=r.borderColor,n.beginPath(),n.moveTo(c,u),n.lineTo(l,h),n.stroke(),n.restore()}drawLabels(t){const e=this;if(!e.options.ticks.display)return;const n=e.ctx,i=e._computeLabelArea();i&&$t(n,i);const r=e._labelItems||(e._labelItems=e._computeLabelItems(t));let s,o;for(s=0,o=r.length;s<o;++s){const t=r[s],e=t.font,i=t.label;t.backdrop&&(n.fillStyle=t.backdrop.color,n.fillRect(t.backdrop.left,t.backdrop.top,t.backdrop.width,t.backdrop.height)),Yt(n,i,0,t.textOffset,e,t)}i&&Wt(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const r=se(n.font),s=re(n.padding),a=n.align;let c=r.lineHeight/2;"bottom"===e||"center"===e||h(e)?(c+=s.bottom,u(n.text)&&(c+=r.lineHeight*(n.text.length-1))):c+=s.top;const{titleX:l,titleY:d,maxWidth:f,rotation:p}=function(t,e,n,i){const{top:r,left:s,bottom:a,right:c,chart:l}=t,{chartArea:u,scales:d}=l;let f,p,g,m=0;const y=a-r,v=c-s;if(t.isHorizontal()){if(p=o(i,s,c),h(n)){const t=Object.keys(n)[0],i=n[t];g=d[t].getPixelForValue(i)+y-e}else g="center"===n?(u.bottom+u.top)/2+y-e:Si(t,n,e);f=c-s}else{if(h(n)){const t=Object.keys(n)[0],i=n[t];p=d[t].getPixelForValue(i)-v+e}else p="center"===n?(u.left+u.right)/2-v+e:Si(t,n,e);g=o(i,a,r),m="left"===n?-P:P}return{titleX:p,titleY:g,maxWidth:f,rotation:m}}(this,c,e,a);Yt(t,n.text,0,0,r,{color:n.color,maxWidth:f,rotation:p,textAlign:Ni(a,e,i),textBaseline:"middle",translation:[l,d]})}draw(t){const e=this;e._isVisible()&&(e.drawBackground(),e.drawGrid(t),e.drawBorder(),e.drawTitle(),e.drawLabels(t))}_layers(){const t=this,e=t.options,n=e.ticks&&e.ticks.z||0,i=p(e.grid&&e.grid.z,-1);return t._isVisible()&&t.draw===Oi.prototype.draw?[{z:i,draw(e){t.drawBackground(),t.drawGrid(e),t.drawTitle()}},{z:i+1,draw(){t.drawBorder()}},{z:n,draw(e){t.drawLabels(e)}}]:[{z:n,draw(e){t.draw(e)}}]}getMatchingVisibleMetas(t){const e=this,n=e.chart.getSortedVisibleDatasetMetas(),i=e.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const o=n[s];o[i]!==e.id||t&&o.type!==t||r.push(o)}return r}_resolveTickFontOptions(t){return se(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this,e=t._resolveTickFontOptions(0).lineHeight;return(t.isHorizontal()?t.width:t.height)/e}}class Mi{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=this,n=Object.getPrototypeOf(t);let i;(function(t){return"id"in t&&"defaults"in t})(n)&&(i=e.register(n));const r=e.items,s=t.id,o=e.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,function(t,e,n){const i=x(Object.create(null),[n?jt.get(n):{},jt.get(e),t.defaults]);jt.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),c=o.join(".");jt.route(s,r,c,a)}))}(e,t.defaultRoutes),t.descriptors&&jt.describe(e,t.descriptors)}(t,o,i),e.override&&jt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in jt[i]&&(delete jt[i][n],this.override&&delete Lt[n])}}var Li=new class{constructor(){this.controllers=new Mi(wn,"datasets",!0),this.elements=new Mi(xi,"elements"),this.plugins=new Mi(Object,"plugins"),this.scales=new Mi(Oi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){const i=this;[...e].forEach((e=>{const r=n||i._getRegistryForType(e);n||r.isForType(e)||r===i.plugins&&e.id?i._exec(t,r,e):y(e,(e=>{const r=n||i._getRegistryForType(e);i._exec(t,r,e)}))}))}_exec(t,e,n){const i=k(t);m(n["before"+i],[],n),e[t](n),m(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}};class Pi{constructor(){this._init=[]}notify(t,e,n,i){const r=this;"beforeInit"===e&&(r._init=r._createDescriptors(t,!0),r._notify(r._init,t,"install"));const s=i?r._descriptors(t).filter(i):r._descriptors(t),o=r._notify(s,t,e,n);return"destroy"===e&&(r._notify(s,t,"stop"),r._notify(r._init,t,"uninstall")),o}_notify(t,e,n,i){i=i||{};for(const r of t){const t=r.plugin;if(!1===m(t[n],[e,i,r.options],t)&&i.cancelable)return!1}return!0}invalidate(){l(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=p(n.options&&n.options.plugins,{}),r=function(t){const e=[],n=Object.keys(Li.plugins.items);for(let t=0;t<n.length;t++)e.push(Li.getPlugin(n[t]));const i=t.plugins||[];for(let t=0;t<i.length;t++){const n=i[t];-1===e.indexOf(n)&&e.push(n)}return e}(n);return!1!==i||e?function(t,e,n,i){const r=[],s=t.getContext();for(let o=0;o<e.length;o++){const a=e[o],c=Ri(n[a.id],i);null!==c&&r.push({plugin:a,options:Fi(t.config,a,c,s)})}return r}(t,r,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function Ri(t,e){return e||!1!==t?!0===t?{}:t:null}function Fi(t,e,n,i){const r=t.pluginScopeKeys(e),s=t.getOptionScopes(n,r);return t.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ji(t,e){const n=jt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Vi(t,e){return"x"===t||"y"===t?t:e.axis||("top"===(n=e.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||t.charAt(0).toLowerCase();var n}function Ui(t){const e=t.options||(t.options={});e.plugins=p(e.plugins,{}),e.scales=function(t,e){const n=Lt[t.type]||{scales:{}},i=e.scales||{},r=ji(t.type,e),s=Object.create(null),o=Object.create(null);return Object.keys(i).forEach((t=>{const e=i[t],a=Vi(t,e),c=function(t,e){return t===e?"_index_":"_value_"}(a,r),l=n.scales||{};s[a]=s[a]||t,o[t]=T(Object.create(null),[{axis:a},e,l[a],l[c]])})),t.data.datasets.forEach((n=>{const r=n.type||t.type,a=n.indexAxis||ji(r,e),c=(Lt[r]||{}).scales||{};Object.keys(c).forEach((t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,a),r=n[e+"AxisID"]||s[e]||e;o[r]=o[r]||Object.create(null),T(o[r],[{axis:e},i[r],c[t]])}))})),Object.keys(o).forEach((t=>{const e=o[t];T(e,[jt.scales[e.type],jt.scale])})),o}(t,e)}function Bi(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const qi=new Map,zi=new Set;function Hi(t,e){let n=qi.get(t);return n||(n=e(),qi.set(t,n),zi.add(n)),n}const $i=(t,e,n)=>{const i=S(e,n);void 0!==i&&t.add(i)};class Wi{constructor(t){this._config=function(t){return(t=t||{}).data=Bi(t.data),Ui(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Bi(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Ui(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Hi(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return Hi(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return Hi(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return Hi(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:r}=this,s=this._cachedScopes(t,n),o=s.get(e);if(o)return o;const a=new Set;e.forEach((e=>{t&&(a.add(t),e.forEach((e=>$i(a,t,e)))),e.forEach((t=>$i(a,i,t))),e.forEach((t=>$i(a,Lt[r]||{},t))),e.forEach((t=>$i(a,jt,t))),e.forEach((t=>$i(a,Pt,t)))}));const c=Array.from(a);return 0===c.length&&c.push(Object.create(null)),zi.has(e)&&s.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,Lt[e]||{},jt.datasets[e]||{},{type:e},jt,Pt]}resolveNamedOptions(t,e,n,i=[""]){const r={$shared:!0},{resolver:s,subPrefixes:o}=Ki(this._resolverCache,t,i);let a=s;(function(t,e){const{isScriptable:n,isIndexable:i}=ge(t);for(const r of e)if(n(r)&&C(t[r])||i(r)&&u(t[r]))return!0;return!1})(s,e)&&(r.$shared=!1,a=pe(s,n=C(n)?n():n,this.createResolver(t,n,o)));for(const t of e)r[t]=a[t];return r}createResolver(t,e,n=[""],i){const{resolver:r}=Ki(this._resolverCache,t,n);return h(e)?pe(r,e,void 0,i):r}}function Ki(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:fe(e,n),subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},i.set(r,s)),s}const Gi=["top","bottom","left","right","chartArea"];function Yi(t,e){return"top"===t||"bottom"===t||-1===Gi.indexOf(t)&&"x"===e}function Xi(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Qi(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),m(n&&n.onComplete,[t],e)}function Ji(t){const e=t.chart,n=e.options.animation;m(n&&n.onProgress,[t],e)}function Zi(t){return Oe()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const tr={},er=t=>{const e=Zi(t);return Object.values(tr).filter((t=>t.canvas===e)).pop()};class nr{constructor(t,e){const n=this,i=this.config=new Wi(e),r=Zi(t),s=er(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas can be reused.");const o=i.createResolver(i.chartOptionScopes(),n.getContext());this.platform=new(i.platform||wi(r));const a=n.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;this.id=c(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Pi,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(){return e?(clearTimeout(n),n=setTimeout(t,e)):t(),e}}((()=>this.update("resize")),o.resizeDelay||0),tr[n.id]=n,a&&l?(rn.listen(n,"complete",Qi),rn.listen(n,"progress",Ji),n._initialize(),n.attached&&n.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:i,_aspectRatio:r}=this;return l(t)?e&&r?r:i?n/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){const t=this;return t.notifyPlugins("beforeInit"),t.options.responsive?t.resize():Ue(t,t.options.devicePixelRatio),t.bindEvents(),t.notifyPlugins("afterInit"),t}clear(){return qt(this.canvas,this.ctx),this}stop(){return rn.stop(this),this}resize(t,e){rn.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this,i=n.options,r=n.canvas,s=i.maintainAspectRatio&&n.aspectRatio,o=n.platform.getMaximumSize(r,t,e,s),a=i.devicePixelRatio||n.platform.getDevicePixelRatio();n.width=o.width,n.height=o.height,n._aspectRatio=n.aspectRatio,Ue(n,a,!0)&&(n.notifyPlugins("resize",{size:o}),m(i.onResize,[n,o],n),n.attached&&n._doResize()&&n.render())}ensureScalesHaveIDs(){y(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this,e=t.options,n=e.scales,i=t.scales,r=Object.keys(i).reduce(((t,e)=>(t[e]=!1,t)),{});let s=[];n&&(s=s.concat(Object.keys(n).map((t=>{const e=n[t],i=Vi(t,e),r="r"===i,s="x"===i;return{options:e,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}})))),y(s,(n=>{const s=n.options,o=s.id,a=Vi(o,s),c=p(s.type,n.dtype);void 0!==s.position&&Yi(s.position,a)===Yi(n.dposition)||(s.position=n.dposition),r[o]=!0;let l=null;o in i&&i[o].type===c?l=i[o]:(l=new(Li.getScale(c))({id:o,type:c,ctx:t.ctx,chart:t}),i[l.id]=l),l.init(s,e)})),y(r,((t,e)=>{t||delete i[e]})),y(i,(e=>{si.configure(t,e,e.options),si.addBox(t,e)}))}_updateMetasets(){const t=this,e=t._metasets,n=t.data.datasets.length,i=e.length;if(e.sort(((t,e)=>t.index-e.index)),i>n){for(let e=n;e<i;++e)t._destroyDatasetMeta(e);e.splice(n,i-n)}t._sortedMetasets=e.slice(0).sort(Xi("order","index"))}_removeUnreferencedMetasets(){const t=this,{_metasets:e,data:{datasets:n}}=t;e.length>n.length&&delete t._stacks,e.forEach(((e,i)=>{0===n.filter((t=>t===e._dataset)).length&&t._destroyDatasetMeta(i)}))}buildOrUpdateControllers(){const t=this,e=[],n=t.data.datasets;let i,r;for(t._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const r=n[i];let s=t.getDatasetMeta(i);const o=r.type||t.config.type;if(s.type&&s.type!==o&&(t._destroyDatasetMeta(i),s=t.getDatasetMeta(i)),s.type=o,s.indexAxis=r.indexAxis||ji(o,t.options),s.order=r.order||0,s.index=i,s.label=""+r.label,s.visible=t.isDatasetVisible(i),s.controller)s.controller.updateIndex(i),s.controller.linkScales();else{const n=Li.getController(o),{datasetElementType:r,dataElementType:a}=jt.datasets[o];Object.assign(n.prototype,{dataElementType:Li.getElement(a),datasetElementType:r&&Li.getElement(r)}),s.controller=new n(t,i),e.push(s.controller)}}return t._updateMetasets(),e}_resetElements(){const t=this;y(t.data.datasets,((e,n)=>{t.getDatasetMeta(n).controller.reset()}),t)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this,n=e.config;n.update(),e._options=n.createResolver(n.chartOptionScopes(),e.getContext()),y(e.scales,(t=>{si.removeBox(e,t)}));const i=e._animationsDisabled=!e.options.animation;if(e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),((t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0})(new Set(Object.keys(e._listeners)),new Set(e.options.events))&&!!this._responsiveListeners===e.options.responsive||(e.unbindEvents(),e.bindEvents()),e._plugins.invalidate(),!1===e.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const r=e.buildOrUpdateControllers();e.notifyPlugins("beforeElementsUpdate");let s=0;for(let t=0,n=e.data.datasets.length;t<n;t++){const{controller:n}=e.getDatasetMeta(t),o=!i&&-1===r.indexOf(n);n.buildOrUpdateElements(o),s=Math.max(+n.getMaxOverflow(),s)}e._minPadding=s,e._updateLayout(s),i||y(r,(t=>{t.reset()})),e._updateDatasets(t),e.notifyPlugins("afterUpdate",{mode:t}),e._layers.sort(Xi("z","_idx")),e._lastEvent&&e._eventHandler(e._lastEvent,!0),e.render()}_updateLayout(t){const e=this;if(!1===e.notifyPlugins("beforeLayout",{cancelable:!0}))return;si.update(e,e.width,e.height,t);const n=e.chartArea,i=n.width<=0||n.height<=0;e._layers=[],y(e.boxes,(t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),e._layers.push(...t._layers()))}),e),e._layers.forEach(((t,e)=>{t._idx=e})),e.notifyPlugins("afterLayout")}_updateDatasets(t){const e=this,n="function"==typeof t;if(!1!==e.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let i=0,r=e.data.datasets.length;i<r;++i)e._updateDataset(i,n?t({datasetIndex:i}):t);e.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this,i=n.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};!1!==n.notifyPlugins("beforeDatasetUpdate",r)&&(i.controller._update(e),r.cancelable=!1,n.notifyPlugins("afterDatasetUpdate",r))}render(){const t=this;!1!==t.notifyPlugins("beforeRender",{cancelable:!0})&&(rn.has(t)?t.attached&&!rn.running(t)&&rn.start(t):(t.draw(),Qi({chart:t})))}draw(){const t=this;let e;if(t._resizeBeforeDraw){const{width:e,height:n}=t._resizeBeforeDraw;t._resize(e,n),t._resizeBeforeDraw=null}if(t.clear(),t.width<=0||t.height<=0)return;if(!1===t.notifyPlugins("beforeDraw",{cancelable:!0}))return;const n=t._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(t.chartArea);for(t._drawDatasets();e<n.length;++e)n[e].draw(t.chartArea);t.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,r;for(i=0,r=e.length;i<r;++i){const r=e[i];t&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){const t=this;if(!1===t.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=t.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)t._drawDataset(e[n]);t.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this,n=e.ctx,i=t._clip,r=!i.disabled,s=e.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==e.notifyPlugins("beforeDatasetDraw",o)&&(r&&$t(n,{left:!1===i.left?0:s.left-i.left,right:!1===i.right?e.width:s.right+i.right,top:!1===i.top?0:s.top-i.top,bottom:!1===i.bottom?e.height:s.bottom+i.bottom}),t.controller.draw(),r&&Wt(n),o.cancelable=!1,e.notifyPlugins("afterDatasetDraw",o))}getElementsAtEventForMode(t,e,n,i){const r=Kn.modes[e];return"function"==typeof r?r(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter((t=>t&&t._dataset===e)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context={chart:this,type:"chart"})}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=this,r=n?"show":"hide",s=i.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,r);A(e)?(s.data[e].hidden=!n,i.update()):(i.setDatasetVisibility(t,n),o.update(s,{visible:n}),i.update((e=>e.datasetIndex===t?r:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this,n=e._metasets&&e._metasets[t];n&&n.controller&&(n.controller._destroy(),delete e._metasets[t])}destroy(){const t=this,{canvas:e,ctx:n}=t;let i,r;for(t.stop(),rn.remove(t),i=0,r=t.data.datasets.length;i<r;++i)t._destroyDatasetMeta(i);t.config.clearCache(),e&&(t.unbindEvents(),qt(e,n),t.platform.releaseContext(n),t.canvas=null,t.ctx=null),t.notifyPlugins("destroy"),delete tr[t.id]}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this,e=t._listeners,n=t.platform,i=function(e,n,i){e.offsetX=n,e.offsetY=i,t._eventHandler(e)};y(t.options.events,(r=>((i,r)=>{n.addEventListener(t,i,r),e[i]=r})(r,i)))}bindResponsiveEvents(){const t=this;t._responsiveListeners||(t._responsiveListeners={});const e=t._responsiveListeners,n=t.platform,i=(i,r)=>{n.addEventListener(t,i,r),e[i]=r},r=(i,r)=>{e[i]&&(n.removeEventListener(t,i,r),delete e[i])},s=(e,n)=>{t.canvas&&t.resize(e,n)};let o;const a=()=>{r("attach",a),t.attached=!0,t.resize(),i("resize",s),i("detach",o)};o=()=>{t.attached=!1,r("resize",s),i("attach",a)},n.isAttached(t.canvas)?a():o()}unbindEvents(){const t=this;y(t._listeners,((e,n)=>{t.platform.removeEventListener(t,n,e)})),t._listeners={},y(t._responsiveListeners,((e,n)=>{t.platform.removeEventListener(t,n,e)})),t._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let r,s,o,a;for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),o=0,a=t.length;o<a;++o){s=t[o];const e=s&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this,n=e._active||[],i=t.map((({datasetIndex:t,index:n})=>{const i=e.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}));!v(i,n)&&(e._active=i,e._updateHoverStyles(i,n))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}_updateHoverStyles(t,e,n){const i=this,r=i.options.hover,s=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=s(e,t),a=n?t:s(t,e);o.length&&i.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&i.updateHoverStyle(a,r.mode,!0)}_eventHandler(t,e){const n=this,i={event:t,replay:e,cancelable:!0},r=e=>(e.options.events||this.options.events).includes(t.type);if(!1===n.notifyPlugins("beforeEvent",i,r))return;const s=n._handleEvent(t,e);return i.cancelable=!1,n.notifyPlugins("afterEvent",i,r),(s||i.changed)&&n.render(),n}_handleEvent(t,e){const n=this,{_active:i=[],options:r}=n,s=r.hover,o=e;let a=[],c=!1,l=null;return"mouseout"!==t.type&&(a=n.getElementsAtEventForMode(t,s.mode,s,o),l="click"===t.type?n._lastEvent:t),n._lastEvent=null,Ht(t,n.chartArea,n._minPadding)&&(m(r.onHover,[t,a,n],n),"mouseup"!==t.type&&"click"!==t.type&&"contextmenu"!==t.type||m(r.onClick,[t,a,n],n)),c=!v(a,i),(c||e)&&(n._active=a,n._updateHoverStyles(a,i,e)),n._lastEvent=l,c}}const ir=()=>y(nr.instances,(t=>t._plugins.invalidate())),rr=!0;function sr(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:c}=e;let l=r/a;t.beginPath(),t.arc(s,o,a,i-l,n+l),c>r?(l=r/c,t.arc(s,o,c,n+l,i-l,!0)):t.arc(s,o,r,n+P,i-P),t.closePath(),t.clip()}function or(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function ar(t,e,n,i,r){const{x:s,y:o,startAngle:a,pixelMargin:c,innerRadius:l}=e,u=Math.max(e.outerRadius+i+n-c,0),h=l>0?l+i+n+c:0;let d=0;const f=r-a;if(i){const t=((l>0?l-i:0)+(u>0?u-i:0))/2;d=(f-(0!==t?f*t/(t+i):f))/2}const p=(f-Math.max(.001,f*u-n/D)/u)/2,g=a+p+d,m=r-p-d,{outerStart:y,outerEnd:v,innerStart:b,innerEnd:_}=function(t,e,n,i){const r=ee(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),s=(n-e)/2,o=Math.min(s,i*e/2),a=t=>{const e=(n-Math.min(s,t))*i/2;return Q(t,0,Math.min(s,e))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Q(r.innerStart,0,o),innerEnd:Q(r.innerEnd,0,o)}}(e,h,u,m-g),w=u-y,x=u-v,T=g+y/w,E=m-v/x,I=h+b,S=h+_,k=g+b/I,A=m-_/S;if(t.beginPath(),t.arc(s,o,u,T,E),v>0){const e=or(x,E,s,o);t.arc(e.x,e.y,v,E,m+P)}const C=or(S,m,s,o);if(t.lineTo(C.x,C.y),_>0){const e=or(S,A,s,o);t.arc(e.x,e.y,_,m+P,A+Math.PI)}if(t.arc(s,o,h,m-_/h,g+b/h,!0),b>0){const e=or(I,k,s,o);t.arc(e.x,e.y,b,k+Math.PI,g-P)}const N=or(w,g,s,o);if(t.lineTo(N.x,N.y),y>0){const e=or(w,T,s,o);t.arc(e.x,e.y,y,g-P,T)}t.closePath()}Object.defineProperties(nr,{defaults:{enumerable:rr,value:jt},instances:{enumerable:rr,value:tr},overrides:{enumerable:rr,value:Lt},registry:{enumerable:rr,value:Li},version:{enumerable:rr,value:"3.5.1"},getChart:{enumerable:rr,value:er},register:{enumerable:rr,value:(...t)=>{Li.add(...t),ir()}},unregister:{enumerable:rr,value:(...t)=>{Li.remove(...t),ir()}}});class cr extends xi{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=function(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*D&&(s+=N),{angle:s,distance:r}}(i,{x:t,y:e}),{startAngle:o,endAngle:a,innerRadius:c,outerRadius:l,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=this.options.spacing/2;return(u>=N||X(r,o,a))&&s>=c+h&&s<=l+h}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:a,spacing:c}=this.options,l=(i+r)/2,u=(s+o+c+a)/2;return{x:e+Math.cos(l)*u,y:n+Math.sin(l)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const e=this,{options:n,circumference:i}=e,r=(n.offset||0)/2,s=(n.spacing||0)/2;if(e.pixelMargin="inner"===n.borderAlign?.33:0,e.fullCircles=i>N?Math.floor(i/N):0,0===i||e.innerRadius<0||e.outerRadius<0)return;t.save();let o=0;if(r){o=r/2;const n=(e.startAngle+e.endAngle)/2;t.translate(Math.cos(n)*o,Math.sin(n)*o),e.circumference>=D&&(o=r)}t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor;const a=function(t,e,n,i){const{fullCircles:r,startAngle:s,circumference:o}=e;let a=e.endAngle;if(r){ar(t,e,n,i,s+N);for(let e=0;e<r;++e)t.fill();isNaN(o)||(a=s+o%N,o%N==0&&(a+=N))}return ar(t,e,n,i,a),t.fill(),a}(t,e,o,s);(function(t,e,n,i,r){const{options:s}=e,o="inner"===s.borderAlign;s.borderWidth&&(o?(t.lineWidth=2*s.borderWidth,t.lineJoin="round"):(t.lineWidth=s.borderWidth,t.lineJoin="bevel"),e.fullCircles&&function(t,e,n){const{x:i,y:r,startAngle:s,pixelMargin:o,fullCircles:a}=e,c=Math.max(e.outerRadius-o,0),l=e.innerRadius+o;let u;for(n&&sr(t,e,s+N),t.beginPath(),t.arc(i,r,l,s+N,s,!0),u=0;u<a;++u)t.stroke();for(t.beginPath(),t.arc(i,r,c,s,s+N),u=0;u<a;++u)t.stroke()}(t,e,o),o&&sr(t,e,r),ar(t,e,n,i,r),t.stroke())})(t,e,o,s,a),t.restore()}}function lr(t,e,n=e){t.lineCap=p(n.borderCapStyle,e.borderCapStyle),t.setLineDash(p(n.borderDash,e.borderDash)),t.lineDashOffset=p(n.borderDashOffset,e.borderDashOffset),t.lineJoin=p(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=p(n.borderWidth,e.borderWidth),t.strokeStyle=p(n.borderColor,e.borderColor)}function ur(t,e,n){t.lineTo(n.x,n.y)}function hr(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,c=Math.max(r,o),l=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:c,loop:e.loop,ilen:l<c&&!u?i+l-c:l-c}}function dr(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:c,ilen:l}=hr(r,n,i),u=function(t){return t.stepped?Kt:t.tension||"monotone"===t.cubicInterpolationMode?Gt:ur}(s);let h,d,f,{move:p=!0,reverse:g}=i||{};for(h=0;h<=l;++h)d=r[(a+(g?l-h:h))%o],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):u(t,f,d,g,s.stepped),f=d);return c&&(d=r[(a+(g?l:0))%o],u(t,f,d,g,s.stepped)),!!c}function fr(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=hr(r,n,i),{move:c=!0,reverse:l}=i||{};let u,h,d,f,p,g,m=0,y=0;const v=t=>(o+(l?a-t:t))%s,b=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(c&&(h=r[v(0)],t.moveTo(h.x,h.y)),u=0;u<=a;++u){if(h=r[v(u)],h.skip)continue;const e=h.x,n=h.y,i=0|e;i===d?(n<f?f=n:n>p&&(p=n),m=(y*m+e)/++y):(b(),t.lineTo(e,n),d=i,y=0,f=p=n),g=n}b()}function pr(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n?dr:fr}cr.id="arc",cr.defaults={borderAlign:"center",borderColor:"#fff",borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},cr.defaultRoutes={backgroundColor:"backgroundColor"};const gr="function"==typeof Path2D;class mr extends xi{constructor(t){super(),this.animated=!0,this.options=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this,i=n.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!n._pointsUpdated){const r=i.spanGaps?n._loop:n._fullLoop;Ne(n._points,i,t,r,e),n._pointsUpdated=!0}}set points(t){const e=this;e._points=t,delete e._segments,delete e._path,e._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=function(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}(n,r,s,i);return function(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){const r=en(t.options),s=n.length,o=[];let a=e[0].start,c=a;for(const l of e){let e,u=r,h=n[a%s];for(c=a+1;c<=l.end;c++){const r=n[c%s];e=en(i.setContext({type:"segment",p0:h,p1:r,p0DataIndex:(c-1)%s,p1DataIndex:c%s,datasetIndex:t._datasetIndex})),nn(e,u)&&(o.push({start:a,end:c-1,loop:l.loop,style:u}),u=e,a=c-1),h=r,u=e}a<c-1&&(o.push({start:a,end:c-1,loop:l.loop,style:e}),a=c-1)}return o}(t,e,n,i):e}(t,!0===i?[{start:o,end:a,loop:s}]:function(t,e,n,i){const r=t.length,s=[];let o,a=e,c=t[e];for(o=e+1;o<=n;++o){const n=t[o%r];n.skip||n.stop?c.skip||(i=!1,s.push({start:e%r,end:(o-1)%r,loop:i}),e=a=n.stop?o:null):(a=o,c.skip&&(e=o)),c=n}return null!==a&&s.push({start:e%r,end:a%r,loop:i}),s}(n,o,a<o?a+r:a,!!t._fullLoop&&0===o&&a===r-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this,i=n.options,r=t[e],s=n.points,o=tn(n,{property:e,start:r,end:r});if(!o.length)return;const a=[],c=function(t){return t.stepped?He:t.tension||"monotone"===t.cubicInterpolationMode?$e:ze}(i);let l,u;for(l=0,u=o.length;l<u;++l){const{start:n,end:u}=o[l],h=s[n],d=s[u];if(h===d){a.push(h);continue}const f=c(h,d,Math.abs((r-h[e])/(d[e]-h[e])),i.stepped);f[e]=t[e],a.push(f)}return 1===a.length?a[0]:a}pathSegment(t,e,n){return pr(this)(t,this,e,n)}path(t,e,n){const i=this,r=i.segments,s=pr(i);let o=i._loop;e=e||0,n=n||i.points.length-e;for(const a of r)o&=s(t,i,a,{start:e,end:e+n-1});return!!o}draw(t,e,n,i){const r=this,s=r.options||{};(r.points||[]).length&&s.borderWidth&&(t.save(),function(t,e,n,i){gr&&1===e.segments.length?function(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),lr(t,e.options),t.stroke(r)}(t,e,n,i):function(t,e,n,i){const{segments:r,options:s}=e,o=pr(e);for(const a of r)lr(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}(t,r,n,i),t.restore(),r.animated&&(r._pointsUpdated=!1,r._path=void 0))}}function yr(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}mr.id="line",mr.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},mr.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},mr.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};class vr extends xi{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(e-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return yr(this,t,"x",e)}inYRange(t,e){return yr(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;return e=Math.max(e,e&&t.hoverRadius||0),2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this,i=n.options;n.skip||i.radius<.1||!Ht(n,e,n.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,zt(t,i,n.x,n.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function br(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,c,l,u,h;return t.horizontal?(h=o/2,a=Math.min(n,r),c=Math.max(n,r),l=i-h,u=i+h):(h=s/2,a=n-h,c=n+h,l=Math.min(i,r),u=Math.max(i,r)),{left:a,top:l,right:c,bottom:u}}function _r(t,e,n,i){return t?0:Q(e,n,i)}function wr(t,e,n,i){const r=null===e,s=null===n,o=t&&!(r&&s)&&br(t,i);return o&&(r||e>=o.left&&e<=o.right)&&(s||n>=o.top&&n<=o.bottom)}function xr(t,e){t.rect(e.x,e.y,e.w,e.h)}function Tr(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}vr.id="point",vr.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},vr.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class Er extends xi{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,t&&Object.assign(this,t)}draw(t){const e=this.options,{inner:n,outer:i}=function(t){const e=br(t),n=e.right-e.left,i=e.bottom-e.top,r=function(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=ne(i);return{t:_r(r.top,s.top,0,n),r:_r(r.right,s.right,0,e),b:_r(r.bottom,s.bottom,0,n),l:_r(r.left,s.left,0,e)}}(t,n/2,i/2),s=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=ie(r),o=Math.min(e,n),a=t.borderSkipped,c=i||h(r);return{topLeft:_r(!c||a.top||a.left,s.topLeft,0,o),topRight:_r(!c||a.top||a.right,s.topRight,0,o),bottomLeft:_r(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:_r(!c||a.bottom||a.right,s.bottomRight,0,o)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}(this),r=(s=i.radius).topLeft||s.topRight||s.bottomLeft||s.bottomRight?Qt:xr;var s;t.save(),i.w===n.w&&i.h===n.h||(t.beginPath(),r(t,Tr(i,.33,n)),t.clip(),r(t,Tr(n,-.33,i)),t.fillStyle=e.borderColor,t.fill("evenodd")),t.beginPath(),r(t,Tr(n,.33,i)),t.fillStyle=e.backgroundColor,t.fill(),t.restore()}inRange(t,e,n){return wr(this,t,e,n)}inXRange(t,e){return wr(this,t,null,e)}inYRange(t,e){return wr(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}Er.id="bar",Er.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,enableBorderRadius:!0,pointStyle:void 0},Er.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Ir=Object.freeze({__proto__:null,ArcElement:cr,LineElement:mr,PointElement:vr,BarElement:Er});function Sr(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function kr(t){t.data.datasets.forEach((t=>{Sr(t)}))}var Ar={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void kr(t);const i=t.width;t.data.datasets.forEach(((e,r)=>{const{_data:s,indexAxis:o}=e,a=t.getDatasetMeta(r),c=s||e.data;if("y"===oe([o,t.options.indexAxis]))return;if("line"!==a.type)return;const u=t.scales[a.xAxisID];if("linear"!==u.type&&"time"!==u.type)return;if(t.options.parsing)return;let h,{start:d,count:f}=function(t,e){const n=e.length;let i,r=0;const{iScale:s}=t,{min:o,max:a,minDefined:c,maxDefined:l}=s.getUserBounds();return c&&(r=Q(ce(e,s.axis,o).lo,0,n-1)),i=l?Q(ce(e,s.axis,a).hi+1,r,n)-r:n-r,{start:r,count:i}}(a,c);if(f<=(n.threshold||4*i))Sr(e);else{switch(l(s)&&(e._data=c,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":h=function(t,e,n,i,r){const s=r.samples||i;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let c=0;const l=e+n-1;let u,h,d,f,p,g=e;for(o[c++]=t[g],u=0;u<s-2;u++){let i,r=0,s=0;const l=Math.floor((u+1)*a)+1+e,m=Math.min(Math.floor((u+2)*a)+1,n)+e,y=m-l;for(i=l;i<m;i++)r+=t[i].x,s+=t[i].y;r/=y,s/=y;const v=Math.floor(u*a)+1+e,b=Math.min(Math.floor((u+1)*a)+1,n)+e,{x:_,y:w}=t[g];for(d=f=-1,i=v;i<b;i++)f=.5*Math.abs((_-r)*(t[i].y-w)-(_-t[i].x)*(s-w)),f>d&&(d=f,h=t[i],p=i);o[c++]=h,g=p}return o[c++]=t[l],o}(c,d,f,i,n);break;case"min-max":h=function(t,e,n,i){let r,s,o,a,c,u,h,d,f,p,g=0,m=0;const y=[],v=e+n-1,b=t[e].x,_=t[v].x-b;for(r=e;r<e+n;++r){s=t[r],o=(s.x-b)/_*i,a=s.y;const e=0|o;if(e===c)a<f?(f=a,u=r):a>p&&(p=a,h=r),g=(m*g+s.x)/++m;else{const n=r-1;if(!l(u)&&!l(h)){const e=Math.min(u,h),i=Math.max(u,h);e!==d&&e!==n&&y.push({...t[e],x:g}),i!==d&&i!==n&&y.push({...t[i],x:g})}r>0&&n!==d&&y.push(t[n]),y.push(s),c=e,m=0,f=p=a,u=h=d=r}}return y}(c,d,f,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=h}}))},destroy(t){kr(t)}};function Cr(t,e,n){const i=function(t){const e=t.options,n=e.fill;let i=p(n&&n.target,n);return void 0===i&&(i=!!e.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(t);if(h(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return d(r)&&Math.floor(r)===r?("-"!==i[0]&&"+"!==i[0]||(r=e+r),!(r===e||r<0||r>=n)&&r):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}class Dr{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:r,radius:s}=this;return e=e||{start:0,end:N},t.arc(i,r,s,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,r=t.angle;return{x:e+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function Nr(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}const Or=t=>"line"===t.type&&!t.hidden;function Mr(t,e,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:o,last:a,point:c}=Lr(s,e,"x");if(!(!c||o&&a))if(o)i.unshift(c);else if(t.push(c),!a)break}t.push(...i)}function Lr(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],s=t.segments,o=t.points;let a=!1,c=!1;for(let t=0;t<s.length;t++){const e=s[t],i=o[e.start][n],l=o[e.end][n];if(r>=i&&r<=l){a=r===i,c=r===l;break}}return{first:a,last:c,point:i}}function Pr(t,e){let n=[],i=!1;return u(t)?(i=!0,n=t):n=function(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,s=[];return e.segments.forEach((({start:t,end:e})=>{e=Nr(t,e,r);const o=r[t],a=r[e];null!==i?(s.push({x:o.x,y:i}),s.push({x:a.x,y:i})):null!==n&&(s.push({x:n,y:o.y}),s.push({x:n,y:a.y}))})),s}(t,e),n.length?new mr({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function Rr(t,e,n){let i=t[e].fill;const r=[e];let s;if(!n)return i;for(;!1!==i&&-1===r.indexOf(i);){if(!d(i))return i;if(s=t[i],!s)return!1;if(s.visible)return i;r.push(i),i=s.fill}return!1}function Fr(t,e,n){t.beginPath(),e.path(t),t.lineTo(e.last().x,n),t.lineTo(e.first().x,n),t.closePath(),t.clip()}function jr(t,e,n,i){if(i)return;let r=e[t],s=n[t];return"angle"===t&&(r=Y(r),s=Y(s)),{property:t,start:r,end:s}}function Vr(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function Ur(t,e,n){const{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};"x"===s&&(t.beginPath(),t.rect(o,i,a-o,r-i),t.clip())}function Br(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}function qr(t,e){const{line:n,target:i,property:r,color:s,scale:o}=e,a=function(t,e,n){const i=t.segments,r=t.points,s=e.points,o=[];for(const t of i){let{start:i,end:a}=t;a=Nr(i,a,r);const c=jr(n,r[i],r[a],t.loop);if(!e.segments){o.push({source:t,target:c,start:r[i],end:r[a]});continue}const l=tn(e,c);for(const e of l){const i=jr(n,s[e.start],s[e.end],e.loop),a=Ze(t,r,i);for(const t of a)o.push({source:t,target:e,start:{[n]:Vr(c,i,"start",Math.max)},end:{[n]:Vr(c,i,"end",Math.min)}})}}return o}(n,i,r);for(const{source:e,target:c,start:l,end:u}of a){const{style:{backgroundColor:a=s}={}}=e,h=!0!==i;t.save(),t.fillStyle=a,Ur(t,o,h&&jr(r,l,u)),t.beginPath();const d=!!n.pathSegment(t,e);let f;if(h){d?t.closePath():Br(t,i,u,r);const e=!!i.pathSegment(t,c,{move:d,reverse:!0});f=d&&e,f||Br(t,i,l,r)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function zr(t,e,n){const i=function(t){const{chart:e,fill:n,line:i}=t;if(d(n))return function(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}(e,n);if("stack"===n)return function(t){const{chart:e,scale:n,index:i,line:r}=t,s=[],o=r.segments,a=r.points,c=function(t,e){const n=[],i=t.getSortedVisibleDatasetMetas();for(let t=0;t<i.length;t++){const r=i[t];if(r.index===e)break;Or(r)&&n.unshift(r.dataset)}return n}(e,i);c.push(Pr({x:null,y:n.bottom},r));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)Mr(s,a[t],c)}return new mr({points:s,options:{}})}(t);if("shape"===n)return!0;const r=function(t){return(t.scale||{}).getPointPositionForValue?function(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,s=[],o=i.reverse?e.max:e.min,a=i.reverse?e.min:e.max;let c,l,u;if(u="start"===n?o:"end"===n?a:h(n)?n.value:e.getBaseValue(),i.grid.circular)return l=e.getPointPositionForValue(0,o),new Dr({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(u)});for(c=0;c<r;++c)s.push(e.getPointPositionForValue(c,u));return s}(t):function(t){const{scale:e={},fill:n}=t;let i,r=null;return"start"===n?r=e.bottom:"end"===n?r=e.top:h(n)?r=e.getPixelForValue(n.value):e.getBasePixel&&(r=e.getBasePixel()),d(r)?(i=e.isHorizontal(),{x:i?r:null,y:i?null:r}):null}(t)}(t);return r instanceof Dr?r:Pr(r,i)}(e),{line:r,scale:s,axis:o}=e,a=r.options,c=a.fill,l=a.backgroundColor,{above:u=l,below:f=l}=c||{};i&&r.points.length&&($t(t,n),function(t,e){const{line:n,target:i,above:r,below:s,area:o,scale:a}=e,c=n._loop?"angle":e.axis;t.save(),"x"===c&&s!==r&&(Fr(t,i,o.top),qr(t,{line:n,target:i,color:r,scale:a,property:c}),t.restore(),t.save(),Fr(t,i,o.bottom)),qr(t,{line:n,target:i,color:s,scale:a,property:c}),t.restore()}(t,{line:r,target:i,above:u,below:f,area:n,scale:s,axis:o}),Wt(t))}var Hr={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let s,o,a,c;for(o=0;o<i;++o)s=t.getDatasetMeta(o),a=s.dataset,c=null,a&&a.options&&a instanceof mr&&(c={visible:t.isDatasetVisible(o),index:o,fill:Cr(a,o,i),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=c,r.push(c);for(o=0;o<i;++o)c=r[o],c&&!1!==c.fill&&(c.fill=Rr(r,o,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,r=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let e=r.length-1;e>=0;--e){const n=r[e].$filler;n&&(n.line.updateControlPoints(s,n.axis),i&&zr(t.ctx,n,s))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;n&&zr(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;i&&!1!==i.fill&&"beforeDatasetDraw"===n.drawTime&&zr(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const $r=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class Wr extends xi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){const i=this;i.maxWidth=t,i.maxHeight=e,i._margins=n,i.setDimensions(),i.buildLabels(),i.fit()}setDimensions(){const t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=t._margins.left,t.right=t.width):(t.height=t.maxHeight,t.top=t._margins.top,t.bottom=t.height)}buildLabels(){const t=this,e=t.options.labels||{};let n=m(e.generateLabels,[t.chart],t)||[];e.filter&&(n=n.filter((n=>e.filter(n,t.chart.data)))),e.sort&&(n=n.sort(((n,i)=>e.sort(n,i,t.chart.data)))),t.options.reverse&&n.reverse(),t.legendItems=n}fit(){const t=this,{options:e,ctx:n}=t;if(!e.display)return void(t.width=t.height=0);const i=e.labels,r=se(i.font),s=r.size,o=t._computeTitleHeight(),{boxWidth:a,itemHeight:c}=$r(i,s);let l,u;n.font=r.string,t.isHorizontal()?(l=t.maxWidth,u=t._fitRows(o,s,a,c)+10):(u=t.maxHeight,l=t._fitCols(o,s,a,c)+10),t.width=Math.min(l,e.maxWidth||t.maxWidth),t.height=Math.min(u,e.maxHeight||t.maxHeight)}_fitRows(t,e,n,i){const r=this,{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=r,c=r.legendHitBoxes=[],l=r.lineWidths=[0],u=i+a;let h=t;s.textAlign="left",s.textBaseline="middle";let d=-1,f=-u;return r.legendItems.forEach(((t,r)=>{const p=n+e/2+s.measureText(t.text).width;(0===r||l[l.length-1]+p+2*a>o)&&(h+=u,l[l.length-(r>0?0:1)]=0,f+=u,d++),c[r]={left:0,top:f,row:d,width:p,height:i},l[l.length-1]+=p+a})),h}_fitCols(t,e,n,i){const r=this,{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=r,c=r.legendHitBoxes=[],l=r.columnSizes=[],u=o-t;let h=a,d=0,f=0,p=0,g=0;return r.legendItems.forEach(((t,r)=>{const o=n+e/2+s.measureText(t.text).width;r>0&&f+i+2*a>u&&(h+=d+a,l.push({width:d,height:f}),p+=d+a,g++,d=f=0),c[r]={left:p,top:f,col:g,width:o,height:i},d=Math.max(d,o),f+=i+a})),h+=d,l.push({width:d,height:f}),h}adjustHitBoxes(){const t=this;if(!t.options.display)return;const e=t._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=t,a=Ge(s,t.left,t.width);if(this.isHorizontal()){let s=0,c=o(i,t.left+r,t.right-t.lineWidths[s]);for(const l of n)s!==l.row&&(s=l.row,c=o(i,t.left+r,t.right-t.lineWidths[s])),l.top+=t.top+e+r,l.left=a.leftForLtr(a.x(c),l.width),c+=l.width+r}else{let s=0,c=o(i,t.top+e+r,t.bottom-t.columnSizes[s].height);for(const l of n)l.col!==s&&(s=l.col,c=o(i,t.top+e+r,t.bottom-t.columnSizes[s].height)),l.top=c,l.left+=t.left+r,l.left=a.leftForLtr(a.x(l.left),l.width),c+=l.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){const t=this;if(t.options.display){const e=t.ctx;$t(e,t),t._draw(),Wt(e)}}_draw(){const t=this,{options:e,columnSizes:n,lineWidths:i,ctx:r}=t,{align:s,labels:a}=e,c=jt.color,l=Ge(e.rtl,t.left,t.width),u=se(a.font),{color:h,padding:d}=a,f=u.size,g=f/2;let m;t.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:y,boxHeight:v,itemHeight:b}=$r(a,f),_=t.isHorizontal(),w=this._computeTitleHeight();m=_?{x:o(s,t.left+d,t.right-i[0]),y:t.top+d+w,line:0}:{x:t.left+d,y:o(s,t.top+w+d,t.bottom-n[0].height),line:0},Ye(t.ctx,e.textDirection);const x=b+d;t.legendItems.forEach(((T,E)=>{r.strokeStyle=T.fontColor||h,r.fillStyle=T.fontColor||h;const I=r.measureText(T.text).width,S=l.textAlign(T.textAlign||(T.textAlign=a.textAlign)),k=y+g+I;let A=m.x,C=m.y;l.setWidth(t.width),_?E>0&&A+k+d>t.right&&(C=m.y+=x,m.line++,A=m.x=o(s,t.left+d,t.right-i[m.line])):E>0&&C+x>t.bottom&&(A=m.x=A+n[m.line].width+d,m.line++,C=m.y=o(s,t.top+w+d,t.bottom-n[m.line].height)),function(t,e,n){if(isNaN(y)||y<=0||isNaN(v)||v<0)return;r.save();const i=p(n.lineWidth,1);if(r.fillStyle=p(n.fillStyle,c),r.lineCap=p(n.lineCap,"butt"),r.lineDashOffset=p(n.lineDashOffset,0),r.lineJoin=p(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=p(n.strokeStyle,c),r.setLineDash(p(n.lineDash,[])),a.usePointStyle){const s={radius:y*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},o=l.xPlus(t,y/2);zt(r,s,o,e+g)}else{const s=e+Math.max((f-v)/2,0),o=l.leftForLtr(t,y),a=ie(n.borderRadius);r.beginPath(),Object.values(a).some((t=>0!==t))?Qt(r,{x:o,y:s,w:y,h:v,radius:a}):r.rect(o,s,y,v),r.fill(),0!==i&&r.stroke()}r.restore()}(l.x(A),C,T),A=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(S,A+y+g,_?A+k:t.right,e.rtl),function(t,e,n){Yt(r,n.text,t,e+b/2,u,{strikethrough:n.hidden,textAlign:l.textAlign(n.textAlign)})}(l.x(A),C,T),_?m.x+=k+d:m.y+=x})),Xe(t.ctx,e.textDirection)}drawTitle(){const t=this,e=t.options,n=e.title,i=se(n.font),r=re(n.padding);if(!n.display)return;const a=Ge(e.rtl,t.left,t.width),c=t.ctx,l=n.position,u=i.size/2,h=r.top+u;let d,f=t.left,p=t.width;if(this.isHorizontal())p=Math.max(...t.lineWidths),d=t.top+h,f=o(e.align,f,t.right-p);else{const n=t.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);d=h+o(e.align,t.top,t.bottom-n-e.labels.padding-t._computeTitleHeight())}const g=o(l,f,f+p);c.textAlign=a.textAlign(s(l)),c.textBaseline="middle",c.strokeStyle=n.color,c.fillStyle=n.color,c.font=i.string,Yt(c,n.text,g,d,i)}_computeTitleHeight(){const t=this.options.title,e=se(t.font),n=re(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){const n=this;let i,r,s;if(t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom)for(s=n.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],t>=r.left&&t<=r.left+r.width&&e>=r.top&&e<=r.top+r.height)return n.legendItems[i];return null}handleEvent(t){const e=this,n=e.options;if(!function(t,e){return!("mousemove"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}(t.type,n))return;const i=e._getLegendItemAt(t.x,t.y);if("mousemove"===t.type){const o=e._hoveredItem,a=(s=i,null!==(r=o)&&null!==s&&r.datasetIndex===s.datasetIndex&&r.index===s.index);o&&!a&&m(n.onLeave,[t,o,e],e),e._hoveredItem=i,i&&!a&&m(n.onHover,[t,i,e],e)}else i&&m(n.onClick,[t,i,e],e);var r,s}}var Kr={id:"legend",_element:Wr,start(t,e,n){const i=t.legend=new Wr({ctx:t.ctx,options:n,chart:t});si.configure(t,i,n),si.addBox(t,i)},stop(t){si.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;si.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const o=t.controller.getStyle(n?0:void 0),a=re(o.borderWidth);return{text:e[t.index].label,fillStyle:o.backgroundColor,fontColor:s,hidden:!t.visible,lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:(a.width+a.height)/4,strokeStyle:o.borderColor,pointStyle:i||o.pointStyle,rotation:o.rotation,textAlign:r||o.textAlign,borderRadius:0,datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Gr extends xi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this,i=n.options;if(n.left=0,n.top=0,!i.display)return void(n.width=n.height=n.right=n.bottom=0);n.width=n.right=t,n.height=n.bottom=e;const r=u(i.text)?i.text.length:1;n._padding=re(i.padding);const s=r*se(i.font).lineHeight+n._padding.height;n.isHorizontal()?n.height=s:n.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:r,options:s}=this,a=s.align;let c,l,u,h=0;return this.isHorizontal()?(l=o(a,n,r),u=e+t,c=r-n):("left"===s.position?(l=n+t,u=o(a,i,e),h=-.5*D):(l=r-t,u=o(a,e,i),h=.5*D),c=i-e),{titleX:l,titleY:u,maxWidth:c,rotation:h}}draw(){const t=this,e=t.ctx,n=t.options;if(!n.display)return;const i=se(n.font),r=i.lineHeight/2+t._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=t._drawArgs(r);Yt(e,n.text,0,0,i,{color:n.color,maxWidth:c,rotation:l,textAlign:s(n.align),textBaseline:"middle",translation:[o,a]})}}var Yr={id:"title",_element:Gr,start(t,e,n){!function(t,e){const n=new Gr({ctx:t.ctx,options:e,chart:t});si.configure(t,n,e),si.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;si.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;si.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Xr=new WeakMap;var Qr={id:"subtitle",start(t,e,n){const i=new Gr({ctx:t.ctx,options:n,chart:t});si.configure(t,i,n),si.addBox(t,i),Xr.set(t,i)},stop(t){si.removeBox(t,Xr.get(t)),Xr.delete(t)},beforeUpdate(t,e,n){const i=Xr.get(t);si.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Jr={average(t){if(!t.length)return!1;let e,n,i=0,r=0,s=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i+=t.x,r+=t.y,++s}}return{x:i/s,y:r/s}},nearest(t,e){if(!t.length)return!1;let n,i,r,s=e.x,o=e.y,a=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=K(e,i.getCenterPoint());t<a&&(a=t,r=i)}}if(r){const t=r.tooltipPosition();s=t.x,o=t.y}return{x:s,y:o}}};function Zr(t,e){return e&&(u(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ts(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function es(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function ns(t,e){const n=t._chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,c=se(e.bodyFont),l=se(e.titleFont),u=se(e.footerFont),h=s.length,d=r.length,f=i.length,p=re(e.padding);let g=p.height,m=0,v=i.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);v+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*l.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v&&(g+=f*(e.displayColors?Math.max(a,c.lineHeight):c.lineHeight)+(v-f)*c.lineHeight+(v-1)*e.bodySpacing),d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let b=0;const _=function(t){m=Math.max(m,n.measureText(t).width+b)};return n.save(),n.font=l.string,y(t.title,_),n.font=c.string,y(t.beforeBody.concat(t.afterBody),_),b=e.displayColors?o+2:0,y(i,(t=>{y(t.before,_),y(t.lines,_),y(t.after,_)})),b=0,n.font=u.string,y(t.footer,_),n.restore(),m+=p.width,{width:m,height:g}}function is(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:c}}=t;let l="center";return"center"===i?l=r<=(a+c)/2?"left":"right":r<=s/2?l="left":r>=o-s/2&&(l="right"),function(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;return"left"===t&&r+s+o>e.width||"right"===t&&r-s-o<0||void 0}(l,t,e,n)&&(l="center"),l}function rs(t,e,n){const i=e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:e.xAlign||is(t,e,n,i),yAlign:i}}function ss(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:c}=n,l=r+s,u=o+s;let h=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,a);const d=function(t,e,n){let{y:i,height:r}=t;return"top"===e?i+=n:i-="bottom"===e?r+n:r/2,i}(e,c,l);return"center"===c?"left"===a?h+=l:"right"===a&&(h-=l):"left"===a?h-=u:"right"===a&&(h+=u),{x:Q(h,0,i.width-e.width),y:Q(d,0,i.height-e.height)}}function os(t,e,n){const i=re(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function as(t){return Zr([],ts(t))}function cs(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}class ls extends xi{constructor(t){super(),this.opacity=0,this._active=[],this._chart=t._chart,this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this,e=t._cachedAnimations;if(e)return e;const n=t._chart,i=t.options.setContext(t.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new ln(t._chart,r);return r._cacheable&&(t._cachedAnimations=Object.freeze(s)),s}getContext(){const t=this;return t.$context||(t.$context=(e=t._chart.getContext(),n=t,i=t._tooltipItems,Object.assign(Object.create(e),{tooltip:n,tooltipItems:i,type:"tooltip"})));var e,n,i}getTitle(t,e){const n=this,{callbacks:i}=e,r=i.beforeTitle.apply(n,[t]),s=i.title.apply(n,[t]),o=i.afterTitle.apply(n,[t]);let a=[];return a=Zr(a,ts(r)),a=Zr(a,ts(s)),a=Zr(a,ts(o)),a}getBeforeBody(t,e){return as(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const n=this,{callbacks:i}=e,r=[];return y(t,(t=>{const e={before:[],lines:[],after:[]},s=cs(i,t);Zr(e.before,ts(s.beforeLabel.call(n,t))),Zr(e.lines,s.label.call(n,t)),Zr(e.after,ts(s.afterLabel.call(n,t))),r.push(e)})),r}getAfterBody(t,e){return as(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const n=this,{callbacks:i}=e,r=i.beforeFooter.apply(n,[t]),s=i.footer.apply(n,[t]),o=i.afterFooter.apply(n,[t]);let a=[];return a=Zr(a,ts(r)),a=Zr(a,ts(s)),a=Zr(a,ts(o)),a}_createItems(t){const e=this,n=e._active,i=e._chart.data,r=[],s=[],o=[];let a,c,l=[];for(a=0,c=n.length;a<c;++a)l.push(es(e._chart,n[a]));return t.filter&&(l=l.filter(((e,n,r)=>t.filter(e,n,r,i)))),t.itemSort&&(l=l.sort(((e,n)=>t.itemSort(e,n,i)))),y(l,(n=>{const i=cs(t.callbacks,n);r.push(i.labelColor.call(e,n)),s.push(i.labelPointStyle.call(e,n)),o.push(i.labelTextColor.call(e,n))})),e.labelColors=r,e.labelPointStyles=s,e.labelTextColors=o,e.dataPoints=l,l}update(t,e){const n=this,i=n.options.setContext(n.getContext()),r=n._active;let s,o=[];if(r.length){const t=Jr[i.position].call(n,r,n._eventPosition);o=n._createItems(i),n.title=n.getTitle(o,i),n.beforeBody=n.getBeforeBody(o,i),n.body=n.getBody(o,i),n.afterBody=n.getAfterBody(o,i),n.footer=n.getFooter(o,i);const e=n._size=ns(n,i),a=Object.assign({},t,e),c=rs(n._chart,i,a),l=ss(i,a,c,n._chart);n.xAlign=c.xAlign,n.yAlign=c.yAlign,s={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==n.opacity&&(s={opacity:0});n._tooltipItems=o,n.$context=void 0,s&&n._resolveAnimations().update(n,s),t&&i.external&&i.external.call(n,{chart:n._chart,tooltip:n,replay:e})}drawCaret(t,e,n,i){const r=this.getCaretPosition(t,n,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:r}=this,{cornerRadius:s,caretSize:o}=n,{x:a,y:c}=t,{width:l,height:u}=e;let h,d,f,p,g,m;return"center"===r?(g=c+u/2,"left"===i?(h=a,d=h-o,p=g+o,m=g-o):(h=a+l,d=h+o,p=g-o,m=g+o),f=h):(d="left"===i?a+s+o:"right"===i?a+l-s-o:this.caretX,"top"===r?(p=c,g=p-o,h=d-o,f=d+o):(p=c+u,g=p+o,h=d+o,f=d-o),m=p),{x1:h,x2:d,x3:f,y1:p,y2:g,y3:m}}drawTitle(t,e,n){const i=this,r=i.title,s=r.length;let o,a,c;if(s){const l=Ge(n.rtl,i.x,i.width);for(t.x=os(i,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",o=se(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=o.string,c=0;c<s;++c)e.fillText(r[c],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,c+1===s&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,i,r){const s=this,o=s.labelColors[n],a=s.labelPointStyles[n],{boxHeight:c,boxWidth:l}=r,u=se(r.bodyFont),h=os(s,"left",r),d=i.x(h),f=c<u.lineHeight?(u.lineHeight-c)/2:0,p=e.y+f;if(r.usePointStyle){const e={radius:Math.min(l,c)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(d,l)+l/2,s=p+c/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,zt(t,e,n,s),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,zt(t,e,n,s)}else{t.lineWidth=o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=i.leftForLtr(d,l),n=i.leftForLtr(i.xPlus(d,1),l-2),s=ie(o.borderRadius);Object.values(s).some((t=>0!==t))?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Qt(t,{x:e,y:p,w:l,h:c,radius:s}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Qt(t,{x:n,y:p+1,w:l-2,h:c-2,radius:s}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(e,p,l,c),t.strokeRect(e,p,l,c),t.fillStyle=o.backgroundColor,t.fillRect(n,p+1,l-2,c-2))}t.fillStyle=s.labelTextColors[n]}drawBody(t,e,n){const i=this,{body:r}=i,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:c,boxWidth:l}=n,u=se(n.bodyFont);let h=u.lineHeight,d=0;const f=Ge(n.rtl,i.x,i.width),p=function(n){e.fillText(n,f.x(t.x+d),t.y+h/2),t.y+=h+s},g=f.textAlign(o);let m,v,b,_,w,x,T;for(e.textAlign=o,e.textBaseline="middle",e.font=u.string,t.x=os(i,g,n),e.fillStyle=n.bodyColor,y(i.beforeBody,p),d=a&&"right"!==g?"center"===o?l/2+1:l+2:0,_=0,x=r.length;_<x;++_){for(m=r[_],v=i.labelTextColors[_],e.fillStyle=v,y(m.before,p),b=m.lines,a&&b.length&&(i._drawColorBox(e,t,_,f,n),h=Math.max(u.lineHeight,c)),w=0,T=b.length;w<T;++w)p(b[w]),h=u.lineHeight;y(m.after,p)}d=0,h=u.lineHeight,y(i.afterBody,p),t.y-=s}drawFooter(t,e,n){const i=this,r=i.footer,s=r.length;let o,a;if(s){const c=Ge(n.rtl,i.x,i.width);for(t.x=os(i,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=c.textAlign(n.footerAlign),e.textBaseline="middle",o=se(n.footerFont),e.fillStyle=n.footerColor,e.font=o.string,a=0;a<s;++a)e.fillText(r[a],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:r,yAlign:s}=this,{x:o,y:a}=t,{width:c,height:l}=n,u=i.cornerRadius;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(o+u,a),"top"===s&&this.drawCaret(t,e,n,i),e.lineTo(o+c-u,a),e.quadraticCurveTo(o+c,a,o+c,a+u),"center"===s&&"right"===r&&this.drawCaret(t,e,n,i),e.lineTo(o+c,a+l-u),e.quadraticCurveTo(o+c,a+l,o+c-u,a+l),"bottom"===s&&this.drawCaret(t,e,n,i),e.lineTo(o+u,a+l),e.quadraticCurveTo(o,a+l,o,a+l-u),"center"===s&&"left"===r&&this.drawCaret(t,e,n,i),e.lineTo(o,a+u),e.quadraticCurveTo(o,a,o+u,a),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this,n=e._chart,i=e.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const i=Jr[t.position].call(e,e._active,e._eventPosition);if(!i)return;const o=e._size=ns(e,t),a=Object.assign({},i,e._size),c=rs(n,t,a),l=ss(t,a,c,n);r._to===l.x&&s._to===l.y||(e.xAlign=c.xAlign,e.yAlign=c.yAlign,e.width=o.width,e.height=o.height,e.caretX=i.x,e.caretY=i.y,e._resolveAnimations().update(e,l))}}draw(t){const e=this,n=e.options.setContext(e.getContext());let i=e.opacity;if(!i)return;e._updateAnimationTarget(n);const r={width:e.width,height:e.height},s={x:e.x,y:e.y};i=Math.abs(i)<.001?0:i;const o=re(n.padding),a=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=i,e.drawBackground(s,t,r,n),Ye(t,n.textDirection),s.y+=o.top,e.drawTitle(s,t,n),e.drawBody(s,t,n),e.drawFooter(s,t,n),Xe(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this,i=n._active,r=t.map((({datasetIndex:t,index:e})=>{const i=n._chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[e],index:e}})),s=!v(i,r),o=n._positionChanged(r,e);(s||o)&&(n._active=r,n._eventPosition=e,n.update(!0))}handleEvent(t,e){const n=this,i=n.options,r=n._active||[];let s=!1,o=[];"mouseout"!==t.type&&(o=n._chart.getElementsAtEventForMode(t,i.mode,i,e),i.reverse&&o.reverse());const a=n._positionChanged(o,t);return s=e||!v(o,r)||a,s&&(n._active=o,(i.enabled||i.external)&&(n._eventPosition={x:t.x,y:t.y},n.update(!0,e))),s}_positionChanged(t,e){const{caretX:n,caretY:i,options:r}=this,s=Jr[r.position].call(this,t,e);return!1!==s&&(n!==s.x||i!==s.y)}}ls.positioners=Jr;var us={id:"tooltip",_element:ls,positioners:Jr,afterInit(t,e,n){n&&(t.tooltip=new ls({_chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip,n={tooltip:e};!1!==t.notifyPlugins("beforeTooltipDraw",n)&&(e&&e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n))},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:a,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:a,beforeBody:a,beforeLabel:a,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return l(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:a,afterBody:a,beforeFooter:a,footer:a,afterFooter:a}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},hs=Object.freeze({__proto__:null,Decimation:Ar,Filler:Hr,Legend:Kr,SubTitle:Qr,Title:Yr,Tooltip:us});class ds extends Oi{constructor(t){super(t),this._startValue=void 0,this._valueRange=0}parse(t,e){if(l(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:Q(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:function(t,e,n){const i=t.indexOf(e);return-1===i?((t,e,n)=>"string"==typeof e?t.push(e)-1:isNaN(e)?null:n)(t,e,n):i!==t.lastIndexOf(e)?n:i}(n,t,p(e,t)),n.length-1)}determineDataLimits(){const t=this,{minDefined:e,maxDefined:n}=t.getUserBounds();let{min:i,max:r}=t.getMinMax(!0);"ticks"===t.options.bounds&&(e||(i=0),n||(r=t.getLabels().length-1)),t.min=i,t.max=r}buildTicks(){const t=this,e=t.min,n=t.max,i=t.options.offset,r=[];let s=t.getLabels();s=0===e&&n===s.length-1?s:s.slice(e,n+1),t._valueRange=Math.max(s.length-(i?0:1),1),t._startValue=t.min-(i?.5:0);for(let t=e;t<=n;t++)r.push({value:t});return r}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){const t=this;super.configure(),t.isHorizontal()||(t._reversePixels=!t._reversePixels)}getPixelForValue(t){const e=this;return"number"!=typeof t&&(t=e.parse(t)),null===t?NaN:e.getPixelForDecimal((t-e._startValue)/e._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){const e=this;return Math.round(e._startValue+e.getDecimalForPixel(t)*e._valueRange)}getBasePixel(){return this.bottom}}function fs(t,e,{horizontal:n,minRotation:i}){const r=H(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}ds.id="category",ds.defaults={ticks:{callback:ds.prototype.getLabelForValue}};class ps extends Oi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return l(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const t=this,{beginAtZero:e}=t.options,{minDefined:n,maxDefined:i}=t.getUserBounds();let{min:r,max:s}=t;const o=t=>r=n?r:t,a=t=>s=i?s:t;if(e){const t=V(r),e=V(s);t<0&&e<0?a(0):t>0&&e>0&&o(0)}if(r===s){let t=1;(s>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(t=Math.abs(.05*s)),a(s+t),e||o(r-t)}t.min=r,t.max=s}getTickLimit(){const t=this,e=t.options.ticks;let n,{maxTicksLimit:i,stepSize:r}=e;return r?n=Math.ceil(t.max/r)-Math.floor(t.min/r)+1:(n=t.computeTickLimit(),i=i||11),i&&(n=Math.min(i,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this,e=t.options,n=e.ticks;let i=t.getTickLimit();i=Math.max(2,i);const r=function(t,e){const n=[],{bounds:i,step:r,min:s,max:o,precision:a,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=r||1,p=u-1,{min:g,max:m}=e,y=!l(s),v=!l(o),b=!l(c),_=(m-g)/(h+1);let w,x,T,E,I=U((m-g)/p/f)*f;if(I<1e-14&&!y&&!v)return[{value:g},{value:m}];E=Math.ceil(m/I)-Math.floor(g/I),E>p&&(I=U(E*I/p/f)*f),l(a)||(w=Math.pow(10,a),I=Math.ceil(I*w)/w),"ticks"===i?(x=Math.floor(g/I)*I,T=Math.ceil(m/I)*I):(x=g,T=m),y&&v&&r&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((o-s)/r,I/1e3)?(E=Math.round(Math.min((o-s)/I,u)),I=(o-s)/E,x=s,T=o):b?(x=y?s:x,T=v?o:T,E=c-1,I=(T-x)/E):(E=(T-x)/I,E=q(E,Math.round(E),I/1e3)?Math.round(E):Math.ceil(E));const S=Math.max(W(I),W(x));w=Math.pow(10,l(a)?S:a),x=Math.round(x*w)/w,T=Math.round(T*w)/w;let k=0;for(y&&(d&&x!==s?(n.push({value:s}),x<s&&k++,q(Math.round((x+k*I)*w)/w,s,fs(s,_,t))&&k++):x<s&&k++);k<E;++k)n.push({value:Math.round((x+k*I)*w)/w});return v&&d&&T!==o?q(n[n.length-1].value,o,fs(o,_,t))?n[n.length-1].value=o:n.push({value:o}):v&&T!==o||n.push({value:T}),n}({maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:t._maxDigits(),horizontal:t.isHorizontal(),minRotation:n.minRotation||0,includeBounds:!1!==n.includeBounds},t._range||t);return"ticks"===e.bounds&&z(r,t,"value"),e.reverse?(r.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),r}configure(){const t=this,e=t.ticks;let n=t.min,i=t.max;if(super.configure(),t.options.offset&&e.length){const t=(i-n)/Math.max(e.length-1,1)/2;n-=t,i+=t}t._startValue=n,t._endValue=i,t._valueRange=i-n}getLabelForValue(t){return Ke(t,this.chart.options.locale)}}class gs extends ps{determineDataLimits(){const t=this,{min:e,max:n}=t.getMinMax(!0);t.min=d(e)?e:0,t.max=d(n)?n:1,t.handleTickRangeOptions()}computeTickLimit(){const t=this,e=t.isHorizontal(),n=e?t.width:t.height,i=H(t.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=t._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function ms(t){return 1==t/Math.pow(10,Math.floor(j(t)))}gs.id="linear",gs.defaults={ticks:{callback:Ei.formatters.numeric}};class ys extends Oi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=ps.prototype.parse.apply(this,[t,e]);if(0!==n)return d(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const t=this,{min:e,max:n}=t.getMinMax(!0);t.min=d(e)?Math.max(0,e):null,t.max=d(n)?Math.max(0,n):null,t.options.beginAtZero&&(t._zero=!0),t.handleTickRangeOptions()}handleTickRangeOptions(){const t=this,{minDefined:e,maxDefined:n}=t.getUserBounds();let i=t.min,r=t.max;const s=t=>i=e?i:t,o=t=>r=n?r:t,a=(t,e)=>Math.pow(10,Math.floor(j(t))+e);i===r&&(i<=0?(s(1),o(10)):(s(a(i,-1)),o(a(r,1)))),i<=0&&s(a(r,-1)),r<=0&&o(a(i,1)),t._zero&&t.min!==t._suggestedMin&&i===a(t.min,0)&&s(a(i,-1)),t.min=i,t.max=r}buildTicks(){const t=this,e=t.options,n=function(t,e){const n=Math.floor(j(e.max)),i=Math.ceil(e.max/Math.pow(10,n)),r=[];let s=f(t.min,Math.pow(10,Math.floor(j(e.min)))),o=Math.floor(j(s)),a=Math.floor(s/Math.pow(10,o)),c=o<0?Math.pow(10,Math.abs(o)):1;do{r.push({value:s,major:ms(s)}),++a,10===a&&(a=1,++o,c=o>=0?1:c),s=Math.round(a*Math.pow(10,o)*c)/c}while(o<n||o===n&&a<i);const l=f(t.max,s);return r.push({value:l,major:ms(s)}),r}({min:t._userMin,max:t._userMax},t);return"ticks"===e.bounds&&z(n,t,"value"),e.reverse?(n.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),n}getLabelForValue(t){return void 0===t?"0":Ke(t,this.chart.options.locale)}configure(){const t=this,e=t.min;super.configure(),t._startValue=j(e),t._valueRange=j(t.max)-j(e)}getPixelForValue(t){const e=this;return void 0!==t&&0!==t||(t=e.min),null===t||isNaN(t)?NaN:e.getPixelForDecimal(t===e.min?0:(j(t)-e._startValue)/e._valueRange)}getValueForPixel(t){const e=this,n=e.getDecimalForPixel(t);return Math.pow(10,e._startValue+n*e._valueRange)}}function vs(t){const e=t.ticks;if(e.display&&t.display){const t=re(e.backdropPadding);return p(e.font&&e.font.size,jt.font.size)+t.height}return 0}function bs(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function _s(t){return 0===t||180===t?"center":t<180?"left":"right"}function ws(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}function xs(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,N);else{let n=t.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=t.getPointPosition(s,e),r.lineTo(n.x,n.y)}}function Ts(t){return B(t)?t:0}ys.id="logarithmic",ys.defaults={ticks:{callback:Ei.formatters.logarithmic,major:{enabled:!0}}};class Es extends ps{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this;t.width=t.maxWidth,t.height=t.maxHeight,t.paddingTop=vs(t.options)/2,t.xCenter=Math.floor(t.width/2),t.yCenter=Math.floor((t.height-t.paddingTop)/2),t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2}determineDataLimits(){const t=this,{min:e,max:n}=t.getMinMax(!1);t.min=d(e)&&!isNaN(e)?e:0,t.max=d(n)&&!isNaN(n)?n:0,t.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/vs(this.options))}generateTickLabels(t){const e=this;ps.prototype.generateTickLabels.call(e,t),e._pointLabels=e.getLabels().map(((t,n)=>{const i=m(e.options.pointLabels.callback,[t,n],e);return i||0===i?i:""}))}fit(){const t=this,e=t.options;e.display&&e.pointLabels.display?function(t){const e={l:0,r:t.width,t:0,b:t.height-t.paddingTop},n={},i=[],r=[],s=t.getLabels().length;for(let l=0;l<s;l++){const s=t.options.pointLabels.setContext(t.getPointLabelContext(l));r[l]=s.padding;const h=t.getPointPosition(l,t.drawingArea+r[l]),d=se(s.font),f=(o=t.ctx,a=d,c=u(c=t._pointLabels[l])?c:[c],{w:Ut(o,a.string,c),h:c.length*a.lineHeight});i[l]=f;const p=t.getIndexAngle(l),g=$(p),m=bs(g,h.x,f.w,0,180),y=bs(g,h.y,f.h,90,270);m.start<e.l&&(e.l=m.start,n.l=p),m.end>e.r&&(e.r=m.end,n.r=p),y.start<e.t&&(e.t=y.start,n.t=p),y.end>e.b&&(e.b=y.end,n.b=p)}var o,a,c;t._setReductions(t.drawingArea,e,n),t._pointLabelItems=function(t,e,n){const i=[],r=t.getLabels().length,s=t.options,o=vs(s),a=t.getDistanceFromCenterForValue(s.ticks.reverse?t.min:t.max);for(let s=0;s<r;s++){const r=0===s?o/2:0,h=t.getPointPosition(s,a+r+n[s]),d=$(t.getIndexAngle(s)),f=e[s],p=ws(h.y,f.h,d),g=_s(d),m=(c=h.x,l=f.w,"right"===(u=g)?c-=l:"center"===u&&(c-=l/2),c);i.push({x:h.x,y:p,textAlign:g,left:m,top:p,right:m+f.w,bottom:p+f.h})}var c,l,u;return i}(t,i,r)}(t):t.setCenterPoint(0,0,0,0)}_setReductions(t,e,n){const i=this;let r=e.l/Math.sin(n.l),s=Math.max(e.r-i.width,0)/Math.sin(n.r),o=-e.t/Math.cos(n.t),a=-Math.max(e.b-(i.height-i.paddingTop),0)/Math.cos(n.b);r=Ts(r),s=Ts(s),o=Ts(o),a=Ts(a),i.drawingArea=Math.max(t/2,Math.min(Math.floor(t-(r+s)/2),Math.floor(t-(o+a)/2))),i.setCenterPoint(r,s,o,a)}setCenterPoint(t,e,n,i){const r=this,s=r.width-e-r.drawingArea,o=t+r.drawingArea,a=n+r.drawingArea,c=r.height-r.paddingTop-i-r.drawingArea;r.xCenter=Math.floor((o+s)/2+r.left),r.yCenter=Math.floor((a+c)/2+r.top+r.paddingTop)}getIndexAngle(t){return Y(t*(N/this.getLabels().length)+H(this.options.startAngle||0))}getDistanceFromCenterForValue(t){const e=this;if(l(t))return NaN;const n=e.drawingArea/(e.max-e.min);return e.options.reverse?(e.max-t)*n:(t-e.min)*n}getValueForDistanceFromCenter(t){if(l(t))return NaN;const e=this,n=t/(e.drawingArea/(e.max-e.min));return e.options.reverse?e.max-n:e.min+n}getPointLabelContext(t){const e=this,n=e._pointLabels||[];if(t>=0&&t<n.length){const i=n[t];return function(t,e,n){return Object.assign(Object.create(t),{label:n,index:e,type:"pointLabel"})}(e.getContext(),t,i)}}getPointPosition(t,e){const n=this,i=n.getIndexAngle(t)-P;return{x:Math.cos(i)*e+n.xCenter,y:Math.sin(i)*e+n.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:r}}drawBackground(){const t=this,{backgroundColor:e,grid:{circular:n}}=t.options;if(e){const i=t.ctx;i.save(),i.beginPath(),xs(t,t.getDistanceFromCenterForValue(t._endValue),n,t.getLabels().length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const t=this,e=t.ctx,n=t.options,{angleLines:i,grid:r}=n,s=t.getLabels().length;let o,a,c;if(n.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const e=i.setContext(t.getPointLabelContext(r)),s=se(e.font),{x:o,y:a,textAlign:c,left:u,top:h,right:d,bottom:f}=t._pointLabelItems[r],{backdropColor:p}=e;if(!l(p)){const t=re(e.backdropPadding);n.fillStyle=p,n.fillRect(u-t.left,h-t.top,d-u+t.width,f-h+t.height)}Yt(n,t._pointLabels[r],o,a+s.lineHeight/2,s,{color:e.color,textAlign:c,textBaseline:"middle"})}}(t,s),r.display&&t.ticks.forEach(((e,n)=>{if(0!==n){a=t.getDistanceFromCenterForValue(e.value);const i=r.setContext(t.getContext(n-1));!function(t,e,n,i){const r=t.ctx,s=e.circular,{color:o,lineWidth:a}=e;!s&&!i||!o||!a||n<0||(r.save(),r.strokeStyle=o,r.lineWidth=a,r.setLineDash(e.borderDash),r.lineDashOffset=e.borderDashOffset,r.beginPath(),xs(t,n,s,i),r.closePath(),r.stroke(),r.restore())}(t,i,a,s)}})),i.display){for(e.save(),o=t.getLabels().length-1;o>=0;o--){const r=i.setContext(t.getPointLabelContext(o)),{color:s,lineWidth:l}=r;l&&s&&(e.lineWidth=l,e.strokeStyle=s,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,a=t.getDistanceFromCenterForValue(n.ticks.reverse?t.min:t.max),c=t.getPointPosition(o,a),e.beginPath(),e.moveTo(t.xCenter,t.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const t=this,e=t.ctx,n=t.options,i=n.ticks;if(!i.display)return;const r=t.getIndexAngle(0);let s,o;e.save(),e.translate(t.xCenter,t.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",t.ticks.forEach(((r,a)=>{if(0===a&&!n.reverse)return;const c=i.setContext(t.getContext(a)),l=se(c.font);if(s=t.getDistanceFromCenterForValue(t.ticks[a].value),c.showLabelBackdrop){e.font=l.string,o=e.measureText(r.label).width,e.fillStyle=c.backdropColor;const t=re(c.backdropPadding);e.fillRect(-o/2-t.left,-s-l.size/2-t.top,o+t.width,l.size+t.height)}Yt(e,r.label,0,-s,l,{color:c.color})})),e.restore()}drawTitle(){}}Es.id="radialLinear",Es.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ei.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5}},Es.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Es.descriptors={angleLines:{_fallback:"grid"}};const Is={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ss=Object.keys(Is);function ks(t,e){return t-e}function As(t,e){if(l(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return"function"==typeof i&&(o=i(o)),d(o)||(o="string"==typeof i?n.parse(o,i):n.parse(o)),null===o?null:(r&&(o="week"!==r||!B(s)&&!0!==s?n.startOf(o,r):n.startOf(o,"isoWeek",s)),+o)}function Cs(t,e,n,i){const r=Ss.length;for(let s=Ss.indexOf(t);s<r-1;++s){const t=Is[Ss[s]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(r*t.size))<=i)return Ss[s]}return Ss[r-1]}function Ds(t,e,n){if(n){if(n.length){const{lo:i,hi:r}=ae(n,e);t[n[i]>=e?n[i]:n[r]]=!0}}else t[e]=!0}function Ns(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&n?function(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,c;for(a=s;a<=o;a=+r.add(a,1,i))c=n[a],c>=0&&(e[c].major=!0);return e}(t,i,r,n):i}class Os extends Oi{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const n=t.time||(t.time={}),i=this._adapter=new Un._date(t.adapters.date);T(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:As(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this,e=t.options,n=t._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=t.getUserBounds();function c(t){o||isNaN(t.min)||(r=Math.min(r,t.min)),a||isNaN(t.max)||(s=Math.max(s,t.max))}o&&a||(c(t._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||c(t.getMinMax(!1))),r=d(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=d(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,t.min=Math.min(r,s-1),t.max=Math.max(r+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this,e=t.options,n=e.time,i=e.ticks,r="labels"===i.source?t.getLabelTimestamps():t._generate();"ticks"===e.bounds&&r.length&&(t.min=t._userMin||r[0],t.max=t._userMax||r[r.length-1]);const s=t.min,o=function(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}(r,s,t.max);return t._unit=n.unit||(i.autoSkip?Cs(n.minUnit,t.min,t.max,t._getLabelCapacity(s)):function(t,e,n,i,r){for(let s=Ss.length-1;s>=Ss.indexOf(n);s--){const n=Ss[s];if(Is[n].common&&t._adapter.diff(r,i,n)>=e-1)return n}return Ss[n?Ss.indexOf(n):0]}(t,o.length,n.minUnit,t.min,t.max)),t._majorUnit=i.major.enabled&&"year"!==t._unit?function(t){for(let e=Ss.indexOf(t)+1,n=Ss.length;e<n;++e)if(Is[Ss[e]].common)return Ss[e]}(t._unit):void 0,t.initOffsets(r),e.reverse&&o.reverse(),Ns(t,o,t._majorUnit)}initOffsets(t){const e=this;let n,i,r=0,s=0;e.options.offset&&t.length&&(n=e.getDecimalForValue(t[0]),r=1===t.length?1-n:(e.getDecimalForValue(t[1])-n)/2,i=e.getDecimalForValue(t[t.length-1]),s=1===t.length?i:(i-e.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;r=Q(r,0,o),s=Q(s,0,o),e._offsets={start:r,end:s,factor:1/(r+1+s)}}_generate(){const t=this,e=t._adapter,n=t.min,i=t.max,r=t.options,s=r.time,o=s.unit||Cs(s.minUnit,n,i,t._getLabelCapacity(n)),a=p(s.stepSize,1),c="week"===o&&s.isoWeekday,l=B(c)||!0===c,u={};let h,d,f=n;if(l&&(f=+e.startOf(f,"isoWeek",c)),f=+e.startOf(f,l?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const g="data"===r.ticks.source&&t.getDataTimestamps();for(h=f,d=0;h<i;h=+e.add(h,a,o),d++)Ds(u,h,g);return h!==i&&"ticks"!==r.bounds&&1!==d||Ds(u,h,g),Object.keys(u).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}_tickFormatFunction(t,e,n,i){const r=this,s=r.options,o=s.time.displayFormats,a=r._unit,c=r._majorUnit,l=a&&o[a],u=c&&o[c],h=n[e],d=c&&u&&h&&h.major,f=r._adapter.format(t,i||(d?u:l)),p=s.ticks.callback;return p?m(p,[f,e,n],r):f}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){const e=this;return null===t?NaN:(t-e.min)/(e.max-e.min)}getPixelForValue(t){const e=this,n=e._offsets,i=e.getDecimalForValue(t);return e.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(t){const e=this,n=e._offsets,i=e.getDecimalForPixel(t)/n.factor-n.end;return e.min+i*(e.max-e.min)}_getLabelSize(t){const e=this,n=e.options.ticks,i=e.ctx.measureText(t).width,r=H(e.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=e._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(t){const e=this,n=e.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=e._tickFormatFunction(t,0,Ns(e,[t],e._majorUnit),r),o=e._getLabelSize(s),a=Math.floor(e.isHorizontal()?e.width/o.w:e.height/o.h)-1;return a>0?a:1}getDataTimestamps(){const t=this;let e,n,i=t._cache.data||[];if(i.length)return i;const r=t.getMatchingVisibleMetas();if(t._normalized&&r.length)return t._cache.data=r[0].controller.getAllParsedValues(t);for(e=0,n=r.length;e<n;++e)i=i.concat(r[e].controller.getAllParsedValues(t));return t._cache.data=t.normalize(i)}getLabelTimestamps(){const t=this,e=t._cache.labels||[];let n,i;if(e.length)return e;const r=t.getLabels();for(n=0,i=r.length;n<i;++n)e.push(As(t,r[n]));return t._cache.labels=t._normalized?e:t.normalize(e)}normalize(t){return de(t.sort(ks))}}function Ms(t,e,n){let i,r,s,o,a=0,c=t.length-1;n?(e>=t[a].pos&&e<=t[c].pos&&({lo:a,hi:c}=ce(t,"pos",e)),({pos:i,time:s}=t[a]),({pos:r,time:o}=t[c])):(e>=t[a].time&&e<=t[c].time&&({lo:a,hi:c}=ce(t,"time",e)),({time:i,pos:s}=t[a]),({time:r,pos:o}=t[c]));const l=r-i;return l?s+(o-s)*(e-i)/l:s}Os.id="time",Os.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class Ls extends Os{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this,e=t._getTimestampsForTable(),n=t._table=t.buildLookupTable(e);t._minPos=Ms(n,t.min),t._tableRange=Ms(n,t.max)-t._minPos,super.initOffsets(e)}buildLookupTable(t){const{min:e,max:n}=this,i=[],r=[];let s,o,a,c,l;for(s=0,o=t.length;s<o;++s)c=t[s],c>=e&&c<=n&&i.push(c);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(s=0,o=i.length;s<o;++s)l=i[s+1],a=i[s-1],c=i[s],Math.round((l+a)/2)!==c&&r.push({time:c,pos:s/(o-1)});return r}_getTimestampsForTable(){const t=this;let e=t._cache.all||[];if(e.length)return e;const n=t.getDataTimestamps(),i=t.getLabelTimestamps();return e=n.length&&i.length?t.normalize(n.concat(i)):n.length?n:i,e=t._cache.all=e,e}getDecimalForValue(t){return(Ms(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this,n=e._offsets,i=e.getDecimalForPixel(t)/n.factor-n.end;return Ms(e._table,i*e._tableRange+e._minPos,!0)}}Ls.id="timeseries",Ls.defaults=Os.defaults;var Ps=Object.freeze({__proto__:null,CategoryScale:ds,LinearScale:gs,LogarithmicScale:ys,RadialLinearScale:Es,TimeScale:Os,TimeSeriesScale:Ls});const Rs=[Fn,Ir,hs,Ps]},503:(t,e,n)=>{"use strict";n.r(e),n.d(e,{FirebaseError:()=>i.ZR,SDK_VERSION:()=>i.Jn,_DEFAULT_ENTRY_NAME:()=>i.l4,_addComponent:()=>i.H9,_addOrOverwriteComponent:()=>i.Vr,_apps:()=>i.Af,_clearComponents:()=>i.Z8,_components:()=>i.lz,_getProvider:()=>i.qX,_registerComponent:()=>i.Xd,_removeServiceInstance:()=>i.wN,deleteApp:()=>i.P2,getApp:()=>i.Mq,getApps:()=>i.C6,initializeApp:()=>i.ZF,onLog:()=>i.TP,registerVersion:()=>i.KN,setLogLevel:()=>i.Ub});var i=n(258);(0,i.KN)("firebase","9.0.2","app")},278:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ActionCodeOperation:()=>d,ActionCodeURL:()=>Lt,AuthCredential:()=>It,AuthErrorCodes:()=>m,EmailAuthCredential:()=>Ct,EmailAuthProvider:()=>Rt,FacebookAuthProvider:()=>Ut,FactorId:()=>c,GithubAuthProvider:()=>qt,GoogleAuthProvider:()=>Bt,OAuthCredential:()=>Nt,OAuthProvider:()=>Vt,OperationType:()=>h,PhoneAuthCredential:()=>Mt,PhoneAuthProvider:()=>Ln,PhoneMultiFactorGenerator:()=>Ti,ProviderId:()=>l,RecaptchaVerifier:()=>kn,SAMLAuthProvider:()=>Ht,SignInMethod:()=>u,TwitterAuthProvider:()=>$t,applyActionCode:()=>fe,browserLocalPersistence:()=>Qe,browserPopupRedirectResolver:()=>wi,browserSessionPersistence:()=>Ze,checkActionCode:()=>pe,confirmPasswordReset:()=>de,connectAuthEmulator:()=>xt,createUserWithEmailAndPassword:()=>me,debugErrorMap:()=>f,deleteUser:()=>Be,fetchSignInMethodsForEmail:()=>we,getAdditionalUserInfo:()=>Le,getAuth:()=>Si,getIdToken:()=>W,getIdTokenResult:()=>K,getMultiFactorResolver:()=>He,getRedirectResult:()=>ti,inMemoryPersistence:()=>st,indexedDBLocalPersistence:()=>gn,initializeAuth:()=>C,isSignInWithEmailLink:()=>be,linkWithCredential:()=>se,linkWithPhoneNumber:()=>Dn,linkWithPopup:()=>Hn,linkWithRedirect:()=>Zn,multiFactor:()=>Ke,onAuthStateChanged:()=>Fe,onIdTokenChanged:()=>Re,parseActionCodeURL:()=>Pt,prodErrorMap:()=>p,reauthenticateWithCredential:()=>oe,reauthenticateWithPhoneNumber:()=>Nn,reauthenticateWithPopup:()=>zn,reauthenticateWithRedirect:()=>Jn,reload:()=>tt,sendEmailVerification:()=>xe,sendPasswordResetEmail:()=>he,sendSignInLinkToEmail:()=>ve,setPersistence:()=>Pe,signInAnonymously:()=>Yt,signInWithCredential:()=>re,signInWithCustomToken:()=>ae,signInWithEmailAndPassword:()=>ye,signInWithEmailLink:()=>_e,signInWithPhoneNumber:()=>Cn,signInWithPopup:()=>qn,signInWithRedirect:()=>Qn,signOut:()=>Ue,unlink:()=>Zt,updateCurrentUser:()=>Ve,updateEmail:()=>Ie,updatePassword:()=>Se,updatePhoneNumber:()=>Mn,updateProfile:()=>Ee,useDeviceLanguage:()=>je,verifyBeforeUpdateEmail:()=>Te,verifyPasswordResetCode:()=>ge});var i=n(589),r=n(258),s=n(655),o=n(594),a=n(909);const c={PHONE:"phone"},l={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},u={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},h={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},d={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const f=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},p=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},g=new i.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),m={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized"},y=new o.Yd("@firebase/auth");function v(t,...e){y.logLevel<=o.in.ERROR&&y.error(`Auth (${r.Jn}): ${t}`,...e)}function b(t,...e){throw T(t,...e)}function _(t,...e){return T(t,...e)}function w(t,e,n){const r=Object.assign(Object.assign({},p()),{[e]:n});return new i.LL("auth","Firebase",r).create(e,{appName:t.name})}function x(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&b(t,"argument-error"),w(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function T(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return g.create(t,...e)}function E(t,e,...n){if(!t)throw T(e,...n)}function I(t){const e="INTERNAL ASSERTION FAILED: "+t;throw v(e),new Error(e)}function S(t,e){t||I(e)}const k=new Map;function A(t){S(t instanceof Function,"Expected a class definition");let e=k.get(t);return e?(S(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,k.set(t,e),e)}function C(t,e){const n=(0,r.qX)(t,"auth");if(n.isInitialized()){const t=n.getImmediate(),r=n.getOptions();if((0,i.vZ)(r,null!=e?e:{}))return t;b(t,"already-initialized")}return n.initialize({options:e})}function D(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function N(){return"http:"===O()||"https:"===O()}function O(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class M{constructor(t,e){this.shortDelay=t,this.longDelay=e,S(e>t,"Short delay should be less than long delay!"),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(N()||(0,i.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function L(t,e){S(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class P{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void I("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void I("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void I("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const R={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},F=new M(3e4,6e4);function j(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function V(t,e,n,r,s={}){return U(t,s,(()=>{let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=(0,i.xO)(Object.assign({key:t.config.apiKey},o)).slice(1),c=new(P.headers());return c.set("Content-Type","application/json"),c.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&c.set("X-Firebase-Locale",t.languageCode),P.fetch()(q(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))}))}async function U(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},R),e);try{const e=new z(t),i=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw H(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const e=i.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw H(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw H(t,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw w(t,a,o);b(t,a)}}catch(e){if(e instanceof i.ZR)throw e;b(t,"network-request-failed")}}async function B(t,e,n,i,r={}){const s=await V(t,e,n,i,r);return"mfaPendingCredential"in s&&b(t,"multi-factor-auth-required",{serverResponse:s}),s}function q(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?L(t.config,r):`${t.config.apiScheme}://${r}`}class z{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(_(this.auth,"timeout"))),F.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function H(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=_(t,e,i);return r.customData._tokenResponse=n,r}function $(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function W(t,e=!1){return(0,i.m9)(t).getIdToken(e)}async function K(t,e=!1){const n=(0,i.m9)(t),r=await n.getIdToken(e),s=Y(r);E(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:$(G(s.auth_time)),issuedAtTime:$(G(s.iat)),expirationTime:$(G(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}function G(t){return 1e3*Number(t)}function Y(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return v("JWT malformed, contained fewer than 3 sections"),null;try{const t=(0,i.tV)(n);return t?JSON.parse(t):(v("Failed to decode base64 JWT payload"),null)}catch(t){return v("Caught error parsing JWT payload as JSON",t),null}}async function X(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof i.ZR&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class Q{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&this.schedule(!0))}this.schedule()}}class J{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=$(this.lastLoginAt),this.creationTime=$(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Z(t){var e;const n=t.auth,i=await t.getIdToken(),r=await X(t,async function(t,e){return V(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));E(null==r?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const a=(null===(e=o.providerUserInfo)||void 0===e?void 0:e.length)?o.providerUserInfo.map((t=>{var{providerId:e}=t,n=(0,s._T)(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],c=(l=t.providerData,u=a,[...l.filter((t=>!u.some((e=>e.providerId===t.providerId)))),...u]);var l,u;const h=t.isAnonymous,d=!(t.email&&o.passwordHash||(null==c?void 0:c.length)),f=!!h&&d,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new J(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function tt(t){const e=(0,i.m9)(t);await Z(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}class et{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){E(t.idToken,"internal-error"),E(void 0!==t.idToken,"internal-error"),E(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=Y(t);return E(e,"internal-error"),E(void 0!==e.exp,"internal-error"),E(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return E(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(t,e){const n=await U(t,{},(()=>{const n=(0,i.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=q(t,r,"/v1/token",`key=${s}`);return P.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new et;return n&&(E("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(E("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(E("number"==typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new et,this.toJSON())}_performRefresh(){return I("not implemented")}}function nt(t,e){E("string"==typeof t||void 0===t,"internal-error",{appName:e})}class it{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=(0,s._T)(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Q(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.metadata=new J(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await X(this,this.stsTokenManager.getToken(this.auth,t));return E(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return K(this,t)}reload(){return tt(this)}_assign(t){this!==t&&(E(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new it(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){E(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await Z(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await X(this,async function(t,e){return V(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,c,l;const u=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=e.createdAt)&&void 0!==c?c:void 0,y=null!==(l=e.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:b,isAnonymous:_,providerData:w,stsTokenManager:x}=e;E(v&&x,t,"internal-error");const T=et.fromJSON(this.name,x);E("string"==typeof v,t,"internal-error"),nt(u,t.name),nt(h,t.name),E("boolean"==typeof b,t,"internal-error"),E("boolean"==typeof _,t,"internal-error"),nt(d,t.name),nt(f,t.name),nt(p,t.name),nt(g,t.name),nt(m,t.name),nt(y,t.name);const I=new it({uid:v,auth:t,email:h,emailVerified:b,displayName:u,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:m,lastLoginAt:y});return w&&Array.isArray(w)&&(I.providerData=w.map((t=>Object.assign({},t)))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(t,e,n=!1){const i=new et;i.updateFromServerResponse(e);const r=new it({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await Z(r),r}}class rt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}rt.type="NONE";const st=rt;function ot(t,e,n){return`firebase:${t}:${e}:${n}`}class at{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=ot(this.userKey,i.apiKey,r),this.fullPersistenceKey=ot("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?it._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new at(A(st),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=i[0]||A(st);const s=ot(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(s);if(e){const i=it._fromJSON(t,e);n!==r&&(o=i),r=n;break}}catch(t){}const a=i.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(s)}catch(t){}}))),new at(r,t,n)):new at(r,t,n)}}function ct(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dt(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lt(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pt(e))return"Blackberry";if(gt(e))return"Webos";if(ut(e))return"Safari";if((e.includes("chrome/")||ht(e))&&!e.includes("edge/"))return"Chrome";if(ft(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function lt(t=(0,i.z$)()){return/firefox\//i.test(t)}function ut(t=(0,i.z$)()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ht(t=(0,i.z$)()){return/crios\//i.test(t)}function dt(t=(0,i.z$)()){return/iemobile/i.test(t)}function ft(t=(0,i.z$)()){return/android/i.test(t)}function pt(t=(0,i.z$)()){return/blackberry/i.test(t)}function gt(t=(0,i.z$)()){return/webos/i.test(t)}function mt(t=(0,i.z$)()){return/iphone|ipad|ipod/i.test(t)}function yt(t=(0,i.z$)()){return mt(t)||ft(t)||gt(t)||pt(t)||/windows phone/i.test(t)||dt(t)}function vt(t,e=[]){let n;switch(t){case"Browser":n=ct((0,i.z$)());break;case"Worker":n=`${ct((0,i.z$)())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${r.Jn}/${s}`}class bt{constructor(t,e){this.app=t,this.config=e,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wt(this),this.idTokenSubscription=new wt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=e.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=A(e)),this._initializationPromise=this.queue((async()=>{var n;this._deleted||(this.persistenceManager=await at.create(this,t),this._deleted||((null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(e),this._deleted||(this._isInitialized=!0)))})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t):void 0}async initializeCurrentUser(t){var e;let n=await this.assertedPersistence.getCurrentUser();if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,r=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(t);i&&i!==r||!(null==s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(E(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Z(t)}catch(t){if("auth/network-request-failed"!==t.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?(0,i.m9)(t):null;return e&&E(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t){if(!this._deleted)return t&&E(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(A(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new i.LL("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&A(t)||this._popupRedirectResolver;E(e,this,"argument-error"),this.redirectPersistenceManager=await at.create(this,[A(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"==typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return E(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"==typeof e?t.addObserver(e,n,i):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return E(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=vt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function _t(t){return(0,i.m9)(t)}class wt{constructor(t){this.auth=t,this.observer=null,this.addObserver=(0,i.ne)((t=>this.observer=t))}get next(){return E(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xt(t,e,n){const i=_t(t);E(i._canInitEmulator,i,"emulator-config-failed"),E(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),s=Tt(e),{host:o,port:a}=function(t){const e=Tt(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:Et(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Et(e)}}}(e),c=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),function(t){function e(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"==typeof window||"undefined"==typeof document||t||("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}(r)}function Tt(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Et(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class It{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return I("not implemented")}_getIdTokenResponse(t){return I("not implemented")}_linkToIdToken(t,e){return I("not implemented")}_getReauthenticationResolver(t){return I("not implemented")}}async function St(t,e){return V(t,"POST","/v1/accounts:resetPassword",j(t,e))}async function kt(t,e){return V(t,"POST","/v1/accounts:update",e)}async function At(t,e){return V(t,"POST","/v1/accounts:sendOobCode",j(t,e))}class Ct extends It{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Ct(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new Ct(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return async function(t,e){return B(t,"POST","/v1/accounts:signInWithPassword",j(t,e))}(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return B(t,"POST","/v1/accounts:signInWithEmailLink",j(t,e))}(t,{email:this._email,oobCode:this._password});default:b(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return kt(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return B(t,"POST","/v1/accounts:signInWithEmailLink",j(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:b(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Dt(t,e){return B(t,"POST","/v1/accounts:signInWithIdp",j(t,e))}class Nt extends It{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Nt(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):b("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=(0,s._T)(e,["providerId","signInMethod"]);if(!n||!i)return null;const o=new Nt(n,i);return Object.assign(o,r),o}_getIdTokenResponse(t){return Dt(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Dt(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Dt(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=(0,i.xO)(e)}return t}}const Ot={USER_NOT_FOUND:"user-not-found"};class Mt extends It{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new Mt({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new Mt({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return B(t,"POST","/v1/accounts:signInWithPhoneNumber",j(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await B(t,"POST","/v1/accounts:signInWithPhoneNumber",j(t,e));if(n.temporaryProof)throw H(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return B(t,"POST","/v1/accounts:signInWithPhoneNumber",j(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Ot)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new Mt({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Lt{constructor(t){var e,n,r,s,o,a;const c=(0,i.zd)((0,i.pd)(t)),l=null!==(e=c.apiKey)&&void 0!==e?e:null,u=null!==(n=c.oobCode)&&void 0!==n?n:null,h=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=c.mode)&&void 0!==r?r:null);E(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(t){const e=function(t){const e=(0,i.zd)((0,i.pd)(t)).link,n=e?(0,i.zd)((0,i.pd)(e)).deep_link_id:null,r=(0,i.zd)((0,i.pd)(t)).deep_link_id;return(r?(0,i.zd)((0,i.pd)(r)).link:null)||r||n||e||t}(t);try{return new Lt(e)}catch(t){return null}}}function Pt(t){return Lt.parseLink(t)}class Rt{constructor(){this.providerId=Rt.PROVIDER_ID}static credential(t,e){return Ct._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=Lt.parseLink(e);return E(n,"argument-error"),Ct._fromEmailAndCode(t,n.code,n.tenantId)}}Rt.PROVIDER_ID="password",Rt.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Rt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ft{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class jt extends Ft{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Vt extends jt{static credentialFromJSON(t){const e="string"==typeof t?JSON.parse(t):t;return E("providerId"in e&&"signInMethod"in e,"argument-error"),Nt._fromParams(e)}credential(t){return this._credential(t)}_credential(t){return E(t.idToken||t.accessToken,"argument-error"),Nt._fromParams(Object.assign(Object.assign({},t),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(t){return Vt.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return Vt.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:r,nonce:s,providerId:o}=t;if(!(n||i||e||r))return null;if(!o)return null;try{return new Vt(o)._credential({idToken:e,accessToken:n,rawNonce:s,pendingToken:r})}catch(t){return null}}}class Ut extends jt{constructor(){super("facebook.com")}static credential(t){return Nt._fromParams({providerId:Ut.PROVIDER_ID,signInMethod:Ut.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ut.credentialFromTaggedObject(t)}static credentialFromError(t){return Ut.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ut.credential(t.oauthAccessToken)}catch(t){return null}}}Ut.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ut.PROVIDER_ID="facebook.com";class Bt extends jt{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Nt._fromParams({providerId:Bt.PROVIDER_ID,signInMethod:Bt.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Bt.credentialFromTaggedObject(t)}static credentialFromError(t){return Bt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return Bt.credential(e,n)}catch(t){return null}}}Bt.GOOGLE_SIGN_IN_METHOD="google.com",Bt.PROVIDER_ID="google.com";class qt extends jt{constructor(){super("github.com")}static credential(t){return Nt._fromParams({providerId:qt.PROVIDER_ID,signInMethod:qt.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qt.credentialFromTaggedObject(t)}static credentialFromError(t){return qt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return qt.credential(t.oauthAccessToken)}catch(t){return null}}}qt.GITHUB_SIGN_IN_METHOD="github.com",qt.PROVIDER_ID="github.com";class zt extends It{constructor(t,e){super(t,t),this.pendingToken=e}_getIdTokenResponse(t){return Dt(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Dt(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Dt(t,e)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i,pendingToken:r}=e;return n&&i&&r&&n===i?new zt(n,r):null}static _create(t,e){return new zt(t,e)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ht extends Ft{constructor(t){E(t.startsWith("saml."),"argument-error"),super(t)}static credentialFromResult(t){return Ht.samlCredentialFromTaggedObject(t)}static credentialFromError(t){return Ht.samlCredentialFromTaggedObject(t.customData||{})}static credentialFromJSON(t){const e=zt.fromJSON(t);return E(e,"argument-error"),e}static samlCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{pendingToken:e,providerId:n}=t;if(!e||!n)return null;try{return zt._create(n,e)}catch(t){return null}}}class $t extends jt{constructor(){super("twitter.com")}static credential(t,e){return Nt._fromParams({providerId:$t.PROVIDER_ID,signInMethod:$t.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return $t.credentialFromTaggedObject(t)}static credentialFromError(t){return $t.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return $t.credential(e,n)}catch(t){return null}}}async function Wt(t,e){return B(t,"POST","/v1/accounts:signUp",j(t,e))}$t.TWITTER_SIGN_IN_METHOD="twitter.com",$t.PROVIDER_ID="twitter.com";class Kt{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await it._fromIdTokenResponse(t,n,i),s=Gt(n);return new Kt({user:r,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=Gt(n);return new Kt({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function Gt(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function Yt(t){var e;const n=_t(t);if(await n._initializationPromise,null===(e=n.currentUser)||void 0===e?void 0:e.isAnonymous)return new Kt({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await Wt(n,{returnSecureToken:!0}),r=await Kt._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}class Xt extends i.ZR{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,this.name="FirebaseError",Object.setPrototypeOf(this,Xt.prototype),this.appName=t.name,this.code=e.code,this.tenantId=null!==(r=t.tenantId)&&void 0!==r?r:void 0,this.serverResponse=e.customData.serverResponse}static _fromErrorAndOperation(t,e,n,i){return new Xt(t,e,n,i)}}function Qt(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Xt._fromErrorAndOperation(t,n,e,i);throw n}))}function Jt(t){return new Set(t.map((({providerId:t})=>t)).filter((t=>!!t)))}async function Zt(t,e){const n=(0,i.m9)(t);await ee(!0,n,e);const{providerUserInfo:r}=await async function(t,e){return V(t,"POST","/v1/accounts:update",e)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=Jt(r||[]);return n.providerData=n.providerData.filter((t=>s.has(t.providerId))),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function te(t,e,n=!1){const i=await X(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Kt._forOperation(t,"link",i)}async function ee(t,e,n){await Z(e);const i=!1===t?"provider-already-linked":"no-such-provider";E(Jt(e.providerData).has(n)===t,e.auth,i)}async function ne(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await X(t,Qt(i,r,e,t),n);E(s.idToken,i,"internal-error");const o=Y(s.idToken);E(o,i,"internal-error");const{sub:a}=o;return E(t.uid===a,i,"user-mismatch"),Kt._forOperation(t,r,s)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&b(i,"user-mismatch"),t}}async function ie(t,e,n=!1){const i="signIn",r=await Qt(t,i,e),s=await Kt._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function re(t,e){return ie(_t(t),e)}async function se(t,e){const n=(0,i.m9)(t);return await ee(!1,n,e.providerId),te(n,e)}async function oe(t,e){return ne((0,i.m9)(t),e)}async function ae(t,e){const n=_t(t),i=await async function(t,e){return B(t,"POST","/v1/accounts:signInWithCustomToken",j(t,e))}(n,{token:e,returnSecureToken:!0}),r=await Kt._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}class ce{constructor(t,e){this.factorId=t,this.uid=e.mfaEnrollmentId,this.enrollmentTime=new Date(e.enrolledAt).toUTCString(),this.displayName=e.displayName}static _fromServerResponse(t,e){return"phoneInfo"in e?le._fromServerResponse(t,e):b(t,"internal-error")}}class le extends ce{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,e){return new le(e)}}function ue(t,e,n){var i;E((null===(i=n.url)||void 0===i?void 0:i.length)>0,t,"invalid-continue-uri"),E(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(E(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iosBundleId=n.iOS.bundleId),n.android&&(E(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function he(t,e,n){const r=(0,i.m9)(t),s={requestType:"PASSWORD_RESET",email:e};n&&ue(r,s,n),await async function(t,e){return At(t,e)}(r,s)}async function de(t,e,n){await St((0,i.m9)(t),{oobCode:e,newPassword:n})}async function fe(t,e){await async function(t,e){return V(t,"POST","/v1/accounts:update",j(t,e))}((0,i.m9)(t),{oobCode:e})}async function pe(t,e){const n=(0,i.m9)(t),r=await St(n,{oobCode:e}),s=r.requestType;switch(E(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":E(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":E(r.mfaInfo,n,"internal-error");default:E(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=ce._fromServerResponse(_t(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}}async function ge(t,e){const{data:n}=await pe((0,i.m9)(t),e);return n.email}async function me(t,e,n){const i=_t(t),r=await Wt(i,{returnSecureToken:!0,email:e,password:n}),s=await Kt._fromIdTokenResponse(i,"signIn",r);return await i._updateCurrentUser(s.user),s}function ye(t,e,n){return re((0,i.m9)(t),Rt.credential(e,n))}async function ve(t,e,n){const r=(0,i.m9)(t),s={requestType:"EMAIL_SIGNIN",email:e};E(n.handleCodeInApp,r,"argument-error"),n&&ue(r,s,n),await async function(t,e){return At(t,e)}(r,s)}function be(t,e){const n=Lt.parseLink(e);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}async function _e(t,e,n){const r=(0,i.m9)(t),s=Rt.credentialWithLink(e,n||D());return E(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),re(r,s)}async function we(t,e){const n={identifier:e,continueUri:N()?D():"http://localhost"},{signinMethods:r}=await async function(t,e){return V(t,"POST","/v1/accounts:createAuthUri",j(t,e))}((0,i.m9)(t),n);return r||[]}async function xe(t,e){const n=(0,i.m9)(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&ue(n.auth,r,e);const{email:s}=await async function(t,e){return At(t,e)}(n.auth,r);s!==t.email&&await t.reload()}async function Te(t,e,n){const r=(0,i.m9)(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&ue(r.auth,s,n);const{email:o}=await async function(t,e){return At(t,e)}(r.auth,s);o!==t.email&&await t.reload()}async function Ee(t,{displayName:e,photoURL:n}){if(void 0===e&&void 0===n)return;const r=(0,i.m9)(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await X(r,async function(t,e){return V(t,"POST","/v1/accounts:update",e)}(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find((({providerId:t})=>"password"===t));a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Ie(t,e){return ke((0,i.m9)(t),e,null)}function Se(t,e){return ke((0,i.m9)(t),null,e)}async function ke(t,e,n){const{auth:i}=t,r={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(r.email=e),n&&(r.password=n);const s=await X(t,kt(i,r));await t._updateTokensIfNecessary(s,!0)}class Ae{constructor(t,e,n={}){this.isNewUser=t,this.providerId=e,this.profile=n}}class Ce extends Ae{constructor(t,e,n,i){super(t,e,n),this.username=i}}class De extends Ae{constructor(t,e){super(t,"facebook.com",e)}}class Ne extends Ce{constructor(t,e){super(t,"github.com",e,"string"==typeof(null==e?void 0:e.login)?null==e?void 0:e.login:null)}}class Oe extends Ae{constructor(t,e){super(t,"google.com",e)}}class Me extends Ce{constructor(t,e,n){super(t,"twitter.com",e,n)}}function Le(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(t){var e,n;if(!t)return null;const{providerId:i}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||"identitytoolkit#SignupNewUserResponse"===t.kind;if(!i&&(null==t?void 0:t.idToken)){const i=null===(n=null===(e=Y(t.idToken))||void 0===e?void 0:e.firebase)||void 0===n?void 0:n.sign_in_provider;if(i)return new Ae(s,"anonymous"!==i&&"custom"!==i?i:null)}if(!i)return null;switch(i){case"facebook.com":return new De(s,r);case"github.com":return new Ne(s,r);case"google.com":return new Oe(s,r);case"twitter.com":return new Me(s,r,t.screenName||null);case"custom":case"anonymous":return new Ae(s,null);default:return new Ae(s,i,r)}}(n)}function Pe(t,e){return(0,i.m9)(t).setPersistence(e)}function Re(t,e,n,r){return(0,i.m9)(t).onIdTokenChanged(e,n,r)}function Fe(t,e,n,r){return(0,i.m9)(t).onAuthStateChanged(e,n,r)}function je(t){(0,i.m9)(t).useDeviceLanguage()}function Ve(t,e){return(0,i.m9)(t).updateCurrentUser(e)}function Ue(t){return(0,i.m9)(t).signOut()}async function Be(t){return(0,i.m9)(t).delete()}class qe{constructor(t,e){this.type=t,this.credential=e}static _fromIdtoken(t){return new qe("enroll",t)}static _fromMfaPendingCredential(t){return new qe("signin",t)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(t){var e,n;if(null==t?void 0:t.multiFactorSession){if(null===(e=t.multiFactorSession)||void 0===e?void 0:e.pendingCredential)return qe._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.idToken)return qe._fromIdtoken(t.multiFactorSession.idToken)}return null}}class ze{constructor(t,e,n){this.session=t,this.hints=e,this.signInResolver=n}static _fromError(t,e){const n=_t(t),i=(e.serverResponse.mfaInfo||[]).map((t=>ce._fromServerResponse(n,t)));E(e.serverResponse.mfaPendingCredential,n,"internal-error");const r=qe._fromMfaPendingCredential(e.serverResponse.mfaPendingCredential);return new ze(r,i,(async t=>{const i=await t._process(n,r);delete e.serverResponse.mfaInfo,delete e.serverResponse.mfaPendingCredential;const s=Object.assign(Object.assign({},e.serverResponse),{idToken:i.idToken,refreshToken:i.refreshToken});switch(e.operationType){case"signIn":const t=await Kt._fromIdTokenResponse(n,e.operationType,s);return await n._updateCurrentUser(t.user),t;case"reauthenticate":return E(e.user,n,"internal-error"),Kt._forOperation(e.user,e.operationType,s);default:b(n,"internal-error")}}))}async resolveSignIn(t){const e=t;return this.signInResolver(e)}}function He(t,e){var n;const r=(0,i.m9)(t),s=e;return E(e.operationType,r,"argument-error"),E(null===(n=s.serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ze._fromError(r,s)}class $e{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload((e=>{e.mfaInfo&&(this.enrolledFactors=e.mfaInfo.map((e=>ce._fromServerResponse(t.auth,e))))}))}static _fromUser(t){return new $e(t)}async getSession(){return qe._fromIdtoken(await this.user.getIdToken())}async enroll(t,e){const n=t,i=await this.getSession(),r=await X(this.user,n._process(this.user.auth,i,e));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(t){const e="string"==typeof t?t:t.uid,n=await this.user.getIdToken(),i=await X(this.user,(r=this.user.auth,s={idToken:n,mfaEnrollmentId:e},V(r,"POST","/v2/accounts/mfaEnrollment:withdraw",Object.assign({tenantId:r.tenantId},s))));var r,s;this.enrolledFactors=this.enrolledFactors.filter((({uid:t})=>t!==e)),await this.user._updateTokensIfNecessary(i);try{await this.user.reload()}catch(t){if("auth/user-token-expired"!==t.code)throw t}}}const We=new WeakMap;function Ke(t){const e=(0,i.m9)(t);return We.has(e)||We.set(e,$e._fromUser(e)),We.get(e)}const Ge="__sak";class Ye{constructor(t,e){this.storage=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Ge,"1"),this.storage.removeItem(Ge),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}}class Xe extends Ye{constructor(){super(window.localStorage,"LOCAL"),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=(0,i.z$)();return ut(t)||mt(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=yt(),this._shouldAllowMigration=!0,this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const r=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},s=this.storage.getItem(n);(0,i.w1)()&&10===document.documentMode&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,10):r()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Xe.type="LOCAL";const Qe=Xe;class Je extends Ye{constructor(){super(window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Je.type="SESSION";const Ze=Je;class tn{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new tn(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async t=>t(e.origin,r))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function en(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}tn.receivers=[];class nn{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const c=en("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(l),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function rn(){return window}function sn(){return void 0!==rn().WorkerGlobalScope&&"function"==typeof rn().importScripts}const on="firebaseLocalStorageDb",an="firebaseLocalStorage",cn="fbase_key";class ln{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function un(t,e){return t.transaction([an],e?"readwrite":"readonly").objectStore(an)}function hn(){const t=indexedDB.open(on,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(an,{keyPath:cn})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(an)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(on);return new ln(t).toPromise()}(),e(await hn()))}))}))}async function dn(t,e,n){const i=un(t,!0).put({[cn]:e,value:n});return new ln(i).toPromise()}function fn(t,e){const n=un(t,!0).delete(e);return new ln(n).toPromise()}class pn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await hn()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tn._getInstance(sn()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new nn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var e;if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await hn();return await dn(t,Ge,"1"),await fn(t,Ge),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>dn(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=un(t,!1).get(e),i=await new ln(n).toPromise();return void 0===i?null:i.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>fn(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=un(t,!1).getAll();return new ln(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}pn.type="LOCAL";const gn=pn;function mn(t){return new Promise(((e,n)=>{const i=document.createElement("script");var r,s;i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=_("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",(null!==(s=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==s?s:document).appendChild(i)}))}function yn(t){return`__${t}${Math.floor(1e6*Math.random())}`}const vn=1e12;class bn{constructor(t){this.auth=t,this.counter=vn,this._widgets=new Map}render(t,e){const n=this.counter;return this._widgets.set(n,new _n(t,this.auth.name,e||{})),this.counter++,n}reset(t){var e;const n=t||vn;null===(e=this._widgets.get(n))||void 0===e||e.delete(),this._widgets.delete(n)}getResponse(t){var e;const n=t||vn;return(null===(e=this._widgets.get(n))||void 0===e?void 0:e.getResponse())||""}async execute(t){var e;const n=t||vn;return null===(e=this._widgets.get(n))||void 0===e||e.execute(),""}}class _n{constructor(t,e,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i="string"==typeof t?document.getElementById(t):t;E(i,"argument-error",{appName:e}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<50;t++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}();const{callback:t,"expired-callback":e}=this.params;if(t)try{t(this.responseToken)}catch(t){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,e)try{e()}catch(t){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const wn=yn("rcb"),xn=new M(3e4,6e4);class Tn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!rn().grecaptcha}load(t,e=""){return E(function(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}(e),t,"argument-error"),this.shouldResolveImmediately(e)?Promise.resolve(rn().grecaptcha):new Promise(((n,r)=>{const s=rn().setTimeout((()=>{r(_(t,"network-request-failed"))}),xn.get());rn()[wn]=()=>{rn().clearTimeout(s),delete rn()[wn];const i=rn().grecaptcha;if(!i)return void r(_(t,"internal-error"));const o=i.render;i.render=(t,e)=>{const n=o(t,e);return this.counter++,n},this.hostLanguage=e,n(i)},mn(`https://www.google.com/recaptcha/api.js??${(0,i.xO)({onload:wn,render:"explicit",hl:e})}`).catch((()=>{clearTimeout(s),r(_(t,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){return!!rn().grecaptcha&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class En{async load(t){return new bn(t)}clearedOneInstance(){}}const In="recaptcha",Sn={theme:"light",type:"image"};class kn{constructor(t,e=Object.assign({},Sn),n){this.parameters=e,this.type=In,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_t(n),this.isInvisible="invisible"===this.parameters.size,E("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const i="string"==typeof t?document.getElementById(t):t;E(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new En:new Tn,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),e=this.getAssertedRecaptcha();return e.getResponse(t)||new Promise((n=>{const i=t=>{t&&(this.tokenChangeListeners.delete(i),n(t))};this.tokenChangeListeners.add(i),this.isInvisible&&e.execute(t)}))}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((t=>{throw this.renderPromise=null,t}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((t=>{this.container.removeChild(t)}))}validateStartingState(){E(!this.parameters.sitekey,this.auth,"argument-error"),E(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),E("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return e=>{if(this.tokenChangeListeners.forEach((t=>t(e))),"function"==typeof t)t(e);else if("string"==typeof t){const n=rn()[t];"function"==typeof n&&n(e)}}}assertNotDestroyed(){E(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){E(N()&&!sn(),this.auth,"internal-error"),await function(){let t=null;return new Promise((e=>{"complete"!==document.readyState?(t=()=>e(),window.addEventListener("load",t)):e()})).catch((e=>{throw t&&window.removeEventListener("load",t),e}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await async function(t){return(await V(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);E(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return E(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class An{constructor(t,e){this.verificationId=t,this.onConfirmation=e}confirm(t){const e=Mt._fromVerification(this.verificationId,t);return this.onConfirmation(e)}}async function Cn(t,e,n){const r=_t(t),s=await On(r,e,(0,i.m9)(n));return new An(s,(t=>re(r,t)))}async function Dn(t,e,n){const r=(0,i.m9)(t);await ee(!1,r,"phone");const s=await On(r.auth,e,(0,i.m9)(n));return new An(s,(t=>se(r,t)))}async function Nn(t,e,n){const r=(0,i.m9)(t),s=await On(r.auth,e,(0,i.m9)(n));return new An(s,(t=>oe(r,t)))}async function On(t,e,n){var i;const r=await n.verify();try{let s;if(E("string"==typeof r,t,"argument-error"),E(n.type===In,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){E("enroll"===e.type,t,"internal-error");const n=await function(t,e){return V(t,"POST","/v2/accounts/mfaEnrollment:start",Object.assign({tenantId:t.tenantId},e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{E("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;E(n,t,"missing-multi-factor-info");const o=await function(t,e){return V(t,"POST","/v2/accounts/mfaSignIn:start",Object.assign({tenantId:t.tenantId},e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return V(t,"POST","/v1/accounts:sendVerificationCode",j(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}async function Mn(t,e){await te((0,i.m9)(t),e)}class Ln{constructor(t){this.providerId=Ln.PROVIDER_ID,this.auth=_t(t)}verifyPhoneNumber(t,e){return On(this.auth,t,(0,i.m9)(e))}static credential(t,e){return Mt._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Ln.credentialFromTaggedObject(e)}static credentialFromError(t){return Ln.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?Mt._fromTokenResponse(e,n):null}}function Pn(t,e){return e?A(e):(E(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}Ln.PROVIDER_ID="phone",Ln.PHONE_SIGN_IN_METHOD="phone";class Rn extends It{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Dt(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Dt(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Dt(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Fn(t){return ie(t.auth,new Rn(t),t.bypassAuthState)}function jn(t){const{auth:e,user:n}=t;return E(n,e,"internal-error"),ne(n,new Rn(t),t.bypassAuthState)}async function Vn(t){const{auth:e,user:n}=t;return E(n,e,"internal-error"),te(n,new Rn(t),t.bypassAuthState)}class Un{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Fn;case"linkViaPopup":case"linkViaRedirect":return Vn;case"reauthViaPopup":case"reauthViaRedirect":return jn;default:b(this.auth,"internal-error")}}resolve(t){S(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){S(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Bn=new M(2e3,1e4);async function qn(t,e,n){const i=_t(t);x(t,e,Ft);const r=Pn(i,n);return new $n(i,"signInViaPopup",e,r).executeNotNull()}async function zn(t,e,n){const r=(0,i.m9)(t);x(r.auth,e,Ft);const s=Pn(r.auth,n);return new $n(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function Hn(t,e,n){const r=(0,i.m9)(t);x(r.auth,e,Ft);const s=Pn(r.auth,n);return new $n(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class $n extends Un{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,$n.currentPopupAction&&$n.currentPopupAction.cancel(),$n.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return E(t,this.auth,"internal-error"),t}async onExecution(){S(1===this.filter.length,"Popup operations only handle one event");const t=en();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(_(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(_(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$n.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(_(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(t,Bn.get())};t()}}$n.currentPopupAction=null;const Wn=new Map;class Kn extends Un{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=Wn.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=Xn(e),i="true"===await Yn(t)._get(n);return await Yn(t)._remove(n),i}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(e)}catch(e){t=()=>Promise.reject(e)}Wn.set(this.auth._key(),t)}return t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Gn(t,e){return Yn(t)._set(Xn(e),"true")}function Yn(t){return A(t._redirectPersistence)}function Xn(t){return ot("pendingRedirect",t.config.apiKey,t.name)}function Qn(t,e,n){return async function(t,e,n){const i=_t(t);x(t,e,Ft);const r=Pn(i,n);return await Gn(r,i),r._openRedirect(i,e,"signInViaRedirect")}(t,e,n)}function Jn(t,e,n){return async function(t,e,n){const r=(0,i.m9)(t);x(r.auth,e,Ft);const s=Pn(r.auth,n);await Gn(s,r.auth);const o=await ni(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",o)}(t,e,n)}function Zn(t,e,n){return async function(t,e,n){const r=(0,i.m9)(t);x(r.auth,e,Ft);const s=Pn(r.auth,n);await ee(!1,r,e.providerId),await Gn(s,r.auth);const o=await ni(r);return s._openRedirect(r.auth,e,"linkViaRedirect",o)}(t,e,n)}async function ti(t,e){return await _t(t)._initializationPromise,ei(t,e,!1)}async function ei(t,e,n=!1){const i=_t(t),r=Pn(i,e),s=new Kn(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}async function ni(t){const e=en(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}class ii{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return si(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!si(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(_(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ri(t))}saveEventToCache(t){this.cachedEventUids.add(ri(t)),this.lastProcessedEventTime=Date.now()}}function ri(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function si({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}const oi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ai=/^https?/;function ci(t){const e=D(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!ai.test(n))return!1;if(oi.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const li=new M(3e4,6e4);function ui(){const t=rn().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let hi=null;function di(t){return hi=hi||function(t){return new Promise(((e,n)=>{var i,r,s;function o(){ui(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ui(),n(_(t,"network-request-failed"))},timeout:li.get()})}if(null===(r=null===(i=rn().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=rn().gapi)||void 0===s?void 0:s.load)){const e=yn("iframefcb");return rn()[e]=()=>{gapi.load?o():n(_(t,"network-request-failed"))},mn(`https://apis.google.com/js/api.js?onload=${e}`)}o()}})).catch((t=>{throw hi=null,t}))}(t),hi}const fi=new M(5e3,15e3),pi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},gi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mi(t){const e=t.config;E(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?L(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,s={apiKey:e.apiKey,appName:t.name,v:r.Jn},o=gi.get(t.config.apiHost);o&&(s.eid=o);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${(0,i.xO)(s).slice(1)}`}const yi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vi{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function bi(t,e,n,s,o,a){E(t.config.authDomain,t,"auth-domain-config-required"),E(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:r.Jn,eventId:o};if(e instanceof Ft){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",(0,i.xb)(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(a||{}))c[t]=e}if(e instanceof jt){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(c.scopes=t.join(","))}t.tenantId&&(c.tid=t.tenantId);const l=c;for(const t of Object.keys(l))void 0===l[t]&&delete l[t];return`${function({config:t}){return t.emulator?L(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${(0,i.xO)(l).slice(1)}`}const _i="webStorageSupport",wi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ze,this._completeRedirectFn=ei}async _openPopup(t,e,n,r){var s;return S(null===(s=this.eventManagers[t._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),function(t,e,n,r=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l=Object.assign(Object.assign({},yi),{width:r.toString(),height:s.toString(),top:o,left:a}),u=(0,i.z$)().toLowerCase();n&&(c=ht(u)?"_blank":n),lt(u)&&(e=e||"http://localhost",l.scrollbars="yes");const h=Object.entries(l).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=(0,i.z$)()){var e;return mt(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==c)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",c),new vi(null);const d=window.open(e||"",c,h);E(d,t,"popup-blocked");try{d.focus()}catch(t){}return new vi(d)}(t,bi(t,e,n,D(),r),en())}async _openRedirect(t,e,n,i){var r;return await this._originValidation(t),r=bi(t,e,n,D(),i),rn().location.href=r,new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(S(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n}async initAndGetManager(t){const e=await async function(t){const e=await di(t),n=rn().gapi;return E(n,t,"internal-error"),e.open({where:document.body,url:mi(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pi,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=_(t,"network-request-failed"),s=rn().setTimeout((()=>{i(r)}),fi.get());function o(){rn().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{i(r)}))}))))}(t),n=new ii(t);return e.register("authEvent",(e=>(E(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:n.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(_i,{type:_i},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i.webStorageSupport;void 0!==r&&e(!!r),b(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await async function(t,e={}){return V(t,"GET","/v1/projects",e)}(t);for(const t of e)try{if(ci(t))return}catch(t){}b(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return yt()||ut()||mt()}};class xi extends class{constructor(t){this.factorId=t}_process(t,e,n){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,n);case"signin":return this._finalizeSignIn(t,e.credential);default:return I("unexpected MultiFactorSessionType")}}}{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new xi(t)}_finalizeEnroll(t,e,n){return function(t,e){return V(t,"POST","/v2/accounts/mfaEnrollment:finalize",Object.assign({tenantId:t.tenantId},e))}(t,{idToken:e,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return function(t,e){return V(t,"POST","/v2/accounts/mfaSignIn:finalize",Object.assign({tenantId:t.tenantId},e))}(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Ti{constructor(){}static assertion(t){return xi._fromCredential(t)}}var Ei;class Ii{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{var n;t((null===(n=e)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){E(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Si(t=(0,r.Mq)()){const e=(0,r.qX)(t,"auth");return e.isInitialized()?e.getImmediate():C(t,{popupRedirectResolver:wi,persistence:[gn,Qe,Ze]})}Ei="Browser",(0,r.Xd)(new a.wA("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),{apiKey:i,authDomain:r}=n.options;return(t=>{E(i&&!i.includes(":"),"invalid-api-key",{appName:t.name}),E(!(null==r?void 0:r.includes(":")),"argument-error",{appName:t.name});const n={apiKey:i,authDomain:r,clientPlatform:Ei,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vt(Ei)},s=new bt(t,n);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(A);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(s,e),s})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),(0,r.Xd)(new a.wA("auth-internal",(t=>{return e=_t(t.getProvider("auth").getImmediate()),new Ii(e);var e}),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KN)("@firebase/auth","0.17.2",void 0)},956:(t,e,n)=>{"use strict";n.r(e),n.d(e,{AbstractUserDataWriter:()=>Tf,Bytes:()=>vd,CACHE_SIZE_UNLIMITED:()=>Zh,CollectionReference:()=>Hh,DocumentReference:()=>qh,DocumentSnapshot:()=>Qd,FieldPath:()=>md,FieldValue:()=>bd,Firestore:()=>td,FirestoreError:()=>Li,GeoPoint:()=>_d,LoadBundleTask:()=>Jh,Query:()=>zh,QueryConstraint:()=>rf,QueryDocumentSnapshot:()=>Jd,QuerySnapshot:()=>Zd,SnapshotMetadata:()=>Xd,Timestamp:()=>Gi,Transaction:()=>zf,WriteBatch:()=>Sf,_DatabaseId:()=>Dh,_DocumentKey:()=>mr,_EmptyCredentialsProvider:()=>Fi,_FieldPath:()=>nr,_cast:()=>Fh,_debugAssert:()=>Ni,_isBase64Available:()=>rr,_logWarn:()=>ki,_validateIsNotUsedTogether:()=>Mh,addDoc:()=>jf,arrayRemove:()=>Gf,arrayUnion:()=>Kf,clearIndexedDbPersistence:()=>cd,collection:()=>$h,collectionGroup:()=>Wh,connectFirestoreEmulator:()=>Bh,deleteDoc:()=>Ff,deleteField:()=>$f,disableNetwork:()=>hd,doc:()=>Kh,documentId:()=>yd,enableIndexedDbPersistence:()=>sd,enableMultiTabIndexedDbPersistence:()=>od,enableNetwork:()=>ud,endAt:()=>vf,endBefore:()=>yf,ensureFirestoreConfigured:()=>id,executeWrite:()=>Bf,getDoc:()=>Af,getDocFromCache:()=>Df,getDocFromServer:()=>Nf,getDocs:()=>Of,getDocsFromCache:()=>Mf,getDocsFromServer:()=>Lf,getFirestore:()=>nd,increment:()=>Yf,initializeFirestore:()=>ed,limit:()=>hf,limitToLast:()=>df,loadBundle:()=>fd,namedQuery:()=>pd,onSnapshot:()=>Vf,onSnapshotsInSync:()=>Uf,orderBy:()=>lf,query:()=>sf,queryEqual:()=>Yh,refEqual:()=>Gh,runTransaction:()=>Hf,serverTimestamp:()=>Wf,setDoc:()=>Pf,setLogLevel:()=>Ei,snapshotEqual:()=>ef,startAfter:()=>gf,startAt:()=>pf,terminate:()=>dd,updateDoc:()=>Rf,waitForPendingWrites:()=>ld,where:()=>af,writeBatch:()=>Xf});var i=n(258),r=n(909),s=n(594),o=n(589),a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},a(t,e)};function c(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var l,u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},h=h||{},d=u||self;function f(){}function p(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function v(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:b).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function x(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function T(){this.s=this.s,this.o=this.o}var E={};T.prototype.s=!1,T.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++y)}(this);delete E[t]}},T.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var I=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},S=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r="string"==typeof t?t.split(""):t,s=0;s<i;s++)s in r&&e.call(n,r[s],s,t)};function k(t){return Array.prototype.concat.apply([],arguments)}function A(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}function C(t){return/^[\s\xa0]*$/.test(t)}var D,N=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function O(t,e){return-1!=t.indexOf(e)}function M(t,e){return t<e?-1:t>e?1:0}t:{var L=d.navigator;if(L){var P=L.userAgent;if(P){D=P;break t}}D=""}function R(t,e,n){for(var i in t)e.call(n,t[i],i,t)}function F(t){var e={};for(var n in t)e[n]=t[n];return e}var j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var s=0;s<j.length;s++)n=j[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function U(t){return U[" "](t),t}U[" "]=f;var B,q,z=O(D,"Opera"),H=O(D,"Trident")||O(D,"MSIE"),$=O(D,"Edge"),W=$||H,K=O(D,"Gecko")&&!(O(D.toLowerCase(),"webkit")&&!O(D,"Edge"))&&!(O(D,"Trident")||O(D,"MSIE"))&&!O(D,"Edge"),G=O(D.toLowerCase(),"webkit")&&!O(D,"Edge");function Y(){var t=d.document;return t?t.documentMode:void 0}t:{var X="",Q=(q=D,K?/rv:([^\);]+)(\)|;)/.exec(q):$?/Edge\/([\d\.]+)/.exec(q):H?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):G?/WebKit\/(\S+)/.exec(q):z?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(Q&&(X=Q?Q[1]:""),H){var J=Y();if(null!=J&&J>parseFloat(X)){B=String(J);break t}}B=X}var Z,tt={};function et(){return t=tt,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=N(String(B)).split("."),n=N("9").split("."),i=Math.max(e.length,n.length),r=0;0==t&&r<i;r++){var s=e[r]||"",o=n[r]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;t=M(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||M(0==s[2].length,0==o[2].length)||M(s[2],o[2]),s=s[3],o=o[3]}while(0==t)}return 0<=t}();var t}d.document&&H?Z=Y()||parseInt(B,10)||void 0:Z=void 0;var nt=Z,it=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{d.addEventListener("test",f,e),d.removeEventListener("test",f,e)}catch(t){}return t}();function rt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function st(t,e){if(rt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(K){t:{try{U(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ot[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&st.Z.h.call(this)}}rt.prototype.h=function(){this.defaultPrevented=!0},x(st,rt);var ot={2:"touch",3:"pen",4:"mouse"};st.prototype.h=function(){st.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var at="closure_listenable_"+(1e6*Math.random()|0),ct=0;function lt(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ia=r,this.key=++ct,this.ca=this.fa=!1}function ut(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function ht(t){this.src=t,this.g={},this.h=0}function dt(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=I(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(ut(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ft(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==i)return r}return-1}ht.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=ft(t,e,i,r);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new lt(e,this.src,s,!!i,r)).fa=n,t.push(e)),e};var pt="closure_lm_"+(1e6*Math.random()|0),gt={};function mt(t,e,n,i,r){if(i&&i.once)return vt(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)mt(t,e[s],n,i,r);return null}return n=It(n),t&&t[at]?t.N(e,n,g(i)?!!i.capture:!!i,r):yt(t,e,n,!1,i,r)}function yt(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=g(r)?!!r.capture:!!r,a=Tt(t);if(a||(t[pt]=a=new ht(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){var t=xt;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)it||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(wt(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function vt(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)vt(t,e[s],n,i,r);return null}return n=It(n),t&&t[at]?t.O(e,n,g(i)?!!i.capture:!!i,r):yt(t,e,n,!0,i,r)}function bt(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)bt(t,e[s],n,i,r);else i=g(i)?!!i.capture:!!i,n=It(n),t&&t[at]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=ft(s=t.g[e],n,i,r))&&(ut(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=Tt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ft(e,n,i,r)),(n=-1<t?e[t]:null)&&_t(n))}function _t(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[at])dt(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(wt(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Tt(e))?(dt(n,t),0==n.h&&(n.src=null,e[pt]=null)):ut(t)}}}function wt(t){return t in gt?gt[t]:gt[t]="on"+t}function xt(t,e){if(t.ca)t=!0;else{e=new st(e,this);var n=t.listener,i=t.ia||t.src;t.fa&&_t(t),t=n.call(i,e)}return t}function Tt(t){return(t=t[pt])instanceof ht?t:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function It(t){return"function"==typeof t?t:(t[Et]||(t[Et]=function(e){return t.handleEvent(e)}),t[Et])}function St(){T.call(this),this.i=new ht(this),this.P=this,this.I=null}function kt(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,"string"==typeof e)e=new rt(e,t);else if(e instanceof rt)e.target=e.target||t;else{var r=e;V(e=new rt(i,t),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=At(o,i,!0,e)&&r}if(r=At(o=e.g=t,i,!0,e)&&r,r=At(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)r=At(o=e.g=n[s],i,!1,e)&&r}function At(t,e,n,i){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&dt(t.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}x(St,T),St.prototype[at]=!0,St.prototype.removeEventListener=function(t,e,n,i){bt(this,t,e,n,i)},St.prototype.M=function(){if(St.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)ut(n[i]);delete e.g[t],e.h--}}this.I=null},St.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},St.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var Ct=d.JSON.stringify;function Dt(){var t=jt,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Nt,Ot=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Mt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Mt=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Lt}),(function(t){return t.reset()})),Lt=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Pt(t){d.setTimeout((function(){throw t}),0)}function Rt(t,e){Nt||function(){var t=d.Promise.resolve(void 0);Nt=function(){t.then(Vt)}}(),Ft||(Nt(),Ft=!0),jt.add(t,e)}var Ft=!1,jt=new Ot;function Vt(){for(var t;t=Dt();){try{t.h.call(t.g)}catch(t){Pt(t)}var e=Mt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ft=!1}function Ut(t,e){St.call(this),this.h=t||1,this.g=e||d,this.j=_(this.kb,this),this.l=Date.now()}function Bt(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function qt(t,e,n){if("function"==typeof t)n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:d.setTimeout(t,e||0)}function zt(t){t.g=qt((function(){t.g=null,t.i&&(t.i=!1,zt(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}x(Ut,St),(l=Ut.prototype).da=!1,l.S=null,l.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),kt(this,"tick"),this.da&&(Bt(this),this.start()))}},l.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},l.M=function(){Ut.Z.M.call(this),Bt(this),delete this.g};var Ht=function(t){function e(e,n){var i=t.call(this)||this;return i.m=e,i.j=n,i.h=null,i.i=!1,i.g=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:zt(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(T);function $t(t){T.call(this),this.h=t,this.g={}}x($t,T);var Wt=[];function Kt(t,e,n,i){Array.isArray(n)||(n&&(Wt[0]=n.toString()),n=Wt);for(var r=0;r<n.length;r++){var s=mt(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Gt(t){R(t.g,(function(t,e){this.g.hasOwnProperty(e)&&_t(t)}),t),t.g={}}function Yt(){this.g=!0}function Xt(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return Ct(n)}catch(t){return e}}(t,n)+(i?" "+i:"")}))}$t.prototype.M=function(){$t.Z.M.call(this),Gt(this)},$t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yt.prototype.Aa=function(){this.g=!1},Yt.prototype.info=function(){};var Qt={},Jt=null;function Zt(){return Jt=Jt||new St}function te(t){rt.call(this,Qt.Ma,t)}function ee(t){var e=Zt();kt(e,new te(e,t))}function ne(t,e){rt.call(this,Qt.STAT_EVENT,t),this.stat=e}function ie(t){var e=Zt();kt(e,new ne(e,t))}function re(t,e){rt.call(this,Qt.Na,t),this.size=e}function se(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return d.setTimeout((function(){t()}),e)}Qt.Ma="serverreachability",x(te,rt),Qt.STAT_EVENT="statevent",x(ne,rt),Qt.Na="timingevent",x(re,rt);var oe={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ae={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ce(){}function le(t){return t.h||(t.h=t.i())}function ue(){}ce.prototype.h=null;var he,de={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function fe(){rt.call(this,"d")}function pe(){rt.call(this,"c")}function ge(){}function me(t,e,n,i){this.l=t,this.j=e,this.m=n,this.X=i||1,this.V=new $t(this),this.P=ve,t=W?125:void 0,this.W=new Ut(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ye}function ye(){this.i=null,this.g="",this.h=!1}x(fe,rt),x(pe,rt),x(ge,ce),ge.prototype.g=function(){return new XMLHttpRequest},ge.prototype.i=function(){return{}},he=new ge;var ve=45e3,be={},_e={};function we(t,e,n){t.K=1,t.v=He(je(e)),t.s=n,t.U=!0,xe(t,null)}function xe(t,e){t.F=Date.now(),Se(t),t.A=je(t.v);var n=t.A,i=t.X;Array.isArray(i)||(i=[String(i)]),rn(n.h,"t",i),t.C=0,n=t.l.H,t.h=new ye,t.g=si(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Ht(_(t.Ia,t,t.g),t.O)),Kt(t.V,t.g,"readystatechange",t.gb),e=t.H?F(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ee(1),function(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Te(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Ee(t,e,n){for(var i,r=!0;!t.I&&t.C<n.length;){if((i=Ie(t,n))==_e){4==e&&(t.o=4,ie(14),r=!1),Xt(t.j,t.m,null,"[Incomplete Response]");break}if(i==be){t.o=4,ie(15),Xt(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Xt(t.j,t.m,i,null),Ne(t,i)}Te(t)&&i!=_e&&i!=be&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ie(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Qn(e),e.L=!0,ie(11))):(Xt(t.j,t.m,n,"[Invalid Chunked Response]"),De(t),Ce(t))}function Ie(t,e){var n=t.C,i=e.indexOf("\n",n);return-1==i?_e:(n=Number(e.substring(n,i)),isNaN(n)?be:(i+=1)+n>e.length?_e:(e=e.substr(i,n),t.C=i+n,e))}function Se(t){t.Y=Date.now()+t.P,ke(t,t.P)}function ke(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=se(_(t.eb,t),e)}function Ae(t){t.B&&(d.clearTimeout(t.B),t.B=null)}function Ce(t){0==t.l.G||t.I||ti(t.l,t)}function De(t){Ae(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Bt(t.W),Gt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Ne(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||hn(n.i,t)))if(n.I=t.N,!t.J&&hn(n.i,t)&&3==n.G){try{var i=n.Ca.g.parse(e)}catch(s){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Zn(n),qn(n)}Xn(n),ie(18)}}else n.ta=r[1],0<n.ta-n.U&&37500>r[2]&&n.N&&0==n.A&&!n.v&&(n.v=se(_(n.ab,n),6e3));if(1>=un(n.i)&&n.ka){try{n.ka()}catch(s){}n.ka=void 0}}else ni(n,11)}else if((t.J||n.g==t)&&Zn(n),!C(e))for(r=n.Ca.g.parse(e),e=0;e<r.length;e++){var s=r[e];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var c=s[5];null!=c&&"number"==typeof c&&0<c&&(i=1.5*c,n.K=i,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;var l=t.g;if(l){var u=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(u){var h=i.i;!h.g&&(O(u,"spdy")||O(u,"quic")||O(u,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(dn(h,h.h),h.h=null))}if(i.D){var d=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(i.sa=d,ze(i.F,i.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=t;if((i=n).oa=ri(i,i.H?i.la:null,i.W),f.J){fn(i.i,f);var p=f,g=i.K;g&&p.setTimeout(g),p.B&&(Ae(p),Se(p)),i.g=f}else Yn(i);0<n.l.length&&$n(n)}else"stop"!=s[0]&&"close"!=s[0]||ni(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?ni(n,7):Bn(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}ee(4)}catch(s){}}function Oe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)S(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(p(t)||"string"==typeof t){n=[];for(var i=t.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,t)n[i++]=r;i=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t),r=i.length;for(var s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}}function Me(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof Me)for(n=t.T(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function Le(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var i=t.g[e];Pe(t.h,i)&&(t.g[n++]=i),e++}t.g.length=n}if(t.i!=t.g.length){var r={};for(n=e=0;e<t.g.length;)Pe(r,i=t.g[e])||(t.g[n++]=i,r[i]=1),e++;t.g.length=n}}function Pe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(l=me.prototype).setTimeout=function(t){this.P=t},l.gb=function(t){t=t.target;var e=this.L;e&&3==Rn(t)?e.l():this.Ia(t)},l.Ia=function(t){try{if(t==this.g)t:{var e=Rn(this.g),n=this.g.Da(),i=this.g.ba();if(!(3>e)&&(3!=e||W||this.g&&(this.h.h||this.g.ga()||Fn(this.g)))){this.I||4!=e||7==n||ee(8==n||0>=i?3:2),Ae(this);var r=this.g.ba();this.N=r;e:if(Te(this)){var s=Fn(this.g);t="";var o=s.length,a=4==Rn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){De(this),Ce(this);var c="";break e}this.h.i=new d.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,t+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=t,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==r,function(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,e,r),this.i){if(this.$&&!this.J){e:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(l)){var h=l;break e}}h=null}if(!(r=h)){this.i=!1,this.o=3,ie(12),De(this),Ce(this);break t}Xt(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ne(this,r)}this.U?(Ee(this,e,c),W&&this.i&&3==e&&(Kt(this.V,this.W,"tick",this.fb),this.W.start())):(Xt(this.j,this.m,c,null),Ne(this,c)),4==e&&De(this),this.i&&!this.I&&(4==e?ti(this.l,this):(this.i=!1,Se(this)))}else 400==r&&0<c.indexOf("Unknown SID")?(this.o=3,ie(12)):(this.o=0,ie(13)),De(this),Ce(this)}}}catch(e){}},l.fb=function(){if(this.g){var t=Rn(this.g),e=this.g.ga();this.C<e.length&&(Ae(this),Ee(this,t,e),this.i&&4!=t&&Se(this))}},l.cancel=function(){this.I=!0,De(this)},l.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(ee(3),ie(17)),De(this),this.o=2,Ce(this)):ke(this,this.Y-t)},(l=Me.prototype).R=function(){Le(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},l.T=function(){return Le(this),this.g.concat()},l.get=function(t,e){return Pe(this.h,t)?this.h[t]:e},l.set=function(t,e){Pe(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},l.forEach=function(t,e){for(var n=this.T(),i=0;i<n.length;i++){var r=n[i],s=this.get(r);t.call(e,s,r,this)}};var Re=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fe(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Fe){this.g=void 0!==e?e:t.g,Ve(this,t.j),this.s=t.s,Ue(this,t.i),Be(this,t.m),this.l=t.l,e=t.h;var n=new Ze;n.i=e.i,e.g&&(n.g=new Me(e.g),n.h=e.h),qe(this,n),this.o=t.o}else t&&(n=String(t).match(Re))?(this.g=!!e,Ve(this,n[1]||"",!0),this.s=$e(n[2]||""),Ue(this,n[3]||"",!0),Be(this,n[4]),this.l=$e(n[5]||"",!0),qe(this,n[6]||"",!0),this.o=$e(n[7]||"")):(this.g=!!e,this.h=new Ze(null,this.g))}function je(t){return new Fe(t)}function Ve(t,e,n){t.j=n?$e(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ue(t,e,n){t.i=n?$e(e,!0):e}function Be(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function qe(t,e,n){e instanceof Ze?(t.h=e,function(t,e){e&&!t.j&&(tn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(en(this,e),rn(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=We(e,Qe)),t.h=new Ze(e,t.g))}function ze(t,e,n){t.h.set(e,n)}function He(t){return ze(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function $e(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function We(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ke),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ke(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Fe.prototype.toString=function(){var t=[],e=this.j;e&&t.push(We(e,Ge,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(We(e,Ge,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(We(n,"/"==n.charAt(0)?Xe:Ye,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",We(n,Je)),t.join("")};var Ge=/[#\/\?@]/g,Ye=/[#\?:]/g,Xe=/[#\?]/g,Qe=/[#\?@]/g,Je=/#/g;function Ze(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function tn(t){t.g||(t.g=new Me,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function en(t,e){tn(t),e=sn(t,e),Pe(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Pe((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Le(t)))}function nn(t,e){return tn(t),e=sn(t,e),Pe(t.g.h,e)}function rn(t,e,n){en(t,e),0<n.length&&(t.i=null,t.g.set(sn(t,e),A(n)),t.h+=n.length)}function sn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(l=Ze.prototype).add=function(t,e){tn(this),this.i=null,t=sn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},l.forEach=function(t,e){tn(this),this.g.forEach((function(n,i){S(n,(function(n){t.call(e,n,i,this)}),this)}),this)},l.T=function(){tn(this);for(var t=this.g.R(),e=this.g.T(),n=[],i=0;i<e.length;i++)for(var r=t[i],s=0;s<r.length;s++)n.push(e[i]);return n},l.R=function(t){tn(this);var e=[];if("string"==typeof t)nn(this,t)&&(e=k(e,this.g.get(sn(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=k(e,t[n])}return e},l.set=function(t,e){return tn(this),this.i=null,nn(this,t=sn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},l.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},l.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var o=r;""!==i[s]&&(o+="="+encodeURIComponent(String(i[s]))),t.push(o)}}return this.i=t.join("&")};var on=function(t,e){this.h=t,this.g=e};function an(t){this.l=t||cn,t=d.PerformanceNavigationTiming?0<(t=d.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(d.g&&d.g.Ea&&d.g.Ea()&&d.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var cn=10;function ln(t){return!!t.h||!!t.g&&t.g.size>=t.j}function un(t){return t.h?1:t.g?t.g.size:0}function hn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function dn(t,e){t.g?t.g.add(e):t.h=e}function fn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function pn(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var i=t.i;try{for(var r=c(t.g.values()),s=r.next();!s.done;s=r.next()){var o=s.value;i=i.concat(o.D)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}return A(t.i)}function gn(){}function mn(){this.g=new gn}function yn(t,e,n){var i=n||"";try{Oe(t,(function(t,n){var r=t;g(t)&&(r=Ct(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}function vn(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(t){}}function bn(t){this.l=t.$b||null,this.j=t.ib||!1}function _n(t,e){St.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=wn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}an.prototype.cancel=function(){var t,e;if(this.i=pn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=c(this.g.values()),i=n.next();!i.done;i=n.next())i.value.cancel()}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},gn.prototype.stringify=function(t){return d.JSON.stringify(t,void 0)},gn.prototype.parse=function(t){return d.JSON.parse(t,void 0)},x(bn,ce),bn.prototype.g=function(){return new _n(this.l,this.j)},bn.prototype.i=function(t){return function(){return t}}({}),x(_n,St);var wn=0;function xn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Tn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,En(t)}function En(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(l=_n.prototype).open=function(t,e){if(this.readyState!=wn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,En(this)},l.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||d).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},l.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Tn(this)),this.readyState=wn},l.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,En(this)),this.g&&(this.readyState=3,En(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==d.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},l.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Tn(this):En(this),3==this.readyState&&xn(this)}},l.Ua=function(t){this.g&&(this.response=this.responseText=t,Tn(this))},l.Ta=function(t){this.g&&(this.response=t,Tn(this))},l.ha=function(){this.g&&Tn(this)},l.setRequestHeader=function(t,e){this.v.append(t,e)},l.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},l.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(_n.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var In=d.JSON.parse;function Sn(t){St.call(this),this.headers=new Me,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=kn,this.K=this.L=!1}x(Sn,St);var kn="",An=/^https?$/i,Cn=["POST","PUT"];function Dn(t){return"content-type"==t.toLowerCase()}function Nn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,On(t),Ln(t)}function On(t){t.D||(t.D=!0,kt(t,"complete"),kt(t,"error"))}function Mn(t){if(t.h&&void 0!==h&&(!t.C[1]||4!=Rn(t)||2!=t.ba()))if(t.v&&4==Rn(t))qt(t.Fa,0,t);else if(kt(t,"readystatechange"),4==Rn(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1}if(!(e=i)){var r;if(r=0===n){var s=String(t.H).match(Re)[1]||null;if(!s&&d.self&&d.self.location){var o=d.self.location.protocol;s=o.substr(0,o.length-1)}r=!An.test(s?s.toLowerCase():"")}e=r}if(e)kt(t,"complete"),kt(t,"success");else{t.m=6;try{var a=2<Rn(t)?t.g.statusText:""}catch(t){a=""}t.j=a+" ["+t.ba()+"]",On(t)}}finally{Ln(t)}}}function Ln(t,e){if(t.g){Pn(t);var n=t.g,i=t.C[0]?f:null;t.g=null,t.C=null,e||kt(t,"ready");try{n.onreadystatechange=i}catch(t){}}}function Pn(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(d.clearTimeout(t.A),t.A=null)}function Rn(t){return t.g?t.g.readyState:0}function Fn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case kn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function jn(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=function(t){var e="";return R(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ze(t,e,n))}function Vn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Un(t){this.za=0,this.l=[],this.h=new Yt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Vn("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Vn("baseRetryDelayMs",5e3,t),this.$a=Vn("retryDelaySeedMs",1e4,t),this.Ya=Vn("forwardChannelMaxRetries",2,t),this.ra=Vn("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new an(t&&t.concurrentRequestLimit),this.Ca=new mn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Bn(t){if(zn(t),3==t.G){var e=t.V++,n=je(t.F);ze(n,"SID",t.J),ze(n,"RID",e),ze(n,"TYPE","terminate"),Kn(t,n),(e=new me(t,t.h,e,void 0)).K=2,e.v=He(je(n)),n=!1,d.navigator&&d.navigator.sendBeacon&&(n=d.navigator.sendBeacon(e.v.toString(),"")),!n&&d.Image&&((new Image).src=e.v,n=!0),n||(e.g=si(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Se(e)}ii(t)}function qn(t){t.g&&(Qn(t),t.g.cancel(),t.g=null)}function zn(t){qn(t),t.u&&(d.clearTimeout(t.u),t.u=null),Zn(t),t.i.cancel(),t.m&&("number"==typeof t.m&&d.clearTimeout(t.m),t.m=null)}function Hn(t,e){t.l.push(new on(t.Za++,e)),3==t.G&&$n(t)}function $n(t){ln(t.i)||t.m||(t.m=!0,Rt(t.Ha,t),t.C=0)}function Wn(t,e){var n;n=e?e.m:t.V++;var i=je(t.F);ze(i,"SID",t.J),ze(i,"RID",n),ze(i,"AID",t.U),Kn(t,i),t.o&&t.s&&jn(i,t.o,t.s),n=new me(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Gn(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),dn(t.i,n),we(n,i,e)}function Kn(t,e){t.j&&Oe({},(function(t,n){ze(e,n,t)}))}function Gn(t,e,n){n=Math.min(t.l.length,n);var i=t.j?_(t.j.Oa,t.j,t):null;t:for(var r=t.l,s=-1;;){var o=["count="+n];-1==s?0<n?(s=r[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);for(var a=!0,c=0;c<n;c++){var l=r[c].h,u=r[c].g;if(0>(l-=s))s=Math.max(0,r[c].h-100),a=!1;else try{yn(u,o,"req"+l+"_")}catch(t){i&&i(u)}}if(a){i=o.join("&");break t}}return t=t.l.splice(0,n),e.D=t,i}function Yn(t){t.g||t.u||(t.Y=1,Rt(t.Ga,t),t.A=0)}function Xn(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=se(_(t.Ga,t),ei(t,t.A)),t.A++,0))}function Qn(t){null!=t.B&&(d.clearTimeout(t.B),t.B=null)}function Jn(t){t.g=new me(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=je(t.oa);ze(e,"RID","rpc"),ze(e,"SID",t.J),ze(e,"CI",t.N?"0":"1"),ze(e,"AID",t.U),Kn(t,e),ze(e,"TYPE","xmlhttp"),t.o&&t.s&&jn(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=He(je(e)),n.s=null,n.U=!0,xe(n,t)}function Zn(t){null!=t.v&&(d.clearTimeout(t.v),t.v=null)}function ti(t,e){var n=null;if(t.g==e){Zn(t),Qn(t),t.g=null;var i=2}else{if(!hn(t.i,e))return;n=e.D,fn(t.i,e),i=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==i){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;kt(i=Zt(),new re(i,n,e,r)),$n(t)}else Yn(t);else if(3==(r=e.o)||0==r&&0<t.I||!(1==i&&function(t,e){return!(un(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=se(_(t.Ha,t,e),ei(t,t.C)),t.C++,0)))}(t,e)||2==i&&Xn(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:ni(t,5);break;case 4:ni(t,10);break;case 3:ni(t,6);break;default:ni(t,2)}}function ei(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function ni(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var i=_(t.jb,t);n||(n=new Fe("//www.google.com/images/cleardot.gif"),d.location&&"http"==d.location.protocol||Ve(n,"https"),He(n)),function(t,e){var n=new Yt;if(d.Image){var i=new Image;i.onload=w(vn,n,i,"TestLoadImage: loaded",!0,e),i.onerror=w(vn,n,i,"TestLoadImage: error",!1,e),i.onabort=w(vn,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=w(vn,n,i,"TestLoadImage: timeout",!1,e),d.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else ie(2);t.G=0,t.j&&t.j.va(e),ii(t),zn(t)}function ii(t){t.G=0,t.I=-1,t.j&&(0==pn(t.i).length&&0==t.l.length||(t.i.i.length=0,A(t.l),t.l.length=0),t.j.ua())}function ri(t,e,n){var i=function(t){return t instanceof Fe?je(t):new Fe(t,void 0)}(n);if(""!=i.i)e&&Ue(i,e+"."+i.i),Be(i,i.m);else{var r=d.location;i=function(t,e,n,i){var r=new Fe(null,void 0);return t&&Ve(r,t),e&&Ue(r,e),n&&Be(r,n),i&&(r.l=i),r}(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,n)}return t.aa&&R(t.aa,(function(t,e){ze(i,e,t)})),e=t.D,n=t.sa,e&&n&&ze(i,e,n),ze(i,"VER",t.ma),Kn(t,i),i}function si(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Sn(new bn({ib:!0})):new Sn(t.qa)).L=t.H,e}function oi(){}function ai(){if(H&&!(10<=Number(nt)))throw Error("Environmental error: no available transport.")}function ci(t,e){St.call(this),this.g=new Un(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!C(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!C(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new hi(this)}function li(t){fe.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ui(){pe.call(this),this.status=1}function hi(t){this.g=t}(l=Sn.prototype).ea=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():he.g(),this.C=this.u?le(this.u):le(he),this.g.onreadystatechange=_(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void Nn(this,t)}t=n||"";var r=new Me(this.headers);i&&Oe(i,(function(t,e){r.set(e,t)})),i=function(t){t:{for(var e=Dn,n=t.length,i="string"==typeof t?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(r.T()),n=d.FormData&&t instanceof d.FormData,!(0<=I(Cn,e))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Pn(this),0<this.B&&((this.K=function(t){return H&&et()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_(this.pa,this)):this.A=qt(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Nn(this,t)}},l.pa=function(){void 0!==h&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kt(this,"timeout"),this.abort(8))},l.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,kt(this,"complete"),kt(this,"abort"),Ln(this))},l.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ln(this,!0)),Sn.Z.M.call(this)},l.Fa=function(){this.s||(this.F||this.v||this.l?Mn(this):this.cb())},l.cb=function(){Mn(this)},l.ba=function(){try{return 2<Rn(this)?this.g.status:-1}catch(t){return-1}},l.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},l.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),In(e)}},l.Da=function(){return this.m},l.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(l=Un.prototype).ma=8,l.G=1,l.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},l.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new me(this,this.h,t,void 0),n=this.s;if(this.P&&(n?V(n=F(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var i=0,r=0;r<this.l.length;r++){var s=this.l[r];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(i+=s)){i=r;break t}if(4096===i||r===this.l.length-1){i=r+1;break t}}i=1e3}else i=1e3;i=Gn(this,e,i),ze(r=je(this.F),"RID",t),ze(r,"CVER",22),this.D&&ze(r,"X-HTTP-Session-Id",this.D),Kn(this,r),this.o&&n&&jn(r,this.o,n),dn(this.i,e),this.Ra&&ze(r,"TYPE","init"),this.ja?(ze(r,"$req",i),ze(r,"SID","null"),e.$=!0,we(e,r,null)):we(e,r,i),this.G=2}}else 3==this.G&&(t?Wn(this,t):0==this.l.length||ln(this.i)||Wn(this))},l.Ga=function(){if(this.u=null,Jn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=se(_(this.bb,this),t)}},l.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ie(10),qn(this),Jn(this))},l.ab=function(){null!=this.v&&(this.v=null,qn(this),Xn(this),ie(19))},l.jb=function(t){t?(this.h.info("Successfully pinged google.com"),ie(2)):(this.h.info("Failed to ping google.com"),ie(1))},(l=oi.prototype).xa=function(){},l.wa=function(){},l.va=function(){},l.ua=function(){},l.Oa=function(){},ai.prototype.g=function(t,e){return new ci(t,e)},x(ci,St),ci.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Rt(_(t.hb,t,e))),ie(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=ri(t,null,t.W),$n(t)},ci.prototype.close=function(){Bn(this.g)},ci.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Hn(this.g,e)}else this.v?((e={}).__data__=Ct(t),Hn(this.g,e)):Hn(this.g,t)},ci.prototype.M=function(){this.g.j=null,delete this.j,Bn(this.g),delete this.g,ci.Z.M.call(this)},x(li,fe),x(ui,pe),x(hi,oi),hi.prototype.xa=function(){kt(this.g,"a")},hi.prototype.wa=function(t){kt(this.g,new li(t))},hi.prototype.va=function(t){kt(this.g,new ui(t))},hi.prototype.ua=function(){kt(this.g,"b")},ai.prototype.createWebChannel=ai.prototype.g,ci.prototype.send=ci.prototype.u,ci.prototype.open=ci.prototype.m,ci.prototype.close=ci.prototype.close,oe.NO_ERROR=0,oe.TIMEOUT=8,oe.HTTP_ERROR=6,ae.COMPLETE="complete",ue.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",St.prototype.listen=St.prototype.N,Sn.prototype.listenOnce=Sn.prototype.O,Sn.prototype.getLastError=Sn.prototype.La,Sn.prototype.getLastErrorCode=Sn.prototype.Da,Sn.prototype.getStatus=Sn.prototype.ba,Sn.prototype.getResponseJson=Sn.prototype.Qa,Sn.prototype.getResponseText=Sn.prototype.ga,Sn.prototype.send=Sn.prototype.ea;var di=oe,fi=ae,pi=Qt,gi=10,mi=11,yi=bn,vi=ue,bi=Sn;class _i{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}_i.UNAUTHENTICATED=new _i(null),_i.GOOGLE_CREDENTIALS=new _i("google-credentials-uid"),_i.FIRST_PARTY=new _i("first-party-uid"),_i.MOCK_USER=new _i("mock-user");let wi="9.0.2";const xi=new s.Yd("@firebase/firestore");function Ti(){return xi.logLevel}function Ei(t){xi.setLogLevel(t)}function Ii(t,...e){if(xi.logLevel<=s.in.DEBUG){const n=e.map(Ai);xi.debug(`Firestore (${wi}): ${t}`,...n)}}function Si(t,...e){if(xi.logLevel<=s.in.ERROR){const n=e.map(Ai);xi.error(`Firestore (${wi}): ${t}`,...n)}}function ki(t,...e){if(xi.logLevel<=s.in.WARN){const n=e.map(Ai);xi.warn(`Firestore (${wi}): ${t}`,...n)}}function Ai(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Ci(t="Unexpected state"){const e=`FIRESTORE (${wi}) INTERNAL ASSERTION FAILED: `+t;throw Si(e),new Error(e)}function Di(t,e){t||Ci()}function Ni(t,e){t||Ci()}function Oi(t,e){return t}const Mi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Li extends Error{constructor(t,e){super(e),this.code=t,this.message=e,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pi{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Ri{constructor(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${t}`}}class Fi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(_i.UNAUTHENTICATED)))}shutdown(){}}class ji{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Vi{constructor(t){this.t=t,this.currentUser=_i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new Pi;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Pi,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{Ii("FirebaseCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Ii("FirebaseCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Pi)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Ii("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Di("string"==typeof e.accessToken),new Ri(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Di(null===t||"string"==typeof t),new _i(t)}}class Ui{constructor(t,e,n){this.h=t,this.l=e,this.m=n,this.type="FirstParty",this.user=_i.FIRST_PARTY}get authHeaders(){const t={"X-Goog-AuthUser":this.l},e=this.h.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.m&&(t["X-Goog-Iam-Authorization-Token"]=this.m),t}}class Bi{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new Ui(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable((()=>e(_i.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qi{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.g(t),this.p=t=>e.writeSequenceNumber(t))}g(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.p&&this.p(t),t}}function zi(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}qi.T=-1;class Hi{static I(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=zi(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length))}return n}}function $i(t,e){return t<e?-1:t>e?1:0}function Wi(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}function Ki(t){return t+"\0"}class Gi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Li(Mi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Li(Mi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Li(Mi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Li(Mi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Gi.fromMillis(Date.now())}static fromDate(t){return Gi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Gi(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?$i(this.nanoseconds,t.nanoseconds):$i(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Yi{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Yi(t)}static min(){return new Yi(new Gi(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Xi(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ji(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Zi{constructor(t,e,n){void 0===e?e=0:e>t.length&&Ci(),void 0===n?n=t.length-e:n>t.length-e&&Ci(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Zi.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Zi?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class tr extends Zi{construct(t,e,n){return new tr(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Li(Mi.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new tr(e)}static emptyPath(){return new tr([])}}const er=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nr extends Zi{construct(t,e,n){return new nr(t,e,n)}static isValidIdentifier(t){return er.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nr.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nr(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Li(Mi.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new Li(Mi.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Li(Mi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new Li(Mi.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new nr(e)}static emptyPath(){return new nr([])}}class ir{constructor(t){this.fields=t,t.sort(nr.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Wi(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}function rr(){return"undefined"!=typeof atob}class sr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new sr(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new sr(e)}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return $i(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const or=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(t){if(Di(!!t),"string"==typeof t){let e=0;const n=or.exec(t);if(Di(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:cr(t.seconds),nanos:cr(t.nanos)}}function cr(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function lr(t){return"string"==typeof t?sr.fromBase64String(t):sr.fromUint8Array(t)}function ur(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function hr(t){const e=t.mapValue.fields.__previous_value__;return ur(e)?hr(e):e}function dr(t){const e=ar(t.mapValue.fields.__local_write_time__.timestampValue);return new Gi(e.seconds,e.nanos)}function fr(t){return null==t}function pr(t){return 0===t&&1/t==-1/0}function gr(t){return"number"==typeof t&&Number.isInteger(t)&&!pr(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}class mr{constructor(t){this.path=t}static fromPath(t){return new mr(tr.fromString(t))}static fromName(t){return new mr(tr.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return null!==t&&0===tr.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return tr.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new mr(new tr(t.slice()))}}function yr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ur(t)?4:10:Ci()}function vr(t,e){const n=yr(t);if(n!==yr(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dr(t).isEqual(dr(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=ar(t.timestampValue),i=ar(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return lr(t.bytesValue).isEqual(lr(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return cr(t.geoPointValue.latitude)===cr(e.geoPointValue.latitude)&&cr(t.geoPointValue.longitude)===cr(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return cr(t.integerValue)===cr(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=cr(t.doubleValue),i=cr(e.doubleValue);return n===i?pr(n)===pr(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return Wi(t.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Xi(n)!==Xi(i))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===i[t]||!vr(n[t],i[t])))return!1;return!0}(t,e);default:return Ci()}}function br(t,e){return void 0!==(t.values||[]).find((t=>vr(t,e)))}function _r(t,e){const n=yr(t),i=yr(e);if(n!==i)return $i(n,i);switch(n){case 0:return 0;case 1:return $i(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=cr(t.integerValue||t.doubleValue),i=cr(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return wr(t.timestampValue,e.timestampValue);case 4:return wr(dr(t),dr(e));case 5:return $i(t.stringValue,e.stringValue);case 6:return function(t,e){const n=lr(t),i=lr(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let t=0;t<n.length&&t<i.length;t++){const e=$i(n[t],i[t]);if(0!==e)return e}return $i(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=$i(cr(t.latitude),cr(e.latitude));return 0!==n?n:$i(cr(t.longitude),cr(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let t=0;t<n.length&&t<i.length;++t){const e=_r(n[t],i[t]);if(e)return e}return $i(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let t=0;t<i.length&&t<s.length;++t){const e=$i(i[t],s[t]);if(0!==e)return e;const o=_r(n[i[t]],r[s[t]]);if(0!==o)return o}return $i(i.length,s.length)}(t.mapValue,e.mapValue);default:throw Ci()}}function wr(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return $i(t,e);const n=ar(t),i=ar(e),r=$i(n.seconds,i.seconds);return 0!==r?r:$i(n.nanos,i.nanos)}function xr(t){return Tr(t)}function Tr(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=ar(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?lr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,mr.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=Tr(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${Tr(t.fields[r])}`;return n+"}"}(t.mapValue):Ci();var e,n}function Er(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ir(t){return!!t&&"integerValue"in t}function Sr(t){return!!t&&"arrayValue"in t}function kr(t){return!!t&&"nullValue"in t}function Ar(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cr(t){return!!t&&"mapValue"in t}function Dr(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Qi(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Dr(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dr(t.arrayValue.values[n]);return e}return Object.assign({},t)}class Nr{constructor(t){this.value=t}static empty(){return new Nr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Cr(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Dr(e)}setAll(t){let e=nr.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=Dr(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());Cr(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return vr(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];Cr(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){Qi(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new Nr(Dr(this.value))}}function Or(t){const e=[];return Qi(t.fields,((t,n)=>{const i=new nr([t]);if(Cr(n)){const t=Or(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new ir(e)}class Mr{constructor(t,e,n,i,r){this.key=t,this.documentType=e,this.version=n,this.data=i,this.documentState=r}static newInvalidDocument(t){return new Mr(t,0,Yi.min(),Nr.empty(),0)}static newFoundDocument(t,e,n){return new Mr(t,1,e,n,0)}static newNoDocument(t,e){return new Mr(t,2,e,Nr.empty(),0)}static newUnknownDocument(t,e){return new Mr(t,3,e,Nr.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Nr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Mr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}clone(){return new Mr(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Lr{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.A=null}}function Pr(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Lr(t,e,n,i,r,s,o)}function Rr(t){const e=Oi(t);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>function(t){return t.field.canonicalString()+t.op.toString()+xr(t.value)}(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),fr(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Yr(e.startAt)),e.endAt&&(t+="|ub:",t+=Yr(e.endAt)),e.A=t}return e.A}function Fr(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Qr(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(n=t.filters[r],i=e.filters[r],n.op!==i.op||!n.field.isEqual(i.field)||!vr(n.value,i.value))return!1;var n,i;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Zr(t.startAt,e.startAt)&&Zr(t.endAt,e.endAt)}function jr(t){return mr.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Vr extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.R(t,e,n):new Ur(t,e,n):"array-contains"===e?new Hr(t,n):"in"===e?new $r(t,n):"not-in"===e?new Wr(t,n):"array-contains-any"===e?new Kr(t,n):new Vr(t,e,n)}static R(t,e,n){return"in"===e?new Br(t,n):new qr(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.P(_r(e,this.value)):null!==e&&yr(this.value)===yr(e)&&this.P(_r(e,this.value))}P(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ci()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ur extends Vr{constructor(t,e,n){super(t,e,n),this.key=mr.fromName(n.referenceValue)}matches(t){const e=mr.comparator(t.key,this.key);return this.P(e)}}class Br extends Vr{constructor(t,e){super(t,"in",e),this.keys=zr(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class qr extends Vr{constructor(t,e){super(t,"not-in",e),this.keys=zr(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function zr(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>mr.fromName(t.referenceValue)))}class Hr extends Vr{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Sr(e)&&br(e.arrayValue,this.value)}}class $r extends Vr{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&br(this.value.arrayValue,e)}}class Wr extends Vr{constructor(t,e){super(t,"not-in",e)}matches(t){if(br(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!br(this.value.arrayValue,e)}}class Kr extends Vr{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Sr(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>br(this.value.arrayValue,t)))}}class Gr{constructor(t,e){this.position=t,this.before=e}}function Yr(t){return`${t.before?"b":"a"}:${t.position.map((t=>xr(t))).join(",")}`}class Xr{constructor(t,e="asc"){this.field=t,this.dir=e}}function Qr(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Jr(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?mr.comparator(mr.fromName(o.referenceValue),n.key):_r(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return t.before?i<=0:i<0}function Zr(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vr(t.position[n],e.position[n]))return!1;return!0}class ts{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.V=null,this.S=null,this.startAt,this.endAt}}function es(t,e,n,i,r,s,o,a){return new ts(t,e,n,i,r,s,o,a)}function ns(t){return new ts(t)}function is(t){return!fr(t.limit)&&"F"===t.limitType}function rs(t){return!fr(t.limit)&&"L"===t.limitType}function ss(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function os(t){for(const e of t.filters)if(e.v())return e.field;return null}function as(t){return null!==t.collectionGroup}function cs(t){const e=Oi(t);if(null===e.V){e.V=[];const t=os(e),n=ss(e);if(null!==t&&null===n)t.isKeyField()||e.V.push(new Xr(t)),e.V.push(new Xr(nr.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.V.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new Xr(nr.keyField(),t))}}}return e.V}function ls(t){const e=Oi(t);if(!e.S)if("F"===e.limitType)e.S=Pr(e.path,e.collectionGroup,cs(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of cs(e)){const e="desc"===n.dir?"asc":"desc";t.push(new Xr(n.field,e))}const n=e.endAt?new Gr(e.endAt.position,!e.endAt.before):null,i=e.startAt?new Gr(e.startAt.position,!e.startAt.before):null;e.S=Pr(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}return e.S}function us(t,e,n){return new ts(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hs(t,e){return Fr(ls(t),ls(e))&&t.limitType===e.limitType}function ds(t){return`${Rr(ls(t))}|lt:${t.limitType}`}function fs(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>{return`${(e=t).field.canonicalString()} ${e.op} ${xr(e.value)}`;var e})).join(", ")}]`),fr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: "+Yr(t.startAt)),t.endAt&&(e+=", endAt: "+Yr(t.endAt)),`Target(${e})`}(ls(t))}; limitType=${t.limitType})`}function ps(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):mr.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Jr(t.startAt,cs(t),e)||t.endAt&&Jr(t.endAt,cs(t),e))}(t,e)}function gs(t){return(e,n)=>{let i=!1;for(const r of cs(t)){const t=ms(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function ms(t,e,n){const i=t.field.isKeyField()?mr.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?_r(i,r):Ci()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ci()}}function ys(t,e){if(t.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pr(e)?"-0":e}}function vs(t){return{integerValue:""+t}}function bs(t,e){return gr(e)?vs(e):ys(t,e)}class _s{constructor(){this._=void 0}}function ws(t,e,n){return t instanceof Es?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Is?Ss(t,e):t instanceof ks?As(t,e):function(t,e){const n=Ts(t,e),i=Ds(n)+Ds(t.C);return Ir(n)&&Ir(t.C)?vs(i):ys(t.N,i)}(t,e)}function xs(t,e,n){return t instanceof Is?Ss(t,e):t instanceof ks?As(t,e):n}function Ts(t,e){return t instanceof Cs?Ir(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class Es extends _s{}class Is extends _s{constructor(t){super(),this.elements=t}}function Ss(t,e){const n=Ns(e);for(const e of t.elements)n.some((t=>vr(t,e)))||n.push(e);return{arrayValue:{values:n}}}class ks extends _s{constructor(t){super(),this.elements=t}}function As(t,e){let n=Ns(e);for(const e of t.elements)n=n.filter((t=>!vr(t,e)));return{arrayValue:{values:n}}}class Cs extends _s{constructor(t,e){super(),this.N=t,this.C=e}}function Ds(t){return cr(t.integerValue||t.doubleValue)}function Ns(t){return Sr(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Os{constructor(t,e){this.field=t,this.transform=e}}class Ms{constructor(t,e){this.version=t,this.transformResults=e}}class Ls{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ls}static exists(t){return new Ls(void 0,t)}static updateTime(t){return new Ls(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ps(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Rs{}function Fs(t,e,n){t instanceof qs?function(t,e,n){const i=t.value.clone(),r=$s(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof zs?function(t,e,n){if(!Ps(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=$s(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(Hs(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function js(t,e,n){t instanceof qs?function(t,e,n){if(!Ps(t.precondition,e))return;const i=t.value.clone(),r=Ws(t.fieldTransforms,n,e);i.setAll(r),e.convertToFoundDocument(Bs(e),i).setHasLocalMutations()}(t,e,n):t instanceof zs?function(t,e,n){if(!Ps(t.precondition,e))return;const i=Ws(t.fieldTransforms,n,e),r=e.data;r.setAll(Hs(t)),r.setAll(i),e.convertToFoundDocument(Bs(e),r).setHasLocalMutations()}(t,e,n):function(t,e){Ps(t.precondition,e)&&e.convertToNoDocument(Yi.min())}(t,e)}function Vs(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=Ts(i.transform,t||null);null!=r&&(null==n&&(n=Nr.empty()),n.set(i.field,r))}return n||null}function Us(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Wi(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Is&&e instanceof Is||t instanceof ks&&e instanceof ks?Wi(t.elements,e.elements,vr):t instanceof Cs&&e instanceof Cs?vr(t.C,e.C):t instanceof Es&&e instanceof Es}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Bs(t){return t.isFoundDocument()?t.version:Yi.min()}class qs extends Rs{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}}class zs extends Rs{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}}function Hs(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function $s(t,e,n){const i=new Map;Di(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,xs(o,a,n[r]))}return i}function Ws(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,ws(t,s,e))}return i}class Ks extends Rs{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class Gs extends Rs{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class Ys{constructor(t){this.count=t}}var Xs,Qs;function Js(t){switch(t){case Mi.OK:return Ci();case Mi.CANCELLED:case Mi.UNKNOWN:case Mi.DEADLINE_EXCEEDED:case Mi.RESOURCE_EXHAUSTED:case Mi.INTERNAL:case Mi.UNAVAILABLE:case Mi.UNAUTHENTICATED:return!1;case Mi.INVALID_ARGUMENT:case Mi.NOT_FOUND:case Mi.ALREADY_EXISTS:case Mi.PERMISSION_DENIED:case Mi.FAILED_PRECONDITION:case Mi.ABORTED:case Mi.OUT_OF_RANGE:case Mi.UNIMPLEMENTED:case Mi.DATA_LOSS:return!0;default:return Ci()}}function Zs(t){if(void 0===t)return Si("GRPC error has no .code"),Mi.UNKNOWN;switch(t){case Xs.OK:return Mi.OK;case Xs.CANCELLED:return Mi.CANCELLED;case Xs.UNKNOWN:return Mi.UNKNOWN;case Xs.DEADLINE_EXCEEDED:return Mi.DEADLINE_EXCEEDED;case Xs.RESOURCE_EXHAUSTED:return Mi.RESOURCE_EXHAUSTED;case Xs.INTERNAL:return Mi.INTERNAL;case Xs.UNAVAILABLE:return Mi.UNAVAILABLE;case Xs.UNAUTHENTICATED:return Mi.UNAUTHENTICATED;case Xs.INVALID_ARGUMENT:return Mi.INVALID_ARGUMENT;case Xs.NOT_FOUND:return Mi.NOT_FOUND;case Xs.ALREADY_EXISTS:return Mi.ALREADY_EXISTS;case Xs.PERMISSION_DENIED:return Mi.PERMISSION_DENIED;case Xs.FAILED_PRECONDITION:return Mi.FAILED_PRECONDITION;case Xs.ABORTED:return Mi.ABORTED;case Xs.OUT_OF_RANGE:return Mi.OUT_OF_RANGE;case Xs.UNIMPLEMENTED:return Mi.UNIMPLEMENTED;case Xs.DATA_LOSS:return Mi.DATA_LOSS;default:return Ci()}}(Qs=Xs||(Xs={}))[Qs.OK=0]="OK",Qs[Qs.CANCELLED=1]="CANCELLED",Qs[Qs.UNKNOWN=2]="UNKNOWN",Qs[Qs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qs[Qs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qs[Qs.NOT_FOUND=5]="NOT_FOUND",Qs[Qs.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qs[Qs.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qs[Qs.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qs[Qs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qs[Qs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qs[Qs.ABORTED=10]="ABORTED",Qs[Qs.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qs[Qs.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qs[Qs.INTERNAL=13]="INTERNAL",Qs[Qs.UNAVAILABLE=14]="UNAVAILABLE",Qs[Qs.DATA_LOSS=15]="DATA_LOSS";class to{constructor(t,e){this.comparator=t,this.root=e||no.EMPTY}insert(t,e){return new to(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,no.BLACK,null,null))}remove(t){return new to(this.comparator,this.root.remove(t,this.comparator).copy(null,null,no.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new eo(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new eo(this.root,t,this.comparator,!1)}getReverseIterator(){return new eo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new eo(this.root,t,this.comparator,!0)}}class eo{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class no{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:no.RED,this.left=null!=i?i:no.EMPTY,this.right=null!=r?r:no.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new no(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return no.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return no.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,no.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,no.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ci();if(this.right.isRed())throw Ci();const t=this.left.check();if(t!==this.right.check())throw Ci();return t+(this.isRed()?0:1)}}no.EMPTY=null,no.RED=!0,no.BLACK=!1,no.EMPTY=new class{constructor(){this.size=0}get key(){throw Ci()}get value(){throw Ci()}get color(){throw Ci()}get left(){throw Ci()}get right(){throw Ci()}copy(t,e,n,i,r){return this}insert(t,e,n){return new no(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class io{constructor(t){this.comparator=t,this.data=new to(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ro(this.data.getIterator())}getIteratorFrom(t){return new ro(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof io))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new io(this.comparator);return e.data=t,e}}class ro{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const so=new to(mr.comparator);function oo(){return so}const ao=new to(mr.comparator);function co(){return ao}const lo=new to(mr.comparator);function uo(){return lo}const ho=new io(mr.comparator);function fo(...t){let e=ho;for(const n of t)e=e.add(n);return e}const po=new io($i);function go(){return po}class mo{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e){const n=new Map;return n.set(t,yo.createSynthesizedTargetChangeForCurrentChange(t,e)),new mo(Yi.min(),n,go(),oo(),fo())}}class yo{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e){return new yo(sr.EMPTY_BYTE_STRING,e,fo(),fo(),fo())}}class vo{constructor(t,e,n,i){this.k=t,this.removedTargetIds=e,this.key=n,this.$=i}}class bo{constructor(t,e){this.targetId=t,this.O=e}}class _o{constructor(t,e,n=sr.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class wo{constructor(){this.F=0,this.M=Eo(),this.L=sr.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(t){t.approximateByteSize()>0&&(this.U=!0,this.L=t)}W(){let t=fo(),e=fo(),n=fo();return this.M.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:Ci()}})),new yo(this.L,this.B,t,e,n)}G(){this.U=!1,this.M=Eo()}H(t,e){this.U=!0,this.M=this.M.insert(t,e)}J(t){this.U=!0,this.M=this.M.remove(t)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class xo{constructor(t){this.tt=t,this.et=new Map,this.nt=oo(),this.st=To(),this.it=new io($i)}rt(t){for(const e of t.k)t.$&&t.$.isFoundDocument()?this.ot(e,t.$):this.at(e,t.key,t.$);for(const e of t.removedTargetIds)this.at(e,t.key,t.$)}ct(t){this.forEachTarget(t,(e=>{const n=this.ut(e);switch(t.state){case 0:this.ht(e)&&n.j(t.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(t.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(e);break;case 3:this.ht(e)&&(n.Z(),n.j(t.resumeToken));break;case 4:this.ht(e)&&(this.lt(e),n.j(t.resumeToken));break;default:Ci()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.et.forEach(((t,n)=>{this.ht(n)&&e(n)}))}ft(t){const e=t.targetId,n=t.O.count,i=this.dt(e);if(i){const t=i.target;if(jr(t))if(0===n){const n=new mr(t.path);this.at(e,n,Mr.newNoDocument(n,Yi.min()))}else Di(1===n);else this.wt(e)!==n&&(this.lt(e),this.it=this.it.add(e))}}_t(t){const e=new Map;this.et.forEach(((n,i)=>{const r=this.dt(i);if(r){if(n.current&&jr(r.target)){const e=new mr(r.target.path);null!==this.nt.get(e)||this.gt(i,e)||this.at(i,e,Mr.newNoDocument(e,t))}n.K&&(e.set(i,n.W()),n.G())}}));let n=fo();this.st.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.dt(t);return!e||2===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))}));const i=new mo(t,e,this.it,this.nt,n);return this.nt=oo(),this.st=To(),this.it=new io($i),i}ot(t,e){if(!this.ht(t))return;const n=this.gt(t,e.key)?2:0;this.ut(t).H(e.key,n),this.nt=this.nt.insert(e.key,e),this.st=this.st.insert(e.key,this.yt(e.key).add(t))}at(t,e,n){if(!this.ht(t))return;const i=this.ut(t);this.gt(t,e)?i.H(e,1):i.J(e),this.st=this.st.insert(e,this.yt(e).delete(t)),n&&(this.nt=this.nt.insert(e,n))}removeTarget(t){this.et.delete(t)}wt(t){const e=this.ut(t).W();return this.tt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Y(t){this.ut(t).Y()}ut(t){let e=this.et.get(t);return e||(e=new wo,this.et.set(t,e)),e}yt(t){let e=this.st.get(t);return e||(e=new io($i),this.st=this.st.insert(t,e)),e}ht(t){const e=null!==this.dt(t);return e||Ii("WatchChangeAggregator","Detected inactive target",t),e}dt(t){const e=this.et.get(t);return e&&e.q?null:this.tt.Et(t)}lt(t){this.et.set(t,new wo),this.tt.getRemoteKeysForTarget(t).forEach((e=>{this.at(t,e,null)}))}gt(t,e){return this.tt.getRemoteKeysForTarget(t).has(e)}}function To(){return new to(mr.comparator)}function Eo(){return new to(mr.comparator)}const Io={asc:"ASCENDING",desc:"DESCENDING"},So={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ko{constructor(t,e){this.databaseId=t,this.D=e}}function Ao(t,e){return t.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Co(t,e){return t.D?e.toBase64():e.toUint8Array()}function Do(t,e){return Ao(t,e.toTimestamp())}function No(t){return Di(!!t),Yi.fromTimestamp(function(t){const e=ar(t);return new Gi(e.seconds,e.nanos)}(t))}function Oo(t,e){return function(t){return new tr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Mo(t){const e=tr.fromString(t);return Di(ia(e)),e}function Lo(t,e){return Oo(t.databaseId,e.path)}function Po(t,e){const n=Mo(e);if(n.get(1)!==t.databaseId.projectId)throw new Li(Mi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Li(Mi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new mr(Vo(n))}function Ro(t,e){return Oo(t.databaseId,e)}function Fo(t){const e=Mo(t);return 4===e.length?tr.emptyPath():Vo(e)}function jo(t){return new tr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Vo(t){return Di(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Uo(t,e,n){return{name:Lo(t,e),fields:n.value.mapValue.fields}}function Bo(t,e,n){const i=Po(t,e.name),r=No(e.updateTime),s=new Nr({mapValue:{fields:e.fields}}),o=Mr.newFoundDocument(i,r,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function qo(t,e){let n;if(e instanceof qs)n={update:Uo(t,e.key,e.value)};else if(e instanceof Ks)n={delete:Lo(t,e.key)};else if(e instanceof zs)n={update:Uo(t,e.key,e.data),updateMask:na(e.fieldMask)};else{if(!(e instanceof Gs))return Ci();n={verify:Lo(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof Es)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Is)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ks)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Cs)return{fieldPath:e.field.canonicalString(),increment:n.C};throw Ci()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Do(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ci()}(t,e.precondition)),n}function zo(t,e){const n=e.currentDocument?function(t){return void 0!==t.updateTime?Ls.updateTime(No(t.updateTime)):void 0!==t.exists?Ls.exists(t.exists):Ls.none()}(e.currentDocument):Ls.none(),i=e.updateTransforms?e.updateTransforms.map((e=>function(t,e){let n=null;if("setToServerValue"in e)Di("REQUEST_TIME"===e.setToServerValue),n=new Es;else if("appendMissingElements"in e){const t=e.appendMissingElements.values||[];n=new Is(t)}else if("removeAllFromArray"in e){const t=e.removeAllFromArray.values||[];n=new ks(t)}else"increment"in e?n=new Cs(t,e.increment):Ci();const i=nr.fromServerFormat(e.fieldPath);return new Os(i,n)}(t,e))):[];if(e.update){e.update.name;const r=Po(t,e.update.name),s=new Nr({mapValue:{fields:e.update.fields}});if(e.updateMask){const t=function(t){const e=t.fieldPaths||[];return new ir(e.map((t=>nr.fromServerFormat(t))))}(e.updateMask);return new zs(r,s,t,n,i)}return new qs(r,s,n,i)}if(e.delete){const i=Po(t,e.delete);return new Ks(i,n)}if(e.verify){const i=Po(t,e.verify);return new Gs(i,n)}return Ci()}function Ho(t,e){return{documents:[Ro(t,e.path)]}}function $o(t,e){const n={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(n.parent=Ro(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ro(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(t){if(0===t.length)return;const e=t.map((t=>function(t){if("=="===t.op){if(Ar(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NAN"}};if(kr(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ar(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NOT_NAN"}};if(kr(t.value))return{unaryFilter:{field:Jo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jo(t.field),op:Qo(t.op),value:t.value}}}(t)));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(e.filters);r&&(n.structuredQuery.where=r);const s=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Jo(t.field),direction:Xo(t.dir)}}(t)))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(t,e){return t.D||fr(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=Go(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Go(e.endAt)),n}function Wo(t){let e=Fo(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Di(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=Ko(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new Xr(Zo(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,fr(e)?null:e}(n.limit));let c=null;n.startAt&&(c=Yo(n.startAt));let l=null;return n.endAt&&(l=Yo(n.endAt)),es(e,r,o,s,a,"F",c,l)}function Ko(t){return t?void 0!==t.unaryFilter?[ea(t)]:void 0!==t.fieldFilter?[ta(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((t=>Ko(t))).reduce(((t,e)=>t.concat(e))):Ci():[]}function Go(t){return{before:t.before,values:t.position}}function Yo(t){const e=!!t.before,n=t.values||[];return new Gr(n,e)}function Xo(t){return Io[t]}function Qo(t){return So[t]}function Jo(t){return{fieldPath:t.canonicalString()}}function Zo(t){return nr.fromServerFormat(t.fieldPath)}function ta(t){return Vr.create(Zo(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ci()}}(t.fieldFilter.op),t.fieldFilter.value)}function ea(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Zo(t.unaryFilter.field);return Vr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Zo(t.unaryFilter.field);return Vr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Zo(t.unaryFilter.field);return Vr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Zo(t.unaryFilter.field);return Vr.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Ci()}}function na(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ia(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function ra(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=oa(e)),e=sa(t.get(n),e);return oa(e)}function sa(t,e){let n=e;const i=t.length;for(let e=0;e<i;e++){const i=t.charAt(e);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function oa(t){return t+""}function aa(t){const e=t.length;if(Di(e>=2),2===e)return Di(""===t.charAt(0)&&""===t.charAt(1)),tr.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const e=t.indexOf("",s);switch((e<0||e>n)&&Ci(),t.charAt(e+1)){case"":const n=t.substring(s,e);let o;0===r.length?o=n:(r+=n,o=r,r=""),i.push(o);break;case"":r+=t.substring(s,e),r+="\0";break;case"":r+=t.substring(s,e+1);break;default:Ci()}s=e+2}return new tr(i)}class ca{constructor(t,e){this.seconds=t,this.nanoseconds=e}}class la{constructor(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}}la.store="owner",la.key="owner";class ua{constructor(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}}ua.store="mutationQueues",ua.keyPath="userId";class ha{constructor(t,e,n,i,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=i,this.mutations=r}}ha.store="mutations",ha.keyPath="batchId",ha.userMutationsIndex="userMutationsIndex",ha.userMutationsKeyPath=["userId","batchId"];class da{constructor(){}static prefixForUser(t){return[t]}static prefixForPath(t,e){return[t,ra(e)]}static key(t,e,n){return[t,ra(e),n]}}da.store="documentMutations",da.PLACEHOLDER=new da;class fa{constructor(t,e){this.path=t,this.readTime=e}}class pa{constructor(t,e){this.path=t,this.version=e}}class ga{constructor(t,e,n,i,r,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=i,this.readTime=r,this.parentPath=s}}ga.store="remoteDocuments",ga.readTimeIndex="readTimeIndex",ga.readTimeIndexPath="readTime",ga.collectionReadTimeIndex="collectionReadTimeIndex",ga.collectionReadTimeIndexPath=["parentPath","readTime"];class ma{constructor(t){this.byteSize=t}}ma.store="remoteDocumentGlobal",ma.key="remoteDocumentGlobalKey";class ya{constructor(t,e,n,i,r,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=i,this.lastListenSequenceNumber=r,this.lastLimboFreeSnapshotVersion=s,this.query=o}}ya.store="targets",ya.keyPath="targetId",ya.queryTargetsIndexName="queryTargetsIndex",ya.queryTargetsKeyPath=["canonicalId","targetId"];class va{constructor(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n}}va.store="targetDocuments",va.keyPath=["targetId","path"],va.documentTargetsIndex="documentTargetsIndex",va.documentTargetsKeyPath=["path","targetId"];class ba{constructor(t,e,n,i){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=i}}ba.key="targetGlobalKey",ba.store="targetGlobal";class _a{constructor(t,e){this.collectionId=t,this.parent=e}}_a.store="collectionParents",_a.keyPath=["collectionId","parent"];class wa{constructor(t,e,n,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=i}}wa.store="clientMetadata",wa.keyPath="clientId";class xa{constructor(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}}xa.store="bundles",xa.keyPath="bundleId";class Ta{constructor(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}}Ta.store="namedQueries",Ta.keyPath="name";const Ea=[ua.store,ha.store,da.store,ga.store,ya.store,la.store,ba.store,va.store,wa.store,ma.store,_a.store,xa.store,Ta.store],Ia="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}class ka{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ci(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ka(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof ka?e:ka.resolve(e)}catch(t){return ka.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):ka.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):ka.reject(e)}static resolve(t){return new ka(((e,n)=>{e(t)}))}static reject(t){return new ka(((e,n)=>{n(t)}))}static waitFor(t){return new ka(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=ka.resolve(!1);for(const n of t)e=e.next((t=>t?ka.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}}class Aa{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.Tt=new Pi,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{e.error?this.Tt.reject(new Na(t,e.error)):this.Tt.resolve()},this.transaction.onerror=e=>{const n=Ra(e.target.error);this.Tt.reject(new Na(t,n))}}static open(t,e,n,i){try{return new Aa(e,t.transaction(i,n))}catch(t){throw new Na(e,t)}}get It(){return this.Tt.promise}abort(t){t&&this.Tt.reject(t),this.aborted||(Ii("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(t){const e=this.transaction.objectStore(t);return new Ma(e)}}class Ca{constructor(t,e,n){this.name=t,this.version=e,this.At=n,12.2===Ca.Rt((0,o.z$)())&&Si("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Ii("SimpleDb","Removing database:",t),La(window.indexedDB.deleteDatabase(t)).toPromise()}static bt(){if("undefined"==typeof indexedDB)return!1;if(Ca.Pt())return!0;const t=(0,o.z$)(),e=Ca.Rt(t),n=0<e&&e<10,i=Ca.vt(t),r=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||r)}static Pt(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Vt)}static St(t,e){return t.store(e)}static Rt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static vt(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async Dt(t){return this.db||(Ii("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=t=>{const n=t.target.result;e(n)},i.onblocked=()=>{n(new Na(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const i=e.target.error;"VersionError"===i.name?n(new Li(Mi.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new Li(Mi.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Na(t,i))},i.onupgradeneeded=t=>{Ii("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.At.Ct(e,i.transaction,t.oldVersion,this.version).next((()=>{Ii("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.Nt&&(this.db.onversionchange=t=>this.Nt(t)),this.db}xt(t){this.Nt=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,i){const r="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.Dt(t);const e=Aa.open(this.db,t,r?"readonly":"readwrite",n),s=i(e).catch((t=>(e.abort(t),ka.reject(t)))).toPromise();return s.catch((()=>{})),await e.It,s}catch(t){const e="FirebaseError"!==t.name&&s<3;if(Ii("SimpleDb","Transaction failed with error:",t.message,"Retrying:",e),this.close(),!e)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Da{constructor(t){this.kt=t,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(t){this.kt=t}done(){this.$t=!0}Mt(t){this.Ot=t}delete(){return La(this.kt.delete())}}class Na extends Li{constructor(t,e){super(Mi.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Oa(t){return"IndexedDbTransactionError"===t.name}class Ma{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(Ii("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ii("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),La(n)}add(t){return Ii("SimpleDb","ADD",this.store.name,t,t),La(this.store.add(t))}get(t){return La(this.store.get(t)).next((e=>(void 0===e&&(e=null),Ii("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return Ii("SimpleDb","DELETE",this.store.name,t),La(this.store.delete(t))}count(){return Ii("SimpleDb","COUNT",this.store.name),La(this.store.count())}Lt(t,e){const n=this.cursor(this.options(t,e)),i=[];return this.Bt(n,((t,e)=>{i.push(e)})).next((()=>i))}Ut(t,e){Ii("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.qt=!1;const i=this.cursor(n);return this.Bt(i,((t,e,n)=>n.delete()))}Kt(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.Bt(i,e)}jt(t){const e=this.cursor({});return new ka(((n,i)=>{e.onerror=t=>{const e=Ra(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next((t=>{t?i.continue():n()})):n()}}))}Bt(t,e){const n=[];return new ka(((i,r)=>{t.onerror=t=>{r(t.target.error)},t.onsuccess=t=>{const r=t.target.result;if(!r)return void i();const s=new Da(r),o=e(r.primaryKey,r.value,s);if(o instanceof ka){const t=o.catch((t=>(s.done(),ka.reject(t))));n.push(t)}s.isDone?i():null===s.Ft?r.continue():r.continue(s.Ft)}})).next((()=>ka.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.qt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function La(t){return new ka(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=Ra(t.target.error);n(e)}}))}let Pa=!1;function Ra(t){const e=Ca.Rt((0,o.z$)());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new Li("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Pa||(Pa=!0,setTimeout((()=>{throw t}),0)),t}}return t}class Fa extends Sa{constructor(t,e){super(),this.Qt=t,this.currentSequenceNumber=e}}function ja(t,e){const n=Oi(t);return Ca.St(n.Qt,e)}class Va{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const i=this.mutations[e];i.key.isEqual(t.key)&&Fs(i,t,n[e])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&js(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&js(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach((e=>{const n=t.get(e.key),i=n;this.applyToLocalView(i),n.isValidDocument()||i.convertToNoDocument(Yi.min())}))}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),fo())}isEqual(t){return this.batchId===t.batchId&&Wi(this.mutations,t.mutations,((t,e)=>Us(t,e)))&&Wi(this.baseMutations,t.baseMutations,((t,e)=>Us(t,e)))}}class Ua{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){Di(t.mutations.length===n.length);let i=uo();const r=t.mutations;for(let t=0;t<r.length;t++)i=i.insert(r[t].key,n[t].version);return new Ua(t,e,n,i)}}class Ba{constructor(t,e,n,i,r=Yi.min(),s=Yi.min(),o=sr.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(t){return new Ba(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class qa{constructor(t){this.Wt=t}}function za(t,e){if(e.document)return Bo(t.Wt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=mr.fromSegments(e.noDocument.path),n=Ga(e.noDocument.readTime),i=Mr.newNoDocument(t,n);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){const t=mr.fromSegments(e.unknownDocument.path),n=Ga(e.unknownDocument.version);return Mr.newUnknownDocument(t,n)}return Ci()}function Ha(t,e,n){const i=$a(n),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const n=function(t,e){return{name:Lo(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Ao(t,e.version.toTimestamp())}}(t.Wt,e),s=e.hasCommittedMutations;return new ga(null,null,n,s,i,r)}if(e.isNoDocument()){const t=e.key.path.toArray(),n=Ka(e.version),s=e.hasCommittedMutations;return new ga(null,new fa(t,n),null,s,i,r)}if(e.isUnknownDocument()){const t=e.key.path.toArray(),n=Ka(e.version);return new ga(new pa(t,n),null,null,!0,i,r)}return Ci()}function $a(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Wa(t){const e=new Gi(t[0],t[1]);return Yi.fromTimestamp(e)}function Ka(t){const e=t.toTimestamp();return new ca(e.seconds,e.nanoseconds)}function Ga(t){const e=new Gi(t.seconds,t.nanoseconds);return Yi.fromTimestamp(e)}function Ya(t,e){const n=(e.baseMutations||[]).map((e=>zo(t.Wt,e)));for(let t=0;t<e.mutations.length-1;++t){const n=e.mutations[t];if(t+1<e.mutations.length&&void 0!==e.mutations[t+1].transform){const i=e.mutations[t+1];n.updateTransforms=i.transform.fieldTransforms,e.mutations.splice(t+1,1),++t}}const i=e.mutations.map((e=>zo(t.Wt,e))),r=Gi.fromMillis(e.localWriteTimeMs);return new Va(e.batchId,r,n,i)}function Xa(t){const e=Ga(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Ga(t.lastLimboFreeSnapshotVersion):Yi.min();let i;var r;return void 0!==t.query.documents?(Di(1===(r=t.query).documents.length),i=ls(ns(Fo(r.documents[0])))):i=function(t){return ls(Wo(t))}(t.query),new Ba(i,t.targetId,0,t.lastListenSequenceNumber,e,n,sr.fromBase64String(t.resumeToken))}function Qa(t,e){const n=Ka(e.snapshotVersion),i=Ka(e.lastLimboFreeSnapshotVersion);let r;r=jr(e.target)?Ho(t.Wt,e.target):$o(t.Wt,e.target);const s=e.resumeToken.toBase64();return new ya(e.targetId,Rr(e.target),n,s,e.sequenceNumber,i,r)}function Ja(t){const e=Wo({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?us(e,e.limit,"L"):e}class Za{getBundleMetadata(t,e){return tc(t).get(e).next((t=>{if(t)return{id:(e=t).bundleId,createTime:Ga(e.createTime),version:e.version};var e}))}saveBundleMetadata(t,e){return tc(t).put({bundleId:(n=e).id,createTime:Ka(No(n.createTime)),version:n.version});var n}getNamedQuery(t,e){return ec(t).get(e).next((t=>{if(t)return{name:(e=t).name,query:Ja(e.bundledQuery),readTime:Ga(e.readTime)};var e}))}saveNamedQuery(t,e){return ec(t).put(function(t){return{name:t.name,readTime:Ka(No(t.readTime)),bundledQuery:t.bundledQuery}}(e))}}function tc(t){return ja(t,xa.store)}function ec(t){return ja(t,Ta.store)}class nc{constructor(){this.Gt=new ic}addToCollectionParentIndex(t,e){return this.Gt.add(e),ka.resolve()}getCollectionParents(t,e){return ka.resolve(this.Gt.getEntries(e))}}class ic{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new io(tr.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new io(tr.comparator)).toArray()}}class rc{constructor(){this.zt=new ic}addToCollectionParentIndex(t,e){if(!this.zt.has(e)){const n=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((()=>{this.zt.add(e)}));const r={collectionId:n,parent:ra(i)};return sc(t).put(r)}return ka.resolve()}getCollectionParents(t,e){const n=[],i=IDBKeyRange.bound([e,""],[Ki(e),""],!1,!0);return sc(t).Lt(i).next((t=>{for(const i of t){if(i.collectionId!==e)break;n.push(aa(i.parent))}return n}))}}function sc(t){return ja(t,_a.store)}const oc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ac{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new ac(t,ac.DEFAULT_COLLECTION_PERCENTILE,ac.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function cc(t,e,n){const i=t.store(ha.store),r=t.store(da.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=i.Kt({range:o},((t,e,n)=>(a++,n.delete())));s.push(c.next((()=>{Di(1===a)})));const l=[];for(const t of n.mutations){const i=da.key(e,t.key.path,n.batchId);s.push(r.delete(i)),l.push(t.key)}return ka.waitFor(s).next((()=>l))}function lc(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ci();e=t.noDocument}return JSON.stringify(e).length}ac.DEFAULT_COLLECTION_PERCENTILE=10,ac.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ac.DEFAULT=new ac(41943040,ac.DEFAULT_COLLECTION_PERCENTILE,ac.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ac.DISABLED=new ac(-1,0,0);class uc{constructor(t,e,n,i){this.userId=t,this.N=e,this.Ht=n,this.referenceDelegate=i,this.Jt={}}static Yt(t,e,n,i){Di(""!==t.uid);const r=t.isAuthenticated()?t.uid:"";return new uc(r,e,n,i)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dc(t).Kt({index:ha.userMutationsIndex,range:n},((t,n,i)=>{e=!1,i.done()})).next((()=>e))}addMutationBatch(t,e,n,i){const r=fc(t),s=dc(t);return s.add({}).next((o=>{Di("number"==typeof o);const a=new Va(o,e,n,i),c=function(t,e,n){const i=n.baseMutations.map((e=>qo(t.Wt,e))),r=n.mutations.map((e=>qo(t.Wt,e)));return new ha(e,n.batchId,n.localWriteTime.toMillis(),i,r)}(this.N,this.userId,a),l=[];let u=new io(((t,e)=>$i(t.canonicalString(),e.canonicalString())));for(const t of i){const e=da.key(this.userId,t.key.path,o);u=u.add(t.key.path.popLast()),l.push(s.put(c)),l.push(r.put(e,da.PLACEHOLDER))}return u.forEach((e=>{l.push(this.Ht.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((()=>{this.Jt[o]=a.keys()})),ka.waitFor(l).next((()=>a))}))}lookupMutationBatch(t,e){return dc(t).get(e).next((t=>t?(Di(t.userId===this.userId),Ya(this.N,t)):null))}Xt(t,e){return this.Jt[e]?ka.resolve(this.Jt[e]):this.lookupMutationBatch(t,e).next((t=>{if(t){const n=t.keys();return this.Jt[e]=n,n}return null}))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=IDBKeyRange.lowerBound([this.userId,n]);let r=null;return dc(t).Kt({index:ha.userMutationsIndex,range:i},((t,e,i)=>{e.userId===this.userId&&(Di(e.batchId>=n),r=Ya(this.N,e)),i.done()})).next((()=>r))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return dc(t).Kt({index:ha.userMutationsIndex,range:e,reverse:!0},((t,e,i)=>{n=e.batchId,i.done()})).next((()=>n))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dc(t).Lt(ha.userMutationsIndex,e).next((t=>t.map((t=>Ya(this.N,t)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=da.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(n),r=[];return fc(t).Kt({range:i},((n,i,s)=>{const[o,a,c]=n,l=aa(a);if(o===this.userId&&e.path.isEqual(l))return dc(t).get(c).next((t=>{if(!t)throw Ci();Di(t.userId===this.userId),r.push(Ya(this.N,t))}));s.done()})).next((()=>r))}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new io($i);const i=[];return e.forEach((e=>{const r=da.prefixForPath(this.userId,e.path),s=IDBKeyRange.lowerBound(r),o=fc(t).Kt({range:s},((t,i,r)=>{const[s,o,a]=t,c=aa(o);s===this.userId&&e.path.isEqual(c)?n=n.add(a):r.done()}));i.push(o)})),ka.waitFor(i).next((()=>this.Zt(t,n)))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1,r=da.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(r);let o=new io($i);return fc(t).Kt({range:s},((t,e,r)=>{const[s,a,c]=t,l=aa(a);s===this.userId&&n.isPrefixOf(l)?l.length===i&&(o=o.add(c)):r.done()})).next((()=>this.Zt(t,o)))}Zt(t,e){const n=[],i=[];return e.forEach((e=>{i.push(dc(t).get(e).next((t=>{if(null===t)throw Ci();Di(t.userId===this.userId),n.push(Ya(this.N,t))})))})),ka.waitFor(i).next((()=>n))}removeMutationBatch(t,e){return cc(t.Qt,this.userId,e).next((n=>(t.addOnCommittedListener((()=>{this.te(e.batchId)})),ka.forEach(n,(e=>this.referenceDelegate.markPotentiallyOrphaned(t,e))))))}te(t){delete this.Jt[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return ka.resolve();const n=IDBKeyRange.lowerBound(da.prefixForUser(this.userId)),i=[];return fc(t).Kt({range:n},((t,e,n)=>{if(t[0]===this.userId){const e=aa(t[1]);i.push(e)}else n.done()})).next((()=>{Di(0===i.length)}))}))}containsKey(t,e){return hc(t,this.userId,e)}ee(t){return pc(t).get(this.userId).next((t=>t||new ua(this.userId,-1,"")))}}function hc(t,e,n){const i=da.prefixForPath(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return fc(t).Kt({range:s,qt:!0},((t,n,i)=>{const[s,a,c]=t;s===e&&a===r&&(o=!0),i.done()})).next((()=>o))}function dc(t){return ja(t,ha.store)}function fc(t){return ja(t,da.store)}function pc(t){return ja(t,ua.store)}class gc{constructor(t){this.ne=t}next(){return this.ne+=2,this.ne}static se(){return new gc(0)}static ie(){return new gc(-1)}}class mc{constructor(t,e){this.referenceDelegate=t,this.N=e}allocateTargetId(t){return this.re(t).next((e=>{const n=new gc(e.highestTargetId);return e.highestTargetId=n.next(),this.oe(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.re(t).next((t=>Yi.fromTimestamp(new Gi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.re(t).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(t,e,n){return this.re(t).next((i=>(i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.oe(t,i))))}addTargetData(t,e){return this.ae(t,e).next((()=>this.re(t).next((n=>(n.targetCount+=1,this.ce(e,n),this.oe(t,n))))))}updateTargetData(t,e){return this.ae(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>yc(t).delete(e.targetId))).next((()=>this.re(t))).next((e=>(Di(e.targetCount>0),e.targetCount-=1,this.oe(t,e))))}removeTargets(t,e,n){let i=0;const r=[];return yc(t).Kt(((s,o)=>{const a=Xa(o);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,r.push(this.removeTargetData(t,a)))})).next((()=>ka.waitFor(r))).next((()=>i))}forEachTarget(t,e){return yc(t).Kt(((t,n)=>{const i=Xa(n);e(i)}))}re(t){return vc(t).get(ba.key).next((t=>(Di(null!==t),t)))}oe(t,e){return vc(t).put(ba.key,e)}ae(t,e){return yc(t).put(Qa(this.N,e))}ce(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.re(t).next((t=>t.targetCount))}getTargetData(t,e){const n=Rr(e),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let r=null;return yc(t).Kt({range:i,index:ya.queryTargetsIndexName},((t,n,i)=>{const s=Xa(n);Fr(e,s.target)&&(r=s,i.done())})).next((()=>r))}addMatchingKeys(t,e,n){const i=[],r=bc(t);return e.forEach((e=>{const s=ra(e.path);i.push(r.put(new va(n,s))),i.push(this.referenceDelegate.addReference(t,n,e))})),ka.waitFor(i)}removeMatchingKeys(t,e,n){const i=bc(t);return ka.forEach(e,(e=>{const r=ra(e.path);return ka.waitFor([i.delete([n,r]),this.referenceDelegate.removeReference(t,n,e)])}))}removeMatchingKeysForTargetId(t,e){const n=bc(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),i=bc(t);let r=fo();return i.Kt({range:n,qt:!0},((t,e,n)=>{const i=aa(t[1]),s=new mr(i);r=r.add(s)})).next((()=>r))}containsKey(t,e){const n=ra(e.path),i=IDBKeyRange.bound([n],[Ki(n)],!1,!0);let r=0;return bc(t).Kt({index:va.documentTargetsIndex,qt:!0,range:i},(([t,e],n,i)=>{0!==t&&(r++,i.done())})).next((()=>r>0))}Et(t,e){return yc(t).get(e).next((t=>t?Xa(t):null))}}function yc(t){return ja(t,ya.store)}function vc(t){return ja(t,ba.store)}function bc(t){return ja(t,va.store)}async function _c(t){if(t.code!==Mi.FAILED_PRECONDITION||t.message!==Ia)throw t;Ii("LocalStore","Unexpectedly lost primary lease")}function wc([t,e],[n,i]){const r=$i(t,n);return 0===r?$i(e,i):r}class xc{constructor(t){this.ue=t,this.buffer=new io(wc),this.he=0}le(){return++this.he}fe(t){const e=[t,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();wc(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Tc{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.de=!1,this.we=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(t)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(t){const e=this.de?3e5:6e4;Ii("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.we=null,this.de=!0;try{await t.collectGarbage(this.garbageCollector)}catch(t){Oa(t)?Ii("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await _c(t)}await this._e(t)}))}}class Ec{constructor(t,e){this.me=t,this.params=e}calculateTargetCount(t,e){return this.me.ge(t).next((t=>Math.floor(e/100*t)))}nthSequenceNumber(t,e){if(0===e)return ka.resolve(qi.T);const n=new xc(e);return this.me.forEachTarget(t,(t=>n.fe(t.sequenceNumber))).next((()=>this.me.ye(t,(t=>n.fe(t))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.me.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.me.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Ii("LruGarbageCollector","Garbage collection skipped; disabled"),ka.resolve(oc)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ii("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oc):this.pe(t,e)))}getCacheSize(t){return this.me.getCacheSize(t)}pe(t,e){let n,i,r,o,a,c,l;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((e=>(e>this.params.maximumSequenceNumbersToCollect?(Ii("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),i=this.params.maximumSequenceNumbersToCollect):i=e,o=Date.now(),this.nthSequenceNumber(t,i)))).next((i=>(n=i,a=Date.now(),this.removeTargets(t,n,e)))).next((e=>(r=e,c=Date.now(),this.removeOrphanedDocuments(t,n)))).next((t=>(l=Date.now(),Ti()<=s.in.DEBUG&&Ii("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${i} in `+(a-o)+"ms\n"+`\tRemoved ${r} targets in `+(c-a)+"ms\n"+`\tRemoved ${t} documents in `+(l-c)+"ms\n"+`Total Duration: ${l-u}ms`),ka.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:t}))))}}class Ic{constructor(t,e){this.db=t,this.garbageCollector=function(t,e){return new Ec(t,e)}(this,e)}ge(t){const e=this.Ee(t);return this.db.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}Ee(t){let e=0;return this.ye(t,(t=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}ye(t,e){return this.Te(t,((t,n)=>e(n)))}addReference(t,e,n){return Sc(t,n)}removeReference(t,e,n){return Sc(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return Sc(t,e)}Ie(t,e){return function(t,e){let n=!1;return pc(t).jt((i=>hc(t,i,e).next((t=>(t&&(n=!0),ka.resolve(!t)))))).next((()=>n))}(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let r=0;return this.Te(t,((s,o)=>{if(o<=e){const e=this.Ie(t,s).next((e=>{if(!e)return r++,n.getEntry(t,s).next((()=>(n.removeEntry(s),bc(t).delete([0,ra(s.path)]))))}));i.push(e)}})).next((()=>ka.waitFor(i))).next((()=>n.apply(t))).next((()=>r))}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return Sc(t,e)}Te(t,e){const n=bc(t);let i,r=qi.T;return n.Kt({index:va.documentTargetsIndex},(([t,n],{path:s,sequenceNumber:o})=>{0===t?(r!==qi.T&&e(new mr(aa(i)),r),r=o,i=s):r=qi.T})).next((()=>{r!==qi.T&&e(new mr(aa(i)),r)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Sc(t,e){return bc(t).put(function(t,e){return new va(0,ra(t.path),e)}(e,t.currentSequenceNumber))}class kc{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,i]of n)if(this.equalsFn(e,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0!==i){for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return void(i[n]=[t,e]);i.push([t,e])}else this.inner[n]=[[t,e]]}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),!0;return!1}forEach(t){Qi(this.inner,((e,n)=>{for(const[e,i]of n)t(e,i)}))}isEmpty(){return Ji(this.inner)}}class Ac{constructor(){this.changes=new kc((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}getReadTime(t){const e=this.changes.get(t);return e?e.readTime:Yi.min()}addEntry(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}removeEntry(t,e=null){this.assertNotApplied(),this.changes.set(t,{document:Mr.newInvalidDocument(t),readTime:e})}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?ka.resolve(n.document):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Cc{constructor(t,e){this.N=t,this.Ht=e}addEntry(t,e,n){return Oc(t).put(Mc(e),n)}removeEntry(t,e){const n=Oc(t),i=Mc(e);return n.delete(i)}updateMetadata(t,e){return this.getMetadata(t).next((n=>(n.byteSize+=e,this.Ae(t,n))))}getEntry(t,e){return Oc(t).get(Mc(e)).next((t=>this.Re(e,t)))}be(t,e){return Oc(t).get(Mc(e)).next((t=>({document:this.Re(e,t),size:lc(t)})))}getEntries(t,e){let n=oo();return this.Pe(t,e,((t,e)=>{const i=this.Re(t,e);n=n.insert(t,i)})).next((()=>n))}ve(t,e){let n=oo(),i=new to(mr.comparator);return this.Pe(t,e,((t,e)=>{const r=this.Re(t,e);n=n.insert(t,r),i=i.insert(t,lc(e))})).next((()=>({documents:n,Ve:i})))}Pe(t,e,n){if(e.isEmpty())return ka.resolve();const i=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),r=e.getIterator();let s=r.getNext();return Oc(t).Kt({range:i},((t,e,i)=>{const o=mr.fromSegments(t);for(;s&&mr.comparator(s,o)<0;)n(s,null),s=r.getNext();s&&s.isEqual(o)&&(n(s,e),s=r.hasNext()?r.getNext():null),s?i.Mt(s.path.toArray()):i.done()})).next((()=>{for(;s;)n(s,null),s=r.hasNext()?r.getNext():null}))}getDocumentsMatchingQuery(t,e,n){let i=oo();const r=e.path.length+1,s={};if(n.isEqual(Yi.min())){const t=e.path.toArray();s.range=IDBKeyRange.lowerBound(t)}else{const t=e.path.toArray(),i=$a(n);s.range=IDBKeyRange.lowerBound([t,i],!0),s.index=ga.collectionReadTimeIndex}return Oc(t).Kt(s,((t,n,s)=>{if(t.length!==r)return;const o=za(this.N,n);e.path.isPrefixOf(o.key.path)?ps(e,o)&&(i=i.insert(o.key,o)):s.done()})).next((()=>i))}newChangeBuffer(t){return new Dc(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((t=>t.byteSize))}getMetadata(t){return Nc(t).get(ma.key).next((t=>(Di(!!t),t)))}Ae(t,e){return Nc(t).put(ma.key,e)}Re(t,e){if(e){const t=za(this.N,e);if(!t.isNoDocument()||!t.version.isEqual(Yi.min()))return t}return Mr.newInvalidDocument(t)}}class Dc extends Ac{constructor(t,e){super(),this.Se=t,this.trackRemovals=e,this.De=new kc((t=>t.toString()),((t,e)=>t.isEqual(e)))}applyChanges(t){const e=[];let n=0,i=new io(((t,e)=>$i(t.canonicalString(),e.canonicalString())));return this.changes.forEach(((r,s)=>{const o=this.De.get(r);if(s.document.isValidDocument()){const a=Ha(this.Se.N,s.document,this.getReadTime(r));i=i.add(r.path.popLast());const c=lc(a);n+=c-o,e.push(this.Se.addEntry(t,r,a))}else if(n-=o,this.trackRemovals){const n=Ha(this.Se.N,Mr.newNoDocument(r,Yi.min()),this.getReadTime(r));e.push(this.Se.addEntry(t,r,n))}else e.push(this.Se.removeEntry(t,r))})),i.forEach((n=>{e.push(this.Se.Ht.addToCollectionParentIndex(t,n))})),e.push(this.Se.updateMetadata(t,n)),ka.waitFor(e)}getFromCache(t,e){return this.Se.be(t,e).next((t=>(this.De.set(e,t.size),t.document)))}getAllFromCache(t,e){return this.Se.ve(t,e).next((({documents:t,Ve:e})=>(e.forEach(((t,e)=>{this.De.set(t,e)})),t)))}}function Nc(t){return ja(t,ma.store)}function Oc(t){return ja(t,ga.store)}function Mc(t){return t.path.toArray()}class Lc{constructor(t){this.N=t}Ct(t,e,n,i){Di(n<i&&n>=0&&i<=11);const r=new Aa("createOrUpgrade",e);n<1&&i>=1&&(function(t){t.createObjectStore(la.store)}(t),function(t){t.createObjectStore(ua.store,{keyPath:ua.keyPath}),t.createObjectStore(ha.store,{keyPath:ha.keyPath,autoIncrement:!0}).createIndex(ha.userMutationsIndex,ha.userMutationsKeyPath,{unique:!0}),t.createObjectStore(da.store)}(t),Pc(t),function(t){t.createObjectStore(ga.store)}(t));let s=ka.resolve();return n<3&&i>=3&&(0!==n&&(function(t){t.deleteObjectStore(va.store),t.deleteObjectStore(ya.store),t.deleteObjectStore(ba.store)}(t),Pc(t)),s=s.next((()=>function(t){const e=t.store(ba.store),n=new ba(0,0,Yi.min().toTimestamp(),0);return e.put(ba.key,n)}(r)))),n<4&&i>=4&&(0!==n&&(s=s.next((()=>function(t,e){return e.store(ha.store).Lt().next((n=>{t.deleteObjectStore(ha.store),t.createObjectStore(ha.store,{keyPath:ha.keyPath,autoIncrement:!0}).createIndex(ha.userMutationsIndex,ha.userMutationsKeyPath,{unique:!0});const i=e.store(ha.store),r=n.map((t=>i.put(t)));return ka.waitFor(r)}))}(t,r)))),s=s.next((()=>{!function(t){t.createObjectStore(wa.store,{keyPath:wa.keyPath})}(t)}))),n<5&&i>=5&&(s=s.next((()=>this.Ce(r)))),n<6&&i>=6&&(s=s.next((()=>(function(t){t.createObjectStore(ma.store)}(t),this.Ne(r))))),n<7&&i>=7&&(s=s.next((()=>this.xe(r)))),n<8&&i>=8&&(s=s.next((()=>this.ke(t,r)))),n<9&&i>=9&&(s=s.next((()=>{!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){const e=t.objectStore(ga.store);e.createIndex(ga.readTimeIndex,ga.readTimeIndexPath,{unique:!1}),e.createIndex(ga.collectionReadTimeIndex,ga.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&i>=10&&(s=s.next((()=>this.$e(r)))),n<11&&i>=11&&(s=s.next((()=>{!function(t){t.createObjectStore(xa.store,{keyPath:xa.keyPath})}(t),function(t){t.createObjectStore(Ta.store,{keyPath:Ta.keyPath})}(t)}))),s}Ne(t){let e=0;return t.store(ga.store).Kt(((t,n)=>{e+=lc(n)})).next((()=>{const n=new ma(e);return t.store(ma.store).put(ma.key,n)}))}Ce(t){const e=t.store(ua.store),n=t.store(ha.store);return e.Lt().next((e=>ka.forEach(e,(e=>{const i=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return n.Lt(ha.userMutationsIndex,i).next((n=>ka.forEach(n,(n=>{Di(n.userId===e.userId);const i=Ya(this.N,n);return cc(t,e.userId,i).next((()=>{}))}))))}))))}xe(t){const e=t.store(va.store),n=t.store(ga.store);return t.store(ba.store).get(ba.key).next((t=>{const i=[];return n.Kt(((n,r)=>{const s=new tr(n),o=function(t){return[0,ra(t)]}(s);i.push(e.get(o).next((n=>n?ka.resolve():(n=>e.put(new va(0,ra(n),t.highestListenSequenceNumber)))(s))))})).next((()=>ka.waitFor(i)))}))}ke(t,e){t.createObjectStore(_a.store,{keyPath:_a.keyPath});const n=e.store(_a.store),i=new ic,r=t=>{if(i.add(t)){const e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:ra(i)})}};return e.store(ga.store).Kt({qt:!0},((t,e)=>{const n=new tr(t);return r(n.popLast())})).next((()=>e.store(da.store).Kt({qt:!0},(([t,e,n],i)=>{const s=aa(e);return r(s.popLast())}))))}$e(t){const e=t.store(ya.store);return e.Kt(((t,n)=>{const i=Xa(n),r=Qa(this.N,i);return e.put(r)}))}}function Pc(t){t.createObjectStore(va.store,{keyPath:va.keyPath}).createIndex(va.documentTargetsIndex,va.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(ya.store,{keyPath:ya.keyPath}).createIndex(ya.queryTargetsIndexName,ya.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ba.store)}const Rc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Fc{constructor(t,e,n,i,r,s,o,a,c,l){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Oe=r,this.window=s,this.document=o,this.Fe=c,this.Me=l,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=t=>Promise.resolve(),!Fc.bt())throw new Li(Mi.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ic(this,i),this.We=e+"main",this.N=new qa(a),this.Ge=new Ca(this.We,11,new Lc(this.N)),this.ze=new mc(this.referenceDelegate,this.N),this.Ht=new rc,this.He=function(t,e){return new Cc(t,e)}(this.N,this.Ht),this.Je=new Za,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===l&&Si("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Li(Mi.FAILED_PRECONDITION,Rc);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.ze.getHighestSequenceNumber(t)))})).then((t=>{this.Le=new qi(t,this.Fe)})).then((()=>{this.Be=!0})).catch((t=>(this.Ge&&this.Ge.close(),Promise.reject(t))))}nn(t){return this.Qe=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ge.xt((async e=>{null===e.newVersion&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Oe.enqueueAndForget((async()=>{this.started&&await this.Xe()})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>Vc(t).put(new wa(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next((()=>{if(this.isPrimary)return this.sn(t).next((t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable((()=>this.Qe(!1))))}))})).next((()=>this.rn(t))).next((e=>this.isPrimary&&!e?this.on(t).next((()=>!1)):!!e&&this.an(t).next((()=>!0)))))).catch((t=>{if(Oa(t))return Ii("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Ii("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Oe.enqueueRetryable((()=>this.Qe(t))),this.isPrimary=t}))}sn(t){return jc(t).get(la.key).next((t=>ka.resolve(this.cn(t))))}un(t){return Vc(t).delete(this.clientId)}async hn(){if(this.isPrimary&&!this.ln(this.je,18e5)){this.je=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const e=ja(t,wa.store);return e.Lt().next((t=>{const n=this.fn(t,18e5),i=t.filter((t=>-1===n.indexOf(t)));return ka.forEach(i,(t=>e.delete(t.clientId))).next((()=>i))}))})).catch((()=>[]));if(this.Ye)for(const e of t)this.Ye.removeItem(this.dn(e.clientId))}}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Xe().then((()=>this.hn())).then((()=>this.en()))))}cn(t){return!!t&&t.ownerId===this.clientId}rn(t){return this.Me?ka.resolve(!0):jc(t).get(la.key).next((e=>{if(null!==e&&this.ln(e.leaseTimestampMs,5e3)&&!this.wn(e.ownerId)){if(this.cn(e)&&this.networkEnabled)return!0;if(!this.cn(e)){if(!e.allowTabSynchronization)throw new Li(Mi.FAILED_PRECONDITION,Rc);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vc(t).Lt().next((t=>void 0===this.fn(t,5e3).find((t=>{if(this.clientId!==t.clientId){const e=!this.networkEnabled&&t.networkEnabled,n=!this.inForeground&&t.inForeground,i=this.networkEnabled===t.networkEnabled;if(e||n&&i)return!0}return!1}))))})).next((t=>(this.isPrimary!==t&&Ii("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.Be=!1,this._n(),this.Ke&&(this.Ke.cancel(),this.Ke=null),this.mn(),this.gn(),await this.Ge.runTransaction("shutdown","readwrite",[la.store,wa.store],(t=>{const e=new Fa(t,qi.T);return this.on(e).next((()=>this.un(e)))})),this.Ge.close(),this.yn()}fn(t,e){return t.filter((t=>this.ln(t.updateTimeMs,e)&&!this.wn(t.clientId)))}pn(){return this.runTransaction("getActiveClients","readonly",(t=>Vc(t).Lt().next((t=>this.fn(t,18e5).map((t=>t.clientId))))))}get started(){return this.Be}getMutationQueue(t){return uc.Yt(t,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(t,e,n){Ii("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite";let r;return this.Ge.runTransaction(t,i,Ea,(i=>(r=new Fa(i,this.Le?this.Le.next():qi.T),"readwrite-primary"===e?this.sn(r).next((t=>!!t||this.rn(r))).next((e=>{if(!e)throw Si(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable((()=>this.Qe(!1))),new Li(Mi.FAILED_PRECONDITION,Ia);return n(r)})).next((t=>this.an(r).next((()=>t)))):this.En(r).next((()=>n(r)))))).then((t=>(r.raiseOnCommittedEvent(),t)))}En(t){return jc(t).get(la.key).next((t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)&&!this.cn(t)&&!(this.Me||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Li(Mi.FAILED_PRECONDITION,Rc)}))}an(t){const e=new la(this.clientId,this.allowTabSynchronization,Date.now());return jc(t).put(la.key,e)}static bt(){return Ca.bt()}on(t){const e=jc(t);return e.get(la.key).next((t=>this.cn(t)?(Ii("IndexedDbPersistence","Releasing primary lease."),e.delete(la.key)):ka.resolve()))}ln(t,e){const n=Date.now();return!(t<n-e||t>n&&(Si(`Detected an update time that is in the future: ${t} > ${n}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe())))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Ue=()=>{this._n(),(0,o.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(t){var e;try{const n=null!==(null===(e=this.Ye)||void 0===e?void 0:e.getItem(this.dn(t)));return Ii("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(t){return Si("IndexedDbPersistence","Failed to get zombied client id.",t),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(t){Si("Failed to set zombie client id.",t)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(t){}}dn(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function jc(t){return ja(t,la.store)}function Vc(t){return ja(t,wa.store)}function Uc(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class Bc{constructor(t,e){this.progress=t,this.Tn=e}}class qc{constructor(t,e,n){this.He=t,this.In=e,this.Ht=n}An(t,e){return this.In.getAllMutationBatchesAffectingDocumentKey(t,e).next((n=>this.Rn(t,e,n)))}Rn(t,e,n){return this.He.getEntry(t,e).next((t=>{for(const e of n)e.applyToLocalView(t);return t}))}bn(t,e){t.forEach(((t,n)=>{for(const t of e)t.applyToLocalView(n)}))}Pn(t,e){return this.He.getEntries(t,e).next((e=>this.vn(t,e).next((()=>e))))}vn(t,e){return this.In.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>this.bn(e,t)))}getDocumentsMatchingQuery(t,e,n){return function(t){return mr.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Vn(t,e.path):as(e)?this.Sn(t,e,n):this.Dn(t,e,n)}Vn(t,e){return this.An(t,new mr(e)).next((t=>{let e=co();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}Sn(t,e,n){const i=e.collectionGroup;let r=co();return this.Ht.getCollectionParents(t,i).next((s=>ka.forEach(s,(s=>{const o=function(t,e){return new ts(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return this.Dn(t,o,n).next((t=>{t.forEach(((t,e)=>{r=r.insert(t,e)}))}))})).next((()=>r))))}Dn(t,e,n){let i,r;return this.He.getDocumentsMatchingQuery(t,e,n).next((n=>(i=n,this.In.getAllMutationBatchesAffectingQuery(t,e)))).next((e=>(r=e,this.Cn(t,r,i).next((t=>{i=t;for(const t of r)for(const e of t.mutations){const n=e.key;let r=i.get(n);null==r&&(r=Mr.newInvalidDocument(n),i=i.insert(n,r)),js(e,r,t.localWriteTime),r.isFoundDocument()||(i=i.remove(n))}}))))).next((()=>(i.forEach(((t,n)=>{ps(e,n)||(i=i.remove(t))})),i)))}Cn(t,e,n){let i=fo();for(const t of e)for(const e of t.mutations)e instanceof zs&&null===n.get(e.key)&&(i=i.add(e.key));let r=n;return this.He.getEntries(t,i).next((t=>(t.forEach(((t,e)=>{e.isFoundDocument()&&(r=r.insert(t,e))})),r)))}}class zc{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.Nn=n,this.xn=i}static kn(t,e){let n=fo(),i=fo();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:i=i.add(t.doc.key)}return new zc(t,e.fromCache,n,i)}}class Hc{$n(t){this.On=t}getDocumentsMatchingQuery(t,e,n,i){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Yi.min())?this.Fn(t,e):this.On.Pn(t,i).next((r=>{const o=this.Mn(e,r);return(is(e)||rs(e))&&this.Ln(e.limitType,o,i,n)?this.Fn(t,e):(Ti()<=s.in.DEBUG&&Ii("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),fs(e)),this.On.getDocumentsMatchingQuery(t,e,n).next((t=>(o.forEach((e=>{t=t.insert(e.key,e)})),t))))}))}Mn(t,e){let n=new io(gs(t));return e.forEach(((e,i)=>{ps(t,i)&&(n=n.add(i))})),n}Ln(t,e,n,i){if(n.size!==e.size)return!0;const r="F"===t?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Fn(t,e){return Ti()<=s.in.DEBUG&&Ii("QueryEngine","Using full collection scan to execute query:",fs(e)),this.On.getDocumentsMatchingQuery(t,e,Yi.min())}}class $c{constructor(t,e,n,i){this.persistence=t,this.Bn=e,this.N=i,this.Un=new to($i),this.qn=new kc((t=>Rr(t)),Fr),this.Kn=Yi.min(),this.In=t.getMutationQueue(n),this.jn=t.getRemoteDocumentCache(),this.ze=t.getTargetCache(),this.Qn=new qc(this.jn,this.In,this.persistence.getIndexManager()),this.Je=t.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Un)))}}function Wc(t,e,n,i){return new $c(t,e,n,i)}async function Kc(t,e){const n=Oi(t);let i=n.In,r=n.Qn;const s=await n.persistence.runTransaction("Handle user change","readonly",(t=>{let s;return n.In.getAllMutationBatches(t).next((o=>(s=o,i=n.persistence.getMutationQueue(e),r=new qc(n.jn,i,n.persistence.getIndexManager()),i.getAllMutationBatches(t)))).next((e=>{const n=[],i=[];let o=fo();for(const t of s){n.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return r.Pn(t,o).next((t=>({Wn:t,removedBatchIds:n,addedBatchIds:i})))}))}));return n.In=i,n.Qn=r,n.Bn.$n(n.Qn),s}function Gc(t){const e=Oi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.ze.getLastRemoteSnapshotVersion(t)))}function Yc(t,e,n,i,r){let s=fo();return n.forEach((t=>s=s.add(t))),e.getEntries(t,s).next((t=>{let s=oo();return n.forEach(((n,o)=>{const a=t.get(n),c=(null==r?void 0:r.get(n))||i;o.isNoDocument()&&o.version.isEqual(Yi.min())?(e.removeEntry(n,c),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,c),s=s.insert(n,o)):Ii("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),s}))}function Xc(t,e){const n=Oi(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.In.getNextMutationBatchAfterBatchId(t,e))))}function Qc(t,e){const n=Oi(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.ze.getTargetData(t,e).next((r=>r?(i=r,ka.resolve(i)):n.ze.allocateTargetId(t).next((r=>(i=new Ba(e,r,0,t.currentSequenceNumber),n.ze.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.Un.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Un=n.Un.insert(t.targetId,t),n.qn.set(e,t.targetId)),t}))}async function Jc(t,e,n){const i=Oi(t),r=i.Un.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(t=>i.persistence.referenceDelegate.removeTarget(t,r)))}catch(t){if(!Oa(t))throw t;Ii("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}i.Un=i.Un.remove(e),i.qn.delete(r.target)}function Zc(t,e,n){const i=Oi(t);let r=Yi.min(),s=fo();return i.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const i=Oi(t),r=i.qn.get(n);return void 0!==r?ka.resolve(i.Un.get(r)):i.ze.getTargetData(e,n)}(i,t,ls(e)).next((e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.ze.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>i.Bn.getDocumentsMatchingQuery(t,e,n?r:Yi.min(),n?s:fo()))).next((t=>({documents:t,Gn:s})))))}function tl(t,e){const n=Oi(t),i=Oi(n.ze),r=n.Un.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",(t=>i.Et(t,e).next((t=>t?t.target:null))))}function el(t){const e=Oi(t);return e.persistence.runTransaction("Get new document changes","readonly",(t=>function(t,e,n){const i=Oi(t);let r=oo(),s=$a(n);const o=Oc(e),a=IDBKeyRange.lowerBound(s,!0);return o.Kt({index:ga.readTimeIndex,range:a},((t,e)=>{const n=za(i.N,e);r=r.insert(n.key,n),s=e.readTime})).next((()=>({Tn:r,readTime:Wa(s)})))}(e.jn,t,e.Kn))).then((({Tn:t,readTime:n})=>(e.Kn=n,t)))}async function nl(t,e,n=fo()){const i=await Qc(t,ls(Ja(e.bundledQuery))),r=Oi(t);return r.persistence.runTransaction("Save named query","readwrite",(t=>{const s=No(e.readTime);if(i.snapshotVersion.compareTo(s)>=0)return r.Je.saveNamedQuery(t,e);const o=i.withResumeToken(sr.EMPTY_BYTE_STRING,s);return r.Un=r.Un.insert(o.targetId,o),r.ze.updateTargetData(t,o).next((()=>r.ze.removeMatchingKeysForTargetId(t,i.targetId))).next((()=>r.ze.addMatchingKeys(t,n,i.targetId))).next((()=>r.Je.saveNamedQuery(t,e)))}))}class il{constructor(t){this.N=t,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(t,e){return ka.resolve(this.Yn.get(e))}saveBundleMetadata(t,e){var n;return this.Yn.set(e.id,{id:(n=e).id,version:n.version,createTime:No(n.createTime)}),ka.resolve()}getNamedQuery(t,e){return ka.resolve(this.Xn.get(e))}saveNamedQuery(t,e){return this.Xn.set(e.name,function(t){return{name:t.name,query:Ja(t.bundledQuery),readTime:No(t.readTime)}}(e)),ka.resolve()}}class rl{constructor(){this.Zn=new io(sl.ts),this.es=new io(sl.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(t,e){const n=new sl(t,e);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.rs(new sl(t,e))}os(t,e){t.forEach((t=>this.removeReference(t,e)))}cs(t){const e=new mr(new tr([])),n=new sl(e,t),i=new sl(e,t+1),r=[];return this.es.forEachInRange([n,i],(t=>{this.rs(t),r.push(t.key)})),r}us(){this.Zn.forEach((t=>this.rs(t)))}rs(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}hs(t){const e=new mr(new tr([])),n=new sl(e,t),i=new sl(e,t+1);let r=fo();return this.es.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new sl(t,0),n=this.Zn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class sl{constructor(t,e){this.key=t,this.ls=e}static ts(t,e){return mr.comparator(t.key,e.key)||$i(t.ls,e.ls)}static ns(t,e){return $i(t.ls,e.ls)||mr.comparator(t.key,e.key)}}class ol{constructor(t,e){this.Ht=t,this.referenceDelegate=e,this.In=[],this.fs=1,this.ds=new io(sl.ts)}checkEmpty(t){return ka.resolve(0===this.In.length)}addMutationBatch(t,e,n,i){const r=this.fs;this.fs++,this.In.length>0&&this.In[this.In.length-1];const s=new Va(r,e,n,i);this.In.push(s);for(const e of i)this.ds=this.ds.add(new sl(e.key,r)),this.Ht.addToCollectionParentIndex(t,e.key.path.popLast());return ka.resolve(s)}lookupMutationBatch(t,e){return ka.resolve(this.ws(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this._s(n),r=i<0?0:i;return ka.resolve(this.In.length>r?this.In[r]:null)}getHighestUnacknowledgedBatchId(){return ka.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(t){return ka.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new sl(e,0),i=new sl(e,Number.POSITIVE_INFINITY),r=[];return this.ds.forEachInRange([n,i],(t=>{const e=this.ws(t.ls);r.push(e)})),ka.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new io($i);return e.forEach((t=>{const e=new sl(t,0),i=new sl(t,Number.POSITIVE_INFINITY);this.ds.forEachInRange([e,i],(t=>{n=n.add(t.ls)}))})),ka.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;mr.isDocumentKey(r)||(r=r.child(""));const s=new sl(new mr(r),0);let o=new io($i);return this.ds.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.ls)),!0)}),s),ka.resolve(this.gs(o))}gs(t){const e=[];return t.forEach((t=>{const n=this.ws(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Di(0===this.ys(e.batchId,"removed")),this.In.shift();let n=this.ds;return ka.forEach(e.mutations,(i=>{const r=new sl(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.ds=n}))}te(t){}containsKey(t,e){const n=new sl(e,0),i=this.ds.firstAfterOrEqual(n);return ka.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.In.length,ka.resolve()}ys(t,e){return this._s(t)}_s(t){return 0===this.In.length?0:t-this.In[0].batchId}ws(t){const e=this._s(t);return e<0||e>=this.In.length?null:this.In[e]}}class al{constructor(t,e){this.Ht=t,this.ps=e,this.docs=new to(mr.comparator),this.size=0}addEntry(t,e,n){const i=e.key,r=this.docs.get(i),s=r?r.size:0,o=this.ps(e);return this.docs=this.docs.insert(i,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ht.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return ka.resolve(n?n.document.clone():Mr.newInvalidDocument(e))}getEntries(t,e){let n=oo();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.clone():Mr.newInvalidDocument(t))})),ka.resolve(n)}getDocumentsMatchingQuery(t,e,n){let i=oo();const r=new mr(e.path.child("")),s=this.docs.getIteratorFrom(r);for(;s.hasNext();){const{key:t,value:{document:r,readTime:o}}=s.getNext();if(!e.path.isPrefixOf(t.path))break;o.compareTo(n)<=0||ps(e,r)&&(i=i.insert(r.key,r.clone()))}return ka.resolve(i)}Es(t,e){return ka.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new cl(this)}getSize(t){return ka.resolve(this.size)}}class cl extends Ac{constructor(t){super(),this.Se=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.document.isValidDocument()?e.push(this.Se.addEntry(t,i.document,this.getReadTime(n))):this.Se.removeEntry(n)})),ka.waitFor(e)}getFromCache(t,e){return this.Se.getEntry(t,e)}getAllFromCache(t,e){return this.Se.getEntries(t,e)}}class ll{constructor(t){this.persistence=t,this.Ts=new kc((t=>Rr(t)),Fr),this.lastRemoteSnapshotVersion=Yi.min(),this.highestTargetId=0,this.Is=0,this.As=new rl,this.targetCount=0,this.Rs=gc.se()}forEachTarget(t,e){return this.Ts.forEach(((t,n)=>e(n))),ka.resolve()}getLastRemoteSnapshotVersion(t){return ka.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ka.resolve(this.Is)}allocateTargetId(t){return this.highestTargetId=this.Rs.next(),ka.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Is&&(this.Is=e),ka.resolve()}ae(t){this.Ts.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Rs=new gc(e),this.highestTargetId=e),t.sequenceNumber>this.Is&&(this.Is=t.sequenceNumber)}addTargetData(t,e){return this.ae(e),this.targetCount+=1,ka.resolve()}updateTargetData(t,e){return this.ae(e),ka.resolve()}removeTargetData(t,e){return this.Ts.delete(e.target),this.As.cs(e.targetId),this.targetCount-=1,ka.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Ts.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Ts.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),ka.waitFor(r).next((()=>i))}getTargetCount(t){return ka.resolve(this.targetCount)}getTargetData(t,e){const n=this.Ts.get(e)||null;return ka.resolve(n)}addMatchingKeys(t,e,n){return this.As.ss(e,n),ka.resolve()}removeMatchingKeys(t,e,n){this.As.os(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),ka.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.As.cs(e),ka.resolve()}getMatchingKeysForTargetId(t,e){const n=this.As.hs(e);return ka.resolve(n)}containsKey(t,e){return ka.resolve(this.As.containsKey(e))}}class ul{constructor(t,e){this.bs={},this.Le=new qi(0),this.Be=!1,this.Be=!0,this.referenceDelegate=t(this),this.ze=new ll(this),this.Ht=new nc,this.He=function(t,e){return new al(t,e)}(this.Ht,(t=>this.referenceDelegate.Ps(t))),this.N=new qa(e),this.Je=new il(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(t){let e=this.bs[t.toKey()];return e||(e=new ol(this.Ht,this.referenceDelegate),this.bs[t.toKey()]=e),e}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(t,e,n){Ii("MemoryPersistence","Starting transaction:",t);const i=new hl(this.Le.next());return this.referenceDelegate.vs(),n(i).next((t=>this.referenceDelegate.Vs(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Ss(t,e){return ka.or(Object.values(this.bs).map((n=>()=>n.containsKey(t,e))))}}class hl extends Sa{constructor(t){super(),this.currentSequenceNumber=t}}class dl{constructor(t){this.persistence=t,this.Ds=new rl,this.Cs=null}static Ns(t){return new dl(t)}get xs(){if(this.Cs)return this.Cs;throw Ci()}addReference(t,e,n){return this.Ds.addReference(n,e),this.xs.delete(n.toString()),ka.resolve()}removeReference(t,e,n){return this.Ds.removeReference(n,e),this.xs.add(n.toString()),ka.resolve()}markPotentiallyOrphaned(t,e){return this.xs.add(e.toString()),ka.resolve()}removeTarget(t,e){this.Ds.cs(e.targetId).forEach((t=>this.xs.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.xs.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}vs(){this.Cs=new Set}Vs(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ka.forEach(this.xs,(n=>{const i=mr.fromPath(n);return this.ks(t,i).next((t=>{t||e.removeEntry(i)}))})).next((()=>(this.Cs=null,e.apply(t))))}updateLimboDocument(t,e){return this.ks(t,e).next((t=>{t?this.xs.delete(e.toString()):this.xs.add(e.toString())}))}Ps(t){return 0}ks(t,e){return ka.or([()=>ka.resolve(this.Ds.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ss(t,e)])}}function fl(t,e){return`firestore_clients_${t}_${e}`}function pl(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function gl(t,e){return`firestore_targets_${t}_${e}`}class ml{constructor(t,e,n,i){this.user=t,this.batchId=e,this.state=n,this.error=i}static $s(t,e,n){const i=JSON.parse(n);let r,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Li(i.error.code,i.error.message))),s?new ml(t,e,i.state,r):(Si("SharedClientState",`Failed to parse mutation state for ID '${e}': ${n}`),null)}Os(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class yl{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static $s(t,e){const n=JSON.parse(e);let i,r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code,r&&(i=new Li(n.error.code,n.error.message))),r?new yl(t,n.state,i):(Si("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Os(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class vl{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static $s(t,e){const n=JSON.parse(e);let i="object"==typeof n&&n.activeTargetIds instanceof Array,r=go();for(let t=0;i&&t<n.activeTargetIds.length;++t)i=gr(n.activeTargetIds[t]),r=r.add(n.activeTargetIds[t]);return i?new vl(t,r):(Si("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class bl{constructor(t,e){this.clientId=t,this.onlineState=e}static $s(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new bl(e.clientId,e.onlineState):(Si("SharedClientState",`Failed to parse online state: ${t}`),null)}}class _l{constructor(){this.activeTargetIds=go()}Fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ms(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Os(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class wl{constructor(t,e,n,i,r){this.window=t,this.Oe=e,this.persistenceKey=n,this.Ls=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new to($i),this.started=!1,this.Ks=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.js=fl(this.persistenceKey,this.Ls),this.Qs=function(t){return`firestore_sequence_number_${t}`}(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new _l),this.Ws=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Hs=function(t){return`firestore_online_state_${t}`}(this.persistenceKey),this.Js=function(t){return`firestore_bundle_loaded_${t}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.pn();for(const e of t){if(e===this.Ls)continue;const t=this.getItem(fl(this.persistenceKey,e));if(t){const n=vl.$s(e,t);n&&(this.qs=this.qs.insert(n.clientId,n))}}this.Ys();const e=this.storage.getItem(this.Hs);if(e){const t=this.Xs(e);t&&this.Zs(t)}for(const t of this.Ks)this.Us(t);this.Ks=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.Qs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(t){let e=!1;return this.qs.forEach(((n,i)=>{i.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.ei(t,"pending")}updateMutationState(t,e,n){this.ei(t,e,n),this.ni(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const n=this.storage.getItem(gl(this.persistenceKey,t));if(n){const i=yl.$s(t,n);i&&(e=i.state)}}return this.si.Fs(t),this.Ys(),e}removeLocalQueryTarget(t){this.si.Ms(t),this.Ys()}isLocalQueryTarget(t){return this.si.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(gl(this.persistenceKey,t))}updateQueryState(t,e,n){this.ii(t,e,n)}handleUserChange(t,e,n){e.forEach((t=>{this.ni(t)})),this.currentUser=t,n.forEach((t=>{this.addPendingMutation(t)}))}setOnlineState(t){this.ri(t)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Ii("SharedClientState","READ",t,e),e}setItem(t,e){Ii("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Ii("SharedClientState","REMOVE",t),this.storage.removeItem(t)}Us(t){const e=t;if(e.storageArea===this.storage){if(Ii("SharedClientState","EVENT",e.key,e.newValue),e.key===this.js)return void Si("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((async()=>{if(this.started){if(null!==e.key)if(this.Ws.test(e.key)){if(null==e.newValue){const t=this.ai(e.key);return this.ci(t,null)}{const t=this.ui(e.key,e.newValue);if(t)return this.ci(t.clientId,t)}}else if(this.Gs.test(e.key)){if(null!==e.newValue){const t=this.hi(e.key,e.newValue);if(t)return this.li(t)}}else if(this.zs.test(e.key)){if(null!==e.newValue){const t=this.fi(e.key,e.newValue);if(t)return this.di(t)}}else if(e.key===this.Hs){if(null!==e.newValue){const t=this.Xs(e.newValue);if(t)return this.Zs(t)}}else if(e.key===this.Qs){const t=function(t){let e=qi.T;if(null!=t)try{const n=JSON.parse(t);Di("number"==typeof n),e=n}catch(t){Si("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(e.newValue);t!==qi.T&&this.sequenceNumberHandler(t)}else if(e.key===this.Js)return this.syncEngine.wi()}else this.Ks.push(e)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(t,e,n){const i=new ml(this.currentUser,t,e,n),r=pl(this.persistenceKey,this.currentUser,t);this.setItem(r,i.Os())}ni(t){const e=pl(this.persistenceKey,this.currentUser,t);this.removeItem(e)}ri(t){const e={clientId:this.Ls,onlineState:t};this.storage.setItem(this.Hs,JSON.stringify(e))}ii(t,e,n){const i=gl(this.persistenceKey,t),r=new yl(t,e,n);this.setItem(i,r.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(t){const e=this.Ws.exec(t);return e?e[1]:null}ui(t,e){const n=this.ai(t);return vl.$s(n,e)}hi(t,e){const n=this.Gs.exec(t),i=Number(n[1]),r=void 0!==n[2]?n[2]:null;return ml.$s(new _i(r),i,e)}fi(t,e){const n=this.zs.exec(t),i=Number(n[1]);return yl.$s(i,e)}Xs(t){return bl.$s(t)}async li(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine._i(t.batchId,t.state,t.error);Ii("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)}di(t){return this.syncEngine.mi(t.targetId,t.state,t.error)}ci(t,e){const n=e?this.qs.insert(t,e):this.qs.remove(t),i=this.ti(this.qs),r=this.ti(n),s=[],o=[];return r.forEach((t=>{i.has(t)||s.push(t)})),i.forEach((t=>{r.has(t)||o.push(t)})),this.syncEngine.gi(s,o).then((()=>{this.qs=n}))}Zs(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ti(t){let e=go();return t.forEach(((t,n)=>{e=e.unionWith(n.activeTargetIds)})),e}}class xl{constructor(){this.yi=new _l,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.yi.Fs(t),this.pi[t]||"not-current"}updateQueryState(t,e,n){this.pi[t]=e}removeLocalQueryTarget(t){this.yi.Ms(t)}isLocalQueryTarget(t){return this.yi.activeTargetIds.has(t)}clearQueryState(t){delete this.pi[t]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(t){return this.yi.activeTargetIds.has(t)}start(){return this.yi=new _l,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}class Tl{Ei(t){}shutdown(){}}class El{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(t){this.bi.push(t)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){Ii("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.bi)t(0)}Ri(){Ii("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.bi)t(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Il={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Sl{constructor(t){this.vi=t.vi,this.Vi=t.Vi}Si(t){this.Di=t}Ci(t){this.Ni=t}onMessage(t){this.xi=t}close(){this.Vi()}send(t){this.vi(t)}ki(){this.Di()}$i(t){this.Ni(t)}Oi(t){this.xi(t)}}class kl extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.Fi=e+"://"+t.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(t,e,n,i){const r=this.Bi(t,e);Ii("RestConnection","Sending: ",r,n);const s={};return this.Ui(s,i),this.qi(t,r,s,n).then((t=>(Ii("RestConnection","Received: ",t),t)),(e=>{throw ki("RestConnection",`${t} failed with error: `,e,"url: ",r,"request:",n),e}))}Ki(t,e,n,i){return this.Li(t,e,n,i)}Ui(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/"+wi,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(const n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])}Bi(t,e){const n=Il[t];return`${this.Fi}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}qi(t,e,n,i){return new Promise(((r,s)=>{const o=new bi;o.listenOnce(fi.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case di.NO_ERROR:const e=o.getResponseJson();Ii("Connection","XHR received:",JSON.stringify(e)),r(e);break;case di.TIMEOUT:Ii("Connection",'RPC "'+t+'" timed out'),s(new Li(Mi.DEADLINE_EXCEEDED,"Request time out"));break;case di.HTTP_ERROR:const n=o.getStatus();if(Ii("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Mi).indexOf(e)>=0?e:Mi.UNKNOWN}(t.status);s(new Li(e,t.message))}else s(new Li(Mi.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Li(Mi.UNAVAILABLE,"Connection failed."));break;default:Ci()}}finally{Ii("Connection",'RPC "'+t+'" completed.')}}));const a=JSON.stringify(i);o.send(e,"POST",a,n,15)}))}ji(t,e){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new ai,r=Zt(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new yi({})),this.Ui(s.initMessageHeaders,e),(0,o.uI)()||(0,o.b$)()||(0,o.d)()||(0,o.w1)()||(0,o.Mn)()||(0,o.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");const a=n.join("");Ii("Connection","Creating WebChannel: "+a,s);const c=i.createWebChannel(a,s);let l=!1,u=!1;const h=new Sl({vi:t=>{u?Ii("Connection","Not sending because WebChannel is closed:",t):(l||(Ii("Connection","Opening WebChannel transport."),c.open(),l=!0),Ii("Connection","WebChannel sending:",t),c.send(t))},Vi:()=>c.close()}),d=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return d(c,vi.EventType.OPEN,(()=>{u||Ii("Connection","WebChannel transport opened.")})),d(c,vi.EventType.CLOSE,(()=>{u||(u=!0,Ii("Connection","WebChannel transport closed"),h.$i())})),d(c,vi.EventType.ERROR,(t=>{u||(u=!0,ki("Connection","WebChannel transport errored:",t),h.$i(new Li(Mi.UNAVAILABLE,"The operation could not be completed")))})),d(c,vi.EventType.MESSAGE,(t=>{var e;if(!u){const n=t.data[0];Di(!!n);const i=n,r=i.error||(null===(e=i[0])||void 0===e?void 0:e.error);if(r){Ii("Connection","WebChannel received error:",r);const t=r.status;let e=function(t){const e=Xs[t];if(void 0!==e)return Zs(e)}(t),n=r.message;void 0===e&&(e=Mi.INTERNAL,n="Unknown error status: "+t+" with message "+r.message),u=!0,h.$i(new Li(e,n)),c.close()}else Ii("Connection","WebChannel received:",n),h.Oi(n)}})),d(r,pi.STAT_EVENT,(t=>{t.stat===gi?Ii("Connection","Detected buffering proxy"):t.stat===mi&&Ii("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.ki()}),0),h}}function Al(){return"undefined"!=typeof window?window:null}function Cl(){return"undefined"!=typeof document?document:null}function Dl(t){return new ko(t,!0)}class Nl{constructor(t,e,n=1e3,i=1.5,r=6e4){this.Oe=t,this.timerId=e,this.Qi=n,this.Wi=i,this.Gi=r,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(t){this.cancel();const e=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),i=Math.max(0,e-n);i>0&&Ii("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.zi} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,i,(()=>(this.Ji=Date.now(),t()))),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Ol{constructor(t,e,n,i,r,s){this.Oe=t,this.er=n,this.nr=i,this.credentialsProvider=r,this.listener=s,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Nl(t,e)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}async stop(){this.ar()&&await this.close(0)}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,(()=>this.dr())))}wr(t){this._r(),this.stream.send(t)}async dr(){if(this.cr())return this.close(0)}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}async close(t,e){this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===Mi.RESOURCE_EXHAUSTED?(Si(e.toString()),Si("Using maximum backoff delay to prevent overloading the backend."),this.rr.Yi()):e&&e.code===Mi.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ci(e)}mr(){}auth(){this.state=1;const t=this.gr(this.sr),e=this.sr;this.credentialsProvider.getToken().then((t=>{this.sr===e&&this.yr(t)}),(e=>{t((()=>{const t=new Li(Mi.UNKNOWN,"Fetching auth token failed: "+e.message);return this.pr(t)}))}))}yr(t){const e=this.gr(this.sr);this.stream=this.Er(t),this.stream.Si((()=>{e((()=>(this.state=2,this.listener.Si())))})),this.stream.Ci((t=>{e((()=>this.pr(t)))})),this.stream.onMessage((t=>{e((()=>this.onMessage(t)))}))}ur(){this.state=4,this.rr.Xi((async()=>{this.state=0,this.start()}))}pr(t){return Ii("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(3,t)}gr(t){return e=>{this.Oe.enqueueAndForget((()=>this.sr===t?e():(Ii("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ml extends Ol{constructor(t,e,n,i,r){super(t,"listen_stream_connection_backoff","listen_stream_idle",e,n,r),this.N=i}Er(t){return this.nr.ji("Listen",t)}onMessage(t){this.rr.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ci()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(t,e){return t.D?(Di(void 0===e||"string"==typeof e),sr.fromBase64String(e||"")):(Di(void 0===e||e instanceof Uint8Array),sr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Mi.UNKNOWN:Zs(t.code);return new Li(e,t.message||"")}(o);n=new _o(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Po(t,i.document.name),s=No(i.document.updateTime),o=new Nr({mapValue:{fields:i.document.fields}}),a=Mr.newFoundDocument(r,s,o),c=i.targetIds||[],l=i.removedTargetIds||[];n=new vo(c,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Po(t,i.document),s=i.readTime?No(i.readTime):Yi.min(),o=Mr.newNoDocument(r,s),a=i.removedTargetIds||[];n=new vo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Po(t,i.document),s=i.removedTargetIds||[];n=new vo([],s,r,null)}else{if(!("filter"in e))return Ci();{e.filter;const t=e.filter;t.targetId;const i=t.count||0,r=new Ys(i),s=t.targetId;n=new bo(s,r)}}return n}(this.N,t),n=function(t){if(!("targetChange"in t))return Yi.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Yi.min():e.readTime?No(e.readTime):Yi.min()}(t);return this.listener.Tr(e,n)}Ir(t){const e={};e.database=jo(this.N),e.addTarget=function(t,e){let n;const i=e.target;return n=jr(i)?{documents:Ho(t,i)}:{query:$o(t,i)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Co(t,e.resumeToken):e.snapshotVersion.compareTo(Yi.min())>0&&(n.readTime=Ao(t,e.snapshotVersion.toTimestamp())),n}(this.N,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ci()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.N,t);n&&(e.labels=n),this.wr(e)}Ar(t){const e={};e.database=jo(this.N),e.removeTarget=t,this.wr(e)}}class Ll extends Ol{constructor(t,e,n,i,r){super(t,"write_stream_connection_backoff","write_stream_idle",e,n,r),this.N=i,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(t){return this.nr.ji("Write",t)}onMessage(t){if(Di(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();const e=function(t,e){return t&&t.length>0?(Di(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?No(t.updateTime):No(e);return n.isEqual(Yi.min())&&(n=No(e)),new Ms(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=No(t.commitTime);return this.listener.vr(n,e)}return Di(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const t={};t.database=jo(this.N),this.wr(t)}Pr(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>qo(this.N,t)))};this.wr(e)}}class Pl extends class{}{constructor(t,e,n){super(),this.credentials=t,this.nr=e,this.N=n,this.Dr=!1}Cr(){if(this.Dr)throw new Li(Mi.FAILED_PRECONDITION,"The client has already been terminated.")}Li(t,e,n){return this.Cr(),this.credentials.getToken().then((i=>this.nr.Li(t,e,n,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Mi.UNAUTHENTICATED&&this.credentials.invalidateToken(),t):new Li(Mi.UNKNOWN,t.toString())}))}Ki(t,e,n){return this.Cr(),this.credentials.getToken().then((i=>this.nr.Ki(t,e,n,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Mi.UNAUTHENTICATED&&this.credentials.invalidateToken(),t):new Li(Mi.UNKNOWN,t.toString())}))}terminate(){this.Dr=!0}}class Rl{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve()))))}Lr(t){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Fr("Offline")))}set(t){this.Br(),this.Nr=0,"Online"===t&&(this.$r=!1),this.Fr(t)}Fr(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}Mr(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(Si(e),this.$r=!1):Ii("OnlineStateTracker",e)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class Fl{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=r,this.Qr.Ei((t=>{n.enqueueAndForget((async()=>{Wl(this)&&(Ii("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Oi(t);e.Kr.add(4),await Vl(e),e.Wr.set("Unknown"),e.Kr.delete(4),await jl(e)}(this))}))})),this.Wr=new Rl(n,i)}}async function jl(t){if(Wl(t))for(const e of t.jr)await e(!0)}async function Vl(t){for(const e of t.jr)await e(!1)}function Ul(t,e){const n=Oi(t);n.qr.has(e.targetId)||(n.qr.set(e.targetId,e),$l(n)?Hl(n):lu(n).cr()&&ql(n,e))}function Bl(t,e){const n=Oi(t),i=lu(n);n.qr.delete(e),i.cr()&&zl(n,e),0===n.qr.size&&(i.cr()?i.lr():Wl(n)&&n.Wr.set("Unknown"))}function ql(t,e){t.Gr.Y(e.targetId),lu(t).Ir(e)}function zl(t,e){t.Gr.Y(e),lu(t).Ar(e)}function Hl(t){t.Gr=new xo({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.qr.get(e)||null}),lu(t).start(),t.Wr.Or()}function $l(t){return Wl(t)&&!lu(t).ar()&&t.qr.size>0}function Wl(t){return 0===Oi(t).Kr.size}function Kl(t){t.Gr=void 0}async function Gl(t){t.qr.forEach(((e,n)=>{ql(t,e)}))}async function Yl(t,e){Kl(t),$l(t)?(t.Wr.Lr(e),Hl(t)):t.Wr.set("Unknown")}async function Xl(t,e,n){if(t.Wr.set("Online"),e instanceof _o&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.qr.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.qr.delete(i),t.Gr.removeTarget(i))}(t,e)}catch(n){Ii("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Ql(t,n)}else if(e instanceof vo?t.Gr.rt(e):e instanceof bo?t.Gr.ft(e):t.Gr.ct(e),!n.isEqual(Yi.min()))try{const e=await Gc(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Gr._t(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.qr.get(i);r&&t.qr.set(i,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((e=>{const n=t.qr.get(e);if(!n)return;t.qr.set(e,n.withResumeToken(sr.EMPTY_BYTE_STRING,n.snapshotVersion)),zl(t,e);const i=new Ba(n.target,e,1,n.sequenceNumber);ql(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Ii("RemoteStore","Failed to raise snapshot:",e),await Ql(t,e)}}async function Ql(t,e,n){if(!Oa(e))throw e;t.Kr.add(1),await Vl(t),t.Wr.set("Offline"),n||(n=()=>Gc(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ii("RemoteStore","Retrying IndexedDB access"),await n(),t.Kr.delete(1),await jl(t)}))}function Jl(t,e){return e().catch((n=>Ql(t,n,e)))}async function Zl(t){const e=Oi(t),n=uu(e);let i=e.Ur.length>0?e.Ur[e.Ur.length-1].batchId:-1;for(;tu(e);)try{const t=await Xc(e.localStore,i);if(null===t){0===e.Ur.length&&n.lr();break}i=t.batchId,eu(e,t)}catch(t){await Ql(e,t)}nu(e)&&iu(e)}function tu(t){return Wl(t)&&t.Ur.length<10}function eu(t,e){t.Ur.push(e);const n=uu(t);n.cr()&&n.br&&n.Pr(e.mutations)}function nu(t){return Wl(t)&&!uu(t).ar()&&t.Ur.length>0}function iu(t){uu(t).start()}async function ru(t){uu(t).Sr()}async function su(t){const e=uu(t);for(const n of t.Ur)e.Pr(n.mutations)}async function ou(t,e,n){const i=t.Ur.shift(),r=Ua.from(i,e,n);await Jl(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Zl(t)}async function au(t,e){e&&uu(t).br&&await async function(t,e){if(Js(n=e.code)&&n!==Mi.ABORTED){const n=t.Ur.shift();uu(t).hr(),await Jl(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Zl(t)}var n}(t,e),nu(t)&&iu(t)}async function cu(t,e){const n=Oi(t);e?(n.Kr.delete(2),await jl(n)):e||(n.Kr.add(2),await Vl(n),n.Wr.set("Unknown"))}function lu(t){return t.zr||(t.zr=function(t,e,n){const i=Oi(t);return i.Cr(),new Ml(e,i.nr,i.credentials,i.N,n)}(t.datastore,t.asyncQueue,{Si:Gl.bind(null,t),Ci:Yl.bind(null,t),Tr:Xl.bind(null,t)}),t.jr.push((async e=>{e?(t.zr.hr(),$l(t)?Hl(t):t.Wr.set("Unknown")):(await t.zr.stop(),Kl(t))}))),t.zr}function uu(t){return t.Hr||(t.Hr=function(t,e,n){const i=Oi(t);return i.Cr(),new Ll(e,i.nr,i.credentials,i.N,n)}(t.datastore,t.asyncQueue,{Si:ru.bind(null,t),Ci:au.bind(null,t),Vr:su.bind(null,t),vr:ou.bind(null,t)}),t.jr.push((async e=>{e?(t.Hr.hr(),await Zl(t)):(await t.Hr.stop(),t.Ur.length>0&&(Ii("RemoteStore",`Stopping write stream with ${t.Ur.length} pending writes`),t.Ur=[]))}))),t.Hr}class hu{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new hu(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Li(Mi.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function du(t,e){if(Si("AsyncQueue",`${e}: ${t}`),Oa(t))return new Li(Mi.UNAVAILABLE,`${e}: ${t}`);throw t}class fu{constructor(t){this.comparator=t?(e,n)=>t(e,n)||mr.comparator(e.key,n.key):(t,e)=>mr.comparator(t.key,e.key),this.keyedMap=co(),this.sortedSet=new to(this.comparator)}static emptySet(t){return new fu(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof fu))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new fu;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class pu{constructor(){this.Jr=new to(mr.comparator)}track(t){const e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):Ci():this.Jr=this.Jr.insert(e,t)}Yr(){const t=[];return this.Jr.inorderTraversal(((e,n)=>{t.push(n)})),t}}class gu{constructor(t,e,n,i,r,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(t,e,n,i){const r=[];return e.forEach((t=>{r.push({type:0,doc:t})})),new gu(t,e,fu.emptySet(e),r,n,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&hs(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class mu{constructor(){this.Xr=void 0,this.listeners=[]}}class yu{constructor(){this.queries=new kc((t=>ds(t)),hs),this.onlineState="Unknown",this.Zr=new Set}}async function vu(t,e){const n=Oi(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new mu),r)try{s.Xr=await n.onListen(i)}catch(t){const n=du(t,`Initialization of query '${fs(e.query)}' failed`);return void e.onError(n)}n.queries.set(i,s),s.listeners.push(e),e.eo(n.onlineState),s.Xr&&e.no(s.Xr)&&xu(n)}async function bu(t,e){const n=Oi(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),r=0===s.listeners.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function _u(t,e){const n=Oi(t);let i=!1;for(const t of e){const e=t.query,r=n.queries.get(e);if(r){for(const e of r.listeners)e.no(t)&&(i=!0);r.Xr=t}}i&&xu(n)}function wu(t,e,n){const i=Oi(t),r=i.queries.get(e);if(r)for(const t of r.listeners)t.onError(n);i.queries.delete(e)}function xu(t){t.Zr.forEach((t=>{t.next()}))}class Tu{constructor(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}no(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new gu(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.io?this.oo(t)&&(this.so.next(t),e=!0):this.ao(t,this.onlineState)&&(this.co(t),e=!0),this.ro=t,e}onError(t){this.so.error(t)}eo(t){this.onlineState=t;let e=!1;return this.ro&&!this.io&&this.ao(this.ro,t)&&(this.co(this.ro),e=!0),e}ao(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return!(this.options.uo&&n||t.docs.isEmpty()&&"Offline"!==e)}oo(t){if(t.docChanges.length>0)return!0;const e=this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}co(t){t=gu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)}}class Eu{constructor(t,e){this.payload=t,this.byteLength=e}ho(){return"metadata"in this.payload}}class Iu{constructor(t){this.N=t}zn(t){return Po(this.N,t)}Hn(t){return t.metadata.exists?Bo(this.N,t.document,!1):Mr.newNoDocument(this.zn(t.metadata.name),this.Jn(t.metadata.readTime))}Jn(t){return No(t)}}class Su{constructor(t,e,n){this.lo=t,this.localStore=e,this.N=n,this.queries=[],this.documents=[],this.progress=ku(t)}fo(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}wo(t){const e=new Map,n=new Iu(this.N);for(const i of t)if(i.metadata.queries){const t=n.zn(i.metadata.name);for(const n of i.metadata.queries){const i=(e.get(n)||fo()).add(t);e.set(n,i)}}return e}async complete(){const t=await async function(t,e,n,i){const r=Oi(t);let s=fo(),o=oo(),a=uo();for(const t of n){const n=e.zn(t.metadata.name);t.document&&(s=s.add(n)),o=o.insert(n,e.Hn(t)),a=a.insert(n,e.Jn(t.metadata.readTime))}const c=r.jn.newChangeBuffer({trackRemovals:!0}),l=await Qc(r,function(t){return ls(ns(tr.fromString(`__bundle__/docs/${t}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",(t=>Yc(t,c,o,Yi.min(),a).next((e=>(c.apply(t),e))).next((e=>r.ze.removeMatchingKeysForTargetId(t,l.targetId).next((()=>r.ze.addMatchingKeys(t,s,l.targetId))).next((()=>r.Qn.vn(t,e))).next((()=>e))))))}(this.localStore,new Iu(this.N),this.documents,this.lo.id),e=this.wo(this.documents);for(const t of this.queries)await nl(this.localStore,t,e.get(t.name));return this.progress.taskState="Success",new Bc(Object.assign({},this.progress),t)}}function ku(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class Au{constructor(t){this.key=t}}class Cu{constructor(t){this.key=t}}class Du{constructor(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=fo(),this.mutatedKeys=fo(),this.po=gs(t),this.Eo=new fu(this.po)}get To(){return this._o}Io(t,e){const n=e?e.Ao:new pu,i=e?e.Eo:this.Eo;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a=is(this.query)&&i.size===this.query.limit?i.last():null,c=rs(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const l=i.get(t),u=ps(this.query,e)?e:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ro(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.po(u,a)>0||c&&this.po(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),r=d?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))})),is(this.query)||rs(this.query))for(;s.size>this.query.limit;){const t=is(this.query)?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{Eo:s,Ao:n,Ln:o,mutatedKeys:r}}Ro(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const i=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;const r=t.Ao.Yr();r.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ci()}};return n(t)-n(e)}(t.type,e.type)||this.po(t.doc,e.doc))),this.bo(n);const s=e?this.Po():[],o=0===this.yo.size&&this.current?1:0,a=o!==this.mo;return this.mo=o,0!==r.length||a?{snapshot:new gu(this.query,t.Eo,i,r,t.mutatedKeys,0===o,a,!1),vo:s}:{vo:s}}eo(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new pu,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations}bo(t){t&&(t.addedDocuments.forEach((t=>this._o=this._o.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this._o=this._o.delete(t))),this.current=t.current)}Po(){if(!this.current)return[];const t=this.yo;this.yo=fo(),this.Eo.forEach((t=>{this.Vo(t.key)&&(this.yo=this.yo.add(t.key))}));const e=[];return t.forEach((t=>{this.yo.has(t)||e.push(new Cu(t))})),this.yo.forEach((n=>{t.has(n)||e.push(new Au(n))})),e}So(t){this._o=t.Gn,this.yo=fo();const e=this.Io(t.documents);return this.applyChanges(e,!0)}Do(){return gu.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class Nu{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Ou{constructor(t){this.key=t,this.Co=!1}}class Mu{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.No={},this.xo=new kc((t=>ds(t)),hs),this.ko=new Map,this.$o=new Set,this.Oo=new to(mr.comparator),this.Fo=new Map,this.Mo=new rl,this.Lo={},this.Bo=new Map,this.Uo=gc.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}async function Lu(t,e){const n=oh(t);let i,r;const s=n.xo.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.Do();else{const t=await Qc(n.localStore,ls(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);i=t.targetId,r=await Pu(n,e,i,"current"===s),n.isPrimaryClient&&Ul(n.remoteStore,t)}return r}async function Pu(t,e,n,i){t.Ko=(e,n,i)=>async function(t,e,n,i){let r=e.view.Io(n);r.Ln&&(r=await Zc(t.localStore,e.query,!1).then((({documents:t})=>e.view.Io(t,r))));const s=i&&i.targetChanges.get(e.targetId),o=e.view.applyChanges(r,t.isPrimaryClient,s);return Wu(t,e.targetId,o.vo),o.snapshot}(t,e,n,i);const r=await Zc(t.localStore,e,!0),s=new Du(e,r.Gn),o=s.Io(r.documents),a=yo.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState),c=s.applyChanges(o,t.isPrimaryClient,a);Wu(t,n,c.vo);const l=new Nu(e,n,s);return t.xo.set(e,l),t.ko.has(n)?t.ko.get(n).push(e):t.ko.set(n,[e]),c.snapshot}async function Ru(t,e){const n=Oi(t),i=n.xo.get(e),r=n.ko.get(i.targetId);if(r.length>1)return n.ko.set(i.targetId,r.filter((t=>!hs(t,e)))),void n.xo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Jc(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),Bl(n.remoteStore,i.targetId),Hu(n,i.targetId)})).catch(_c)):(Hu(n,i.targetId),await Jc(n.localStore,i.targetId,!0))}async function Fu(t,e){const n=Oi(t);try{const t=await function(t,e){const n=Oi(t),i=e.snapshotVersion;let r=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.jn.newChangeBuffer({trackRemovals:!0});r=n.Un;const o=[];e.targetChanges.forEach(((e,s)=>{const a=r.get(s);if(!a)return;o.push(n.ze.removeMatchingKeys(t,e.removedDocuments,s).next((()=>n.ze.addMatchingKeys(t,e.addedDocuments,s))));const c=e.resumeToken;if(c.approximateByteSize()>0){const l=a.withResumeToken(c,i).withSequenceNumber(t.currentSequenceNumber);r=r.insert(s,l),function(t,e,n){return Di(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,l,e)&&o.push(n.ze.updateTargetData(t,l))}}));let a=oo();if(e.documentUpdates.forEach(((i,r)=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push(Yc(t,s,e.documentUpdates,i,void 0).next((t=>{a=t}))),!i.isEqual(Yi.min())){const e=n.ze.getLastRemoteSnapshotVersion(t).next((e=>n.ze.setTargetsMetadata(t,t.currentSequenceNumber,i)));o.push(e)}return ka.waitFor(o).next((()=>s.apply(t))).next((()=>n.Qn.vn(t,a))).next((()=>a))})).then((t=>(n.Un=r,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.Fo.get(e);i&&(Di(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.Co=!0:t.modifiedDocuments.size>0?Di(i.Co):t.removedDocuments.size>0&&(Di(i.Co),i.Co=!1))})),await Yu(n,t,e)}catch(t){await _c(t)}}function ju(t,e,n){const i=Oi(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.xo.forEach(((n,i)=>{const r=i.view.eo(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=Oi(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.eo(e)&&(i=!0)})),i&&xu(n)}(i.eventManager,e),t.length&&i.No.Tr(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Vu(t,e,n){const i=Oi(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Fo.get(e),s=r&&r.key;if(s){let t=new to(mr.comparator);t=t.insert(s,Mr.newNoDocument(s,Yi.min()));const n=fo().add(s),r=new mo(Yi.min(),new Map,new io($i),t,n);await Fu(i,r),i.Oo=i.Oo.remove(s),i.Fo.delete(e),Gu(i)}else await Jc(i.localStore,e,!1).then((()=>Hu(i,e,n))).catch(_c)}async function Uu(t,e){const n=Oi(t),i=e.batch.batchId;try{const t=await function(t,e){const n=Oi(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.jn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=ka.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);Di(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&i.addEntry(e,n.commitVersion))}))})),o.next((()=>t.In.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.In.performConsistencyCheck(t))).next((()=>n.Qn.Pn(t,i)))}))}(n.localStore,e);zu(n,i,null),qu(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Yu(n,t)}catch(t){await _c(t)}}async function Bu(t,e,n){const i=Oi(t);try{const t=await function(t,e){const n=Oi(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.In.lookupMutationBatch(t,e).next((e=>(Di(null!==e),i=e.keys(),n.In.removeMutationBatch(t,e)))).next((()=>n.In.performConsistencyCheck(t))).next((()=>n.Qn.Pn(t,i)))}))}(i.localStore,e);zu(i,e,n),qu(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Yu(i,t)}catch(n){await _c(n)}}function qu(t,e){(t.Bo.get(e)||[]).forEach((t=>{t.resolve()})),t.Bo.delete(e)}function zu(t,e,n){const i=Oi(t);let r=i.Lo[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Lo[i.currentUser.toKey()]=r}}function Hu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.ko.get(e))t.xo.delete(i),n&&t.No.jo(i,n);t.ko.delete(e),t.isPrimaryClient&&t.Mo.cs(e).forEach((e=>{t.Mo.containsKey(e)||$u(t,e)}))}function $u(t,e){t.$o.delete(e.path.canonicalString());const n=t.Oo.get(e);null!==n&&(Bl(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.Fo.delete(n),Gu(t))}function Wu(t,e,n){for(const i of n)i instanceof Au?(t.Mo.addReference(i.key,e),Ku(t,i)):i instanceof Cu?(Ii("SyncEngine","Document no longer in limbo: "+i.key),t.Mo.removeReference(i.key,e),t.Mo.containsKey(i.key)||$u(t,i.key)):Ci()}function Ku(t,e){const n=e.key,i=n.path.canonicalString();t.Oo.get(n)||t.$o.has(i)||(Ii("SyncEngine","New document in limbo: "+n),t.$o.add(i),Gu(t))}function Gu(t){for(;t.$o.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){const e=t.$o.values().next().value;t.$o.delete(e);const n=new mr(tr.fromString(e)),i=t.Uo.next();t.Fo.set(i,new Ou(n)),t.Oo=t.Oo.insert(n,i),Ul(t.remoteStore,new Ba(ls(ns(n.path)),i,2,qi.T))}}async function Yu(t,e,n){const i=Oi(t),r=[],s=[],o=[];i.xo.isEmpty()||(i.xo.forEach(((t,a)=>{o.push(i.Ko(a,e,n).then((t=>{if(t){i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),r.push(t);const e=zc.kn(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.No.Tr(r),await async function(t,e){const n=Oi(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>ka.forEach(e,(e=>ka.forEach(e.Nn,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>ka.forEach(e.xn,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!Oa(t))throw t;Ii("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.Un.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.Un=n.Un.insert(e,r)}}}(i.localStore,s))}async function Xu(t,e){const n=Oi(t);if(!n.currentUser.isEqual(e)){Ii("SyncEngine","User change. New user:",e.toKey());const t=await Kc(n.localStore,e);n.currentUser=e,function(t,e){t.Bo.forEach((t=>{t.forEach((t=>{t.reject(new Li(Mi.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Yu(n,t.Wn)}}function Qu(t,e){const n=Oi(t),i=n.Fo.get(e);if(i&&i.Co)return fo().add(i.key);{let t=fo();const i=n.ko.get(e);if(!i)return t;for(const e of i){const i=n.xo.get(e);t=t.unionWith(i.view.To)}return t}}async function Ju(t,e){const n=Oi(t),i=await Zc(n.localStore,e.query,!0),r=e.view.So(i);return n.isPrimaryClient&&Wu(n,e.targetId,r.vo),r}async function Zu(t){const e=Oi(t);return el(e.localStore).then((t=>Yu(e,t)))}async function th(t,e,n,i){const r=Oi(t),s=await function(t,e){const n=Oi(t),i=Oi(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",(t=>i.Xt(t,e).next((e=>e?n.Qn.Pn(t,e):ka.resolve(null)))))}(r.localStore,e);null!==s?("pending"===n?await Zl(r.remoteStore):"acknowledged"===n||"rejected"===n?(zu(r,e,i||null),qu(r,e),function(t,e){Oi(Oi(t).In).te(e)}(r.localStore,e)):Ci(),await Yu(r,s)):Ii("SyncEngine","Cannot apply mutation batch with id: "+e)}async function eh(t,e,n){const i=Oi(t),r=[],s=[];for(const t of e){let e;const n=i.ko.get(t);if(n&&0!==n.length){e=await Qc(i.localStore,ls(n[0]));for(const t of n){const e=i.xo.get(t),n=await Ju(i,e);n.snapshot&&s.push(n.snapshot)}}else{const n=await tl(i.localStore,t);e=await Qc(i.localStore,n),await Pu(i,nh(n),t,!1)}r.push(e)}return i.No.Tr(s),r}function nh(t){return es(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ih(t){const e=Oi(t);return Oi(Oi(e.localStore).persistence).pn()}async function rh(t,e,n,i){const r=Oi(t);if(r.qo)Ii("SyncEngine","Ignoring unexpected query state notification.");else if(r.ko.has(e))switch(n){case"current":case"not-current":{const t=await el(r.localStore),i=mo.createSynthesizedRemoteEventForCurrentChange(e,"current"===n);await Yu(r,t,i);break}case"rejected":await Jc(r.localStore,e,!0),Hu(r,e,i);break;default:Ci()}}async function sh(t,e,n){const i=oh(t);if(i.qo){for(const t of e){if(i.ko.has(t)){Ii("SyncEngine","Adding an already active target "+t);continue}const e=await tl(i.localStore,t),n=await Qc(i.localStore,e);await Pu(i,nh(e),n.targetId,!1),Ul(i.remoteStore,n)}for(const t of n)i.ko.has(t)&&await Jc(i.localStore,t,!1).then((()=>{Bl(i.remoteStore,t),Hu(i,t)})).catch(_c)}}function oh(t){const e=Oi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fu.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qu.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Vu.bind(null,e),e.No.Tr=_u.bind(null,e.eventManager),e.No.jo=wu.bind(null,e.eventManager),e}function ah(t){const e=Oi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Uu.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bu.bind(null,e),e}class ch{constructor(){this.synchronizeTabs=!1}async initialize(t){this.N=Dl(t.databaseInfo.databaseId),this.sharedClientState=this.Wo(t),this.persistence=this.Go(t),await this.persistence.start(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t)}zo(t){return null}Ho(t){return Wc(this.persistence,new Hc,t.initialUser,this.N)}Go(t){return new ul(dl.Ns,this.N)}Wo(t){return new xl}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class lh extends ch{constructor(t,e,n){super(),this.Jo=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await async function(t){const e=Oi(t);return e.persistence.runTransaction("Synchronize last document change read time","readonly",(t=>function(t){const e=Oc(t);let n=Yi.min();return e.Kt({index:ga.readTimeIndex,reverse:!0},((t,e,i)=>{e.readTime&&(n=Wa(e.readTime)),i.done()})).next((()=>n))}(t))).then((t=>{e.Kn=t}))}(this.localStore),await this.Jo.initialize(this,t),await ah(this.Jo.syncEngine),await Zl(this.Jo.remoteStore),await this.persistence.nn((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve())))}Ho(t){return Wc(this.persistence,new Hc,t.initialUser,this.N)}zo(t){const e=this.persistence.referenceDelegate.garbageCollector;return new Tc(e,t.asyncQueue)}Go(t){const e=Uc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ac.withCacheSize(this.cacheSizeBytes):ac.DEFAULT;return new Fc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Al(),Cl(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(t){return new xl}}class uh extends lh{constructor(t,e){super(t,e,!1),this.Jo=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.Jo.syncEngine;this.sharedClientState instanceof wl&&(this.sharedClientState.syncEngine={_i:th.bind(null,e),mi:rh.bind(null,e),gi:sh.bind(null,e),pn:ih.bind(null,e),wi:Zu.bind(null,e)},await this.sharedClientState.start()),await this.persistence.nn((async t=>{await async function(t,e){const n=Oi(t);if(oh(n),ah(n),!0===e&&!0!==n.qo){const t=n.sharedClientState.getAllActiveQueryTargets(),e=await eh(n,t.toArray());n.qo=!0,await cu(n.remoteStore,!0);for(const t of e)Ul(n.remoteStore,t)}else if(!1===e&&!1!==n.qo){const t=[];let e=Promise.resolve();n.ko.forEach(((i,r)=>{n.sharedClientState.isLocalQueryTarget(r)?t.push(r):e=e.then((()=>(Hu(n,r),Jc(n.localStore,r,!0)))),Bl(n.remoteStore,r)})),await e,await eh(n,t),function(t){const e=Oi(t);e.Fo.forEach(((t,n)=>{Bl(e.remoteStore,n)})),e.Mo.us(),e.Fo=new Map,e.Oo=new to(mr.comparator)}(n),n.qo=!1,await cu(n.remoteStore,!1)}}(this.Jo.syncEngine,t),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop())}))}Wo(t){const e=Al();if(!wl.bt(e))throw new Li(Mi.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Uc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new wl(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class hh{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>ju(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xu.bind(null,this.syncEngine),await cu(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new yu}createDatastore(t){const e=Dl(t.databaseInfo.databaseId),n=(i=t.databaseInfo,new kl(i));var i;return function(t,e,n){return new Pl(t,e,n)}(t.credentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,i=t.asyncQueue,r=t=>ju(this.syncEngine,t,0),s=El.bt()?new El:new Tl,new Fl(e,n,i,r,s);var e,n,i,r,s}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new Mu(t,e,n,i,r,s);return o&&(a.qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=Oi(t);Ii("RemoteStore","RemoteStore shutting down."),e.Kr.add(5),await Vl(e),e.Qr.shutdown(),e.Wr.set("Unknown")}(this.remoteStore)}}function dh(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}class fh{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Yo(this.observer.next,t)}error(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Xo(){this.muted=!0}Yo(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class ph{constructor(t,e){this.Zo=t,this.N=e,this.metadata=new Pi,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then((t=>{t&&t.ho()?this.metadata.resolve(t.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==t?void 0:t.payload)}`))}),(t=>this.metadata.reject(t)))}close(){return this.Zo.cancel()}async getMetadata(){return this.metadata.promise}async Qo(){return await this.getMetadata(),this.ea()}async ea(){const t=await this.na();if(null===t)return null;const e=this.ta.decode(t),n=Number(e);isNaN(n)&&this.sa(`length string (${e}) is not valid number`);const i=await this.ia(n);return new Eu(JSON.parse(i),t.length+n)}ra(){return this.buffer.findIndex((t=>t==="{".charCodeAt(0)))}async na(){for(;this.ra()<0&&!await this.oa(););if(0===this.buffer.length)return null;const t=this.ra();t<0&&this.sa("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async ia(t){for(;this.buffer.length<t;)await this.oa()&&this.sa("Reached the end of bundle when more is expected.");const e=this.ta.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}sa(t){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${t}`)}async oa(){const t=await this.Zo.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}class gh{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Li(Mi.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const e=await async function(t,e){const n=Oi(t),i=jo(n.N)+"/documents",r={documents:e.map((t=>Lo(n.N,t)))},s=await n.Ki("BatchGetDocuments",i,r),o=new Map;s.forEach((t=>{const e=function(t,e){return"found"in e?function(t,e){Di(!!e.found),e.found.name,e.found.updateTime;const n=Po(t,e.found.name),i=No(e.found.updateTime),r=new Nr({mapValue:{fields:e.found.fields}});return Mr.newFoundDocument(n,i,r)}(t,e):"missing"in e?function(t,e){Di(!!e.missing),Di(!!e.readTime);const n=Po(t,e.missing),i=No(e.readTime);return Mr.newNoDocument(n,i)}(t,e):Ci()}(n.N,t);o.set(e.key.toString(),e)}));const a=[];return e.forEach((t=>{const e=o.get(t.toString());Di(!!e),a.push(e)})),a}(this.datastore,t);return e.forEach((t=>this.recordVersion(t))),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())}delete(t){this.write(new Ks(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const t=this.readVersions;this.mutations.forEach((e=>{t.delete(e.key.toString())})),t.forEach(((t,e)=>{const n=mr.fromPath(e);this.mutations.push(new Gs(n,this.precondition(n)))})),await async function(t,e){const n=Oi(t),i=jo(n.N)+"/documents",r={writes:e.map((t=>qo(n.N,t)))};await n.Li("Commit",i,r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Ci();e=Yi.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Li(Mi.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ls.updateTime(e):Ls.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Yi.min()))throw new Li(Mi.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ls.updateTime(e)}return Ls.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class mh{constructor(t,e,n,i){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=i,this.aa=5,this.rr=new Nl(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){this.rr.Xi((async()=>{const t=new gh(this.datastore),e=this.ua(t);e&&e.then((e=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(e)})).catch((t=>{this.ha(t)}))))})).catch((t=>{this.ha(t)}))}))}ua(t){try{const e=this.updateFunction(t);return!fr(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ha(t){this.aa>0&&this.la(t)?(this.aa-=1,this.asyncQueue.enqueueAndForget((()=>(this.ca(),Promise.resolve())))):this.deferred.reject(t)}la(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!Js(e)}return!1}}class yh{constructor(t,e,n){this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=_i.UNAUTHENTICATED,this.clientId=Hi.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(e,(async t=>{Ii("FirestoreClient","Received user=",t.uid),await this.credentialListener(t),this.user=t}))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.credentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Li(Mi.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.shutdown(),t.resolve()}catch(e){const n=du(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function vh(t,e){t.asyncQueue.verifyOperationInProgress(),Ii("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await Kc(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t.offlineComponents=e}async function bh(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _h(t);Ii("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener((t=>async function(t,e){const n=Oi(t);n.asyncQueue.verifyOperationInProgress(),Ii("RemoteStore","RemoteStore received new credentials");const i=Wl(n);n.Kr.add(3),await Vl(n),i&&n.Wr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Kr.delete(3),await jl(n)}(e.remoteStore,t))),t.onlineComponents=e}async function _h(t){return t.offlineComponents||(Ii("FirestoreClient","Using default OfflineComponentProvider"),await vh(t,new ch)),t.offlineComponents}async function wh(t){return t.onlineComponents||(Ii("FirestoreClient","Using default OnlineComponentProvider"),await bh(t,new hh)),t.onlineComponents}function xh(t){return _h(t).then((t=>t.persistence))}function Th(t){return _h(t).then((t=>t.localStore))}function Eh(t){return wh(t).then((t=>t.remoteStore))}function Ih(t){return wh(t).then((t=>t.syncEngine))}async function Sh(t){const e=await wh(t),n=e.eventManager;return n.onListen=Lu.bind(null,e.syncEngine),n.onUnlisten=Ru.bind(null,e.syncEngine),n}function kh(t,e,n={}){const i=new Pi;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const s=new fh({next:s=>{e.enqueueAndForget((()=>bu(t,o)));const a=s.docs.has(n);!a&&s.fromCache?r.reject(new Li(Mi.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&i&&"server"===i.source?r.reject(new Li(Mi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:t=>r.reject(t)}),o=new Tu(ns(n.path),s,{includeMetadataChanges:!0,uo:!0});return vu(t,o)}(await Sh(t),t.asyncQueue,e,n,i))),i.promise}function Ah(t,e,n={}){const i=new Pi;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const s=new fh({next:n=>{e.enqueueAndForget((()=>bu(t,o))),n.fromCache&&"server"===i.source?r.reject(new Li(Mi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:t=>r.reject(t)}),o=new Tu(n,s,{includeMetadataChanges:!0,uo:!0});return vu(t,o)}(await Sh(t),t.asyncQueue,e,n,i))),i.promise}class Ch{constructor(t,e,n,i,r,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Dh{constructor(t,e){this.projectId=t,this.database=e||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Dh&&t.projectId===this.projectId&&t.database===this.database}}const Nh=new Map;function Oh(t,e,n){if(!n)throw new Li(Mi.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Mh(t,e,n,i){if(!0===e&&!0===i)throw new Li(Mi.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Lh(t){if(!mr.isDocumentKey(t))throw new Li(Mi.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ph(t){if(mr.isDocumentKey(t))throw new Li(Mi.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Rh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){if(t.constructor){const e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":Ci()}function Fh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Li(Mi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rh(t);throw new Li(Mi.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function jh(t,e){if(e<=0)throw new Li(Mi.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class Vh{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Li(Mi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Li(Mi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Mh("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Uh{constructor(t,e){this._credentials=e,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vh({}),this._settingsFrozen=!1,t instanceof Dh?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Li(Mi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dh(t.options.projectId)}(t))}get app(){if(!this._app)throw new Li(Mi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Li(Mi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vh(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Fi;switch(t.type){case"gapi":const e=t.client;return Di(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Bi(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Li(Mi.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Nh.get(t);e&&(Ii("ComponentProvider","Removing Datastore"),Nh.delete(t),e.terminate())}(this),Promise.resolve()}}function Bh(t,e,n,i={}){var r;const s=(t=Fh(t,Uh))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&ki("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=_i.MOCK_USER;else{e=(0,o.Sg)(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Li(Mi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new _i(s)}t._credentials=new ji(new Ri(e,n))}}class qh{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hh(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new qh(this.firestore,t,this._key)}}class zh{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new zh(this.firestore,t,this._query)}}class Hh extends zh{constructor(t,e,n){super(t,e,ns(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new qh(this.firestore,null,new mr(t))}withConverter(t){return new Hh(this.firestore,t,this._path)}}function $h(t,e,...n){if(t=(0,o.m9)(t),Oh("collection","path",e),t instanceof Uh){const i=tr.fromString(e,...n);return Ph(i),new Hh(t,null,i)}{if(!(t instanceof qh||t instanceof Hh))throw new Li(Mi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(tr.fromString(e,...n));return Ph(i),new Hh(t.firestore,null,i)}}function Wh(t,e){if(t=Fh(t,Uh),Oh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Li(Mi.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zh(t,null,function(t){return new ts(tr.emptyPath(),t)}(e))}function Kh(t,e,...n){if(t=(0,o.m9)(t),1===arguments.length&&(e=Hi.I()),Oh("doc","path",e),t instanceof Uh){const i=tr.fromString(e,...n);return Lh(i),new qh(t,null,new mr(i))}{if(!(t instanceof qh||t instanceof Hh))throw new Li(Mi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(tr.fromString(e,...n));return Lh(i),new qh(t.firestore,t instanceof Hh?t.converter:null,new mr(i))}}function Gh(t,e){return t=(0,o.m9)(t),e=(0,o.m9)(e),(t instanceof qh||t instanceof Hh)&&(e instanceof qh||e instanceof Hh)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Yh(t,e){return t=(0,o.m9)(t),e=(0,o.m9)(e),t instanceof zh&&e instanceof zh&&t.firestore===e.firestore&&hs(t._query,e._query)&&t.converter===e.converter}class Xh{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Nl(this,"async_queue_retry"),this.Ea=()=>{const t=Cl();t&&Ii("AsyncQueue","Visibility state changed to "+t.visibilityState),this.rr.tr()};const t=Cl();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ta(),this.Ia(t)}enterRestrictedMode(t){if(!this.wa){this.wa=!0,this.ya=t||!1;const e=Cl();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ea)}}enqueue(t){if(this.Ta(),this.wa)return new Promise((()=>{}));const e=new Pi;return this.Ia((()=>this.wa&&this.ya?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.da.push(t),this.Aa())))}async Aa(){if(0!==this.da.length){try{await this.da[0](),this.da.shift(),this.rr.reset()}catch(t){if(!Oa(t))throw t;Ii("AsyncQueue","Operation failed with retryable error: "+t)}this.da.length>0&&this.rr.Xi((()=>this.Aa()))}}Ia(t){const e=this.fa.then((()=>(this.ga=!0,t().catch((t=>{throw this.ma=t,this.ga=!1,Si("INTERNAL UNHANDLED ERROR: ",function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((t=>(this.ga=!1,t))))));return this.fa=e,e}enqueueAfterDelay(t,e,n){this.Ta(),this.pa.indexOf(t)>-1&&(e=0);const i=hu.createAndSchedule(this,t,e,n,(t=>this.Ra(t)));return this._a.push(i),i}Ta(){this.ma&&Ci()}verifyOperationInProgress(){}async ba(){let t;do{t=this.fa,await t}while(t!==this.fa)}Pa(t){for(const e of this._a)if(e.timerId===t)return!0;return!1}va(t){return this.ba().then((()=>{this._a.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this._a)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.ba()}))}Va(t){this.pa.push(t)}Ra(t){const e=this._a.indexOf(t);this._a.splice(e,1)}}function Qh(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const t of["next","error","complete"])if(t in n&&"function"==typeof n[t])return!0;return!1}(t)}class Jh{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}const Zh=-1;class td extends Uh{constructor(t,e){super(t,e),this.type="firestore",this._queue=new Xh,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||rd(this),this._firestoreClient.terminate()}}function ed(t,e){const n=(0,i.qX)(t,"firestore");if(n.isInitialized()){const t=n.getImmediate(),i=n.getOptions();if((0,o.vZ)(i,e))return t;throw new Li(Mi.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==e.cacheSizeBytes&&-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Li(Mi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e})}function nd(t=(0,i.Mq)()){return(0,i.qX)(t,"firestore").getImmediate()}function id(t){return t._firestoreClient||rd(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function rd(t){var e;const n=t._freezeSettings(),i=function(t,e,n,i){return new Ch(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new yh(t._credentials,t._queue,i)}function sd(t,e){gd(t=Fh(t,td));const n=id(t),i=t._freezeSettings(),r=new hh;return ad(n,r,new lh(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function od(t){gd(t=Fh(t,td));const e=id(t),n=t._freezeSettings(),i=new hh;return ad(e,i,new uh(i,n.cacheSizeBytes))}function ad(t,e,n){const i=new Pi;return t.asyncQueue.enqueue((async()=>{try{await vh(t,n),await bh(t,e),i.resolve()}catch(t){if(!function(t){return"FirebaseError"===t.name?t.code===Mi.FAILED_PRECONDITION||t.code===Mi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(t))throw t;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),i.reject(t)}})).then((()=>i.promise))}function cd(t){if(t._initialized&&!t._terminated)throw new Li(Mi.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Pi;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(t){if(!Ca.bt())return Promise.resolve();const e=t+"main";await Ca.delete(e)}(Uc(t._databaseId,t._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function ld(t){return function(t){const e=new Pi;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e){const n=Oi(t);Wl(n.remoteStore)||Ii("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const t=await function(t){const e=Oi(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(t=>e.In.getHighestUnacknowledgedBatchId(t)))}(n.localStore);if(-1===t)return void e.resolve();const i=n.Bo.get(t)||[];i.push(e),n.Bo.set(t,i)}catch(t){const n=du(t,"Initialization of waitForPendingWrites() operation failed");e.reject(n)}}(await Ih(t),e))),e.promise}(id(t=Fh(t,td)))}function ud(t){return function(t){return t.asyncQueue.enqueue((async()=>{const e=await xh(t),n=await Eh(t);return e.setNetworkEnabled(!0),function(t){const e=Oi(t);return e.Kr.delete(0),jl(e)}(n)}))}(id(t=Fh(t,td)))}function hd(t){return function(t){return t.asyncQueue.enqueue((async()=>{const e=await xh(t),n=await Eh(t);return e.setNetworkEnabled(!1),async function(t){const e=Oi(t);e.Kr.add(0),await Vl(e),e.Wr.set("Offline")}(n)}))}(id(t=Fh(t,td)))}function dd(t){return(0,i.wN)(t.app,"firestore"),t._delete()}function fd(t,e){const n=id(t=Fh(t,td)),i=new Jh;return function(t,e,n,i){const r=function(t,e){let n;return n="string"==typeof t?(new TextEncoder).encode(t):t,function(t,e){return new ph(t,e)}(function(t,e){if(t instanceof Uint8Array)return dh(t,e);if(t instanceof ArrayBuffer)return dh(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),e)}(n,Dl(e));t.asyncQueue.enqueueAndForget((async()=>{!function(t,e,n){const i=Oi(t);(async function(t,e,n){try{const i=await e.getMetadata();if(await function(t,e){const n=Oi(t),i=No(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(t=>n.Je.getBundleMetadata(t,e.id))).then((t=>!!t&&t.createTime.compareTo(i)>=0))}(t.localStore,i))return await e.close(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(i));n._updateProgress(ku(i));const r=new Su(i,t.localStore,e.N);let s=await e.Qo();for(;s;){const t=await r.fo(s);t&&n._updateProgress(t),s=await e.Qo()}const o=await r.complete();await Yu(t,o.Tn,void 0),await function(t,e){const n=Oi(t);return n.persistence.runTransaction("Save bundle","readwrite",(t=>n.Je.saveBundleMetadata(t,e)))}(t.localStore,i),n._completeWith(o.progress)}catch(t){ki("SyncEngine",`Loading bundle failed with ${t}`),n._failWith(t)}})(i,e,n).then((()=>{i.sharedClientState.notifyBundleLoaded()}))}(await Ih(t),r,i)}))}(n,t._databaseId,e,i),i}function pd(t,e){return function(t,e){return t.asyncQueue.enqueue((async()=>function(t,e){const n=Oi(t);return n.persistence.runTransaction("Get named query","readonly",(t=>n.Je.getNamedQuery(t,e)))}(await Th(t),e)))}(id(t=Fh(t,td)),e).then((e=>e?new zh(t,null,e.query):null))}function gd(t){if(t._initialized||t._terminated)throw new Li(Mi.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class md{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Li(Mi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}function yd(){return new md("__name__")}class vd{constructor(t){this._byteString=t}static fromBase64String(t){try{return new vd(sr.fromBase64String(t))}catch(t){throw new Li(Mi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new vd(sr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class bd{constructor(t){this._methodName=t}}class _d{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Li(Mi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Li(Mi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return $i(this._lat,t._lat)||$i(this._long,t._long)}}const wd=/^__.*__$/;class xd{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new zs(t,this.data,this.fieldMask,e,this.fieldTransforms):new qs(t,this.data,e,this.fieldTransforms)}}class Td{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new zs(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Ed(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ci()}}class Id{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.N=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Sa(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(t){return new Id(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Ca({path:n,xa:!1});return i.ka(t),i}$a(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Ca({path:n,xa:!1});return i.Sa(),i}Oa(t){return this.Ca({path:void 0,xa:!0})}Fa(t){return $d(t,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Sa(){if(this.path)for(let t=0;t<this.path.length;t++)this.ka(this.path.get(t))}ka(t){if(0===t.length)throw this.Fa("Document fields must not be empty");if(Ed(this.Da)&&wd.test(t))throw this.Fa('Document fields cannot begin and end with "__"')}}class Sd{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.N=n||Dl(t)}Ba(t,e,n,i=!1){return new Id({Da:t,methodName:e,La:n,path:nr.emptyPath(),xa:!1,Ma:i},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function kd(t){const e=t._freezeSettings(),n=Dl(t._databaseId);return new Sd(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ad(t,e,n,i,r,s={}){const o=t.Ba(s.merge||s.mergeFields?2:0,e,n,r);Bd("Data must be an object, but it was:",o,i);const a=Vd(i,o);let c,l;if(s.merge)c=new ir(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=qd(e,i,n);if(!o.contains(r))throw new Li(Mi.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Wd(t,r)||t.push(r)}c=new ir(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new xd(new Nr(a),c,l)}class Cd extends bd{_toFieldTransform(t){if(2!==t.Da)throw 1===t.Da?t.Fa(`${this._methodName}() can only appear at the top level of your update data`):t.Fa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Cd}}function Dd(t,e,n){return new Id({Da:3,La:e.settings.La,methodName:t._methodName,xa:n},e.databaseId,e.N,e.ignoreUndefinedProperties)}class Nd extends bd{_toFieldTransform(t){return new Os(t.path,new Es)}isEqual(t){return t instanceof Nd}}class Od extends bd{constructor(t,e){super(t),this.Ua=e}_toFieldTransform(t){const e=Dd(this,t,!0),n=this.Ua.map((t=>jd(t,e))),i=new Is(n);return new Os(t.path,i)}isEqual(t){return this===t}}class Md extends bd{constructor(t,e){super(t),this.Ua=e}_toFieldTransform(t){const e=Dd(this,t,!0),n=this.Ua.map((t=>jd(t,e))),i=new ks(n);return new Os(t.path,i)}isEqual(t){return this===t}}class Ld extends bd{constructor(t,e){super(t),this.qa=e}_toFieldTransform(t){const e=new Cs(t.N,bs(t.N,this.qa));return new Os(t.path,e)}isEqual(t){return this===t}}function Pd(t,e,n,i){const r=t.Ba(1,e,n);Bd("Data must be an object, but it was:",r,i);const s=[],a=Nr.empty();Qi(i,((t,i)=>{const c=Hd(e,t,n);i=(0,o.m9)(i);const l=r.$a(c);if(i instanceof Cd)s.push(c);else{const t=jd(i,l);null!=t&&(s.push(c),a.set(c,t))}}));const c=new ir(s);return new Td(a,c,r.fieldTransforms)}function Rd(t,e,n,i,r,s){const a=t.Ba(1,e,n),c=[qd(e,i,n)],l=[r];if(s.length%2!=0)throw new Li(Mi.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<s.length;t+=2)c.push(qd(e,s[t])),l.push(s[t+1]);const u=[],h=Nr.empty();for(let t=c.length-1;t>=0;--t)if(!Wd(u,c[t])){const e=c[t];let n=l[t];n=(0,o.m9)(n);const i=a.$a(e);if(n instanceof Cd)u.push(e);else{const t=jd(n,i);null!=t&&(u.push(e),h.set(e,t))}}const d=new ir(u);return new Td(h,d,a.fieldTransforms)}function Fd(t,e,n,i=!1){return jd(n,t.Ba(i?4:3,e))}function jd(t,e){if(Ud(t=(0,o.m9)(t)))return Bd("Unsupported field value:",e,t),Vd(t,e);if(t instanceof bd)return function(t,e){if(!Ed(e.Da))throw e.Fa(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Fa(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xa&&4!==e.Da)throw e.Fa("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=jd(r,e.Oa(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,o.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return bs(e.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Gi.fromDate(t);return{timestampValue:Ao(e.N,n)}}if(t instanceof Gi){const n=new Gi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ao(e.N,n)}}if(t instanceof _d)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vd)return{bytesValue:Co(e.N,t._byteString)};if(t instanceof qh){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.Fa(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Oo(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Fa(`Unsupported field value: ${Rh(t)}`)}(t,e)}function Vd(t,e){const n={};return Ji(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qi(t,((t,i)=>{const r=jd(i,e.Na(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function Ud(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Gi||t instanceof _d||t instanceof vd||t instanceof qh||t instanceof bd)}function Bd(t,e,n){if(!Ud(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=Rh(n);throw"an object"===i?e.Fa(t+" a custom object"):e.Fa(t+" "+i)}}function qd(t,e,n){if((e=(0,o.m9)(e))instanceof md)return e._internalPath;if("string"==typeof e)return Hd(t,e);throw $d("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}const zd=new RegExp("[~\\*/\\[\\]]");function Hd(t,e,n){if(e.search(zd)>=0)throw $d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new md(...e.split("."))._internalPath}catch(i){throw $d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $d(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new Li(Mi.INVALID_ARGUMENT,a+t+c)}function Wd(t,e){return t.some((t=>t.isEqual(e)))}class Kd{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new qh(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Gd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Yd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Gd extends Kd{data(){return super.data()}}function Yd(t,e){return"string"==typeof e?Hd(t,e):e instanceof md?e._internalPath:e._delegate._internalPath}class Xd{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Qd extends Kd{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Yd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Jd extends Qd{data(t={}){return super.data(t)}}class Zd{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Xd(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Jd(this._firestore,this._userDataWriter,n.key,n,new Xd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Li(Mi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>({type:"added",doc:new Jd(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Xd(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:e++})))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new Jd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Xd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:tf(e.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function tf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ci()}}function ef(t,e){return t instanceof Qd&&e instanceof Qd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Zd&&e instanceof Zd&&t._firestore===e._firestore&&Yh(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function nf(t){if(rs(t)&&0===t.explicitOrderBy.length)throw new Li(Mi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rf{}function sf(t,...e){for(const n of e)t=n._apply(t);return t}class of extends rf{constructor(t,e,n){super(),this.Ka=t,this.ja=e,this.Qa=n,this.type="where"}_apply(t){const e=kd(t.firestore),n=function(t,e,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Li(Mi.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){wf(o,s);const e=[];for(const n of o)e.push(_f(i,t,n));a={arrayValue:{values:e}}}else a=_f(i,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||wf(o,s),a=Fd(n,"where",o,"in"===s||"not-in"===s);const c=Vr.create(r,s,a);return function(t,e){if(e.v()){const n=os(t);if(null!==n&&!n.isEqual(e.field))throw new Li(Mi.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${e.field.toString()}'`);const i=ss(t);null!==i&&xf(0,e.field,i)}const n=function(t,e){for(const n of t.filters)if(e.indexOf(n.op)>=0)return n.op;return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new Li(Mi.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Li(Mi.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}(t,c),c}(t._query,0,e,t.firestore._databaseId,this.Ka,this.ja,this.Qa);return new zh(t.firestore,t.converter,function(t,e){const n=t.filters.concat([e]);return new ts(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))}}function af(t,e,n){const i=e,r=Yd("where",t);return new of(r,i,n)}class cf extends rf{constructor(t,e){super(),this.Ka=t,this.Wa=e,this.type="orderBy"}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new Li(Mi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Li(Mi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const i=new Xr(e,n);return function(t,e){if(null===ss(t)){const n=os(t);null!==n&&xf(0,n,e.field)}}(t,i),i}(t._query,this.Ka,this.Wa);return new zh(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new ts(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}function lf(t,e="asc"){const n=e,i=Yd("orderBy",t);return new cf(i,n)}class uf extends rf{constructor(t,e,n){super(),this.type=t,this.Ga=e,this.za=n}_apply(t){return new zh(t.firestore,t.converter,us(t._query,this.Ga,this.za))}}function hf(t){return jh("limit",t),new uf("limit",t,"F")}function df(t){return jh("limitToLast",t),new uf("limitToLast",t,"L")}class ff extends rf{constructor(t,e,n){super(),this.type=t,this.Ha=e,this.Ja=n}_apply(t){const e=bf(t,this.type,this.Ha,this.Ja);return new zh(t.firestore,t.converter,function(t,e){return new ts(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}function pf(...t){return new ff("startAt",t,!0)}function gf(...t){return new ff("startAfter",t,!1)}class mf extends rf{constructor(t,e,n){super(),this.type=t,this.Ha=e,this.Ja=n}_apply(t){const e=bf(t,this.type,this.Ha,this.Ja);return new zh(t.firestore,t.converter,function(t,e){return new ts(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))}}function yf(...t){return new mf("endBefore",t,!0)}function vf(...t){return new mf("endAt",t,!1)}function bf(t,e,n,i){if(n[0]=(0,o.m9)(n[0]),n[0]instanceof Kd)return function(t,e,n,i,r){if(!i)throw new Li(Mi.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const n of cs(t))if(n.field.isKeyField())s.push(Er(e,i.key));else{const t=i.data.field(n.field);if(ur(t))throw new Li(Mi.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=n.field.canonicalString();throw new Li(Mi.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${t}' (used as the orderBy) does not exist.`)}s.push(t)}return new Gr(s,r)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=kd(t.firestore);return function(t,e,n,i,r,s){const o=t.explicitOrderBy;if(r.length>o.length)throw new Li(Mi.INVALID_ARGUMENT,`Too many arguments provided to ${i}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let s=0;s<r.length;s++){const c=r[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Li(Mi.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${i}(), but got a ${typeof c}`);if(!as(t)&&-1!==c.indexOf("/"))throw new Li(Mi.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${i}() must be a plain document ID, but '${c}' contains a slash.`);const n=t.path.child(tr.fromString(c));if(!mr.isDocumentKey(n))throw new Li(Mi.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${i}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const r=new mr(n);a.push(Er(e,r))}else{const t=Fd(n,i,c);a.push(t)}}return new Gr(a,s)}(t._query,t.firestore._databaseId,r,e,n,i)}}function _f(t,e,n){if("string"==typeof(n=(0,o.m9)(n))){if(""===n)throw new Li(Mi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!as(e)&&-1!==n.indexOf("/"))throw new Li(Mi.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(tr.fromString(n));if(!mr.isDocumentKey(i))throw new Li(Mi.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Er(t,new mr(i))}if(n instanceof qh)return Er(t,n._key);throw new Li(Mi.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rh(n)}.`)}function wf(t,e){if(!Array.isArray(t)||0===t.length)throw new Li(Mi.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new Li(Mi.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function xf(t,e,n){if(!n.isEqual(e))throw new Li(Mi.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Tf{convertValue(t,e="none"){switch(yr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return cr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(lr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Ci()}}convertObject(t,e){const n={};return Qi(t.fields,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertGeoPoint(t){return new _d(cr(t.latitude),cr(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=hr(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(dr(t));default:return null}}convertTimestamp(t){const e=ar(t);return new Gi(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=tr.fromString(t);Di(ia(n));const i=new Dh(n.get(1),n.get(3)),r=new mr(n.popFirst(5));return i.isEqual(e)||Si(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}function Ef(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class If extends Tf{constructor(t){super(),this.firestore=t}convertBytes(t){return new vd(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new qh(this.firestore,null,e)}}class Sf{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=kd(t)}set(t,e,n){this._verifyNotCommitted();const i=kf(t,this._firestore),r=Ef(i.converter,e,n),s=Ad(this._dataReader,"WriteBatch.set",i._key,r,null!==i.converter,n);return this._mutations.push(s.toMutation(i._key,Ls.none())),this}update(t,e,n,...i){this._verifyNotCommitted();const r=kf(t,this._firestore);let s;return s="string"==typeof(e=(0,o.m9)(e))||e instanceof md?Rd(this._dataReader,"WriteBatch.update",r._key,e,n,i):Pd(this._dataReader,"WriteBatch.update",r._key,e),this._mutations.push(s.toMutation(r._key,Ls.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=kf(t,this._firestore);return this._mutations=this._mutations.concat(new Ks(e._key,Ls.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Li(Mi.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kf(t,e){if((t=(0,o.m9)(t)).firestore!==e)throw new Li(Mi.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Af(t){t=Fh(t,qh);const e=Fh(t.firestore,td);return kh(id(e),t._key).then((n=>qf(e,t,n)))}class Cf extends Tf{constructor(t){super(),this.firestore=t}convertBytes(t){return new vd(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new qh(this.firestore,null,e)}}function Df(t){t=Fh(t,qh);const e=Fh(t.firestore,td),n=id(e),i=new Cf(e);return function(t,e){const n=new Pi;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){try{const i=await function(t,e){const n=Oi(t);return n.persistence.runTransaction("read document","readonly",(t=>n.Qn.An(t,e)))}(t,e);i.isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Li(Mi.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(t){const i=du(t,`Failed to get document '${e} from cache`);n.reject(i)}}(await Th(t),e,n))),n.promise}(n,t._key).then((n=>new Qd(e,i,t._key,n,new Xd(null!==n&&n.hasLocalMutations,!0),t.converter)))}function Nf(t){t=Fh(t,qh);const e=Fh(t.firestore,td);return kh(id(e),t._key,{source:"server"}).then((n=>qf(e,t,n)))}function Of(t){t=Fh(t,zh);const e=Fh(t.firestore,td),n=id(e),i=new Cf(e);return nf(t._query),Ah(n,t._query).then((n=>new Zd(e,i,t,n)))}function Mf(t){t=Fh(t,zh);const e=Fh(t.firestore,td),n=id(e),i=new Cf(e);return function(t,e){const n=new Pi;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){try{const i=await Zc(t,e,!0),r=new Du(e,i.Gn),s=r.Io(i.documents),o=r.applyChanges(s,!1);n.resolve(o.snapshot)}catch(t){const i=du(t,`Failed to execute query '${e} against cache`);n.reject(i)}}(await Th(t),e,n))),n.promise}(n,t._query).then((n=>new Zd(e,i,t,n)))}function Lf(t){t=Fh(t,zh);const e=Fh(t.firestore,td),n=id(e),i=new Cf(e);return Ah(n,t._query,{source:"server"}).then((n=>new Zd(e,i,t,n)))}function Pf(t,e,n){t=Fh(t,qh);const i=Fh(t.firestore,td),r=Ef(t.converter,e,n);return Bf(i,[Ad(kd(i),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,Ls.none())])}function Rf(t,e,n,...i){t=Fh(t,qh);const r=Fh(t.firestore,td),s=kd(r);let a;return a="string"==typeof(e=(0,o.m9)(e))||e instanceof md?Rd(s,"updateDoc",t._key,e,n,i):Pd(s,"updateDoc",t._key,e),Bf(r,[a.toMutation(t._key,Ls.exists(!0))])}function Ff(t){return Bf(Fh(t.firestore,td),[new Ks(t._key,Ls.none())])}function jf(t,e){const n=Fh(t.firestore,td),i=Kh(t),r=Ef(t.converter,e);return Bf(n,[Ad(kd(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,Ls.exists(!1))]).then((()=>i))}function Vf(t,...e){var n,i,r;t=(0,o.m9)(t);let s={includeMetadataChanges:!1},a=0;"object"!=typeof e[a]||Qh(e[a])||(s=e[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges};if(Qh(e[a])){const t=e[a];e[a]=null===(n=t.next)||void 0===n?void 0:n.bind(t),e[a+1]=null===(i=t.error)||void 0===i?void 0:i.bind(t),e[a+2]=null===(r=t.complete)||void 0===r?void 0:r.bind(t)}let l,u,h;if(t instanceof qh)u=Fh(t.firestore,td),h=ns(t._key.path),l={next:n=>{e[a]&&e[a](qf(u,t,n))},error:e[a+1],complete:e[a+2]};else{const n=Fh(t,zh);u=Fh(n.firestore,td),h=n._query;const i=new Cf(u);l={next:t=>{e[a]&&e[a](new Zd(u,i,n,t))},error:e[a+1],complete:e[a+2]},nf(t._query)}return function(t,e,n,i){const r=new fh(i),s=new Tu(e,r,n);return t.asyncQueue.enqueueAndForget((async()=>vu(await Sh(t),s))),()=>{r.Xo(),t.asyncQueue.enqueueAndForget((async()=>bu(await Sh(t),s)))}}(id(u),h,c,l)}function Uf(t,e){return function(t,e){const n=new fh(e);return t.asyncQueue.enqueueAndForget((async()=>function(t,e){Oi(t).Zr.add(e),e.next()}(await Sh(t),n))),()=>{n.Xo(),t.asyncQueue.enqueueAndForget((async()=>function(t,e){Oi(t).Zr.delete(e)}(await Sh(t),n)))}}(id(t=Fh(t,td)),Qh(e)?e:{next:e})}function Bf(t,e){return function(t,e){const n=new Pi;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const i=ah(t);try{const t=await function(t,e){const n=Oi(t),i=Gi.now(),r=e.reduce(((t,e)=>t.add(e.key)),fo());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>n.Qn.Pn(t,r).next((r=>{s=r;const o=[];for(const t of e){const e=Vs(t,s.get(t.key));null!=e&&o.push(new zs(t.key,e,Or(e.value.mapValue),Ls.exists(!0)))}return n.In.addMutationBatch(t,i,o,e)})))).then((t=>(t.applyToLocalDocumentSet(s),{batchId:t.batchId,changes:s})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Lo[t.currentUser.toKey()];i||(i=new to($i)),i=i.insert(e,n),t.Lo[t.currentUser.toKey()]=i}(i,t.batchId,n),await Yu(i,t.changes),await Zl(i.remoteStore)}catch(t){const e=du(t,"Failed to persist write");n.reject(e)}}(await Ih(t),e,n))),n.promise}(id(t),e)}function qf(t,e,n){const i=n.docs.get(e._key),r=new Cf(t);return new Qd(t,r,e._key,i,new Xd(n.hasPendingWrites,n.fromCache),e.converter)}class zf extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=kd(t)}get(t){const e=kf(t,this._firestore),n=new If(this._firestore);return this._transaction.lookup([e._key]).then((t=>{if(!t||1!==t.length)return Ci();const i=t[0];if(i.isFoundDocument())return new Kd(this._firestore,n,i.key,i,e.converter);if(i.isNoDocument())return new Kd(this._firestore,n,e._key,null,e.converter);throw Ci()}))}set(t,e,n){const i=kf(t,this._firestore),r=Ef(i.converter,e,n),s=Ad(this._dataReader,"Transaction.set",i._key,r,null!==i.converter,n);return this._transaction.set(i._key,s),this}update(t,e,n,...i){const r=kf(t,this._firestore);let s;return s="string"==typeof(e=(0,o.m9)(e))||e instanceof md?Rd(this._dataReader,"Transaction.update",r._key,e,n,i):Pd(this._dataReader,"Transaction.update",r._key,e),this._transaction.update(r._key,s),this}delete(t){const e=kf(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=kf(t,this._firestore),n=new Cf(this._firestore);return super.get(t).then((t=>new Qd(this._firestore,n,e._key,t._document,new Xd(!1,!1),e.converter)))}}function Hf(t,e){return function(t,e){const n=new Pi;return t.asyncQueue.enqueueAndForget((async()=>{const i=await function(t){return wh(t).then((t=>t.datastore))}(t);new mh(t.asyncQueue,i,e,n).run()})),n.promise}(id(t),(n=>e(new zf(t,n))))}function $f(){return new Cd("deleteField")}function Wf(){return new Nd("serverTimestamp")}function Kf(...t){return new Od("arrayUnion",t)}function Gf(...t){return new Md("arrayRemove",t)}function Yf(t){return new Ld("increment",t)}function Xf(t){return id(t=Fh(t,td)),new Sf(t,(e=>Bf(t,e)))}!function(t){wi=t}(i.Jn),(0,i.Xd)(new r.wA("firestore",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=new td(n,new Vi(t.getProvider("auth-internal")));return e=Object.assign({useFetchStreams:!0},e),i._setSettings(e),i}),"PUBLIC")),(0,i.KN)("@firebase/firestore","3.0.2",void 0)},644:(t,e,n)=>{"use strict";n.r(e),n.d(e,{connectFunctionsEmulator:()=>m,getFunctions:()=>g,httpsCallable:()=>y});var i=n(258),r=n(589),s=n(909);function o(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function a(t){if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((t=>a(t)));if("function"==typeof t||"object"==typeof t)return o(t,(t=>a(t)));throw new Error("Data cannot be encoded in JSON: "+t)}function c(t){if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((t=>c(t))):"function"==typeof t||"object"==typeof t?o(t,(t=>c(t))):t}const l="functions",u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class h extends r.ZR{constructor(t,e,n){super(`functions/${t}`,e||""),this.details=n}}class d{constructor(t,e,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((t=>this.auth=t),(()=>{})),this.messaging||e.get().then((t=>this.messaging=t),(()=>{})),this.appCheck||n.get().then((t=>this.appCheck=t),(()=>{}))}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return null==t?void 0:t.accessToken}catch(t){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(t){return}}async getAppCheckToken(){if(this.appCheck){const t=await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken()}}}class f{constructor(t,e,n,i,r="us-central1",s){this.app=t,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new d(e,n,i),this.cancelAllRequests=new Promise((t=>{this.deleteService=()=>Promise.resolve(t())}));try{const t=new URL(r);this.customDomain=t.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}_delete(){return this.deleteService()}_url(t){const e=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${e}/${this.region}/${t}`:null!==this.customDomain?`${this.customDomain}/${t}`:`https://${this.region}-${e}.cloudfunctions.net/${t}`}}async function p(t,e,n,i){let r;n["Content-Type"]="application/json";try{r=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch(t){return{status:0,json:null}}let s=null;try{s=await r.json()}catch(t){}return{status:r.status,json:s}}function g(t=(0,i.Mq)(),e="us-central1"){return(0,i.qX)((0,r.m9)(t),l).getImmediate({identifier:e})}function m(t,e,n){!function(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}((0,r.m9)(t),e,n)}function y(t,e,n){return function(t,e,n){return i=>async function(t,e,n,i){const r=t._url(e),s={data:n=a(n)},o={},l=await t.contextProvider.getContext();l.authToken&&(o.Authorization="Bearer "+l.authToken),l.messagingToken&&(o["Firebase-Instance-ID-Token"]=l.messagingToken),null!==l.appCheckToken&&(o["X-Firebase-AppCheck"]=l.appCheckToken);const d=i.timeout||7e4,f=await Promise.race([p(r,s,o,t.fetchImpl),(g=d,new Promise(((t,e)=>{setTimeout((()=>{e(new h("deadline-exceeded","deadline-exceeded"))}),g)}))),t.cancelAllRequests]);var g;if(!f)throw new h("cancelled","Firebase Functions instance was deleted.");const m=function(t,e){let n,i=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),r=i;try{const t=e&&e.error;if(t){const e=t.status;if("string"==typeof e){if(!u[e])return new h("internal","internal");i=u[e],r=e}const s=t.message;"string"==typeof s&&(r=s),n=t.details,void 0!==n&&(n=c(n))}}catch(t){}return"ok"===i?null:new h(i,r,n)}(f.status,f.json);if(m)throw m;if(!f.json)throw new h("internal","Response is not valid JSON object.");let y=f.json.data;if(void 0===y&&(y=f.json.result),void 0===y)throw new h("internal","Response is missing data field.");return{data:c(y)}}(t,e,i,n||{})}((0,r.m9)(t),e,n)}var v;v=fetch.bind(self),(0,i.Xd)(new s.wA(l,((t,{instanceIdentifier:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("messaging-internal"),s=t.getProvider("app-check-internal");return new f(n,i,r,s,e,v)}),"PUBLIC").setMultipleInstances(!0)),(0,i.KN)("@firebase/functions","0.7.1")},755:function(t,e){var n;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(i,r){"use strict";var s=[],o=Object.getPrototypeOf,a=s.slice,c=s.flat?function(t){return s.flat.call(t)}:function(t){return s.concat.apply([],t)},l=s.push,u=s.indexOf,h={},d=h.toString,f=h.hasOwnProperty,p=f.toString,g=p.call(Object),m={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},v=function(t){return null!=t&&t===t.window},b=i.document,_={type:!0,src:!0,nonce:!0,noModule:!0};function w(t,e,n){var i,r,s=(n=n||b).createElement("script");if(s.text=t,e)for(i in _)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&s.setAttribute(i,r);n.head.appendChild(s).parentNode.removeChild(s)}function x(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[d.call(t)]||"object":typeof t}var T="3.6.0",E=function(t,e){return new E.fn.init(t,e)};function I(t){var e=!!t&&"length"in t&&t.length,n=x(t);return!y(t)&&!v(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}E.fn=E.prototype={jquery:T,constructor:E,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=E.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return E.each(this,t)},map:function(t){return this.pushStack(E.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:s.sort,splice:s.splice},E.extend=E.fn.extend=function(){var t,e,n,i,r,s,o=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||y(o)||(o={}),a===c&&(o=this,a--);a<c;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&o!==i&&(l&&i&&(E.isPlainObject(i)||(r=Array.isArray(i)))?(n=o[e],s=r&&!Array.isArray(n)?[]:r||E.isPlainObject(n)?n:{},r=!1,o[e]=E.extend(l,s,i)):void 0!==i&&(o[e]=i));return o},E.extend({expando:"jQuery"+(T+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==d.call(t)||(e=o(t))&&("function"!=typeof(n=f.call(e,"constructor")&&e.constructor)||p.call(n)!==g))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){w(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,i=0;if(I(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(I(Object(t))?E.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:u.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,s=t.length,o=!n;r<s;r++)!e(t[r],r)!==o&&i.push(t[r]);return i},map:function(t,e,n){var i,r,s=0,o=[];if(I(t))for(i=t.length;s<i;s++)null!=(r=e(t[s],s,n))&&o.push(r);else for(s in t)null!=(r=e(t[s],s,n))&&o.push(r);return c(o)},guid:1,support:m}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=s[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var S=function(t){var e,n,i,r,s,o,a,c,l,u,h,d,f,p,g,m,y,v,b,_="sizzle"+1*new Date,w=t.document,x=0,T=0,E=ct(),I=ct(),S=ct(),k=ct(),A=function(t,e){return t===e&&(h=!0),0},C={}.hasOwnProperty,D=[],N=D.pop,O=D.push,M=D.push,L=D.slice,P=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",j="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",V="\\[[\\x20\\t\\r\\n\\f]*("+j+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+F+"*\\]",U=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+V+")*)|.*)\\)|)",B=new RegExp(F+"+","g"),q=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),z=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),H=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),$=new RegExp(F+"|>"),W=new RegExp(U),K=new RegExp("^"+j+"$"),G={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+V),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},st=function(){d()},ot=_t((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{M.apply(D=L.call(w.childNodes),w.childNodes),D[w.childNodes.length].nodeType}catch(t){M={apply:D.length?function(t,e){O.apply(t,L.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function at(t,e,i,r){var s,a,l,u,h,p,y,v=e&&e.ownerDocument,w=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==w&&9!==w&&11!==w)return i;if(!r&&(d(e),e=e||f,g)){if(11!==w&&(h=Z.exec(t)))if(s=h[1]){if(9===w){if(!(l=e.getElementById(s)))return i;if(l.id===s)return i.push(l),i}else if(v&&(l=v.getElementById(s))&&b(e,l)&&l.id===s)return i.push(l),i}else{if(h[2])return M.apply(i,e.getElementsByTagName(t)),i;if((s=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return M.apply(i,e.getElementsByClassName(s)),i}if(n.qsa&&!k[t+" "]&&(!m||!m.test(t))&&(1!==w||"object"!==e.nodeName.toLowerCase())){if(y=t,v=e,1===w&&($.test(t)||H.test(t))){for((v=tt.test(t)&&yt(e.parentNode)||e)===e&&n.scope||((u=e.getAttribute("id"))?u=u.replace(it,rt):e.setAttribute("id",u=_)),a=(p=o(t)).length;a--;)p[a]=(u?"#"+u:":scope")+" "+bt(p[a]);y=p.join(",")}try{return M.apply(i,v.querySelectorAll(y)),i}catch(e){k(t,!0)}finally{u===_&&e.removeAttribute("id")}}}return c(t.replace(q,"$1"),e,i,r)}function ct(){var t=[];return function e(n,r){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=r}}function lt(t){return t[_]=!0,t}function ut(t){var e=f.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=e}function dt(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ft(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function pt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ot(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function mt(t){return lt((function(e){return e=+e,lt((function(n,i){for(var r,s=t([],n.length,e),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))}))}))}function yt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=at.support={},s=at.isXML=function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!Y.test(e||n&&n.nodeName||"HTML")},d=at.setDocument=function(t){var e,r,o=t?t.ownerDocument||t:w;return o!=f&&9===o.nodeType&&o.documentElement?(p=(f=o).documentElement,g=!s(f),w!=f&&(r=f.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",st,!1):r.attachEvent&&r.attachEvent("onunload",st)),n.scope=ut((function(t){return p.appendChild(t).appendChild(f.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),n.attributes=ut((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ut((function(t){return t.appendChild(f.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(f.getElementsByClassName),n.getById=ut((function(t){return p.appendChild(t).id=_,!f.getElementsByName||!f.getElementsByName(_).length})),n.getById?(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,i,r,s=e.getElementById(t);if(s){if((n=s.getAttributeNode("id"))&&n.value===t)return[s];for(r=e.getElementsByName(t),i=0;s=r[i++];)if((n=s.getAttributeNode("id"))&&n.value===t)return[s]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},y=[],m=[],(n.qsa=J.test(f.querySelectorAll))&&(ut((function(t){var e;p.appendChild(t).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+R+")"),t.querySelectorAll("[id~="+_+"-]").length||m.push("~="),(e=f.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||m.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+_+"+*").length||m.push(".#.+[+~]"),t.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),ut((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=f.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=J.test(v=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ut((function(t){n.disconnectedMatch=v.call(t,"*"),v.call(t,"[s!='']:x"),y.push("!=",U)})),m=m.length&&new RegExp(m.join("|")),y=y.length&&new RegExp(y.join("|")),e=J.test(p.compareDocumentPosition),b=e||J.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},A=e?function(t,e){if(t===e)return h=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t==f||t.ownerDocument==w&&b(w,t)?-1:e==f||e.ownerDocument==w&&b(w,e)?1:u?P(u,t)-P(u,e):0:4&i?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,i=0,r=t.parentNode,s=e.parentNode,o=[t],a=[e];if(!r||!s)return t==f?-1:e==f?1:r?-1:s?1:u?P(u,t)-P(u,e):0;if(r===s)return dt(t,e);for(n=t;n=n.parentNode;)o.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;o[i]===a[i];)i++;return i?dt(o[i],a[i]):o[i]==w?-1:a[i]==w?1:0},f):f},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if(d(t),n.matchesSelector&&g&&!k[e+" "]&&(!y||!y.test(e))&&(!m||!m.test(e)))try{var i=v.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){k(e,!0)}return at(e,f,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!=f&&d(t),b(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!=f&&d(t);var r=i.attrHandle[e.toLowerCase()],s=r&&C.call(i.attrHandle,e.toLowerCase())?r(t,e,!g):void 0;return void 0!==s?s:n.attributes||!g?t.getAttribute(e):(s=t.getAttributeNode(e))&&s.specified?s.value:null},at.escape=function(t){return(t+"").replace(it,rt)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,i=[],r=0,s=0;if(h=!n.detectDuplicates,u=!n.sortStable&&t.slice(0),t.sort(A),h){for(;e=t[s++];)e===t[s]&&(r=i.push(s));for(;r--;)t.splice(i[r],1)}return u=null,t},r=at.getText=function(t){var e,n="",i=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[i++];)n+=r(e);return n},i=at.selectors={cacheLength:50,createPseudo:lt,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return G.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&W.test(n)&&(e=o(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=E[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+F+"|$)"))&&E(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var r=at.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(B," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,c){var l,u,h,d,f,p,g=s!==o?"nextSibling":"previousSibling",m=e.parentNode,y=a&&e.nodeName.toLowerCase(),v=!c&&!a,b=!1;if(m){if(s){for(;g;){for(d=e;d=d[g];)if(a?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[o?m.firstChild:m.lastChild],o&&v){for(b=(f=(l=(u=(h=(d=m)[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===x&&l[1])&&l[2],d=f&&m.childNodes[f];d=++f&&d&&d[g]||(b=f=0)||p.pop();)if(1===d.nodeType&&++b&&d===e){u[t]=[x,f,b];break}}else if(v&&(b=f=(l=(u=(h=(d=e)[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===x&&l[1]),!1===b)for(;(d=++f&&d&&d[g]||(b=f=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++b||(v&&((u=(h=d[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]=[x,b]),d!==e)););return(b-=r)===i||b%i==0&&b/i>=0}}},PSEUDO:function(t,e){var n,r=i.pseudos[t]||i.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return r[_]?r(e):r.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?lt((function(t,n){for(var i,s=r(t,e),o=s.length;o--;)t[i=P(t,s[o])]=!(n[i]=s[o])})):function(t){return r(t,0,n)}):r}},pseudos:{not:lt((function(t){var e=[],n=[],i=a(t.replace(q,"$1"));return i[_]?lt((function(t,e,n,r){for(var s,o=i(t,null,r,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))})):function(t,r,s){return e[0]=t,i(e,null,s,n),e[0]=null,!n.pop()}})),has:lt((function(t){return function(e){return at(t,e).length>0}})),contains:lt((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||r(e)).indexOf(t)>-1}})),lang:lt((function(t){return K.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt((function(){return[0]})),last:mt((function(t,e){return[e-1]})),eq:mt((function(t,e,n){return[n<0?n+e:n]})),even:mt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:mt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:mt((function(t,e,n){for(var i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t})),gt:mt((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}},i.pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=ft(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=pt(e);function vt(){}function bt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function _t(t,e,n){var i=e.dir,r=e.next,s=r||i,o=n&&"parentNode"===s,a=T++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r);return!1}:function(e,n,c){var l,u,h,d=[x,a];if(c){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,c))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(u=(h=e[_]||(e[_]={}))[e.uniqueID]||(h[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((l=u[s])&&l[0]===x&&l[1]===a)return d[2]=l[2];if(u[s]=d,d[2]=t(e,n,c))return!0}return!1}}function wt(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function xt(t,e,n,i,r){for(var s,o=[],a=0,c=t.length,l=null!=e;a<c;a++)(s=t[a])&&(n&&!n(s,i,r)||(o.push(s),l&&e.push(a)));return o}function Tt(t,e,n,i,r,s){return i&&!i[_]&&(i=Tt(i)),r&&!r[_]&&(r=Tt(r,s)),lt((function(s,o,a,c){var l,u,h,d=[],f=[],p=o.length,g=s||function(t,e,n){for(var i=0,r=e.length;i<r;i++)at(t,e[i],n);return n}(e||"*",a.nodeType?[a]:a,[]),m=!t||!s&&e?g:xt(g,d,t,a,c),y=n?r||(s?t:p||i)?[]:o:m;if(n&&n(m,y,a,c),i)for(l=xt(y,f),i(l,[],a,c),u=l.length;u--;)(h=l[u])&&(y[f[u]]=!(m[f[u]]=h));if(s){if(r||t){if(r){for(l=[],u=y.length;u--;)(h=y[u])&&l.push(m[u]=h);r(null,y=[],l,c)}for(u=y.length;u--;)(h=y[u])&&(l=r?P(s,h):d[u])>-1&&(s[l]=!(o[l]=h))}}else y=xt(y===o?y.splice(p,y.length):y),r?r(null,o,y,c):M.apply(o,y)}))}function Et(t){for(var e,n,r,s=t.length,o=i.relative[t[0].type],a=o||i.relative[" "],c=o?1:0,u=_t((function(t){return t===e}),a,!0),h=_t((function(t){return P(e,t)>-1}),a,!0),d=[function(t,n,i){var r=!o&&(i||n!==l)||((e=n).nodeType?u(t,n,i):h(t,n,i));return e=null,r}];c<s;c++)if(n=i.relative[t[c].type])d=[_t(wt(d),n)];else{if((n=i.filter[t[c].type].apply(null,t[c].matches))[_]){for(r=++c;r<s&&!i.relative[t[r].type];r++);return Tt(c>1&&wt(d),c>1&&bt(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(q,"$1"),n,c<r&&Et(t.slice(c,r)),r<s&&Et(t=t.slice(r)),r<s&&bt(t))}d.push(n)}return wt(d)}return vt.prototype=i.filters=i.pseudos,i.setFilters=new vt,o=at.tokenize=function(t,e){var n,r,s,o,a,c,l,u=I[t+" "];if(u)return e?0:u.slice(0);for(a=t,c=[],l=i.preFilter;a;){for(o in n&&!(r=z.exec(a))||(r&&(a=a.slice(r[0].length)||a),c.push(s=[])),n=!1,(r=H.exec(a))&&(n=r.shift(),s.push({value:n,type:r[0].replace(q," ")}),a=a.slice(n.length)),i.filter)!(r=G[o].exec(a))||l[o]&&!(r=l[o](r))||(n=r.shift(),s.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return e?a.length:a?at.error(t):I(t,c).slice(0)},a=at.compile=function(t,e){var n,r=[],s=[],a=S[t+" "];if(!a){for(e||(e=o(t)),n=e.length;n--;)(a=Et(e[n]))[_]?r.push(a):s.push(a);a=S(t,function(t,e){var n=e.length>0,r=t.length>0,s=function(s,o,a,c,u){var h,p,m,y=0,v="0",b=s&&[],_=[],w=l,T=s||r&&i.find.TAG("*",u),E=x+=null==w?1:Math.random()||.1,I=T.length;for(u&&(l=o==f||o||u);v!==I&&null!=(h=T[v]);v++){if(r&&h){for(p=0,o||h.ownerDocument==f||(d(h),a=!g);m=t[p++];)if(m(h,o||f,a)){c.push(h);break}u&&(x=E)}n&&((h=!m&&h)&&y--,s&&b.push(h))}if(y+=v,n&&v!==y){for(p=0;m=e[p++];)m(b,_,o,a);if(s){if(y>0)for(;v--;)b[v]||_[v]||(_[v]=N.call(c));_=xt(_)}M.apply(c,_),u&&!s&&_.length>0&&y+e.length>1&&at.uniqueSort(c)}return u&&(x=E,l=w),b};return n?lt(s):s}(s,r)),a.selector=t}return a},c=at.select=function(t,e,n,r){var s,c,l,u,h,d="function"==typeof t&&t,f=!r&&o(t=d.selector||t);if(n=n||[],1===f.length){if((c=f[0]=f[0].slice(0)).length>2&&"ID"===(l=c[0]).type&&9===e.nodeType&&g&&i.relative[c[1].type]){if(!(e=(i.find.ID(l.matches[0].replace(et,nt),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(c.shift().value.length)}for(s=G.needsContext.test(t)?0:c.length;s--&&(l=c[s],!i.relative[u=l.type]);)if((h=i.find[u])&&(r=h(l.matches[0].replace(et,nt),tt.test(c[0].type)&&yt(e.parentNode)||e))){if(c.splice(s,1),!(t=r.length&&bt(c)))return M.apply(n,r),n;break}}return(d||a(t,f))(r,e,!g,n,!e||tt.test(t)&&yt(e.parentNode)||e),n},n.sortStable=_.split("").sort(A).join("")===_,n.detectDuplicates=!!h,d(),n.sortDetached=ut((function(t){return 1&t.compareDocumentPosition(f.createElement("fieldset"))})),ut((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ht("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ut((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ht("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ut((function(t){return null==t.getAttribute("disabled")}))||ht(R,(function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null})),at}(i);E.find=S,E.expr=S.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=S.uniqueSort,E.text=S.getText,E.isXMLDoc=S.isXML,E.contains=S.contains,E.escapeSelector=S.escape;var k=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&E(t).is(n))break;i.push(t)}return i},A=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},C=E.expr.match.needsContext;function D(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(t,e,n){return y(e)?E.grep(t,(function(t,i){return!!e.call(t,i,t)!==n})):e.nodeType?E.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?E.grep(t,(function(t){return u.call(e,t)>-1!==n})):E.filter(e,t,n)}E.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?E.find.matchesSelector(i,t)?[i]:[]:E.find.matches(t,E.grep(e,(function(t){return 1===t.nodeType})))},E.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(E(t).filter((function(){for(e=0;e<i;e++)if(E.contains(r[e],this))return!0})));for(n=this.pushStack([]),e=0;e<i;e++)E.find(t,r[e],n);return i>1?E.uniqueSort(n):n},filter:function(t){return this.pushStack(O(this,t||[],!1))},not:function(t){return this.pushStack(O(this,t||[],!0))},is:function(t){return!!O(this,"string"==typeof t&&C.test(t)?E(t):t||[],!1).length}});var M,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||M,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:L.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof E?e[0]:e,E.merge(this,E.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:b,!0)),N.test(i[1])&&E.isPlainObject(e))for(i in e)y(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=b.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(E):E.makeArray(t,this)}).prototype=E.fn,M=E(b);var P=/^(?:parents|prev(?:Until|All))/,R={children:!0,contents:!0,next:!0,prev:!0};function F(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}E.fn.extend({has:function(t){var e=E(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(E.contains(this,e[t]))return!0}))},closest:function(t,e){var n,i=0,r=this.length,s=[],o="string"!=typeof t&&E(t);if(!C.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(s.length>1?E.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?u.call(E(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),E.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return k(t,"parentNode")},parentsUntil:function(t,e,n){return k(t,"parentNode",n)},next:function(t){return F(t,"nextSibling")},prev:function(t){return F(t,"previousSibling")},nextAll:function(t){return k(t,"nextSibling")},prevAll:function(t){return k(t,"previousSibling")},nextUntil:function(t,e,n){return k(t,"nextSibling",n)},prevUntil:function(t,e,n){return k(t,"previousSibling",n)},siblings:function(t){return A((t.parentNode||{}).firstChild,t)},children:function(t){return A(t.firstChild)},contents:function(t){return null!=t.contentDocument&&o(t.contentDocument)?t.contentDocument:(D(t,"template")&&(t=t.content||t),E.merge([],t.childNodes))}},(function(t,e){E.fn[t]=function(n,i){var r=E.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=E.filter(i,r)),this.length>1&&(R[t]||E.uniqueSort(r),P.test(t)&&r.reverse()),this.pushStack(r)}}));var j=/[^\x20\t\r\n\f]+/g;function V(t){return t}function U(t){throw t}function B(t,e,n,i){var r;try{t&&y(r=t.promise)?r.call(t).done(e).fail(n):t&&y(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}E.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return E.each(t.match(j)||[],(function(t,n){e[n]=!0})),e}(t):E.extend({},t);var e,n,i,r,s=[],o=[],a=-1,c=function(){for(r=r||t.once,i=e=!0;o.length;a=-1)for(n=o.shift();++a<s.length;)!1===s[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=s.length,n=!1);t.memory||(n=!1),e=!1,r&&(s=n?[]:"")},l={add:function(){return s&&(n&&!e&&(a=s.length-1,o.push(n)),function e(n){E.each(n,(function(n,i){y(i)?t.unique&&l.has(i)||s.push(i):i&&i.length&&"string"!==x(i)&&e(i)}))}(arguments),n&&!e&&c()),this},remove:function(){return E.each(arguments,(function(t,e){for(var n;(n=E.inArray(e,s,n))>-1;)s.splice(n,1),n<=a&&a--})),this},has:function(t){return t?E.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=o=[],n||e||(s=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],o.push(n),e||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},E.extend({Deferred:function(t){var e=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return E.Deferred((function(n){E.each(e,(function(e,i){var r=y(t[i[4]])&&t[i[4]];s[i[1]]((function(){var t=r&&r.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,r){var s=0;function o(t,e,n,r){return function(){var a=this,c=arguments,l=function(){var i,l;if(!(t<s)){if((i=n.apply(a,c))===e.promise())throw new TypeError("Thenable self-resolution");l=i&&("object"==typeof i||"function"==typeof i)&&i.then,y(l)?r?l.call(i,o(s,e,V,r),o(s,e,U,r)):(s++,l.call(i,o(s,e,V,r),o(s,e,U,r),o(s,e,V,e.notifyWith))):(n!==V&&(a=void 0,c=[i]),(r||e.resolveWith)(a,c))}},u=r?l:function(){try{l()}catch(i){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(i,u.stackTrace),t+1>=s&&(n!==U&&(a=void 0,c=[i]),e.rejectWith(a,c))}};t?u():(E.Deferred.getStackHook&&(u.stackTrace=E.Deferred.getStackHook()),i.setTimeout(u))}}return E.Deferred((function(i){e[0][3].add(o(0,i,y(r)?r:V,i.notifyWith)),e[1][3].add(o(0,i,y(t)?t:V)),e[2][3].add(o(0,i,y(n)?n:U))})).promise()},promise:function(t){return null!=t?E.extend(t,r):r}},s={};return E.each(e,(function(t,i){var o=i[2],a=i[5];r[i[1]]=o.add,a&&o.add((function(){n=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),o.add(i[3].fire),s[i[0]]=function(){return s[i[0]+"With"](this===s?void 0:this,arguments),this},s[i[0]+"With"]=o.fireWith})),r.promise(s),t&&t.call(s,s),s},when:function(t){var e=arguments.length,n=e,i=Array(n),r=a.call(arguments),s=E.Deferred(),o=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?a.call(arguments):n,--e||s.resolveWith(i,r)}};if(e<=1&&(B(t,s.done(o(n)).resolve,s.reject,!e),"pending"===s.state()||y(r[n]&&r[n].then)))return s.then();for(;n--;)B(r[n],o(n),s.reject);return s.promise()}});var q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&q.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},E.readyException=function(t){i.setTimeout((function(){throw t}))};var z=E.Deferred();function H(){b.removeEventListener("DOMContentLoaded",H),i.removeEventListener("load",H),E.ready()}E.fn.ready=function(t){return z.then(t).catch((function(t){E.readyException(t)})),this},E.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==t&&--E.readyWait>0||z.resolveWith(b,[E]))}}),E.ready.then=z.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?i.setTimeout(E.ready):(b.addEventListener("DOMContentLoaded",H),i.addEventListener("load",H));var $=function(t,e,n,i,r,s,o){var a=0,c=t.length,l=null==n;if("object"===x(n))for(a in r=!0,n)$(t,e,a,n[a],!0,s,o);else if(void 0!==i&&(r=!0,y(i)||(o=!0),l&&(o?(e.call(t,i),e=null):(l=e,e=function(t,e,n){return l.call(E(t),n)})),e))for(;a<c;a++)e(t[a],n,o?i:i.call(t[a],a,e(t[a],n)));return r?t:l?e.call(t):c?e(t[0],n):s},W=/^-ms-/,K=/-([a-z])/g;function G(t,e){return e.toUpperCase()}function Y(t){return t.replace(W,"ms-").replace(K,G)}var X=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Q(){this.expando=E.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(t){var e=t[this.expando];return e||(e={},X(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[Y(e)]=n;else for(i in e)r[Y(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Y(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(Y):(e=Y(e))in i?[e]:e.match(j)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||E.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!E.isEmptyObject(e)}};var J=new Q,Z=new Q,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function nt(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(n)}catch(t){}Z.set(t,e,n)}else n=void 0;return n}E.extend({hasData:function(t){return Z.hasData(t)||J.hasData(t)},data:function(t,e,n){return Z.access(t,e,n)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,n){return J.access(t,e,n)},_removeData:function(t,e){J.remove(t,e)}}),E.fn.extend({data:function(t,e){var n,i,r,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(r=Z.get(s),1===s.nodeType&&!J.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&(i=Y(i.slice(5)),nt(s,i,r[i]));J.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){Z.set(this,t)})):$(this,(function(e){var n;if(s&&void 0===e)return void 0!==(n=Z.get(s,t))||void 0!==(n=nt(s,t))?n:void 0;this.each((function(){Z.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Z.remove(this,t)}))}}),E.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=J.get(t,e),n&&(!i||Array.isArray(n)?i=J.access(t,e,E.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=E.queue(t,e),i=n.length,r=n.shift(),s=E._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,(function(){E.dequeue(t,e)}),s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return J.get(t,n)||J.access(t,n,{empty:E.Callbacks("once memory").add((function(){J.remove(t,[e+"queue",n])}))})}}),E.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?E.queue(this[0],t):void 0===e?this:this.each((function(){var n=E.queue(this,t,e);E._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&E.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){E.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=E.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=J.get(s[o],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var it=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rt=new RegExp("^(?:([+-])=|)("+it+")([a-z%]*)$","i"),st=["Top","Right","Bottom","Left"],ot=b.documentElement,at=function(t){return E.contains(t.ownerDocument,t)},ct={composed:!0};ot.getRootNode&&(at=function(t){return E.contains(t.ownerDocument,t)||t.getRootNode(ct)===t.ownerDocument});var lt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===E.css(t,"display")};function ut(t,e,n,i){var r,s,o=20,a=i?function(){return i.cur()}:function(){return E.css(t,e,"")},c=a(),l=n&&n[3]||(E.cssNumber[e]?"":"px"),u=t.nodeType&&(E.cssNumber[e]||"px"!==l&&+c)&&rt.exec(E.css(t,e));if(u&&u[3]!==l){for(c/=2,l=l||u[3],u=+c||1;o--;)E.style(t,e,u+l),(1-s)*(1-(s=a()/c||.5))<=0&&(o=0),u/=s;u*=2,E.style(t,e,u+l),n=n||[]}return n&&(u=+u||+c||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=u,i.end=r)),r}var ht={};function dt(t){var e,n=t.ownerDocument,i=t.nodeName,r=ht[i];return r||(e=n.body.appendChild(n.createElement(i)),r=E.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),ht[i]=r,r)}function ft(t,e){for(var n,i,r=[],s=0,o=t.length;s<o;s++)(i=t[s]).style&&(n=i.style.display,e?("none"===n&&(r[s]=J.get(i,"display")||null,r[s]||(i.style.display="")),""===i.style.display&&lt(i)&&(r[s]=dt(i))):"none"!==n&&(r[s]="none",J.set(i,"display",n)));for(s=0;s<o;s++)null!=r[s]&&(t[s].style.display=r[s]);return t}E.fn.extend({show:function(){return ft(this,!0)},hide:function(){return ft(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){lt(this)?E(this).show():E(this).hide()}))}});var pt,gt,mt=/^(?:checkbox|radio)$/i,yt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,vt=/^$|^module$|\/(?:java|ecma)script/i;pt=b.createDocumentFragment().appendChild(b.createElement("div")),(gt=b.createElement("input")).setAttribute("type","radio"),gt.setAttribute("checked","checked"),gt.setAttribute("name","t"),pt.appendChild(gt),m.checkClone=pt.cloneNode(!0).cloneNode(!0).lastChild.checked,pt.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!pt.cloneNode(!0).lastChild.defaultValue,pt.innerHTML="<option></option>",m.option=!!pt.lastChild;var bt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function _t(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&D(t,e)?E.merge([t],n):n}function wt(t,e){for(var n=0,i=t.length;n<i;n++)J.set(t[n],"globalEval",!e||J.get(e[n],"globalEval"))}bt.tbody=bt.tfoot=bt.colgroup=bt.caption=bt.thead,bt.th=bt.td,m.option||(bt.optgroup=bt.option=[1,"<select multiple='multiple'>","</select>"]);var xt=/<|&#?\w+;/;function Tt(t,e,n,i,r){for(var s,o,a,c,l,u,h=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if((s=t[f])||0===s)if("object"===x(s))E.merge(d,s.nodeType?[s]:s);else if(xt.test(s)){for(o=o||h.appendChild(e.createElement("div")),a=(yt.exec(s)||["",""])[1].toLowerCase(),c=bt[a]||bt._default,o.innerHTML=c[1]+E.htmlPrefilter(s)+c[2],u=c[0];u--;)o=o.lastChild;E.merge(d,o.childNodes),(o=h.firstChild).textContent=""}else d.push(e.createTextNode(s));for(h.textContent="",f=0;s=d[f++];)if(i&&E.inArray(s,i)>-1)r&&r.push(s);else if(l=at(s),o=_t(h.appendChild(s),"script"),l&&wt(o),n)for(u=0;s=o[u++];)vt.test(s.type||"")&&n.push(s);return h}var Et=/^([^.]*)(?:\.(.+)|)/;function It(){return!0}function St(){return!1}function kt(t,e){return t===function(){try{return b.activeElement}catch(t){}}()==("focus"===e)}function At(t,e,n,i,r,s){var o,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)At(t,a,n,i,e[a],s);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=St;else if(!r)return t;return 1===s&&(o=r,r=function(t){return E().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=E.guid++)),t.each((function(){E.event.add(this,e,r,i,n)}))}function Ct(t,e,n){n?(J.set(t,e,!1),E.event.add(t,e,{namespace:!1,handler:function(t){var i,r,s=J.get(this,e);if(1&t.isTrigger&&this[e]){if(s.length)(E.event.special[e]||{}).delegateType&&t.stopPropagation();else if(s=a.call(arguments),J.set(this,e,s),i=n(this,e),this[e](),s!==(r=J.get(this,e))||i?J.set(this,e,!1):r={},s!==r)return t.stopImmediatePropagation(),t.preventDefault(),r&&r.value}else s.length&&(J.set(this,e,{value:E.event.trigger(E.extend(s[0],E.Event.prototype),s.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===J.get(t,e)&&E.event.add(t,e,It)}E.event={global:{},add:function(t,e,n,i,r){var s,o,a,c,l,u,h,d,f,p,g,m=J.get(t);if(X(t))for(n.handler&&(n=(s=n).handler,r=s.selector),r&&E.find.matchesSelector(ot,r),n.guid||(n.guid=E.guid++),(c=m.events)||(c=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(e){return void 0!==E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(j)||[""]).length;l--;)f=g=(a=Et.exec(e[l])||[])[1],p=(a[2]||"").split(".").sort(),f&&(h=E.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=E.event.special[f]||{},u=E.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&E.expr.match.needsContext.test(r),namespace:p.join(".")},s),(d=c[f])||((d=c[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,p,o)||t.addEventListener&&t.addEventListener(f,o)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),E.event.global[f]=!0)},remove:function(t,e,n,i,r){var s,o,a,c,l,u,h,d,f,p,g,m=J.hasData(t)&&J.get(t);if(m&&(c=m.events)){for(l=(e=(e||"").match(j)||[""]).length;l--;)if(f=g=(a=Et.exec(e[l])||[])[1],p=(a[2]||"").split(".").sort(),f){for(h=E.event.special[f]||{},d=c[f=(i?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)u=d[s],!r&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(s,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));o&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,m.handle)||E.removeEvent(t,f,m.handle),delete c[f])}else for(f in c)E.event.remove(t,f+e[l],n,i,!0);E.isEmptyObject(c)&&J.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,s,o,a=new Array(arguments.length),c=E.event.fix(t),l=(J.get(this,"events")||Object.create(null))[c.type]||[],u=E.event.special[c.type]||{};for(a[0]=c,e=1;e<arguments.length;e++)a[e]=arguments[e];if(c.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,c)){for(o=E.event.handlers.call(this,c,l),e=0;(r=o[e++])&&!c.isPropagationStopped();)for(c.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==s.namespace&&!c.rnamespace.test(s.namespace)||(c.handleObj=s,c.data=s.data,void 0!==(i=((E.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a))&&!1===(c.result=i)&&(c.preventDefault(),c.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,c),c.result}},handlers:function(t,e){var n,i,r,s,o,a=[],c=e.delegateCount,l=t.target;if(c&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(s=[],o={},n=0;n<c;n++)void 0===o[r=(i=e[n]).selector+" "]&&(o[r]=i.needsContext?E(r,this).index(l)>-1:E.find(r,this,null,[l]).length),o[r]&&s.push(i);s.length&&a.push({elem:l,handlers:s})}return l=this,c<e.length&&a.push({elem:l,handlers:e.slice(c)}),a},addProp:function(t,e){Object.defineProperty(E.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[E.expando]?t:new E.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return mt.test(e.type)&&e.click&&D(e,"input")&&Ct(e,"click",It),!1},trigger:function(t){var e=this||t;return mt.test(e.type)&&e.click&&D(e,"input")&&Ct(e,"click"),!0},_default:function(t){var e=t.target;return mt.test(e.type)&&e.click&&D(e,"input")&&J.get(e,"click")||D(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},E.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},E.Event=function(t,e){if(!(this instanceof E.Event))return new E.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?It:St,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&E.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:St,isPropagationStopped:St,isImmediatePropagationStopped:St,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=It,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=It,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=It,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(t,e){E.event.special[t]={setup:function(){return Ct(this,t,kt),!1},trigger:function(){return Ct(this,t),!0},_default:function(){return!0},delegateType:e}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){E.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,s=t.handleObj;return r&&(r===i||E.contains(i,r))||(t.type=s.origType,n=s.handler.apply(this,arguments),t.type=e),n}}})),E.fn.extend({on:function(t,e,n,i){return At(this,t,e,n,i)},one:function(t,e,n,i){return At(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,E(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=St),this.each((function(){E.event.remove(this,t,n,e)}))}});var Dt=/<script|<style|<link/i,Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Mt(t,e){return D(t,"table")&&D(11!==e.nodeType?e:e.firstChild,"tr")&&E(t).children("tbody")[0]||t}function Lt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Pt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Rt(t,e){var n,i,r,s,o,a;if(1===e.nodeType){if(J.hasData(t)&&(a=J.get(t).events))for(r in J.remove(e,"handle events"),a)for(n=0,i=a[r].length;n<i;n++)E.event.add(e,r,a[r][n]);Z.hasData(t)&&(s=Z.access(t),o=E.extend({},s),Z.set(e,o))}}function Ft(t,e){var n=e.nodeName.toLowerCase();"input"===n&&mt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function jt(t,e,n,i){e=c(e);var r,s,o,a,l,u,h=0,d=t.length,f=d-1,p=e[0],g=y(p);if(g||d>1&&"string"==typeof p&&!m.checkClone&&Nt.test(p))return t.each((function(r){var s=t.eq(r);g&&(e[0]=p.call(this,r,s.html())),jt(s,e,n,i)}));if(d&&(s=(r=Tt(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=s),s||i)){for(a=(o=E.map(_t(r,"script"),Lt)).length;h<d;h++)l=r,h!==f&&(l=E.clone(l,!0,!0),a&&E.merge(o,_t(l,"script"))),n.call(t[h],l,h);if(a)for(u=o[o.length-1].ownerDocument,E.map(o,Pt),h=0;h<a;h++)l=o[h],vt.test(l.type||"")&&!J.access(l,"globalEval")&&E.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?E._evalUrl&&!l.noModule&&E._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):w(l.textContent.replace(Ot,""),l,u))}return t}function Vt(t,e,n){for(var i,r=e?E.filter(e,t):t,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||E.cleanData(_t(i)),i.parentNode&&(n&&at(i)&&wt(_t(i,"script")),i.parentNode.removeChild(i));return t}E.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var i,r,s,o,a=t.cloneNode(!0),c=at(t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||E.isXMLDoc(t)))for(o=_t(a),i=0,r=(s=_t(t)).length;i<r;i++)Ft(s[i],o[i]);if(e)if(n)for(s=s||_t(t),o=o||_t(a),i=0,r=s.length;i<r;i++)Rt(s[i],o[i]);else Rt(t,a);return(o=_t(a,"script")).length>0&&wt(o,!c&&_t(t,"script")),a},cleanData:function(t){for(var e,n,i,r=E.event.special,s=0;void 0!==(n=t[s]);s++)if(X(n)){if(e=n[J.expando]){if(e.events)for(i in e.events)r[i]?E.event.remove(n,i):E.removeEvent(n,i,e.handle);n[J.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),E.fn.extend({detach:function(t){return Vt(this,t,!0)},remove:function(t){return Vt(this,t)},text:function(t){return $(this,(function(t){return void 0===t?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return jt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Mt(this,t).appendChild(t)}))},prepend:function(){return jt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Mt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return jt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return jt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(E.cleanData(_t(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return E.clone(this,t,e)}))},html:function(t){return $(this,(function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Dt.test(t)&&!bt[(yt.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(E.cleanData(_t(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return jt(this,arguments,(function(e){var n=this.parentNode;E.inArray(this,t)<0&&(E.cleanData(_t(this)),n&&n.replaceChild(e,this))}),t)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){E.fn[t]=function(t){for(var n,i=[],r=E(t),s=r.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),E(r[o])[e](n),l.apply(i,n.get());return this.pushStack(i)}}));var Ut=new RegExp("^("+it+")(?!px)[a-z%]+$","i"),Bt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},qt=function(t,e,n){var i,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];for(r in i=n.call(t),e)t.style[r]=s[r];return i},zt=new RegExp(st.join("|"),"i");function Ht(t,e,n){var i,r,s,o,a=t.style;return(n=n||Bt(t))&&(""!==(o=n.getPropertyValue(e)||n[e])||at(t)||(o=E.style(t,e)),!m.pixelBoxStyles()&&Ut.test(o)&&zt.test(e)&&(i=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=i,a.minWidth=r,a.maxWidth=s)),void 0!==o?o+"":o}function $t(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ot.appendChild(l).appendChild(u);var t=i.getComputedStyle(u);n="1%"!==t.top,c=12===e(t.marginLeft),u.style.right="60%",o=36===e(t.right),r=36===e(t.width),u.style.position="absolute",s=12===e(u.offsetWidth/3),ot.removeChild(l),u=null}}function e(t){return Math.round(parseFloat(t))}var n,r,s,o,a,c,l=b.createElement("div"),u=b.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,E.extend(m,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),c},scrollboxSize:function(){return t(),s},reliableTrDimensions:function(){var t,e,n,r;return null==a&&(t=b.createElement("table"),e=b.createElement("tr"),n=b.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",ot.appendChild(t).appendChild(e).appendChild(n),r=i.getComputedStyle(e),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===e.offsetHeight,ot.removeChild(t)),a}}))}();var Wt=["Webkit","Moz","ms"],Kt=b.createElement("div").style,Gt={};function Yt(t){return E.cssProps[t]||Gt[t]||(t in Kt?t:Gt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Wt.length;n--;)if((t=Wt[n]+e)in Kt)return t}(t)||t)}var Xt=/^(none|table(?!-c[ea]).+)/,Qt=/^--/,Jt={position:"absolute",visibility:"hidden",display:"block"},Zt={letterSpacing:"0",fontWeight:"400"};function te(t,e,n){var i=rt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function ee(t,e,n,i,r,s){var o="width"===e?1:0,a=0,c=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(c+=E.css(t,n+st[o],!0,r)),i?("content"===n&&(c-=E.css(t,"padding"+st[o],!0,r)),"margin"!==n&&(c-=E.css(t,"border"+st[o]+"Width",!0,r))):(c+=E.css(t,"padding"+st[o],!0,r),"padding"!==n?c+=E.css(t,"border"+st[o]+"Width",!0,r):a+=E.css(t,"border"+st[o]+"Width",!0,r));return!i&&s>=0&&(c+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-s-c-a-.5))||0),c}function ne(t,e,n){var i=Bt(t),r=(!m.boxSizingReliable()||n)&&"border-box"===E.css(t,"boxSizing",!1,i),s=r,o=Ht(t,e,i),a="offset"+e[0].toUpperCase()+e.slice(1);if(Ut.test(o)){if(!n)return o;o="auto"}return(!m.boxSizingReliable()&&r||!m.reliableTrDimensions()&&D(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===E.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===E.css(t,"boxSizing",!1,i),(s=a in t)&&(o=t[a])),(o=parseFloat(o)||0)+ee(t,e,n||(r?"border":"content"),s,i,o)+"px"}function ie(t,e,n,i,r){return new ie.prototype.init(t,e,n,i,r)}E.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Ht(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=Y(e),c=Qt.test(e),l=t.style;if(c||(e=Yt(a)),o=E.cssHooks[e]||E.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(t,!1,i))?r:l[e];"string"==(s=typeof n)&&(r=rt.exec(n))&&r[1]&&(n=ut(t,e,r),s="number"),null!=n&&n==n&&("number"!==s||c||(n+=r&&r[3]||(E.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,i))||(c?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,i){var r,s,o,a=Y(e);return Qt.test(e)||(e=Yt(a)),(o=E.cssHooks[e]||E.cssHooks[a])&&"get"in o&&(r=o.get(t,!0,n)),void 0===r&&(r=Ht(t,e,i)),"normal"===r&&e in Zt&&(r=Zt[e]),""===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),E.each(["height","width"],(function(t,e){E.cssHooks[e]={get:function(t,n,i){if(n)return!Xt.test(E.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ne(t,e,i):qt(t,Jt,(function(){return ne(t,e,i)}))},set:function(t,n,i){var r,s=Bt(t),o=!m.scrollboxSize()&&"absolute"===s.position,a=(o||i)&&"border-box"===E.css(t,"boxSizing",!1,s),c=i?ee(t,e,i,a,s):0;return a&&o&&(c-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(s[e])-ee(t,e,"border",!1,s)-.5)),c&&(r=rt.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=E.css(t,e)),te(0,n,c)}}})),E.cssHooks.marginLeft=$t(m.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Ht(t,"marginLeft"))||t.getBoundingClientRect().left-qt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(t,e){E.cssHooks[t+e]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+st[i]+e]=s[i]||s[i-2]||s[0];return r}},"margin"!==t&&(E.cssHooks[t+e].set=te)})),E.fn.extend({css:function(t,e){return $(this,(function(t,e,n){var i,r,s={},o=0;if(Array.isArray(e)){for(i=Bt(t),r=e.length;o<r;o++)s[e[o]]=E.css(t,e[o],!1,i);return s}return void 0!==n?E.style(t,e,n):E.css(t,e)}),t,e,arguments.length>1)}}),E.Tween=ie,ie.prototype={constructor:ie,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||E.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(E.cssNumber[n]?"":"px")},cur:function(){var t=ie.propHooks[this.prop];return t&&t.get?t.get(this):ie.propHooks._default.get(this)},run:function(t){var e,n=ie.propHooks[this.prop];return this.options.duration?this.pos=e=E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ie.propHooks._default.set(this),this}},ie.prototype.init.prototype=ie.prototype,ie.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=E.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){E.fx.step[t.prop]?E.fx.step[t.prop](t):1!==t.elem.nodeType||!E.cssHooks[t.prop]&&null==t.elem.style[Yt(t.prop)]?t.elem[t.prop]=t.now:E.style(t.elem,t.prop,t.now+t.unit)}}},ie.propHooks.scrollTop=ie.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},E.fx=ie.prototype.init,E.fx.step={};var re,se,oe=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;function ce(){se&&(!1===b.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(ce):i.setTimeout(ce,E.fx.interval),E.fx.tick())}function le(){return i.setTimeout((function(){re=void 0})),re=Date.now()}function ue(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=st[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function he(t,e,n){for(var i,r=(de.tweeners[e]||[]).concat(de.tweeners["*"]),s=0,o=r.length;s<o;s++)if(i=r[s].call(n,e,t))return i}function de(t,e,n){var i,r,s=0,o=de.prefilters.length,a=E.Deferred().always((function(){delete c.elem})),c=function(){if(r)return!1;for(var e=re||le(),n=Math.max(0,l.startTime+l.duration-e),i=1-(n/l.duration||0),s=0,o=l.tweens.length;s<o;s++)l.tweens[s].run(i);return a.notifyWith(t,[l,i,n]),i<1&&o?n:(o||a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:e,originalOptions:n,startTime:re||le(),duration:n.duration,tweens:[],createTween:function(e,n){var i=E.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)l.tweens[n].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),u=l.props;for(function(t,e){var n,i,r,s,o;for(n in t)if(r=e[i=Y(n)],s=t[n],Array.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),(o=E.cssHooks[i])&&"expand"in o)for(n in s=o.expand(s),delete t[i],s)n in t||(t[n]=s[n],e[n]=r);else e[i]=r}(u,l.opts.specialEasing);s<o;s++)if(i=de.prefilters[s].call(l,t,u,l.opts))return y(i.stop)&&(E._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return E.map(u,he,l),y(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),E.fx.timer(E.extend(c,{elem:t,anim:l,queue:l.opts.queue})),l}E.Animation=E.extend(de,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ut(n.elem,t,rt.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(j);for(var n,i=0,r=t.length;i<r;i++)n=t[i],de.tweeners[n]=de.tweeners[n]||[],de.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,s,o,a,c,l,u,h="width"in e||"height"in e,d=this,f={},p=t.style,g=t.nodeType&&lt(t),m=J.get(t,"fxshow");for(i in n.queue||(null==(o=E._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always((function(){d.always((function(){o.unqueued--,E.queue(t,"fx").length||o.empty.fire()}))}))),e)if(r=e[i],oe.test(r)){if(delete e[i],s=s||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;g=!0}f[i]=m&&m[i]||E.style(t,i)}if((c=!E.isEmptyObject(e))||!E.isEmptyObject(f))for(i in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=m&&m.display)&&(l=J.get(t,"display")),"none"===(u=E.css(t,"display"))&&(l?u=l:(ft([t],!0),l=t.style.display||l,u=E.css(t,"display"),ft([t]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===E.css(t,"float")&&(c||(d.done((function(){p.display=l})),null==l&&(u=p.display,l="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),c=!1,f)c||(m?"hidden"in m&&(g=m.hidden):m=J.access(t,"fxshow",{display:l}),s&&(m.hidden=!g),g&&ft([t],!0),d.done((function(){for(i in g||ft([t]),J.remove(t,"fxshow"),f)E.style(t,i,f[i])}))),c=he(g?m[i]:0,i,d),i in m||(m[i]=c.start,g&&(c.end=c.start,c.start=0))}],prefilter:function(t,e){e?de.prefilters.unshift(t):de.prefilters.push(t)}}),E.speed=function(t,e,n){var i=t&&"object"==typeof t?E.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return E.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in E.fx.speeds?i.duration=E.fx.speeds[i.duration]:i.duration=E.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&E.dequeue(this,i.queue)},i},E.fn.extend({fadeTo:function(t,e,n,i){return this.filter(lt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=E.isEmptyObject(t),s=E.speed(e,n,i),o=function(){var e=de(this,E.extend({},t),s);(r||J.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",s=E.timers,o=J.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&ae.test(r)&&i(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(n),e=!1,s.splice(r,1));!e&&n||E.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=J.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],s=E.timers,o=i?i.length:0;for(n.finish=!0,E.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish}))}}),E.each(["toggle","show","hide"],(function(t,e){var n=E.fn[e];E.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ue(e,!0),t,i,r)}})),E.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){E.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}})),E.timers=[],E.fx.tick=function(){var t,e=0,n=E.timers;for(re=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||E.fx.stop(),re=void 0},E.fx.timer=function(t){E.timers.push(t),E.fx.start()},E.fx.interval=13,E.fx.start=function(){se||(se=!0,ce())},E.fx.stop=function(){se=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(t,e){return t=E.fx&&E.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var r=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(r)}}))},function(){var t=b.createElement("input"),e=b.createElement("select").appendChild(b.createElement("option"));t.type="checkbox",m.checkOn=""!==t.value,m.optSelected=e.selected,(t=b.createElement("input")).value="t",t.type="radio",m.radioValue="t"===t.value}();var fe,pe=E.expr.attrHandle;E.fn.extend({attr:function(t,e){return $(this,E.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){E.removeAttr(this,t)}))}}),E.extend({attr:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?E.prop(t,e,n):(1===s&&E.isXMLDoc(t)||(r=E.attrHooks[e.toLowerCase()]||(E.expr.match.bool.test(e)?fe:void 0)),void 0!==n?null===n?void E.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=E.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&D(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(j);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),fe={set:function(t,e,n){return!1===e?E.removeAttr(t,n):t.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=pe[e]||E.find.attr;pe[e]=function(t,e,i){var r,s,o=e.toLowerCase();return i||(s=pe[o],pe[o]=r,r=null!=n(t,e,i)?o:null,pe[o]=s),r}}));var ge=/^(?:input|select|textarea|button)$/i,me=/^(?:a|area)$/i;function ye(t){return(t.match(j)||[]).join(" ")}function ve(t){return t.getAttribute&&t.getAttribute("class")||""}function be(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(j)||[]}E.fn.extend({prop:function(t,e){return $(this,E.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[E.propFix[t]||t]}))}}),E.extend({prop:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&E.isXMLDoc(t)||(e=E.propFix[e]||e,r=E.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");return e?parseInt(e,10):ge.test(t.nodeName)||me.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(E.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(t){var e,n,i,r,s,o,a,c=0;if(y(t))return this.each((function(e){E(this).addClass(t.call(this,e,ve(this)))}));if((e=be(t)).length)for(;n=this[c++];)if(r=ve(n),i=1===n.nodeType&&" "+ye(r)+" "){for(o=0;s=e[o++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");r!==(a=ye(i))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,r,s,o,a,c=0;if(y(t))return this.each((function(e){E(this).removeClass(t.call(this,e,ve(this)))}));if(!arguments.length)return this.attr("class","");if((e=be(t)).length)for(;n=this[c++];)if(r=ve(n),i=1===n.nodeType&&" "+ye(r)+" "){for(o=0;s=e[o++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");r!==(a=ye(i))&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):y(t)?this.each((function(n){E(this).toggleClass(t.call(this,n,ve(this),e),e)})):this.each((function(){var e,r,s,o;if(i)for(r=0,s=E(this),o=be(t);e=o[r++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else void 0!==t&&"boolean"!==n||((e=ve(this))&&J.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":J.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+ye(ve(n))+" ").indexOf(e)>-1)return!0;return!1}});var _e=/\r/g;E.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=y(t),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,E(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=E.map(r,(function(t){return null==t?"":t+""}))),(e=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=E.valHooks[r.type]||E.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(_e,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return null!=e?e:ye(E.text(t))}},select:{get:function(t){var e,n,i,r=t.options,s=t.selectedIndex,o="select-one"===t.type,a=o?null:[],c=o?s+1:r.length;for(i=s<0?c:o?s:0;i<c;i++)if(((n=r[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!D(n.parentNode,"optgroup"))){if(e=E(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,s=E.makeArray(e),o=r.length;o--;)((i=r[o]).selected=E.inArray(E.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=E.inArray(E(t).val(),e)>-1}},m.checkOn||(E.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),m.focusin="onfocusin"in i;var we=/^(?:focusinfocus|focusoutblur)$/,xe=function(t){t.stopPropagation()};E.extend(E.event,{trigger:function(t,e,n,r){var s,o,a,c,l,u,h,d,p=[n||b],g=f.call(t,"type")?t.type:t,m=f.call(t,"namespace")?t.namespace.split("."):[];if(o=d=a=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!we.test(g+E.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),l=g.indexOf(":")<0&&"on"+g,(t=t[E.expando]?t:new E.Event(g,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:E.makeArray(e,[t]),h=E.event.special[g]||{},r||!h.trigger||!1!==h.trigger.apply(n,e))){if(!r&&!h.noBubble&&!v(n)){for(c=h.delegateType||g,we.test(c+g)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||b)&&p.push(a.defaultView||a.parentWindow||i)}for(s=0;(o=p[s++])&&!t.isPropagationStopped();)d=o,t.type=s>1?c:h.bindType||g,(u=(J.get(o,"events")||Object.create(null))[t.type]&&J.get(o,"handle"))&&u.apply(o,e),(u=l&&o[l])&&u.apply&&X(o)&&(t.result=u.apply(o,e),!1===t.result&&t.preventDefault());return t.type=g,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),e)||!X(n)||l&&y(n[g])&&!v(n)&&((a=n[l])&&(n[l]=null),E.event.triggered=g,t.isPropagationStopped()&&d.addEventListener(g,xe),n[g](),t.isPropagationStopped()&&d.removeEventListener(g,xe),E.event.triggered=void 0,a&&(n[l]=a)),t.result}},simulate:function(t,e,n){var i=E.extend(new E.Event,n,{type:t,isSimulated:!0});E.event.trigger(i,null,e)}}),E.fn.extend({trigger:function(t,e){return this.each((function(){E.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return E.event.trigger(t,e,n,!0)}}),m.focusin||E.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){E.event.simulate(e,t.target,E.event.fix(t))};E.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,r=J.access(i,e);r||i.addEventListener(t,n,!0),J.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=J.access(i,e)-1;r?J.access(i,e,r):(i.removeEventListener(t,n,!0),J.remove(i,e))}}}));var Te=i.location,Ee={guid:Date.now()},Ie=/\?/;E.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||E.error("Invalid XML: "+(n?E.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Se=/\[\]$/,ke=/\r?\n/g,Ae=/^(?:submit|button|image|reset|file)$/i,Ce=/^(?:input|select|textarea|keygen)/i;function De(t,e,n,i){var r;if(Array.isArray(e))E.each(e,(function(e,r){n||Se.test(t)?i(t,r):De(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)}));else if(n||"object"!==x(e))i(t,e);else for(r in e)De(t+"["+r+"]",e[r],n,i)}E.param=function(t,e){var n,i=[],r=function(t,e){var n=y(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!E.isPlainObject(t))E.each(t,(function(){r(this.name,this.value)}));else for(n in t)De(n,t[n],e,r);return i.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&Ce.test(this.nodeName)&&!Ae.test(t)&&(this.checked||!mt.test(t))})).map((function(t,e){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,(function(t){return{name:e.name,value:t.replace(ke,"\r\n")}})):{name:e.name,value:n.replace(ke,"\r\n")}})).get()}});var Ne=/%20/g,Oe=/#.*$/,Me=/([?&])_=[^&]*/,Le=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pe=/^(?:GET|HEAD)$/,Re=/^\/\//,Fe={},je={},Ve="*/".concat("*"),Ue=b.createElement("a");function Be(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match(j)||[];if(y(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function qe(t,e,n,i){var r={},s=t===je;function o(a){var c;return r[a]=!0,E.each(t[a]||[],(function(t,a){var l=a(e,n,i);return"string"!=typeof l||s||r[l]?s?!(c=l):void 0:(e.dataTypes.unshift(l),o(l),!1)})),c}return o(e.dataTypes[0])||!r["*"]&&o("*")}function ze(t,e){var n,i,r=E.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&E.extend(!0,t,i),t}Ue.href=Te.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Te.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Te.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ve,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ze(ze(t,E.ajaxSettings),e):ze(E.ajaxSettings,t)},ajaxPrefilter:Be(Fe),ajaxTransport:Be(je),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,s,o,a,c,l,u,h,d,f=E.ajaxSetup({},e),p=f.context||f,g=f.context&&(p.nodeType||p.jquery)?E(p):E.event,m=E.Deferred(),y=E.Callbacks("once memory"),v=f.statusCode||{},_={},w={},x="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(l){if(!o)for(o={};e=Le.exec(s);)o[e[1].toLowerCase()+" "]=(o[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=o[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?s:null},setRequestHeader:function(t,e){return null==l&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==l&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)T.always(t[T.status]);else for(e in t)v[e]=[v[e],t[e]];return this},abort:function(t){var e=t||x;return n&&n.abort(e),I(0,e),this}};if(m.promise(T),f.url=((t||f.url||Te.href)+"").replace(Re,Te.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(j)||[""],null==f.crossDomain){c=b.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Ue.protocol+"//"+Ue.host!=c.protocol+"//"+c.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=E.param(f.data,f.traditional)),qe(Fe,f,e,T),l)return T;for(h in(u=E.event&&f.global)&&0==E.active++&&E.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Pe.test(f.type),r=f.url.replace(Oe,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ne,"+")):(d=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(Ie.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(Me,"$1"),d=(Ie.test(r)?"&":"?")+"_="+Ee.guid+++d),f.url=r+d),f.ifModified&&(E.lastModified[r]&&T.setRequestHeader("If-Modified-Since",E.lastModified[r]),E.etag[r]&&T.setRequestHeader("If-None-Match",E.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ve+"; q=0.01":""):f.accepts["*"]),f.headers)T.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,T,f)||l))return T.abort();if(x="abort",y.add(f.complete),T.done(f.success),T.fail(f.error),n=qe(je,f,e,T)){if(T.readyState=1,u&&g.trigger("ajaxSend",[T,f]),l)return T;f.async&&f.timeout>0&&(a=i.setTimeout((function(){T.abort("timeout")}),f.timeout));try{l=!1,n.send(_,I)}catch(t){if(l)throw t;I(-1,t)}}else I(-1,"No Transport");function I(t,e,o,c){var h,d,b,_,w,x=e;l||(l=!0,a&&i.clearTimeout(a),n=void 0,s=c||"",T.readyState=t>0?4:0,h=t>=200&&t<300||304===t,o&&(_=function(t,e,n){for(var i,r,s,o,a=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){c.unshift(r);break}if(c[0]in n)s=c[0];else{for(r in n){if(!c[0]||t.converters[r+" "+c[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==c[0]&&c.unshift(s),n[s]}(f,T,o)),!h&&E.inArray("script",f.dataTypes)>-1&&E.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),_=function(t,e,n,i){var r,s,o,a,c,l={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)l[o.toLowerCase()]=t.converters[o];for(s=u.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!c&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=s,s=u.shift())if("*"===s)s=c;else if("*"!==c&&c!==s){if(!(o=l[c+" "+s]||l["* "+s]))for(r in l)if((a=r.split(" "))[1]===s&&(o=l[c+" "+a[0]]||l["* "+a[0]])){!0===o?o=l[r]:!0!==l[r]&&(s=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+c+" to "+s}}}return{state:"success",data:e}}(f,_,T,h),h?(f.ifModified&&((w=T.getResponseHeader("Last-Modified"))&&(E.lastModified[r]=w),(w=T.getResponseHeader("etag"))&&(E.etag[r]=w)),204===t||"HEAD"===f.type?x="nocontent":304===t?x="notmodified":(x=_.state,d=_.data,h=!(b=_.error))):(b=x,!t&&x||(x="error",t<0&&(t=0))),T.status=t,T.statusText=(e||x)+"",h?m.resolveWith(p,[d,x,T]):m.rejectWith(p,[T,x,b]),T.statusCode(v),v=void 0,u&&g.trigger(h?"ajaxSuccess":"ajaxError",[T,f,h?d:b]),y.fireWith(p,[T,x]),u&&(g.trigger("ajaxComplete",[T,f]),--E.active||E.event.trigger("ajaxStop")))}return T},getJSON:function(t,e,n){return E.get(t,e,n,"json")},getScript:function(t,e){return E.get(t,void 0,e,"script")}}),E.each(["get","post"],(function(t,e){E[e]=function(t,n,i,r){return y(n)&&(r=r||i,i=n,n=void 0),E.ajax(E.extend({url:t,type:e,dataType:r,data:n,success:i},E.isPlainObject(t)&&t))}})),E.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),E._evalUrl=function(t,e,n){return E.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){E.globalEval(t,e,n)}})},E.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return y(t)?this.each((function(e){E(this).wrapInner(t.call(this,e))})):this.each((function(){var e=E(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=y(t);return this.each((function(n){E(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(t){return!E.expr.pseudos.visible(t)},E.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var He={0:200,1223:204},$e=E.ajaxSettings.xhr();m.cors=!!$e&&"withCredentials"in $e,m.ajax=$e=!!$e,E.ajaxTransport((function(t){var e,n;if(m.cors||$e&&!t.crossDomain)return{send:function(r,s){var o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];for(o in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(o,r[o]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(He[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){e&&n()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),E.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return E.globalEval(t),t}}}),E.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),E.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,r){e=E("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),b.head.appendChild(e[0])},abort:function(){n&&n()}}}));var We,Ke=[],Ge=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ke.pop()||E.expando+"_"+Ee.guid++;return this[t]=!0,t}}),E.ajaxPrefilter("json jsonp",(function(t,e,n){var r,s,o,a=!1!==t.jsonp&&(Ge.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ge.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ge,"$1"+r):!1!==t.jsonp&&(t.url+=(Ie.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||E.error(r+" was not called"),o[0]},t.dataTypes[0]="json",s=i[r],i[r]=function(){o=arguments},n.always((function(){void 0===s?E(i).removeProp(r):i[r]=s,t[r]&&(t.jsonpCallback=e.jsonpCallback,Ke.push(r)),o&&y(s)&&s(o[0]),o=s=void 0})),"script"})),m.createHTMLDocument=((We=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===We.childNodes.length),E.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(m.createHTMLDocument?((i=(e=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,e.head.appendChild(i)):e=b),s=!n&&[],(r=N.exec(t))?[e.createElement(r[1])]:(r=Tt([t],e,s),s&&s.length&&E(s).remove(),E.merge([],r.childNodes)));var i,r,s},E.fn.load=function(t,e,n){var i,r,s,o=this,a=t.indexOf(" ");return a>-1&&(i=ye(t.slice(a)),t=t.slice(0,a)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&E.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done((function(t){s=arguments,o.html(i?E("<div>").append(E.parseHTML(t)).find(i):t)})).always(n&&function(t,e){o.each((function(){n.apply(this,s||[t.responseText,e,t])}))}),this},E.expr.pseudos.animated=function(t){return E.grep(E.timers,(function(e){return t===e.elem})).length},E.offset={setOffset:function(t,e,n){var i,r,s,o,a,c,l=E.css(t,"position"),u=E(t),h={};"static"===l&&(t.style.position="relative"),a=u.offset(),s=E.css(t,"top"),c=E.css(t,"left"),("absolute"===l||"fixed"===l)&&(s+c).indexOf("auto")>-1?(o=(i=u.position()).top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(c)||0),y(e)&&(e=e.call(t,n,E.extend({},a))),null!=e.top&&(h.top=e.top-a.top+o),null!=e.left&&(h.left=e.left-a.left+r),"using"in e?e.using.call(t,h):u.css(h)}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){E.offset.setOffset(this,t,e)}));var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===E.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===E.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=E(t).offset()).top+=E.css(t,"borderTopWidth",!0),r.left+=E.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-E.css(i,"marginTop",!0),left:e.left-r.left-E.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===E.css(t,"position");)t=t.offsetParent;return t||ot}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;E.fn[t]=function(i){return $(this,(function(t,i,r){var s;if(v(t)?s=t:9===t.nodeType&&(s=t.defaultView),void 0===r)return s?s[e]:t[i];s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):t[i]=r}),t,i,arguments.length)}})),E.each(["top","left"],(function(t,e){E.cssHooks[e]=$t(m.pixelPosition,(function(t,n){if(n)return n=Ht(t,e),Ut.test(n)?E(t).position()[e]+"px":n}))})),E.each({Height:"height",Width:"width"},(function(t,e){E.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,i){E.fn[i]=function(r,s){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===s?"margin":"border");return $(this,(function(e,n,r){var s;return v(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===r?E.css(e,n,a):E.style(e,n,r,a)}),e,o?r:void 0,o)}}))})),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){E.fn[e]=function(t){return this.on(e,t)}})),E.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){E.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var Ye=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;E.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return i=a.call(arguments,2),r=function(){return t.apply(e||this,i.concat(a.call(arguments)))},r.guid=t.guid=t.guid||E.guid++,r},E.holdReady=function(t){t?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=D,E.isFunction=y,E.isWindow=v,E.camelCase=Y,E.type=x,E.now=Date.now,E.isNumeric=function(t){var e=E.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},E.trim=function(t){return null==t?"":(t+"").replace(Ye,"")},void 0===(n=function(){return E}.apply(e,[]))||(t.exports=n);var Xe=i.jQuery,Qe=i.$;return E.noConflict=function(t){return i.$===E&&(i.$=Qe),t&&i.jQuery===E&&(i.jQuery=Xe),E},void 0===r&&(i.jQuery=i.$=E),E}))},336:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.log=e.formatDate=e.month=e.scrollBtm=void 0;const r=i(n(755)),s=n(762);Object.defineProperty(e,"formatDate",{enumerable:!0,get:function(){return s.formatDate}}),Object.defineProperty(e,"month",{enumerable:!0,get:function(){return s.month}}),Object.defineProperty(e,"scrollBtm",{enumerable:!0,get:function(){return s.scrollBtm}}),e.log=function(t){const e=new Date;(0,r.default)("div.log").prepend(`<p>[${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}.${String(e.getMilliseconds()).padStart(3,"0")}]<br>${t}</p>`)}},894:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(956),s=i(n(755)),o=n(99),a=n(336),c={};window.addEventListener("DOMContentLoaded",(()=>{(0,a.log)("DOMContent Loaded"),(0,o.onClassInfoLoaded)((async()=>{var t;(0,a.log)("ClassInfoLoaded"),(await(0,r.getDocs)((0,r.collection)(o.db,"chat"))).forEach((t=>{const e=t.data();(0,s.default)("main div.list").append(`<div class="clsCont" data-cls=${t.id}><p class="cls">${e.name}</p><p class="msg">0</p></div>`);const n=new WebSocket(`wss://kss-pc-club-websocket.herokuapp.com/kss-admin-chat/${t.id}`);setInterval((()=>{n.send("[Keeping Connection... Ignore this message...]")}),3e4),n.addEventListener("open",(()=>{(0,a.log)(`WebSocket for ${e.name} Open`)})),n.addEventListener("message",(n=>{(0,a.log)(`Message from ${e.name} Received`);const i=(0,s.default)(`main div.list .clsCont[data-cls="${t.id}"]`),r=i.find("p.msg");if(r.text(Number(r.text())+1),i.hasClass("showing")){r.text("");const t=new Date,e=(0,a.formatDate)(t);(0,s.default)("main div.chat div.history").append(`<div class="msgCont"><div class="rec"><p class="msg">${String(n.data)}</p><p class="time">${e}</p></div></div>`),(0,a.scrollBtm)()}})),n.addEventListener("close",(()=>{(0,a.log)(`WebSocket for ${e.name} Close`)})),n.addEventListener("error",(()=>{(0,a.log)(`WebSocket for ${e.name} Error`)})),c[t.id]=n})),(0,s.default)(".clsCont").on("click",(async function(){const t=String((0,s.default)(this).attr("data-cls"));(0,s.default)("main div.list .clsCont.showing").find("p.msg").text("0"),(0,s.default)("main div.list .clsCont.showing").removeClass("showing"),(0,s.default)(this).addClass("showing"),(0,s.default)("main .chat .history .msgCont").remove(),(0,s.default)(this).find("p.msg").text("");const e=(await(0,r.getDoc)((0,r.doc)(o.db,"chat",t))).data();for(let t=0;t<e.history.length;t++){const n=e.history[t],i=n.time.toDate(),r=(0,a.formatDate)(i);(0,s.default)("main div.chat div.history").append(`<div class="msgCont"><div class="${n.fromAdmin?"send":"rec"}"><p class="msg">${String(n.message)}</p><p class="time">${r}</p></div></div>`)}(0,a.scrollBtm)()}));const e=null===(t=document.querySelector(".type"))||void 0===t?void 0:t.querySelector("input");let n=!1;null==e||e.addEventListener("compositionstart",(()=>n=!0)),null==e||e.addEventListener("compositionend",(()=>n=!1)),null==e||e.addEventListener("keyup",(t=>{"Enter"!==t.key||n||(0,s.default)(".type button").trigger("click")})),(0,s.default)(".type button").on("click",(async function(){const t=(0,s.default)(".clsCont.showing").attr("data-cls"),e=String((0,s.default)(".type input").val());if(!e||!t)return;const n=new Date,i=(0,a.formatDate)(n);await(0,r.updateDoc)((0,r.doc)(o.db,"chat",t),{lastUpdate:r.Timestamp.fromDate(n),history:(0,r.arrayUnion)({fromAdmin:!0,message:e,time:r.Timestamp.fromDate(n)})}),(0,s.default)("main div.chat div.history").append(`<div class="msgCont"><div class="send"><p class="msg">${e}</p><p class="time">${i}</p></div></div>`),c[t].send(e),(0,a.scrollBtm)(),(0,s.default)(".type input").val("")}))}))})),window.addEventListener("load",(()=>{(0,a.log)("Content Loaded")}))},5:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(644),s=i(n(755)),o=n(251),a=n(99);window.addEventListener("DOMContentLoaded",(()=>{(0,a.onClassInfoLoaded)((()=>{(0,s.default)("button").on("click",(()=>{const t=(0,s.default)("input[type=text]"),e=(0,s.default)("input[type=number]"),n=(0,s.default)("button");if(n.attr("disabled","disabled"),t.attr("readonly","readonly"),e.attr("readonly","readonly"),!o.classInfo.admin)return alert("権限がありません"),void(location.pathname="/");if(13!==String(t.val()).length)alert("バーコードの形式が正しくありません"),t.removeAttr("readonly"),e.removeAttr("readonly"),n.removeAttr("disabled");else{const i=Number(e.val());(0,r.httpsCallable)(a.cloudFunctions,"chargePay")({barcode:String(t.val()),chargeAmount:i,time:new Date}).then((i=>{const r=i;if(r.data.error){switch(r.data.message){case"invalid request":alert("リクエストが無効です");break;case"user not exist":case"multiple users":alert("バーコードを再読み込みさせてください")}return t.removeAttr("readonly").val(""),e.removeAttr("readonly"),void n.removeAttr("disabled")}alert("チャージしました"),t.removeAttr("readonly").val(""),e.removeAttr("readonly").val(""),n.removeAttr("disabled")})).catch(console.error)}}))}))}))},832:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(n(755)),s=n(251),o=n(82),a=n(565);window.addEventListener("DOMContentLoaded",(()=>{(0,r.default)(".container#cash div.rec input").on("input",(function(){const t=a.data.sum-Number((0,r.default)(this).val());(0,r.default)(this).parent("div.rec").next().find("input").val(Math.abs(t)),t<=0?(0,r.default)(".container#cash .childContainer button").removeAttr("disabled"):(0,r.default)(".container#cash .childContainer button").attr("disabled","disabled"),(0,r.default)(this).parent("div.rec").next().find("span").text(t<=0?"円のおつり":"円不足")})),(0,r.default)(".container#cash .childContainer button").on("click",(async function(){(0,r.default)(this).attr("disabled","disabled"),await(0,o.RecordPayment)({isPay:!1,payAt:s.classInfo.name,payId:null,sum:a.data.sum,time:new Date,list:a.data.list}),(0,o.anim)(".container#cash",".container#ok")}))}))},82:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.RecordPayment=e.anim=e.sleep=void 0;const r=n(956),s=i(n(755)),o=n(251),a=n(99),c=t=>new Promise((e=>setTimeout(e,t)));e.sleep=c,e.anim=async(t,e,n=!0)=>{const i=n?-window.outerWidth:window.outerWidth;(0,s.default)(t).animate({left:i},500),(0,s.default)(t).find("footer").fadeOut(500),await c(500),(0,s.default)(t).removeClass("showing"),await c(200),(0,s.default)(e).addClass("showing").css({left:-i}).animate({left:0},500),(0,s.default)(e).find("footer").fadeIn(500)},e.RecordPayment=async t=>{await(0,r.addDoc)((0,r.collection)(a.db,"payment_log"),t);const e=(await(0,r.getDoc)((0,r.doc)(a.db,"class_proceeds",o.classInfo.uid))).data().menus;e.forEach((e=>{const n=t.list.filter((t=>t.name===e.name))[0];n.amount>=1&&(e.customers++,e.amount+=n.amount)})),await(0,r.updateDoc)((0,r.doc)(a.db,"class_proceeds",o.classInfo.uid),{menus:e,total:(0,r.increment)(t.sum),customers:(0,r.increment)(1)})}},665:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n(832),n(851),n(838);const r=i(n(755)),s=n(82),o=n(565);window.addEventListener("load",(()=>{(0,r.default)(".container button#next").on("click",(function(){0!==o.data.sum?(0,s.anim)((0,r.default)(this).parents("div.container"),`.container#${(0,r.default)(this).attr("data-next")}`):alert("メニューを選択してください")})),(0,r.default)(".container button#prev").on("click",(function(){(0,s.anim)((0,r.default)(this).parents("div.container"),`.container#${(0,r.default)(this).attr("data-next")}`,!1)}))})),window.onpopstate=t=>(t.preventDefault(),!1)},565:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.data=void 0;const r=i(n(755)),s=n(251),o=n(99),a={sum:0,list:[]};e.data=a,window.addEventListener("DOMContentLoaded",(()=>{(0,o.onClassInfoLoaded)((()=>{var t;for(let e=0;e<s.classInfo.menus.length;e++){const n=s.classInfo.menus[e],i=document.createElement("div");i.classList.add("item"),i.setAttribute("data-itemNum",String(e)),i.innerHTML=`<img src="https://monitor.festival.kss-pc.club/icons/${n.icon}.png"><p class="name">${n.name}</p><p class="price">${n.price}</p><input type="number" name="amount" value="0" min="0"><p class="total">0</p>`,null===(t=document.querySelector(".container#menu .childContainer"))||void 0===t||t.appendChild(i),a.list.push({name:n.name,price:n.price,amount:0})}(0,r.default)(".container#menu .childContainer .item").each((function(){(0,r.default)(this).find("input").on("change",(function(){(0,r.default)(this).next("p.total").text(Number((0,r.default)(this).prev("p.price").text())*Number((0,r.default)(this).val()));const t=Number((0,r.default)(this).parent("div.item").attr("data-itemNum"));a.list[t].amount=Number((0,r.default)(this).val());let e=0;(0,r.default)(".container#menu .item .total").each((function(){e+=Number((0,r.default)(this).text())})),(0,r.default)(".container#menu footer p.sum").text(e),a.sum=e}))}))}))}))},851:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(n(755)),s=n(82),o=n(565);window.addEventListener("DOMContentLoaded",(()=>{const t=(0,r.default)(".container#method");t.find("button#cash").on("click",(()=>{(0,s.anim)(t,".container#cash"),(0,r.default)(".container#cash p#sum").text(o.data.sum)})),t.find("button#pay").on("click",(()=>{(0,s.anim)(t,".container#pay"),(0,r.default)(".container#pay p#sum").text(o.data.sum),alert("読み込む前に、KSSPayユーザーに更新ボタンを押させてください。\n画面上部[：]->[更新]")}))}))},838:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(644),s=i(n(755)),o=n(251),a=n(99),c=n(82),l=n(565);window.addEventListener("DOMContentLoaded",(()=>{(0,s.default)(".container#pay .childContainer button").on("click",(function(){(0,s.default)(".container#pay .childContainer button").attr("disabled","disabled");const t=(0,s.default)(".container#pay input");if(13!==String(t.val()).length)return alert("バーコードの形式が正しくないようです。再読み込みしてください。"),void(0,s.default)(".container#pay .childContainer button").removeAttr("disabled");(0,r.httpsCallable)(a.cloudFunctions,"readPay")({barcode:t.val(),cost:l.data.sum}).then((async t=>{let e=t;if(e.data.error){switch((0,s.default)(".container#pay .childContainer button").removeAttr("disabled"),e.data.message){case"not logged in":alert("ログインしていないようです。再度ログインしてください。");break;case"user not exist":case"multiple users":alert("「更新」ボタンを押すようにお願いしてください。");break;case"cannot buy":alert("現金が足りず、支払うことができません。現金で支払ってください。"),(0,c.anim)(".container#pay",".container#cash");break;case"invalid request":alert("メニューの設定に間違いがあるようです。メニュー選択に戻って設定しなおしてください。"),(0,c.anim)(".container#pay",".container#menu",!1)}(0,s.default)(".container#pay .childContainer button").removeAttr("disabled")}else{const t=e.data.uid,n=new Date;await(0,c.RecordPayment)({isPay:!0,payAt:o.classInfo.name,payId:t,sum:l.data.sum,time:n,list:l.data.list}),(0,r.httpsCallable)(a.cloudFunctions,"buyPay")({name:o.classInfo.name,items:l.data.list,uid:t,cost:l.data.sum,time:n}).then((t=>{t.data.error?((0,s.default)(".container#pay .childContainer button").removeAttr("disabled"),alert("何か問題が発生したようです。もう一度お試しください。")):(0,c.anim)(".container#pay",".container#ok")})).catch(console.error)}})).catch(console.error)}))}))},762:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatDate=e.month=e.scrollBtm=void 0,e.scrollBtm=function(){const t=document.querySelector("main .chat .history");t&&t.scrollTo(0,t.scrollHeight-t.clientHeight)};const n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.month=n,e.formatDate=t=>`${n[t.getMonth()]} ${t.getDate()} | ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`},483:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(956),s=i(n(755)),o=n(251),a=n(99),c=n(762);window.addEventListener("DOMContentLoaded",(()=>{(0,a.onClassInfoLoaded)((async()=>{var t;const e=(0,r.doc)(a.db,"chat",o.classInfo.uid),n=(await(0,r.getDoc)(e)).data().history;n.sort(((t,e)=>t.time.seconds-e.time.seconds)),(0,s.default)("main div.chat div.history").text("");for(let t=0;t<n.length;t++){const e=n[t],i=e.time.toDate(),r=(0,c.formatDate)(i);(0,s.default)("main div.chat div.history").append(`<div class="msgCont"><div class="${e.fromAdmin?"rec":"send"}"><p class="msg">${e.message}</p><p class="time">${r}</p></div></div>`)}(0,c.scrollBtm)();const i=new WebSocket(`wss://kss-pc-club-websocket.herokuapp.com/kss-admin-chat/${o.classInfo.uid}`);i.addEventListener("message",(t=>{const e=new Date,n=(0,c.formatDate)(e);(0,s.default)("main div.chat div.history").append(`<div class="msgCont"><div class="rec"><p class="msg">${String(t.data)}</p><p class="time">${n}</p></div></div>`),(0,c.scrollBtm)()})),setInterval((()=>{i.send("[Keeping Connection... Ignore this message...]")}),3e4),i.addEventListener("close",(()=>{alert("接続が切断されました。「OK」を押すと再読み込みします。"),location.reload()}));const l=null===(t=document.querySelector(".type"))||void 0===t?void 0:t.querySelector("input");let u=!1;null==l||l.addEventListener("compositionstart",(()=>u=!0)),null==l||l.addEventListener("compositionend",(()=>u=!1)),null==l||l.addEventListener("keyup",(t=>{"Enter"!==t.key||u||(0,s.default)(".type button").trigger("click")})),(0,s.default)(".type button").on("click",(async function(){if(!(0,s.default)(".type input").val())return;const t=String((0,s.default)(".type input").val()),n=new Date,o=(0,c.formatDate)(n),a={fromAdmin:!1,message:t,time:r.Timestamp.fromDate(n)};await(0,r.updateDoc)(e,{lastUpdate:r.Timestamp.fromDate(n),history:(0,r.arrayUnion)(a)}),(0,s.default)("main div.chat div.history").append(`<div class="msgCont"><div class="send"><p class="msg">${t}</p><p class="time">${o}</p></div></div>`),i.send(t),(0,c.scrollBtm)(),(0,s.default)(".type input").val("")}))}))}))},251:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.classInfo=void 0,e.classInfo={admin:!1,name:"",isFood:!1,menus:[],shop_name:"",uid:"",time:""}},570:()=>{"use strict";window.addEventListener("DOMContentLoaded",(()=>{fetch("/common/head.html").then((async t=>{document.head.innerHTML+=await t.text()})).catch(console.error),fetch("header.html").then((async t=>{const e=document.querySelector("header");t.ok&&e?e.innerHTML=await t.text():fetch("/header.html").then((async t=>{e&&(e.innerHTML=await t.text())})).catch(console.error)})).catch(console.error)}))},99:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cloudFunctions=e.db=e.onClassInfoChanged=e.onClassInfoLoaded=e.auth=e.app=void 0;const i=n(503),r=n(278),s=n(956),o=n(644),a=n(251),c=n(645),l=(0,i.initializeApp)(c.firebaseConfig);e.app=l;const u=(0,r.getAuth)(l);e.auth=u;const h=(0,s.getFirestore)(l);e.db=h;const d=(0,o.getFunctions)(l);e.cloudFunctions=d,(0,o.connectFunctionsEmulator)(d,"localhost",5001);const f=[],p=[],g=t=>{f.push(t)};e.onClassInfoLoaded=g,e.onClassInfoChanged=t=>{p.push(t)},(0,r.onAuthStateChanged)(u,(t=>{if(t){a.classInfo.uid=t.uid;let e=[],n=[],i=!0,r=!1;const o=()=>e.map((t=>{const e=n.filter((e=>e.name===t.name))[0];return{icon:t.icon,name:t.name,status:t.status,price:e.price,customers:e.customers,amount:e.amount}})),c=()=>{i&&(r?(a.classInfo.menus=o(),f.forEach((t=>t())),i=!1):r=!0),i||(a.classInfo.menus=o(),p.forEach((t=>t())))};(0,s.onSnapshot)((0,s.doc)(h,"class_info",t.uid),(t=>{const n=t.data();a.classInfo.name=n.class,a.classInfo.isFood=n.isFood,a.classInfo.shop_name=n.name,a.classInfo.time=n.time,e=n.menus,c()})),(0,s.onSnapshot)((0,s.doc)(h,"class_proceeds",t.uid),(t=>{const e=t.data();a.classInfo.admin=e.admin,n=e.menus,c()})),g((()=>{!location.pathname.startsWith("/admin/")||a.classInfo.admin?"/"===location.pathname&&a.classInfo.admin?location.pathname="/admin/":"/login"!==location.pathname||(location.pathname="/"):location.pathname="/"}))}else"/login"!==location.pathname&&(location.pathname="/login")})),u.languageCode="ja"},645:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.firebaseConfig=void 0,e.firebaseConfig={apiKey:"AIzaSyBd3YC8b6r05fpo1u9WIXbRnQsLbI5wGIo",authDomain:"kss-festival-admin.firebaseapp.com",projectId:"kss-festival-admin",storageBucket:"kss-festival-admin.appspot.com",messagingSenderId:"739103425598",appId:"1:739103425598:web:f16991d454cfe66edbfd6f"}},935:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sleep=void 0,e.sleep=t=>new Promise((e=>setTimeout(e,t)))},778:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(169),s=n(278),o=i(n(755)),a=n(99);window.addEventListener("DOMContentLoaded",(()=>{if("/login"===location.pathname){const t=[].slice.call(document.querySelectorAll(".toast")).map((t=>new r.Toast(t,{animation:!0,autohide:!0,delay:3e3})))[0];(0,o.default)("form").on("submit",(function(e){e.preventDefault(),(0,o.default)("form button").attr("disabled","disabled");const n=(0,o.default)("#inputEmail").val(),i=(0,o.default)("#inputPassword").val();(0,s.signInWithEmailAndPassword)(a.auth,n,i).then((t=>{})).catch((e=>{console.error(e),(0,o.default)(".toast").removeClass("visually-hidden"),t.show(),(0,o.default)("form button").removeAttr("disabled")}))}))}}))},519:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return r(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n(169);const a=n(278),c=o(n(755)),l=n(251);n(570);const u=n(99),h=n(935);n(778),n(331),"/cashier/"===location.pathname?Promise.resolve().then((()=>s(n(665)))):"/proceeds/"===location.pathname?Promise.resolve().then((()=>s(n(753)))):"/chat/"===location.pathname?Promise.resolve().then((()=>s(n(483)))):"/monitor/"===location.pathname?Promise.resolve().then((()=>s(n(461)))):"/admin/chat/"===location.pathname?Promise.resolve().then((()=>s(n(894)))):"/admin/pay_charge/"===location.pathname&&Promise.resolve().then((()=>s(n(5)))),window.addEventListener("DOMContentLoaded",(()=>{var t,e;(0,u.onClassInfoLoaded)((()=>{(0,c.default)("header span#cls").text(l.classInfo.name)})),"/"===location.pathname&&(null===(t=document.querySelector("a#logout"))||void 0===t||t.addEventListener("click",(()=>{confirm("ログアウトしますか？")&&(0,a.signOut)(u.auth).catch(console.error)}))),"/admin/"===location.pathname&&(null===(e=document.querySelector("a#logout"))||void 0===e||e.addEventListener("click",(()=>{confirm("ログアウトしますか？")&&(0,a.signOut)(u.auth).catch(console.error)})))})),window.addEventListener("load",(async()=>{await(0,h.sleep)(3e3),(0,c.default)("header,main,footer").fadeIn(700),(0,c.default)("div.loader_container").fadeOut(700),await(0,h.sleep)(700),(0,c.default)("div.loader_container").remove()}))},636:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.availableIconsList=void 0,e.availableIconsList={curry:"カレー",ebi:"エビフライ",potato:"フライドポテト",tonkotsu:"豚骨ラーメン",unagi:"うな重"}},107:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.previewItemElem=e.itemElem=void 0;const i=n(636);let r="";for(const t in i.availableIconsList)i.availableIconsList.hasOwnProperty(t)&&(r+=`<li><a href="#" class="dropdown-item" data-icon="${t}"><img src="https://monitor.festival.kss-pc.club/icons/${t}.png"> ${i.availableIconsList[t]}</a></li>`);const s=["green","yellow","red"],o=["op","sh","so"],a=["no","pa","en"];e.itemElem=(t,e)=>`\n<div class="input-group mt-3" data-idx="${e}">\n  <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="iconSelect">アイコン <img src="https://monitor.festival.kss-pc.club/icons/${t.icon}.png"></button>\n  <ul class="dropdown-menu dropdown-icon">${r}</ul>\n  <span class="input-group-text">商品名: </span>\n  <input type="text" class="form-control" value="${t.name}" placeholder="商品名">\n</div>\n<div class="input-group mb-3" data-idx="${e}">\n  <span class="input-group-text">値段: ￥</span>\n  <input type="number" class="form-control" value="${t.price}" placeholder="値段">\n  <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="statusSelect">ステータス <span class="circle ${s[t.status]}-circle"></span></button>\n  <ul class="dropdown-menu dropdown-status">\n    <li><a href="#" class="dropdown-item" data-statusId="0"><span class="circle green-circle"></span> 販売中・営業中</a></li>\n    <li><a href="#" class="dropdown-item" data-statusId="1"><span class="circle yellow-circle"></span> 品薄・休憩中</a></li>\n    <li><a href="#" class="dropdown-item" data-statusId="2"><span class="circle red-circle"></span> 品切れ・終了</a></li>\n  </ul>\n  <button class="btn btn-outline-danger" type="button" id="removeItem"><i class="bi bi-x-circle"></i> 削除</button>\n</div>\n`,e.previewItemElem=(t,e)=>`\n<div><img src="https://monitor.festival.kss-pc.club/icons/${t.icon}.png" class="icon" data-status="${(e?o:a)[t.status]}"><p></p></div>\n`},461:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(956),s=i(n(755)),o=n(251),a=n(99),c=n(107);window.addEventListener("DOMContentLoaded",(()=>{let t=[];const e={start:new Date,end:new Date};(0,r.onSnapshot)((0,r.doc)(a.db,"festival_duration","time"),(t=>{const n=t.data();e.start=n.start.toDate(),e.end=n.end.toDate()}));const n=()=>{const t=new Date;return e.start>t},i=()=>{(0,s.default)(".previewsection p.cls").text(o.classInfo.name),(0,s.default)(".previewsection p.shop").text(o.classInfo.shop_name),(0,s.default)(".previewsection p.time").text(o.classInfo.time),(0,s.default)(".previewsection .iconContainer .icons").attr("data-num",t.length),(0,s.default)(".previewsection .iconContainer .icons").children().remove();for(let e=0;e<t.length;e++)(0,s.default)(".previewsection .iconContainer .icons").append((0,c.previewItemElem)(t[e],o.classInfo.isFood))},l=()=>{(0,s.default)(".itemsContainer .input-group .dropdown-icon li a").off("click").on("click",(function(){if(!n())return void alert("アイコンの変更は文化祭開始前のみ可能です。");const e=String((0,s.default)(this).attr("data-icon")),r=Number((0,s.default)(this).parents(".input-group").attr("data-idx"));(0,s.default)(this).parents(".input-group").children("button#iconSelect").html(`アイコン <img src="https://monitor.festival.kss-pc.club/icons/${e}.png">`),t[r].icon=e,i()})),(0,s.default)(".itemsContainer .input-group input[type=text]").off("change").on("change",(function(){if(!n())return void alert("商品名の変更は文化祭開始前のみ可能です。");const e=Number((0,s.default)(this).parents(".input-group").attr("data-idx"));t[e].name=String((0,s.default)(this).val())})),(0,s.default)(".itemsContainer .input-group input[type=number]").off("change").on("change",(function(){if(!n())return void alert("値段の変更は文化祭開始前のみ可能です。");const e=Number((0,s.default)(this).parents(".input-group").attr("data-idx"));t[e].price=Number((0,s.default)(this).val())})),(0,s.default)(".itemsContainer .input-group .dropdown-status li a").off("click").on("click",(function(){const e=Number((0,s.default)(this).attr("data-statusId")),n=Number((0,s.default)(this).parents(".input-group").attr("data-idx"));(0,s.default)(this).parents(".input-group").children("button#statusSelect").html(`ステータス <span class="circle ${["green","yellow","red"][e]}-circle"></span>`),t[n].status=e,i()})),(0,s.default)(".itemsContainer .input-group button#removeItem").off("click").on("click",(function(){if(n()){if(confirm("削除しますか？")){const e=Number((0,s.default)(this).parents(".input-group").attr("data-idx"));(0,s.default)(this).parents(".input-group").remove(),t.splice(e,1),0===t.length?t.push({name:"不明なアイテム",icon:"unknown",status:0,amount:0,customers:0,price:0}):(0,s.default)("button#add").removeAttr("disabled"),(0,s.default)(".itemsContainer").children().remove();for(let e=0;e<t.length;e++)(0,s.default)(".itemsContainer").append((0,c.itemElem)(t[e],e));l(),i()}}else alert("削除は文化祭開始前のみ可能です。")}))};(0,a.onClassInfoLoaded)((()=>{const e=(0,r.doc)(a.db,"class_info",o.classInfo.uid),u=(0,r.doc)(a.db,"class_proceeds",o.classInfo.uid);t=o.classInfo.menus,(0,s.default)(".itemsContainer").children().remove();for(let e=0;e<t.length;e++)(0,s.default)(".itemsContainer").append((0,c.itemElem)(t[e],e));(0,s.default)("input[name=shop]").on("input",(function(){o.classInfo.shop_name=String((0,s.default)(this).val()),i()})),(0,s.default)("select[name=time]").on("change",(function(){o.classInfo.time=String((0,s.default)(this).val()),i()})),(0,s.default)("input[name=isFood]").on("change",(function(){o.classInfo.isFood=Boolean((0,s.default)(this).prop("checked")),i()})),(0,s.default)(".leftContainer button#add").on("click",(function(){n()?t.length>=5?alert("メニューは5つまで追加できます"):(t.push({name:"不明なアイテム",icon:"unknown",status:0,amount:0,customers:0,price:0}),(0,s.default)(".itemsContainer").append((0,c.itemElem)(t[t.length-1],t.length-1)),t.length>=5&&(0,s.default)("button#add").attr("disabled","disabled"),l(),i()):alert("追加は文化祭開始前のみ可能です。")})),(0,s.default)("button[type=submit]").on("click",(async function(){(0,s.default)(this).attr("disabled","disabled");try{await(0,r.updateDoc)(e,{isFood:o.classInfo.isFood,menus:t.map((t=>({icon:t.icon,name:t.name,status:t.status}))),name:o.classInfo.shop_name,time:o.classInfo.time}),n()&&await(0,r.updateDoc)(u,{menus:t.map((t=>({amount:0,customers:0,icon:t.icon,name:t.name,price:t.price})))}),o.classInfo.menus=t,alert("更新しました")}catch(t){console.error(t),alert("更新に失敗しました")}(0,s.default)(this).removeAttr("disabled")})),(0,s.default)("button[type=reset]").on("click",(()=>location.reload())),i()})),(0,a.onClassInfoChanged)((()=>{(0,s.default)("h1").text(o.classInfo.name),(0,s.default)("input[name=shop]").val(o.classInfo.shop_name),(0,s.default)("select[name=type]").val(o.classInfo.time),o.classInfo.isFood&&(0,s.default)("input[name=isFood]").val("true").attr("checked","checked"),t.length>=5&&(0,s.default)("button#add").attr("disabled","disabled"),l(),i()})),setInterval((()=>{n()?((0,s.default)(".input-group input[type=text]").removeAttr("readonly"),(0,s.default)("input[type=number]").removeAttr("readonly"),(0,s.default)("button#add").removeAttr("disabled"),(0,s.default)("button#iconSelect").removeAttr("disabled"),(0,s.default)("button#removeItem").removeAttr("disabled"),(0,s.default)("ul.dropdown-icon li").removeClass("d-none")):((0,s.default)(".itemsContainer input[type=text]").attr("readonly","readonly"),(0,s.default)("input[type=number]").attr("readonly","readonly"),(0,s.default)("button#add").attr("disabled","disabled"),(0,s.default)("button#iconSelect").attr("disabled","disabled"),(0,s.default)("button#removeItem").attr("disabled","disabled"),(0,s.default)("ul.dropdown-icon li").addClass("d-none"))}),1e3)}))},463:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ChartFirstDraw=void 0;const r=n(181),s=i(n(755)),o=n(787);r.Chart.register(...r.registerables),e.ChartFirstDraw=()=>{var t;const e=null===(t=document.querySelector("canvas"))||void 0===t?void 0:t.getContext("2d");if(e){const t=new r.Chart(e,{type:"pie",data:{labels:o.menuData.name,datasets:[{data:o.menuData.proceeds,backgroundColor:o.colors,borderColor:"white",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{display:!1}}}});(0,s.default)("input[name=set]").on("change",(function(){switch((0,s.default)(this).val()){case"proceeds":t.data.datasets[0].data=o.menuData.proceeds;break;case"amount":t.data.datasets[0].data=o.menuData.amount;break;case"customers":t.data.datasets[0].data=o.menuData.customers}t.update()}))}}},787:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.colors=e.menuData=void 0;const r=n(956),s=i(n(755)),o=n(251),a=n(99),c=n(463),l={name:[],amount:[],proceeds:[],customers:[]};e.menuData=l;const u=["#7e40f2","#b4f240","#405af2","#f240b4","#f27e40"];e.colors=u,window.addEventListener("DOMContentLoaded",(()=>{let t=!0;(0,a.onClassInfoChanged)((async()=>{const e=(await(0,r.getDoc)((0,r.doc)(a.db,"class_proceeds",o.classInfo.uid))).data(),n={amount:0,proceeds:0,customers:0};l.name.splice(0),l.amount.splice(0),l.proceeds.splice(0),l.customers.splice(0),(0,s.default)("p#name").text(`${o.classInfo.name} ${o.classInfo.shop_name}`),(0,s.default)("p#total").text(Number(e.total).toLocaleString()),(0,s.default)("div.items").children().remove();for(let t=0;t<e.menus.length;t++){const e=o.classInfo.menus[t];(0,s.default)("div.items").append(`\n        <div class="item">\n          <div class="color" style="background-color: ${u[t]};"></div>\n          <img src="https://monitor.festival.kss-pc.club/icons/${e.icon}.png" class="icon">\n          <p class="name">${e.name}</p>\n          <p class="proc" data-proceeds="${e.amount*e.price}" data-amount="${e.amount}" data-customers="${e.customers}"></p>\n          <p class="percentage"></p>\n        </div>\n      `),l.name.push(e.name),l.amount.push(e.amount),l.proceeds.push(e.amount*e.price),l.customers.push(e.customers),n.amount+=e.amount,n.proceeds+=e.amount*e.price,n.customers+=e.customers}for(const t in n)n.hasOwnProperty(t)&&(0,s.default)("p#total").attr(`data-${t}`,n[t]);const i=()=>{const t=(0,s.default)("input[name=set]:checked").val(),e=Number((0,s.default)("p#total").attr(`data-${String(t)}`));(0,s.default)("div.item").each((function(){const n=Number((0,s.default)(this).find("p.proc").attr("data-proceeds")),i=Number((0,s.default)(this).find("p.proc").attr("data-amount")),r=Number((0,s.default)(this).find("p.proc").attr("data-customers"));let o=0,a="";switch(t){case"proceeds":o=n,a="￥"+o.toLocaleString();break;case"amount":o=i,a=o.toLocaleString()+"個";break;case"customers":o=r,a=o.toLocaleString()+"人"}const c=(o/e*100).toFixed(2);(0,s.default)(this).find("p.proc").text(a),(0,s.default)(this).find("p.percentage").text(c)}))};(0,s.default)("input[name=set]").on("change",i),i(),t&&(t=!1,(0,c.ChartFirstDraw)())}))}))},753:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(463),window.onpopstate=t=>(t.preventDefault(),!1),window.oncontextmenu=()=>!1},331:()=>{"use strict";window.addEventListener("DOMContentLoaded",(()=>{let t=location.pathname;t.endsWith("/")&&(t+="index"),t.endsWith(".html")&&(t=t.replace(".html",""));const e=document.createElement("link");e.href=`/css/pages${t}.css`,e.rel="stylesheet",document.head.appendChild(e)}))},655:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>r,pi:()=>s,_T:()=>o,mG:()=>a,Jh:()=>c,XA:()=>l,CR:()=>u,ev:()=>h});var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},s.apply(this,arguments)};function o(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function a(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}function c(t,e){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function l(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o}function h(t,e,n){if(n||2===arguments.length)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}Object.create,Object.create}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(519)})();